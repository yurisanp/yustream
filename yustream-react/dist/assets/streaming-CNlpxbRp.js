var Io={exports:{}},Za;function xp(){return Za||(Za=1,(function(d,e){(function(r,n){d.exports=n()})(self,(function(){return(function(){var r={63166:function(i,l,t){t.d(l,{default:function(){return Af}});var s="0.10.46-beta.0",a=t(69986),u=t.n(a);function f(b){return b?b.replace(/^\s+|\s+$/g,""):""}var h=function(b){if(!b||b.substr(0,4)=="rtmp")return"";var v=(function(x){var S="";return/[(,]format=mpd-/i.test(x)?S="mpd":/[(,]format=m3u8-/i.test(x)&&(S="m3u8"),S})(b);return v||((b=b.split("?")[0].split("#")[0]).lastIndexOf(".")>-1?b.substr(b.lastIndexOf(".")+1,b.length).toLowerCase():"")};function A(b){var v=parseInt(b,10);if(!b)return"00:00";var x=Math.floor(v/3600),S=Math.floor((v-3600*x)/60),k=v-3600*x-60*S;return S<10&&(S="0"+S),k<10&&(k="0"+k),x>0?x+":"+S+":"+k:S+":"+k}function g(b,v){if(!b)return 0;if(u().isNumber(b)&&!u().isNaN(b))return b;var x=(b=b.replace(",",".")).split(":"),S=x.length,k=0;if(b.slice(-1)==="s")k=parseFloat(b);else if(b.slice(-1)==="m")k=60*parseFloat(b);else if(b.slice(-1)==="h")k=3600*parseFloat(b);else if(S>1){var F=S-1;S===4&&(F-=1),k+=parseFloat(x[F]),k+=60*parseFloat(x[F-1]),S>=3&&(k+=3600*parseFloat(x[F-2]))}else k=parseFloat(b);return u().isNaN(k)?0:k}function p(b){var v={},x=b.split(`\r
`);x.length===1&&(x=b.split(`
`));var S=1;if(x[0].indexOf(" --> ")>0&&(S=0),x.length>S+1&&x[S+1]){var k=x[S],F=k.indexOf(" --> ");F>0&&(v.start=g(k.substr(0,F)),v.end=g(k.substr(F+5)),v.text=x.slice(S+1).join(`\r
`))}return v}var m=window.VTTCue,y={"":!0,lr:!0,rl:!0},E={start:!0,middle:!0,end:!0,left:!0,right:!0};function C(b){return typeof b=="string"&&!!E[b.toLowerCase()]&&b.toLowerCase()}function T(b){for(var v=1;v<arguments.length;v++){var x=arguments[v];for(var S in x)b[S]=x[S]}return b}m||((m=function(b,v,x){var S=this,k=/MSIE\s8\.0/.test(navigator.userAgent),F={};k?S=document.createElement("custom"):F.enumerable=!0,S.hasBeenReset=!1;var _="",H=!1,V=b,Y=v,ue=x,z=null,ee="",ne=!0,X="auto",j="start",se=50,re="middle",ae=50,le="middle";if(Object.defineProperty(S,"id",T({},F,{get:function(){return _},set:function(ie){_=""+ie}})),Object.defineProperty(S,"pauseOnExit",T({},F,{get:function(){return H},set:function(ie){H=!!ie}})),Object.defineProperty(S,"startTime",T({},F,{get:function(){return V},set:function(ie){if(typeof ie!="number")throw new TypeError("Start time must be set to a number.");V=ie,this.hasBeenReset=!0}})),Object.defineProperty(S,"endTime",T({},F,{get:function(){return Y},set:function(ie){if(typeof ie!="number")throw new TypeError("End time must be set to a number.");Y=ie,this.hasBeenReset=!0}})),Object.defineProperty(S,"text",T({},F,{get:function(){return ue},set:function(ie){ue=""+ie,this.hasBeenReset=!0}})),Object.defineProperty(S,"region",T({},F,{get:function(){return z},set:function(ie){z=ie,this.hasBeenReset=!0}})),Object.defineProperty(S,"vertical",T({},F,{get:function(){return ee},set:function(ie){var xe=(function(Me){return typeof Me=="string"&&!!y[Me.toLowerCase()]&&Me.toLowerCase()})(ie);if(xe===!1)throw new SyntaxError("An invalid or illegal string was specified.");ee=xe,this.hasBeenReset=!0}})),Object.defineProperty(S,"snapToLines",T({},F,{get:function(){return ne},set:function(ie){ne=!!ie,this.hasBeenReset=!0}})),Object.defineProperty(S,"line",T({},F,{get:function(){return X},set:function(ie){if(typeof ie!="number"&&ie!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");X=ie,this.hasBeenReset=!0}})),Object.defineProperty(S,"lineAlign",T({},F,{get:function(){return j},set:function(ie){var xe=C(ie);if(!xe)throw new SyntaxError("An invalid or illegal string was specified.");j=xe,this.hasBeenReset=!0}})),Object.defineProperty(S,"position",T({},F,{get:function(){return se},set:function(ie){if(ie<0||ie>100)throw new Error("Position must be between 0 and 100.");se=ie,this.hasBeenReset=!0}})),Object.defineProperty(S,"positionAlign",T({},F,{get:function(){return re},set:function(ie){var xe=C(ie);if(!xe)throw new SyntaxError("An invalid or illegal string was specified.");re=xe,this.hasBeenReset=!0}})),Object.defineProperty(S,"size",T({},F,{get:function(){return ae},set:function(ie){if(ie<0||ie>100)throw new Error("Size must be between 0 and 100.");ae=ie,this.hasBeenReset=!0}})),Object.defineProperty(S,"align",T({},F,{get:function(){return le},set:function(ie){var xe=C(ie);if(!xe)throw new SyntaxError("An invalid or illegal string was specified.");le=xe,this.hasBeenReset=!0}})),S.displayState=void 0,k)return S}).prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)});var w=m,I={"":!0,up:!0};function L(b){return typeof b=="number"&&b>=0&&b<=100}var R=function(){var b=100,v=3,x=0,S=100,k=0,F=100,_="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return b},set:function(H){if(!L(H))throw new Error("Width must be between 0 and 100.");b=H}},lines:{enumerable:!0,get:function(){return v},set:function(H){if(typeof H!="number")throw new TypeError("Lines must be set to a number.");v=H}},regionAnchorY:{enumerable:!0,get:function(){return S},set:function(H){if(!L(H))throw new Error("RegionAnchorX must be between 0 and 100.");S=H}},regionAnchorX:{enumerable:!0,get:function(){return x},set:function(H){if(!L(H))throw new Error("RegionAnchorY must be between 0 and 100.");x=H}},viewportAnchorY:{enumerable:!0,get:function(){return F},set:function(H){if(!L(H))throw new Error("ViewportAnchorY must be between 0 and 100.");F=H}},viewportAnchorX:{enumerable:!0,get:function(){return k},set:function(H){if(!L(H))throw new Error("ViewportAnchorX must be between 0 and 100.");k=H}},scroll:{enumerable:!0,get:function(){return _},set:function(H){var V=(function(Y){return typeof Y=="string"&&!!I[Y.toLowerCase()]&&Y.toLowerCase()})(H);if(V===!1)throw new SyntaxError("An invalid or illegal string was specified.");_=V}}})},B=function(){};function P(b,v){return v===void 0&&(v=1),"rgba("+[parseInt(b.substring(0,2),16),parseInt(b.substring(2,4),16),parseInt(b.substring(4,6),16),v].join(",")+")"}var N=1;function U(b,v,x){switch(x){case"webvtt.font.color":case"webvtt.font.opacity":var S=Services.prefs.getCharPref("webvtt.font.color"),k=Services.prefs.getIntPref("webvtt.font.opacity")/100;G.fontSet=P(S,k);break;case"webvtt.font.scale":N=Services.prefs.getIntPref("webvtt.font.scale")/100;break;case"webvtt.bg.color":case"webvtt.bg.opacity":var F=Services.prefs.getCharPref("webvtt.bg.color"),_=Services.prefs.getIntPref("webvtt.bg.opacity")/100;G.backgroundSet=P(F,_);break;case"webvtt.edge.color":case"webvtt.edge.type":var H=Services.prefs.getIntPref("webvtt.edge.type"),V=Services.prefs.getCharPref("webvtt.edge.color");G.edgeSet=["","0px 0px ","4px 4px 4px ","-2px -2px ","2px 2px "][H]+P(V)}}if(typeof Services<"u"){var G={};["webvtt.font.color","webvtt.font.opacity","webvtt.font.scale","webvtt.bg.color","webvtt.bg.opacity","webvtt.edge.color","webvtt.edge.type"].forEach((function(b){U(0,0,b),Services.prefs.addObserver(b,U,!1)}))}var W=Object.create||(function(){function b(){}return function(v){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return b.prototype=v,new b}})();function K(b,v){this.name="ParsingError",this.code=b.code,this.message=v||b.message}function M(b){function v(S,k,F,_){return 3600*(0|S)+60*(0|k)+(0|F)+(0|_)/1e3}var x=b.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return x?x[3]?v(x[1],x[2],x[3].replace(":",""),x[4]):x[1]>59?v(x[1],x[2],0,x[4]):v(0,x[1],x[2],x[4]):null}function Q(){this.values=W(null)}function Z(b,v,x,S){var k=S?b.split(S):[b];for(var F in k)if(typeof k[F]=="string"){var _=k[F].split(x);_.length===2&&v(_[0],_[1])}}function J(b,v,x){var S=b;function k(){var _=M(b);if(_===null)throw new K(K.Errors.BadTimeStamp,"Malformed timestamp: "+S);return b=b.replace(/^[^\sa-zA-Z-]+/,""),_}function F(){b=b.replace(/^\s+/,"")}if(F(),v.startTime=k(),F(),b.substr(0,3)!=="-->")throw new K(K.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+S);b=b.substr(3),F(),v.endTime=k(),F(),(function(_){var H=new Q;Z(_,(function(V,Y){switch(V){case"region":for(var ue=x.length-1;ue>=0;ue--)if(x[ue].id===Y){H.set(V,x[ue].region);break}break;case"vertical":H.alt(V,Y,["rl","lr"]);break;case"line":var z=Y.split(","),ee=z[0];H.integer(V,ee),H.percent(V,ee)&&H.set("snapToLines",!1),H.alt(V,ee,["auto"]),z.length===2&&H.alt("lineAlign",z[1],["start","middle","end"]);break;case"position":z=Y.split(","),H.percent(V,z[0]),z.length===2&&H.alt("positionAlign",z[1],["start","middle","end"]);break;case"size":H.percent(V,Y);break;case"align":H.alt(V,Y,["start","middle","end","left","right"])}}),/:/,/\s/)})(b)}K.prototype=W(Error.prototype),K.prototype.constructor=K,K.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Q.prototype={set:function(b,v){this.get(b)||v===""||(this.values[b]=v)},get:function(b,v,x){return x?this.has(b)?this.values[b]:v[x]:this.has(b)?this.values[b]:v},has:function(b){return b in this.values},alt:function(b,v,x){for(var S=0;S<x.length;++S)if(v===x[S]){this.set(b,v);break}},integer:function(b,v){/^-?\d+$/.test(v)&&this.set(b,parseInt(v,10))},percent:function(b,v){return!!(v.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(v=parseFloat(v))>=0&&v<=100)&&(this.set(b,v),!0)}};var q={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},te={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},fe={v:"title",lang:"lang"},Ee={rt:"ruby"};function Ae(b,v){function x(){if(!v)return null;var X,j=v.match(/^([^<]*)(<[^>]+>?)?/);return X=j[1]?j[1]:j[2],v=v.substr(X.length),X}function S(X){return q[X]}function k(X){for(;ne=X.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)X=X.replace(ne[0],S);return X}function F(X,j){return!Ee[j.localName]||Ee[j.localName]===X.localName}function _(X,j){var se=te[X];if(!se)return null;var re=b.document.createElement(se);re.localName=se;var ae=fe[X];return ae&&j&&(re[ae]=j.trim()),re}for(var H,V=b.document.createElement("div"),Y=V,ue=[];(H=x())!==null;)if(H[0]!=="<")Y.appendChild(b.document.createTextNode(k(H)));else{if(H[1]==="/"){ue.length&&ue[ue.length-1]===H.substr(2).replace(">","")&&(ue.pop(),Y=Y.parentNode);continue}var z,ee=M(H.substr(1,H.length-2));if(ee){z=b.document.createProcessingInstruction("timestamp",ee),Y.appendChild(z);continue}var ne=H.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!ne||!(z=_(ne[1],ne[3]))||!F(Y,z))continue;ne[2]&&(z.className=ne[2].substr(1).replace("."," ")),ue.push(ne[1]),Y.appendChild(z),Y=z}return V}var Ce=[1470,1472,1475,1478,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1520,1521,1522,1523,1524,1544,1547,1549,1563,1566,1567,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,1595,1596,1597,1598,1599,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1645,1646,1647,1649,1650,1651,1652,1653,1654,1655,1656,1657,1658,1659,1660,1661,1662,1663,1664,1665,1666,1667,1668,1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1695,1696,1697,1698,1699,1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1748,1749,1765,1766,1774,1775,1786,1787,1788,1789,1790,1791,1792,1793,1794,1795,1796,1797,1798,1799,1800,1801,1802,1803,1804,1805,1807,1808,1810,1811,1812,1813,1814,1815,1816,1817,1818,1819,1820,1821,1822,1823,1824,1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,1838,1839,1869,1870,1871,1872,1873,1874,1875,1876,1877,1878,1879,1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1969,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2036,2037,2042,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2074,2084,2088,2096,2097,2098,2099,2100,2101,2102,2103,2104,2105,2106,2107,2108,2109,2110,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2133,2134,2135,2136,2142,2208,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,8207,64285,64287,64288,64289,64290,64291,64292,64293,64294,64295,64296,64298,64299,64300,64301,64302,64303,64304,64305,64306,64307,64308,64309,64310,64312,64313,64314,64315,64316,64318,64320,64321,64323,64324,64326,64327,64328,64329,64330,64331,64332,64333,64334,64335,64336,64337,64338,64339,64340,64341,64342,64343,64344,64345,64346,64347,64348,64349,64350,64351,64352,64353,64354,64355,64356,64357,64358,64359,64360,64361,64362,64363,64364,64365,64366,64367,64368,64369,64370,64371,64372,64373,64374,64375,64376,64377,64378,64379,64380,64381,64382,64383,64384,64385,64386,64387,64388,64389,64390,64391,64392,64393,64394,64395,64396,64397,64398,64399,64400,64401,64402,64403,64404,64405,64406,64407,64408,64409,64410,64411,64412,64413,64414,64415,64416,64417,64418,64419,64420,64421,64422,64423,64424,64425,64426,64427,64428,64429,64430,64431,64432,64433,64434,64435,64436,64437,64438,64439,64440,64441,64442,64443,64444,64445,64446,64447,64448,64449,64467,64468,64469,64470,64471,64472,64473,64474,64475,64476,64477,64478,64479,64480,64481,64482,64483,64484,64485,64486,64487,64488,64489,64490,64491,64492,64493,64494,64495,64496,64497,64498,64499,64500,64501,64502,64503,64504,64505,64506,64507,64508,64509,64510,64511,64512,64513,64514,64515,64516,64517,64518,64519,64520,64521,64522,64523,64524,64525,64526,64527,64528,64529,64530,64531,64532,64533,64534,64535,64536,64537,64538,64539,64540,64541,64542,64543,64544,64545,64546,64547,64548,64549,64550,64551,64552,64553,64554,64555,64556,64557,64558,64559,64560,64561,64562,64563,64564,64565,64566,64567,64568,64569,64570,64571,64572,64573,64574,64575,64576,64577,64578,64579,64580,64581,64582,64583,64584,64585,64586,64587,64588,64589,64590,64591,64592,64593,64594,64595,64596,64597,64598,64599,64600,64601,64602,64603,64604,64605,64606,64607,64608,64609,64610,64611,64612,64613,64614,64615,64616,64617,64618,64619,64620,64621,64622,64623,64624,64625,64626,64627,64628,64629,64630,64631,64632,64633,64634,64635,64636,64637,64638,64639,64640,64641,64642,64643,64644,64645,64646,64647,64648,64649,64650,64651,64652,64653,64654,64655,64656,64657,64658,64659,64660,64661,64662,64663,64664,64665,64666,64667,64668,64669,64670,64671,64672,64673,64674,64675,64676,64677,64678,64679,64680,64681,64682,64683,64684,64685,64686,64687,64688,64689,64690,64691,64692,64693,64694,64695,64696,64697,64698,64699,64700,64701,64702,64703,64704,64705,64706,64707,64708,64709,64710,64711,64712,64713,64714,64715,64716,64717,64718,64719,64720,64721,64722,64723,64724,64725,64726,64727,64728,64729,64730,64731,64732,64733,64734,64735,64736,64737,64738,64739,64740,64741,64742,64743,64744,64745,64746,64747,64748,64749,64750,64751,64752,64753,64754,64755,64756,64757,64758,64759,64760,64761,64762,64763,64764,64765,64766,64767,64768,64769,64770,64771,64772,64773,64774,64775,64776,64777,64778,64779,64780,64781,64782,64783,64784,64785,64786,64787,64788,64789,64790,64791,64792,64793,64794,64795,64796,64797,64798,64799,64800,64801,64802,64803,64804,64805,64806,64807,64808,64809,64810,64811,64812,64813,64814,64815,64816,64817,64818,64819,64820,64821,64822,64823,64824,64825,64826,64827,64828,64829,64848,64849,64850,64851,64852,64853,64854,64855,64856,64857,64858,64859,64860,64861,64862,64863,64864,64865,64866,64867,64868,64869,64870,64871,64872,64873,64874,64875,64876,64877,64878,64879,64880,64881,64882,64883,64884,64885,64886,64887,64888,64889,64890,64891,64892,64893,64894,64895,64896,64897,64898,64899,64900,64901,64902,64903,64904,64905,64906,64907,64908,64909,64910,64911,64914,64915,64916,64917,64918,64919,64920,64921,64922,64923,64924,64925,64926,64927,64928,64929,64930,64931,64932,64933,64934,64935,64936,64937,64938,64939,64940,64941,64942,64943,64944,64945,64946,64947,64948,64949,64950,64951,64952,64953,64954,64955,64956,64957,64958,64959,64960,64961,64962,64963,64964,64965,64966,64967,65008,65009,65010,65011,65012,65013,65014,65015,65016,65017,65018,65019,65020,65136,65137,65138,65139,65140,65142,65143,65144,65145,65146,65147,65148,65149,65150,65151,65152,65153,65154,65155,65156,65157,65158,65159,65160,65161,65162,65163,65164,65165,65166,65167,65168,65169,65170,65171,65172,65173,65174,65175,65176,65177,65178,65179,65180,65181,65182,65183,65184,65185,65186,65187,65188,65189,65190,65191,65192,65193,65194,65195,65196,65197,65198,65199,65200,65201,65202,65203,65204,65205,65206,65207,65208,65209,65210,65211,65212,65213,65214,65215,65216,65217,65218,65219,65220,65221,65222,65223,65224,65225,65226,65227,65228,65229,65230,65231,65232,65233,65234,65235,65236,65237,65238,65239,65240,65241,65242,65243,65244,65245,65246,65247,65248,65249,65250,65251,65252,65253,65254,65255,65256,65257,65258,65259,65260,65261,65262,65263,65264,65265,65266,65267,65268,65269,65270,65271,65272,65273,65274,65275,65276,67584,67585,67586,67587,67588,67589,67592,67594,67595,67596,67597,67598,67599,67600,67601,67602,67603,67604,67605,67606,67607,67608,67609,67610,67611,67612,67613,67614,67615,67616,67617,67618,67619,67620,67621,67622,67623,67624,67625,67626,67627,67628,67629,67630,67631,67632,67633,67634,67635,67636,67637,67639,67640,67644,67647,67648,67649,67650,67651,67652,67653,67654,67655,67656,67657,67658,67659,67660,67661,67662,67663,67664,67665,67666,67667,67668,67669,67671,67672,67673,67674,67675,67676,67677,67678,67679,67840,67841,67842,67843,67844,67845,67846,67847,67848,67849,67850,67851,67852,67853,67854,67855,67856,67857,67858,67859,67860,67861,67862,67863,67864,67865,67866,67867,67872,67873,67874,67875,67876,67877,67878,67879,67880,67881,67882,67883,67884,67885,67886,67887,67888,67889,67890,67891,67892,67893,67894,67895,67896,67897,67903,67968,67969,67970,67971,67972,67973,67974,67975,67976,67977,67978,67979,67980,67981,67982,67983,67984,67985,67986,67987,67988,67989,67990,67991,67992,67993,67994,67995,67996,67997,67998,67999,68e3,68001,68002,68003,68004,68005,68006,68007,68008,68009,68010,68011,68012,68013,68014,68015,68016,68017,68018,68019,68020,68021,68022,68023,68030,68031,68096,68112,68113,68114,68115,68117,68118,68119,68121,68122,68123,68124,68125,68126,68127,68128,68129,68130,68131,68132,68133,68134,68135,68136,68137,68138,68139,68140,68141,68142,68143,68144,68145,68146,68147,68160,68161,68162,68163,68164,68165,68166,68167,68176,68177,68178,68179,68180,68181,68182,68183,68184,68192,68193,68194,68195,68196,68197,68198,68199,68200,68201,68202,68203,68204,68205,68206,68207,68208,68209,68210,68211,68212,68213,68214,68215,68216,68217,68218,68219,68220,68221,68222,68223,68352,68353,68354,68355,68356,68357,68358,68359,68360,68361,68362,68363,68364,68365,68366,68367,68368,68369,68370,68371,68372,68373,68374,68375,68376,68377,68378,68379,68380,68381,68382,68383,68384,68385,68386,68387,68388,68389,68390,68391,68392,68393,68394,68395,68396,68397,68398,68399,68400,68401,68402,68403,68404,68405,68416,68417,68418,68419,68420,68421,68422,68423,68424,68425,68426,68427,68428,68429,68430,68431,68432,68433,68434,68435,68436,68437,68440,68441,68442,68443,68444,68445,68446,68447,68448,68449,68450,68451,68452,68453,68454,68455,68456,68457,68458,68459,68460,68461,68462,68463,68464,68465,68466,68472,68473,68474,68475,68476,68477,68478,68479,68608,68609,68610,68611,68612,68613,68614,68615,68616,68617,68618,68619,68620,68621,68622,68623,68624,68625,68626,68627,68628,68629,68630,68631,68632,68633,68634,68635,68636,68637,68638,68639,68640,68641,68642,68643,68644,68645,68646,68647,68648,68649,68650,68651,68652,68653,68654,68655,68656,68657,68658,68659,68660,68661,68662,68663,68664,68665,68666,68667,68668,68669,68670,68671,68672,68673,68674,68675,68676,68677,68678,68679,68680,126464,126465,126466,126467,126469,126470,126471,126472,126473,126474,126475,126476,126477,126478,126479,126480,126481,126482,126483,126484,126485,126486,126487,126488,126489,126490,126491,126492,126493,126494,126495,126497,126498,126500,126503,126505,126506,126507,126508,126509,126510,126511,126512,126513,126514,126516,126517,126518,126519,126521,126523,126530,126535,126537,126539,126541,126542,126543,126545,126546,126548,126551,126553,126555,126557,126559,126561,126562,126564,126567,126568,126569,126570,126572,126573,126574,126575,126576,126577,126578,126580,126581,126582,126583,126585,126586,126587,126588,126590,126592,126593,126594,126595,126596,126597,126598,126599,126600,126601,126603,126604,126605,126606,126607,126608,126609,126610,126611,126612,126613,126614,126615,126616,126617,126618,126619,126625,126626,126627,126629,126630,126631,126632,126633,126635,126636,126637,126638,126639,126640,126641,126642,126643,126644,126645,126646,126647,126648,126649,126650,126651,1114109];function Oe(){}function Ne(b,v,x){var S=typeof navigator<"u"&&/MSIE\s8\.0/.test(navigator.userAgent),k="rgba(255, 255, 255, 1)",F="rgba(0, 0, 0, 0.8)",_="";G!==void 0&&(k=G.fontSet,F=G.backgroundSet,_=G.edgeSet),S&&(k="rgb(255, 255, 255)",F="rgb(0, 0, 0)"),Oe.call(this),this.cue=v,this.cueDiv=Ae(b,v.text);var H={color:k,backgroundColor:F,textShadow:_,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};S||(H.writingMode=v.vertical===""?"horizontal-tb":v.vertical==="lr"?"vertical-lr":"vertical-rl",H.unicodeBidi="plaintext"),this.applyStyles(H,this.cueDiv),this.div=b.document.createElement("div"),H={textAlign:v.align==="middle"?"center":v.align,font:x.font,whiteSpace:"pre-line",position:"absolute"},S||(H.direction=(function(Y){var ue,z=[],ee="";if(!Y||!Y.childNodes)return"ltr";function ne(re,ae){for(var le=ae.childNodes.length-1;le>=0;le--)re.push(ae.childNodes[le])}function X(re){if(!re||!re.length)return null;var ae=re.pop(),le=ae.textContent||ae.innerText;if(le){var ie=le.match(/^.*(\n|\r)/);return ie?(re.length=0,ie[0]):le}return ae.tagName==="ruby"?X(re):ae.childNodes?(ne(re,ae),X(re)):void 0}for(ne(z,Y);ee=X(z);)for(var j=0;j<ee.length;j++){ue=ee.charCodeAt(j);for(var se=0;se<Ce.length;se++)if(Ce[se]===ue)return"rtl"}return"ltr"})(this.cueDiv),H.writingMode=v.vertical===""?"horizontal-tb":v.vertical==="lr"?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(H),this.div.appendChild(this.cueDiv);var V=0;switch(v.positionAlign){case"start":V=v.position;break;case"middle":V=v.position-v.size/2;break;case"end":V=v.position-v.size}v.vertical===""?this.applyStyles({left:this.formatStyle(V,"%"),width:this.formatStyle(v.size,"%")}):this.applyStyles({top:this.formatStyle(V,"%"),height:this.formatStyle(v.size,"%")}),this.move=function(Y){this.applyStyles({top:this.formatStyle(Y.top,"px"),bottom:this.formatStyle(Y.bottom,"px"),left:this.formatStyle(Y.left,"px"),right:this.formatStyle(Y.right,"px"),height:this.formatStyle(Y.height,"px"),width:this.formatStyle(Y.width,"px")})}}function Be(b){var v,x,S,k,F=typeof navigator<"u"&&/MSIE\s8\.0/.test(navigator.userAgent);if(b.div){x=b.div.offsetHeight,S=b.div.offsetWidth,k=b.div.offsetTop;var _=(_=b.div.childNodes)&&(_=_[0])&&_.getClientRects&&_.getClientRects();b=b.div.getBoundingClientRect(),v=_?Math.max(_[0]&&_[0].height||0,b.height/_.length):0}this.left=b.left,this.right=b.right,this.top=b.top||k,this.height=b.height||x,this.bottom=b.bottom||k+(b.height||x),this.width=b.width||S,this.lineHeight=v!==void 0?v:b.lineHeight,F&&!this.lineHeight&&(this.lineHeight=13)}function Ge(b,v,x,S){var k=new Be(v),F=v.cue,_=(function(j){if(typeof j.line=="number"&&(j.snapToLines||j.line>=0&&j.line<=100))return j.line;if(!j.track||!j.track.textTrackList||!j.track.textTrackList.mediaElement)return-1;for(var se=j.track,re=se.textTrackList,ae=0,le=0;le<re.length&&re[le]!==se;le++)re[le].mode==="showing"&&ae++;return-1*++ae})(F),H=[];if(F.snapToLines){var V;switch(F.vertical){case"":H=["+y","-y"],V="height";break;case"rl":H=["+x","-x"],V="width";break;case"lr":H=["-x","+x"],V="width"}var Y=k.lineHeight,ue=Y*Math.round(_),z=x[V]+Y,ee=H[0];Math.abs(ue)>z&&(ue=ue<0?-1:1,ue*=Math.ceil(z/Y)*Y),_<0&&(ue+=F.vertical===""?x.height:x.width,H=H.reverse()),k.move(ee,ue)}else{var ne=k.lineHeight/x.height*100;switch(F.lineAlign){case"middle":_-=ne/2;break;case"end":_-=ne}switch(F.vertical){case"":v.applyStyles({top:v.formatStyle(_,"%")});break;case"rl":v.applyStyles({left:v.formatStyle(_,"%")});break;case"lr":v.applyStyles({right:v.formatStyle(_,"%")})}H=["+y","-x","+x","-y"],k=new Be(v)}var X=(function(j,se){for(var re,ae=new Be(j),le=1,ie=0;ie<se.length;ie++){for(;j.overlapsOppositeAxis(x,se[ie])||j.within(x)&&j.overlapsAny(S);)j.move(se[ie]);if(j.within(x))return j;var xe=j.intersectPercentage(x);le>xe&&(re=new Be(j),le=xe),j=new Be(ae)}return re||ae})(k,H);v.move(X.toCSSCompatValues(x))}Oe.prototype.applyStyles=function(b,v){for(var x in v=v||this.div,b)b.hasOwnProperty(x)&&(v.style[x]=b[x])},Oe.prototype.formatStyle=function(b,v){return b===0?0:b+v},Ne.prototype=W(Oe.prototype),Ne.prototype.constructor=Ne,Be.prototype.move=function(b,v){switch(v=v!==void 0?v:this.lineHeight,b){case"+x":this.left+=v,this.right+=v;break;case"-x":this.left-=v,this.right-=v;break;case"+y":this.top+=v,this.bottom+=v;break;case"-y":this.top-=v,this.bottom-=v}},Be.prototype.overlaps=function(b){return this.left<b.right&&this.right>b.left&&this.top<b.bottom&&this.bottom>b.top},Be.prototype.overlapsAny=function(b){for(var v=0;v<b.length;v++)if(this.overlaps(b[v]))return!0;return!1},Be.prototype.within=function(b){return this.top>=b.top&&this.bottom<=b.bottom&&this.left>=b.left&&this.right<=b.right},Be.prototype.overlapsOppositeAxis=function(b,v){switch(v){case"+x":return this.left<b.left;case"-x":return this.right>b.right;case"+y":return this.top<b.top;case"-y":return this.bottom>b.bottom}},Be.prototype.intersectPercentage=function(b){return Math.max(0,Math.min(this.right,b.right)-Math.max(this.left,b.left))*Math.max(0,Math.min(this.bottom,b.bottom)-Math.max(this.top,b.top))/(this.height*this.width)},Be.prototype.toCSSCompatValues=function(b){return{top:this.top-b.top,bottom:b.bottom-this.bottom,left:this.left-b.left,right:b.right-this.right,height:this.height,width:this.width}},Be.getSimpleBoxPosition=function(b){var v=b.div?b.div.offsetHeight:b.tagName?b.offsetHeight:0,x=b.div?b.div.offsetWidth:b.tagName?b.offsetWidth:0,S=b.div?b.div.offsetTop:b.tagName?b.offsetTop:0;return{left:(b=b.div?b.div.getBoundingClientRect():b.tagName?b.getBoundingClientRect():b).left,right:b.right,top:b.top||S,height:b.height||v,bottom:b.bottom||S+(b.height||v),width:b.width||x}},B.StringDecoder=function(){return{decode:function(b){if(!b)return"";if(typeof b!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(b))}}},B.convertCueToDOMTree=function(b,v){return b&&v?Ae(b,v):null},B.processCues=function(b,v,x){if(!b||!v||!x)return null;for(;x.firstChild;)x.removeChild(x.firstChild);var S=b.document.createElement("div");if(S.style.position="absolute",S.style.left="0",S.style.right="0",S.style.top="0",S.style.bottom="0",S.style.margin="1.5%",x.appendChild(S),(function(V){for(var Y=0;Y<V.length;Y++)if(V[Y].hasBeenReset||!V[Y].displayState)return!0;return!1})(v)){var k=[],F=Be.getSimpleBoxPosition(S),_={font:Math.round(.05*F.height*100)/100*N+"px sans-serif"};(function(){for(var V,Y,ue=0;ue<v.length;ue++)Y=v[ue],V=new Ne(b,Y,_),S.appendChild(V.div),Ge(0,V,F,k),Y.displayState=V.div,k.push(Be.getSimpleBoxPosition(V))})()}else for(var H=0;H<v.length;H++)S.appendChild(v[H].displayState)},(B.Parser=function(b,v){this.window=b,this.state="INITIAL",this.buffer="",this.decoder=v||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(b){if(!(b instanceof K))throw b;this.onparsingerror&&this.onparsingerror(b)},parse:function(b,v){var x=this;function S(){for(var V=x.buffer,Y=0;Y<V.length&&V[Y]!=="\r"&&V[Y]!==`
`;)++Y;var ue=V.substr(0,Y);return V[Y]==="\r"&&++Y,V[Y]===`
`&&++Y,x.buffer=V.substr(Y),ue}b&&(x.buffer+=x.decoder.decode(b,{stream:!0}));try{var k;if(x.state==="INITIAL"){if(!/\r\n|\n/.test(x.buffer))return this;var F=(k=S()).match(/^WEBVTT([ \t].*)?$/);if(!F||!F[0])throw new K(K.Errors.BadSignature);x.state="HEADER"}for(var _=!1;x.buffer;){if(!/\r\n|\n/.test(x.buffer))return this;switch(_?_=!1:k=S(),x.state){case"HEADER":/:/.test(k)?Z(k,(function(V,Y){V==="Region"&&(function(ue){var z=new Q;if(Z(ue,(function(ne,X){switch(ne){case"id":z.set(ne,X);break;case"width":z.percent(ne,X);break;case"lines":z.integer(ne,X);break;case"regionanchor":case"viewportanchor":var j=X.split(",");if(j.length!==2)break;var se=new Q;if(se.percent("x",j[0]),se.percent("y",j[1]),!se.has("x")||!se.has("y"))break;z.set(ne+"X",se.get("x")),z.set(ne+"Y",se.get("y"));break;case"scroll":z.alt(ne,X,["up"])}}),/=/,/\s/),z.has("id")){var ee=new R;ee.width=z.get("width",100),ee.lines=z.get("lines",3),ee.regionAnchorX=z.get("regionanchorX",0),ee.regionAnchorY=z.get("regionanchorY",100),ee.viewportAnchorX=z.get("viewportanchorX",0),ee.viewportAnchorY=z.get("viewportanchorY",100),ee.scroll=z.get("scroll",""),x.onregion&&x.onregion(ee),x.regionList.push({id:z.get("id"),region:ee})}})(Y)}),/:/):k||(x.state="ID");continue;case"NOTE":k||(x.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(k)){x.state="NOTE";break}if(!k)continue;if(x.cue=new w(0,0,""),x.state="CUE",k.indexOf("-->")===-1){x.cue.id=k;continue}case"CUE":try{J(k,x.cue,x.regionList)}catch(V){x.reportOrThrowError(V),x.cue=null,x.state="BADCUE";continue}x.state="CUETEXT";continue;case"CUETEXT":var H=k.indexOf("-->")!==-1;if(!k||H&&(_=!0)){x.oncue&&x.oncue(x.cue),x.cue=null,x.state="ID";continue}x.cue.text&&(x.cue.text+=`
`),x.cue.text+=k;continue;case"BADCUE":k||(x.state="ID");continue}}if(!v)return x.state==="CUETEXT"&&x.cue&&x.oncue&&x.oncue(x.cue),x.flush(),this}catch(V){x.reportOrThrowError(V),x.state==="CUETEXT"&&x.cue&&x.oncue&&x.oncue(x.cue),x.cue=null,x.state=x.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var b=this;try{if(b.buffer+=b.decoder.decode(),(b.cue||b.state==="HEADER")&&(b.buffer+=`

`,b.parse(null,!0)),b.state==="INITIAL")throw new K(K.Errors.BadSignature)}catch(v){b.reportOrThrowError(v)}return b.onflush&&b.onflush(),this}};var Ve=B,$e=function(){var b="";screen.width&&(b+=(screen.width?screen.width:"")+" x "+(screen.height?screen.height:""));var v,x,S,k=navigator.appVersion,F=navigator.userAgent,_=navigator.appName,H=""+parseFloat(navigator.appVersion),V=parseInt(navigator.appVersion,10);(x=F.indexOf("Opera"))!=-1&&(_="Opera",H=F.substring(x+6),(x=F.indexOf("Version"))!=-1&&(H=F.substring(x+8))),(x=F.indexOf("OPR"))!=-1?(_="Opera",H=F.substring(x+4)):(x=F.indexOf("SamsungBrowser"))!=-1?(_="SamsungBrowser",H=F.substring(x+15)):(x=F.indexOf("Edge"))!=-1?(_="Microsoft Edge",H=F.substring(x+5)):(x=F.indexOf("MSIE"))!=-1?(_="Microsoft Internet Explorer",H=F.substring(x+5),F.indexOf("Trident/")!==-1&&F.indexOf("rv:")!==-1&&(H=F.substring(F.indexOf("rv:")+3))):(x=F.indexOf("Chrome"))!=-1?(_="Chrome",H=F.substring(x+7)):(x=F.indexOf("CriOS"))!=-1?(_="Chrome",H=F.substring(x+6)):(x=F.indexOf("Firefox"))!=-1?(_="Firefox",H=F.substring(x+8)):(x=F.indexOf("FxiOS"))!=-1?(_="Firefox",H=F.substring(x+6)):(x=F.indexOf("Safari"))!=-1?(_="Safari",H=F.substring(x+7),(x=F.indexOf("Version"))!=-1&&(H=F.substring(x+8))):F.indexOf("Trident/")!==-1?(_="Microsoft Internet Explorer",H=F.substring(F.indexOf("rv:")+3)):(v=F.lastIndexOf(" ")+1)<(x=F.lastIndexOf("/"))&&(_=F.substring(v,x),H=F.substring(x+1),_.toLowerCase()==_.toUpperCase()&&(_=navigator.appName)),F.indexOf(" wv"),(S=H.indexOf(";"))!=-1&&(H=H.substring(0,S)),(S=H.indexOf(" "))!=-1&&(H=H.substring(0,S)),(S=H.indexOf(")"))!=-1&&(H=H.substring(0,S)),V=parseInt(""+H,10),isNaN(V)&&(H=""+parseFloat(navigator.appVersion),V=parseInt(navigator.appVersion,10));var Y=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(k),ue=!!navigator.cookieEnabled;navigator.cookieEnabled!==void 0||ue||(document.cookie="testcookie",ue=document.cookie.indexOf("testcookie")!=-1);var z="-",ee=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS XI",r:/Mac OS X 11/},{s:"Mac OS X",r:/Mac OS X 10/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var ne in ee){var X=ee[ne];if(X.r.test(F)){z=X.s;break}}var j="-";switch(/Windows/.test(z)&&(j=/Windows (.*)/.exec(z)[1],z="Windows"),z){case"Mac OS XI":j=/Mac OS X (11[\.\_\d]+)/.exec(F)[1];break;case"Mac OS X":j=/Mac OS X (10[\.\_\d]+)/.exec(F)[1];break;case"Android":j=/Android ([\.\_\d]+)/.exec(F)[1];break;case"iOS":j=(j=/OS (\d+)_(\d+)_?(\d+)?/.exec(k))?j[1]+"."+j[2]+"."+(0|j[3]):""}return{screen:b,browser:_,browserVersion:H,browserMajorVersion:V,mobile:Y,ua:F,os:z,osVersion:j,cookies:ue}},it=/<sync|<\/body|<\/sami/i,yt=/\r\n?|\n/g,Tt=/<[a-z]*[^>]*<[a-z]*/g,st=/<sync[^>]+?start[^=]*=[^0-9]*([0-9]*)["^0-9"]*/i,ht=/<br[^>]*>/gi,_t=function(b,v){return v=(((v||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(""),b.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,(function(x,S){return v.indexOf("<"+S.toLowerCase()+">")>-1?x:""}))},Ht=function(b){return b.sort((function(v,x){var S;return(S=v.start-x.start)==0?v.end-x.end:S}))},Gt=function(){var b={},v=function(x){return x.map((function(S){return new w(S.start,S.end,S.text)}))};return b.load=function(x,S,k,F){fetch(x.file).then((function(_){_.ok?_.text().then((function(H){var V=[],Y=[];if(H.indexOf("WEBVTT")>=0){OvenPlayerConsole.log("WEBVTT LOADED");var ue=new Ve.Parser(window,Ve.StringDecoder());Y=[],ue.oncue=function(ee){Y.push(ee)},ue.onflush=function(){k(Y)},ue.parse(H),ue.flush()}else if(H.indexOf("SAMI")>=0){OvenPlayerConsole.log("SAMI LOADED");var z=(function(ee,ne){var X,j,se,re,ae,le,ie,xe,Me,Je;if(ie=function(){var De,We,Ye,Ie,Se,ze,He,lt,tt,ye,we,je,rt,St,nt,wt;for(We=function(pt){var nr;return(nr=new Error(pt)).line=He,nr.context=De,se.push(nr)},He=1,tt=[],rt={},je=ee;ye=je.search(),!(lt<=0||ye<0);)lt=je.slice(ye+1).search(it)+1,De=lt>0?je.slice(ye,ye+lt):je.slice(ye),He+=((St=je.slice(0,ye).match(yt))!=null?St.length:void 0)||0,Tt.test(De)&&We("ERROR_BROKEN_TAGS"),je=je.slice(ye+lt),((we=+((nt=De.match(st))!=null?parseFloat(nt[1]/1e3):void 0))===null||we<0)&&We("ERROR_INVALID_TIME"),(Se=re(De))||We("ERROR_INVALID_LANGUAGE"),He+=((wt=De.match(yt))!=null?wt.length:void 0)||0,De=(De=De.replace(yt,"")).replace(ht,`
`),Ie={start:we,text:"",contents:Ye=_t(De).trim()},Se&&(Ie.text=Ye),rt[Se]||(rt[Se]=[]),Ie.start&&rt[Se].push(Ie);Je=Je||(function(){var pt,nr,mt=window.navigator,Bt=["language","browserLanguage","systemLanguage","userLanguage"];if(Array.isArray(mt.languages)){for(pt=0;pt<mt.languages.length;pt++)if((nr=mt.languages[pt])&&nr.length)return nr}for(pt=0;pt<Bt.length;pt++)if((nr=mt[Bt[pt]])&&nr.length)return nr;return null})();var Ct=Object.keys(rt);return Ct&&Ct.length>0&&(ze=Ct.indexOf(Je)>-1?rt[Je]:rt[Ct.filter((function(pt){return pt!=="undefined"}))[0]],ze=Ht(ze),ze=le(ze),tt=tt.concat(ze)),Ht(tt)},re=function(De){var We,Ye;if(De){for(We in X)if((Ye=X[We]).reClassName.test(De))return Ye.lang}},le=function(De){var We,Ye,Ie;for(We=De.length;We--;)Ye=De[We],(Ie=De[We-1])!=null&&(Ie.end=Ye.start),Ye.contents&&Ye.contents!=="&nbsp;"?(delete De[We].contents,Ye.end||(Ye.end=Ye.start+j)):De.splice(We,1);return De},se=[],X={KRCC:{lang:"ko",reClassName:new RegExp(`class[^=]*?=["'S]*(KRCC)['"S]?`,"i")},KOCC:{lang:"ko",reClassName:new RegExp(`class[^=]*?=["'S]*(KOCC)['"S]?`,"i")},KR:{lang:"ko",reClassName:new RegExp(`class[^=]*?=["'S]*(KR)['"S]?`,"i")},ENCC:{lang:"en",reClassName:new RegExp(`class[^=]*?=["'S]*(ENCC)['"S]?`,"i")},EGCC:{lang:"en",reClassName:new RegExp(`class[^=]*?=["'S]*(EGCC)['"S]?`,"i")},EN:{lang:"en",reClassName:new RegExp(`class[^=]*?=["'S]*(EN)['"S]?`,"i")},JPCC:{lang:"ja",reClassName:new RegExp(`class[^=]*?=["'S]*(JPCC)['"S]?`,"i")}},ne?.definedLangs)for(ae in Me=ne.definedLangs)xe=Me[ae],X[ae]=xe;return j=ne?.duration||10,Je=ne.fixedLang,ee=ee.trim(),{result:ie(),errors:se}})(H,{fixedLang:S});Y=v(z.result),k(Y)}else OvenPlayerConsole.log("SRT LOADED"),V=(function(ee){var ne=[],X=(ee=f(ee)).split(`\r
\r
`);X.length===1&&(X=ee.split(`

`));for(var j=0;j<X.length;j++)if(X[j]!=="WEBVTT"){var se=p(X[j]);se.text&&ne.push(se)}return ne})(H),Y=v(V),k(Y)})).catch((function(H){F(H)})):F(_.status)})).catch((function(_){F(_)}))},b},Pt="idle",It="complete",Zt="paused",Mt="playing",Fe="error",Ze="loading",qe="stalled",ft="adLoaded",be="adPlaying",Xe="adPaused",at="adComplete",fr="adError",bt="html5",Lt="webrtc",me="dash",ot="hls",$t=It,Qt="ready",Qe="destroy",dt="playlistChanged",et="allPlaylistEnded",xt="unstableNetwork",kt="error",Wt="stateChanged",Ft=It,ke="pause",ut="play",Et="clicked",At="resized",Kt="fullscreenChanged",er="warning",Ar="zoomChanged",vr="adChanged",Rr="adTime",jr="bufferChanged",Ir="time",Qr="volumeChanged",In="mute",$r="metaChanged",Zr="sourceChanged",rn="qualityLevelChanged",an="cueChanged",Br="captionChanged",Wr="timeDisplayModeChanged",dn="p2pMode",Ln="audioTrackChanged",Re="subtitleTrackChanged",Le={codes:""},Ke=[{lang:"en",ui:{context:"About OvenPlayer",controls:{live:"Live Streaming",low_latency_live:"Sub-Second Latency Streaming",low_latency_p2p:"Sub-Second Latency P2P"},playlist:"Playlist",quality:{auto:"Auto"},setting:{title:"Settings",speed:"Speed",speedUnit:"x",source:"Source",quality:"Quality",audioTrack:"Audio",caption:"Caption",display:"Display",zoom:"Zoom",subtitleTrack:"Subtitle"}},api:{message:{muted_play:"Please touch here to turn on the sound."},error:{100:{code:100,message:"Can not load due to unknown reasons.",reason:"Can not load due to unknown reasons."},101:{code:101,message:"Can not load due to playable media not found.",reason:"Can not load due to playable media not found."},102:{code:102,message:"Flash fetching process aborted. </br><a href='http://www.adobe.com/go/getflashplayer' target='_self'><img src='http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif' alt='Get Adobe Flash player'></a>",reason:"It looks like not found swf or your environment is localhost."},103:{code:103,message:"Can not load due to dash.js. Please use the latest dash.js.",reason:"dash.js version is old."},104:{code:104,message:"Can not load due to google ima for Ads. ",reason:"Please check the google ima library."},105:{code:105,message:"Error initializing DASH.",reason:"Error initializing DASH."},106:{code:106,message:"Error initializing HLS.",reason:"Error initializing HLS."},107:{code:107,message:"Error initializing DRM.",reason:"Error initializing DRM."},300:{code:300,message:"Can not play due to unknown reasons.",reason:"Can not play due to unknown reasons."},301:{code:301,message:"Fetching process aborted by user.",reason:"Fetching process aborted by user."},302:{code:302,message:"Some of the media could not be downloaded due to a network error.",reason:"Error occurred when downloading."},303:{code:303,message:"Unable to load media. This may be due to a server or network error, or due to an unsupported format.",reason:"Error occurred when decoding."},304:{code:304,message:"Media playback has been canceled. It looks like your media is corrupted or your browser does not support the features your media uses.",reason:"Media playback not supported."},305:{code:305,message:"Can not load captions due to unknown reasons.",reason:"Can not load captions due to unknown reasons."},306:{code:306,message:"Unable to load media. This may be due to a server or network error, or due to an unsupported format.",reason:"The server cannot or will not process the request."},307:{code:307,message:"Unable to load media. This may be due to a server or network error, or due to an unsupported format.",reason:"The server refused the request."},308:{code:308,message:"Unable to load media. This may be due to a server or network error, or due to an unsupported format.",reason:"The server do not accept the request."},501:{code:501,message:"Connection with low-latency(OME) server failed.",reason:"WebSocket connection failed."},502:{code:502,message:"Connection with low-latency(OME) server failed.",reason:"WebRTC addIceCandidate failed."},503:{code:503,message:"Connection with low-latency(OME) server failed.",reason:"WebRTC setRemoteDescription failed."},504:{code:504,message:"Connection with low-latency(OME) server failed.",reason:"WebRTC peer createOffer failed."},505:{code:505,message:"Connection with low-latency(OME) server failed.",reason:"WebRTC setLocalDescription failed."},506:{code:506,message:"Connection with low-latency(OME) server failed.",reason:"WebRTC internal error."},510:{code:510,message:"Network connection is unstable. Check the network connection.",reason:"Network is slow."},511:{code:511,message:"Connection with low-latency(OME) terminated unexpectedly.",reason:"Unexpected end of connection."},512:{code:512,message:"Connection with low-latency(OME) server failed.",reason:"Connection timeout."}}}},{lang:"ko",ui:{context:"오븐플레이어에 관하여",controls:{live:"라이브",low_latency_live:"초저지연 라이브",low_latency_p2p:"초저지연 P2P"},playlist:"플레이리스트",quality:{auto:"자동"},setting:{title:"설정",speed:"재생 속도",speedUnit:"x",source:"소스",quality:"품질",audioTrack:"오디오",caption:"자막",display:"표시",zoom:"줌",subtitleTrack:"자막"}},api:{message:{muted_play:"눌러서 소리 켜기"},error:{100:{code:100,message:"알 수 없는 이유로 로드 할 수 없습니다.",reason:"알 수 없는 이유로 로드 할 수 없습니다."},101:{code:101,message:"지원되는 미디어를 찾지 못해 로드 할 수 없습니다.",reason:"Can not load due to playable media not found."},102:{code:102,message:"플레시 로드가 중단 되었습니다. </br><a href='http://www.adobe.com/go/getflashplayer' target='_self'><img src='http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif' alt='Get Adobe Flash player'></a>",reason:"It looks like not found swf or your environment is localhost."},103:{code:103,message:"DashJS로 인해 로드 할 수 없습니다. 최신 dash.js를 사용해 주세요.",reason:"dash.js version is old."},104:{code:104,message:"Google IMA 라이브러리가 없어 로드 할 수 없습니다.",reason:"Please check the google ima library."},105:{code:105,message:"DASH 초기화 중 오류가 발생했습니다.",reason:"Error initializing DASH."},106:{code:106,message:"HLS 초기화 중 오류가 발생했습니다.",reason:"Error initializing HLS."},107:{code:107,message:"DRM 초기화 중 오류가 발생했습니다.",reason:"Error initializing DRM."},300:{code:300,message:"알 수 없는 이유로 재생할 수 없습니다.",reason:"Can not play due to unknown reasons."},301:{code:301,message:"사용자에 의한 프로세스 중단.",reason:"Fetching process aborted by user."},302:{code:302,message:"네트워크 오류로 인해 일부 미디어를 다운로드 할 수 없습니다.",reason:"Error occurred when downloading."},303:{code:303,message:"미디어를 로드 할 수 없습니다. 서버 또는 네트워크 오류 또는 지원되지 않는 형식으로 인해 발생할 수 있습니다.",reason:"Error occurred when decoding."},304:{code:304,message:"미디어 재생이 취소되었습니다. 미디어가 손상되었거나 브라우저가 미디어에서 사용하는 기능을 지원하지 않는 것 같습니다.",reason:"Media playback not supported."},305:{code:305,message:"알 수 없는 이유로 자막을 로드 할 수 없습니다.",reason:"Can not load captions due to unknown reasons."},306:{code:306,message:"미디어를 로드 할 수 없습니다. 서버 또는 네트워크 오류 또는 지원되지 않는 형식으로 인해 발생할 수 있습니다.",reason:"The server cannot or will not process the request."},307:{code:307,message:"미디어를 로드 할 수 없습니다. 서버 또는 네트워크 오류 또는 지원되지 않는 형식으로 인해 발생할 수 있습니다.",reason:"The server refused the request."},308:{code:308,message:"미디어를 로드 할 수 없습니다. 서버 또는 네트워크 오류 또는 지원되지 않는 형식으로 인해 발생할 수 있습니다.",reason:"The server do not accept the request."},501:{code:501,message:"웹소켓 연결 실패",reason:"WebSocket connection failed."},502:{code:502,message:"저지연(OME) 서버와 연결에 실패했습니다.",reason:"WebRTC addIceCandidate failed."},503:{code:503,message:"저지연(OME) 서버와 연결에 실패했습니다.",reason:"WebRTC setRemoteDescription failed."},504:{code:504,message:"저지연(OME) 서버와 연결에 실패했습니다.",reason:"WebRTC peer createOffer failed."},505:{code:505,message:"저지연(OME) 서버와 연결에 실패했습니다.",reason:"WebRTC setLocalDescription failed."},506:{code:506,message:"저지연(OME) 서버와 연결에 실패했습니다.",reason:"WebRTC internal error."},510:{code:510,message:"네트워크 연결이 불안정합니다. 네트워크 연결을 확인하십시오.",reason:"Network is slow."},511:{code:511,message:"저지연(OME) 서버와 연결에 실패했습니다.",reason:"Unexpected end of connection."},512:{code:512,message:"저지연(OME) 서버와 연결에 실패했습니다.",reason:"Connection timeout."}}}},{lang:"pl",ui:{context:"O OvenPlayer",controls:{live:"Transmisja na żywo",low_latency_live:"Transmisja z niskim opóźnieniem",low_latency_p2p:"Transmisja z niskim opóźnieniem P2P"},playlist:"Playlista",quality:{auto:"Auto"},setting:{title:"Ustawienia",speed:"Prędkość",speedUnit:"x",source:"Źrodło",quality:"Jakość",audioTrack:"Audio",caption:"Podtytuł",display:"Wyświetlacz",zoom:"Zbliżenie",subtitleTrack:"Napisy"}},api:{message:{muted_play:"Naciśnij tutaj, aby aktywować dźwięk"},error:{100:{code:100,message:"Nie można załadować z nieznanego powodu.",reason:"Can not load due to unknown reasons."},101:{code:101,message:"Nie można załadować, ponieważ nie znaleziono multimediów, który można odtworzyć.",reason:"Can not load due to playable media not found."},102:{code:102,message:"Flash fetching process aborted. </br><a href='http://www.adobe.com/go/getflashplayer' target='_self'><img src='http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif' alt='Get Adobe Flash player'></a>",reason:"It looks like not found swf or your environment is localhost."},103:{code:103,message:"Nie można załadować, ponieważ wersja dash.js jest za stara.",reason:"dash.js version is old."},104:{code:104,message:"Can not load due to google ima for Ads. ",reason:"Please check the google ima library."},105:{code:105,message:"Nie można załadować, nie znaleziono DASH.",reason:"Error initializing DASH."},106:{code:106,message:"Nie można załadować, nie znaleziono hlsjs.",reason:"Error initializing HLS"},107:{code:107,message:"Nie można załadować, nie znaleziono DRM.",reason:"Error initializing DRM"},300:{code:300,message:"Nie można odtworzyć z nieznanego powodu.",reason:"Can not play due to unknown reasons."},301:{code:301,message:"Proces pobierania przerwany przez użytkownika.",reason:"Fetching process aborted by user."},302:{code:302,message:"Nie udało się pobrać niektórych multimediów z powodu błędu sieci.",reason:"Error occurred when downloading."},303:{code:303,message:"Nie udało się załadować niektórych multimediów. Może być to spowodowane problemem z serwerem, siecią lub niewspieranym formatem.",reason:"Error occurred when decoding."},304:{code:304,message:"Odtwarzanie zostało anulowane. Wygląda na to, że plik jest uszkodzony lub Twoja przeglądarka nie obsługuje tego pliku.",reason:"Media playback not supported."},305:{code:305,message:"Nie można wczytać napisów z nieznanego powodu.",reason:"Can not load captions due to unknown reasons."},306:{code:306,message:"Nie udało się załadować niektórych multimediów. Może być to spowodowane problemem z serwerem, siecią lub niewspieranym formatem.",reason:"The server cannot or will not process the request."},307:{code:307,message:"Nie udało się załadować niektórych multimediów. Może być to spowodowane problemem z serwerem, siecią lub niewspieranym formatem.",reason:"The server refused the request."},308:{code:308,message:"Nie udało się załadować niektórych multimediów. Może być to spowodowane problemem z serwerem, siecią lub niewspieranym formatem.",reason:"The server do not accept the request."},501:{code:501,message:"Połączenie z serwerem niskiego opóźnienia (OME) nie powiodło się.",reason:"WebSocket connection failed."},502:{code:502,message:"Połączenie z serwerem niskiego opóźnienia (OME) nie powiodło się.",reason:"WebRTC addIceCandidate failed."},503:{code:503,message:"Połączenie z serwerem niskiego opóźnienia (OME) nie powiodło się.",reason:"WebRTC setRemoteDescription failed."},504:{code:504,message:"Połączenie z serwerem niskiego opóźnienia (OME) nie powiodło się.",reason:"WebRTC peer createOffer failed."},505:{code:505,message:"Połączenie z serwerem niskiego opóźnienia (OME) nie powiodło się.",reason:"WebRTC setLocalDescription failed."},506:{code:506,message:"Połączenie z serwerem niskiego opóźnienia (OME) nie powiodło się.",reason:"WebRTC internal error."},510:{code:510,message:"Połączenie sieciowe jest niestabilne. Sprawdź swoją sieć.",reason:"Network is slow."},511:{code:511,message:"Połączenie z serwerem niskiego opóźnienia (OME) nieoczekiwanie zakończone.",reason:"Unexpected end of connection."},512:{code:512,message:"Połączenie z serwerem niskiego opóźnienia (OME) nie powiodło się.",reason:"Connection timeout."}}}}],rr=function(b){return b==="subtitles"||b==="captions"};function Pe(b){return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},Pe(b)}function Er(b,v){for(var x in v)Object.prototype.hasOwnProperty.call(v,x)&&(Pe(v[x])==="object"&&v[x]!==null&&Pe(b[x])==="object"&&b[x]!==null?Er(b[x],v[x]):b[x]=v[x]);return b}var hr=function(b){var v=b,x=[],S=function(k,F,_){var H=0,V=k.length;for(H=0;H<V;H++){var Y=k[H];Y.listener.apply(Y.context||_,F)}};return v.on=function(k,F,_){return(x[k]||(x[k]=[])).push({listener:F,context:_}),v},v.trigger=function(k){if(!x)return!1;var F=[].slice.call(arguments,1),_=x[k],H=x.all;_&&S(_,F,v),H&&S(H,arguments,v)},v.off=function(k,F,_){if(!x)return!1;if(!k&&!F&&!_)return x=[],v;for(var H=k?[k]:Object.keys(x),V=0,Y=H.length;V<Y;V++){k=H[V];var ue=x[k];if(ue){var z=x[k]=[];if(F||_)for(var ee=0,ne=ue.length;ee<ne;ee++){var X=ue[ee];(F&&F!==X.listener&&F!==X.listener.listener&&F!==X.listener._listener||_&&_!==X.context)&&z.push(X)}z.length||delete x[k]}}return v},v.once=function(k,F,_){var H=0,V=function(){H++||(v.off(k,V),F.apply(v,arguments))};return V._listener=F,v.on(k,V,_)},v},sr=(t(53439),function(b){var v={},x=null,S=function(k,F){var _=k.querySelectorAll(F);return _.length>1?_:_[0]};return(x=u().isElement(b)||u().every(b,(function(k){return u().isElement(k)}))?b:b==="document"?document:b==="window"?window:S(document,b))?(v.show=function(){x.style.display="block"},v.hide=function(){x.style.display="none"},v.addClass=function(k){x.classList?x.classList.add(k):x.className.split(" ").indexOf(k)===-1&&(x.className+=" "+k)},v.after=function(k){x.insertAdjacentHTML("afterend",k)},v.append=function(k){x.appendChild(k)},v.before=function(k){x.insertAdjacentHTML("beforebegin",k)},v.children=function(){return x.children||[]},v.contains=function(k){return x!==k&&x.contains(k)},v.empty=function(){x.innerHTML=""},v.find=function(k){return sr(S(x,k))},v.css=function(k,F){if(!F)return x.style[k];x.length>0?x.forEach((function(_){_.style[k]=F})):x.style[k]=F},v.removeClass=function(k){x.classList?x.classList.remove(k):x.className=x.className.replace(new RegExp("(^|\\b)"+k.split(" ").join("|")+"(\\b|$)","gi")," ")},v.removeAttribute=function(k){x.removeAttribute(k)},v.text=function(k){if(k===void 0)return x.textContent;x.textContent=k},v.html=function(k){x.innerHTML=k},v.hasClass=function(k){return x.classList?x.classList.contains(k):new RegExp("(^| )"+k+"( |$)","gi").test(x.name)},v.is=function(k){return x===k},v.offset=function(){var k=x.getBoundingClientRect();return{top:k.top+document.body.scrollTop,left:k.left+document.body.scrollLeft}},v.width=function(){return x.clientWidth},v.height=function(){return x.clientHeight},v.attr=function(k){return x.getAttribute(k)},v.replace=function(k){x.replaceWith(k)},v.remove=function(){x.length>1?x.parentElement.removeChild(x):x.remove()},v.removeChild=function(k){if(k)x.removeChild(k);else for(;x.hasChildNodes();)x.removeChild(x.firstChild)},v.get=function(){return x},v.closest=function(k){x.closest=function(_){var H=x;do{if(H.matches(_))return H;H=H.parentElement||H.parentNode}while(H!==null&&H.nodeType===1);return null};var F=x.closest(k);return F?sr(F):null},v):null}),de=sr,ct=function(b,v){if(b)return b.indexOf("rtmp:")==0||v=="rtmp"},or=function(b,v){return!!b&&(b.indexOf("ws:")===0||b.indexOf("wss:")===0||v==="webrtc")},Nt=function(b,v){if(b)return v==="hls"||v==="m3u8"||v==="application/vnd.apple.mpegurl"||h(b)=="m3u8"},Or=function(b,v){if(b)return v==="mpd"||v==="dash"||v==="application/dash+xml"||h(b)=="mpd"},Mr=function(b){if(!b)return null;var v=null;if(typeof b=="string")v=document.getElementById(b);else{if(!b.nodeType)return null;v=b}return v},nn=function(){var b={};OvenPlayerConsole.log("SupportChecker loaded.");var v=$e(),x=[{name:"html5",checkSupport:function(S){var k=document.createElement("video");if(!k.canPlayType)return!1;var F=S.file,_=S.type,H=S.overrideNative;if(!_)return!1;var V=S.mimeType||{aac:"audio/mp4",mp4:"video/mp4",f4v:"video/mp4",m4v:"video/mp4",mov:"video/mp4",mp3:"audio/mpeg",mpeg:"audio/mpeg",ogv:"video/ogg",ogg:"video/ogg",oga:"video/ogg",vorbis:"video/ogg",webm:"video/webm",f4a:"video/aac",m3u8:"application/vnd.apple.mpegurl",m3u:"application/vnd.apple.mpegurl",hls:"application/vnd.apple.mpegurl"}[_];return!(Nt(F,_)&&v.os!=="iOS"||Nt(F,_)&&(v.browser==="Microsoft Edge"||v.os==="Android")||Nt(F,_)&&H||ct(F,_)||or(F,_)||!V||!k.canPlayType(V))}},{name:"webrtc",checkSupport:function(S){if(!document.createElement("video").canPlayType||ct(k,F))return!1;var k=S.file,F=S.type;return!!or(k,F)}},{name:"dash",checkSupport:function(S){var k=S.file,F=S.type;return!ct(k,F)&&!(typeof(window.MediaSource||window.WebKitMediaSource)!="function"||!Or(k,F))}},{name:"hls",checkSupport:function(S){document.createElement("video");var k,F,_,H,V=S.file,Y=S.type;return!ct(V,Y)&&(k=(function(){if(typeof window<"u")return window.MediaSource||window.WebKitMediaSource})(),F=window.SourceBuffer||window.WebKitSourceBuffer,_=k&&typeof k.isTypeSupported=="function"&&k.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),H=!F||F.prototype&&typeof F.prototype.appendBuffer=="function"&&typeof F.prototype.remove=="function",!!_&&!!H)}},{name:"rtmp",checkSupport:function(S){var k=S.file,F=S.type;return!(!ct(k,F)||!(function(){var _=!1;if("ActiveXObject"in window)try{_=!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch{_=!1}else _=!!navigator.mimeTypes["application/x-shockwave-flash"];return _})()||v.browser==="Microsoft Edge"||v.os==="Android"||v.os==="iOS"||v.browser==="Safari")}}];return b.findProviderNameBySource=function(S){OvenPlayerConsole.log("SupportChecker : findProviderNameBySource()",S);for(var k=S===Object(S)?S:{},F=0;F<x.length;F++)if(x[F].checkSupport(k))return x[F].name},b.findProviderNamesByPlaylist=function(S){OvenPlayerConsole.log("SupportChecker : findProviderNamesByPlaylist()",S);var k=[],F=S;if(F&&F.sources){for(var _=0;_<F.sources.length;_++){var H=F.sources[_];if(H){var V=b.findProviderNameBySource(H);V&&k.push(V)}}return k}return null},b},en="data:video/mp4;base64, AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw",xr=function(b,v){v&&(v.setState(Fe),v.pause(),v.trigger(kt,b))},hn=function(b,v){var x=0;if(b)if(v.getSourceIndex()===-1){for(var S=0;S<b.length;S++)if(b[S].default){x=S;break}}else x=v.getSourceIndex();return x};function Rn(b){return{start:b.seekable.start(0),end:b.seekable.end(b.seekable.length-1)}}var sn=function(b,v,x,S,k){var F,_="admanagerLoadingTimeout",H="",V="",Y={},ue=!1,z=!1,ee={started:!1,active:!1,isVideoEnded:!1},ne=null,X=null,j=null,se=null,re=null,ae=null,le=null,ie=!1,xe=!1,Me=x.getBrowser(),Je=Me.os==="Android"||Me.os==="iOS";OvenPlayerConsole.log("IMA : started ","isMobile : ",Je,S);try{H=google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,V=google.ima.AdErrorEvent.Type.AD_ERROR,google.ima.settings.setLocale(x.getLanguage()),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),X=function(Ye){console.log(Ye.getError().getVastErrorCode(),Ye.getError().getMessage()),z=!0;var Ie=Ye.getError().getInnerError();if(Ie)try{console.log(Ie.getErrorCode(),Ie.getMessage())}catch{}v.trigger(fr,{code:Ye.getError().getVastErrorCode(),message:Ye.getError().getMessage()}),ee.active=!1,ee.started=!0,v.play()},ne=function(Ye){OvenPlayerConsole.log("IMA : OnManagerLoaded ");var Ie=new google.ima.AdsRenderingSettings;Ie.restoreCustomPlaybackStateOnAdBreakComplete=!0,re&&(OvenPlayerConsole.log("IMA : destroy adsManager----"),ae.destroy(),ae=null,re.destroy(),re=null),re=Ye.getAdsManager(b,Ie),ae=(function(Se,ze,He,lt){var tt={},ye={},we=null,je=google.ima.AdEvent.Type.AD_BUFFERING,rt=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,St=google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,nt=google.ima.AdErrorEvent.Type.AD_ERROR,wt=google.ima.AdEvent.Type.ALL_ADS_COMPLETED,Ct=google.ima.AdEvent.Type.CLICK,pt=google.ima.AdEvent.Type.SKIPPED,nr=google.ima.AdEvent.Type.COMPLETE,mt=google.ima.AdEvent.Type.FIRST_QUARTILE,Bt=google.ima.AdEvent.Type.LOADED,qt=google.ima.AdEvent.Type.MIDPOINT,ar=google.ima.AdEvent.Type.PAUSED,Jt=google.ima.AdEvent.Type.RESUMED,pr=google.ima.AdEvent.Type.STARTED,Ut=google.ima.AdEvent.Type.USER_CLOSE,ir=google.ima.AdEvent.Type.THIRD_QUARTILE,br=!1,gr=null;return OvenPlayerConsole.log("IMA : Listener Created"),ye[rt]=function(gt){OvenPlayerConsole.log("IMA LISTENER : ",gt.type),He.started&&(He.active=!0,ze.pause())},ye[St]=function(gt){OvenPlayerConsole.log("IMA LISTENER : ",gt.type),He.active=!1,!He.started||ze.getPosition()!==0&&He.isVideoEnded||ze.play()},ye[nt]=function(gt){br=!0,lt(gt)},ye[wt]=function(gt){OvenPlayerConsole.log("IMA LISTENER : ",gt.type),br=!0,He.isVideoEnded&&ze.setState(It)},ye[Ct]=function(gt){OvenPlayerConsole.log(gt.type),ze.trigger(Et,{type:"adclick"})},ye[mt]=function(gt){OvenPlayerConsole.log(gt.type)},ye[je]=function(gt){OvenPlayerConsole.log("AD_BUFFERING",gt.type)},ye[Bt]=function(gt){OvenPlayerConsole.log(gt.type);var dr=Se.getRemainingTime(),zr=gt.getAd();ze.trigger(ft,{remaining:dr,isLinear:zr.isLinear()})},ye[qt]=function(gt){OvenPlayerConsole.log(gt.type)},ye[ar]=function(gt){OvenPlayerConsole.log(gt.type),ze.setState(Xe)},ye[Jt]=function(gt){OvenPlayerConsole.log(gt.type),ze.setState(be)},ye[pr]=function(gt){OvenPlayerConsole.log(gt.type);var dr=gt.getAd();gr=dr;var zr={isLinear:dr.isLinear(),duration:dr.getDuration(),skipTimeOffset:dr.getSkipTimeOffset()};ze.trigger(vr,zr),dr.isLinear()?(ze.setState(be),He.started=!0,we=setInterval((function(){var kn=Se.getRemainingTime(),ri=dr.getDuration();ze.trigger(Rr,{duration:ri,skipTimeOffset:dr.getSkipTimeOffset(),remaining:kn,position:ri-kn,skippable:Se.getAdSkippableState()})}),300)):ze.play()},ye[nr]=function(gt){OvenPlayerConsole.log(gt.type),gt.getAd().isLinear()&&clearInterval(we),ze.trigger(at)},ye[pt]=function(gt){OvenPlayerConsole.log(gt.type),gt.getAd().isLinear()&&clearInterval(we),ze.trigger(at)},ye[Ut]=function(gt){OvenPlayerConsole.log(gt.type),gt.getAd().isLinear()&&clearInterval(we),ze.trigger(at)},ye[ir]=function(gt){OvenPlayerConsole.log(gt.type)},Object.keys(ye).forEach((function(gt){Se.removeEventListener(gt,ye[gt]),Se.addEventListener(gt,ye[gt])})),tt.setAdCompleteCallback=function(gt){},tt.isAllAdComplete=function(){return br},tt.isLinearAd=function(){return!gr||gr.isLinear()},tt.destroy=function(){OvenPlayerConsole.log("IMAEventListener : destroy()"),Object.keys(ye).forEach((function(gt){Se.removeEventListener(gt,ye[gt])}))},tt})(re,v,ee,X),OvenPlayerConsole.log("IMA : created admanager and listner "),ue=!0};var De=((F=document.createElement("div")).setAttribute("class","op-ads"),F.setAttribute("id","op-ads"),x.getContainer().append(F),F);j=new google.ima.AdDisplayContainer(De,b),(se=new google.ima.AdsLoader(j)).addEventListener(H,ne,!1),se.addEventListener(V,X,!1),OvenPlayerConsole.log("IMA : adDisplayContainer initialized"),v.on(Qr,(function(Ye){re&&(Ye.mute?re.setVolume(0):re.setVolume(Ye.volume/100))}),Y);var We=function(){le&&(OvenPlayerConsole.log("IMA : setADWillAutoPlay ","autoplayAllowed",ie,"autoplayRequiresMuted",xe),le.setAdWillAutoPlay(ie),le.setAdWillPlayMuted(xe),xe&&v.trigger(er,{message:"Please touch here to turn on the sound.",timer:1e4,iconClass:"volume-mute",onClickCallback:function(){v.setMute(!1)}}))};return Y.isActive=function(){return ee.active},Y.started=function(){return ee.started},Y.play=function(){return ee.started?new Promise((function(Ye,Ie){try{re.resume(),Ye()}catch(Se){Ie(Se)}})):(j.initialize(),new Promise((function(Ye,Ie){var Se=0,ze=function(){Se++,ue?(OvenPlayerConsole.log("IMA : ad start!"),re.init("100%","100%",google.ima.ViewMode.NORMAL),re.start(),ee.started=!0,Ye()):z?Ie(new Error(_)):Se<150?setTimeout(ze,100):Ie(new Error(_))};(function(){OvenPlayerConsole.log("IMA : checkAutoplaySupport() ");var He=document.createElement("video");He.setAttribute("playsinline","true"),He.src=en,He.load(),Je&&v.getName()!==me&&b.load();var lt=function(tt,ye){ie=tt,xe=ye,He.pause(),He.remove(),We()};return new Promise((function(tt,ye){if(He.play){var we=He.play();we!==void 0?we.then((function(){OvenPlayerConsole.log("IMA : auto play allowed."),lt(!0,!1),tt()})).catch((function(je){OvenPlayerConsole.log("IMA : auto play failed",je.message),lt(!1,!1),tt()})):(OvenPlayerConsole.log("IMA : promise not support"),lt(!0,!1),tt())}else OvenPlayerConsole.log("IMA : !temporarySupportCheckVideo.play"),lt(!0,!1),tt()}))})().then((function(){x.isAutoStart()&&!ie?(OvenPlayerConsole.log("IMA : autoplayAllowed : false"),ee.started=!1,Ie(new Error("autoplayNotAllowed"))):(ue=!1,OvenPlayerConsole.log("IMA : initRequest() AutoPlay Support : ","autoplayAllowed",ie,"autoplayRequiresMuted",xe),(le=new google.ima.AdsRequest).forceNonLinearFullSlot=!1,We(),le.adTagUrl=S,se.requestAds(le),OvenPlayerConsole.log("IMA : requestAds Complete"),ze())}))})))},Y.pause=function(){re.pause()},Y.videoEndedCallback=function(Ye){!ae||!ae.isAllAdComplete()&&ae.isLinearAd()?z?Ye():(ee.isVideoEnded=!0,se.contentComplete()):Ye()},Y.destroy=function(){se&&(se.removeEventListener(H,ne),se.removeEventListener(V,X)),re&&re.destroy(),j&&j.destroy(),ae&&ae.destroy();var Ye=de(x.getContainer()).find(".op-ads");Ye&&Ye.remove(),v.off(Qr,null,Y)},Y}catch{return null}};function ln(b){return ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},ln(b)}function ui(b,v,x){return v=vi(v),(function(S,k){if(k&&(ln(k)=="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F})(S)})(b,Qi()?Reflect.construct(v,x||[],vi(b).constructor):v.apply(b,x))}function Qi(){try{var b=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Qi=function(){return!!b})()}function vi(b){return vi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(v){return v.__proto__||Object.getPrototypeOf(v)},vi(b)}function Yn(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),v&&yi(b,v)}function yi(b,v){return yi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,S){return x.__proto__=S,x},yi(b,v)}function go(b,v){for(var x=0;x<v.length;x++){var S=v[x];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,cs(S.key),S)}}function Kr(b,v,x){return v&&go(b.prototype,v),Object.defineProperty(b,"prototype",{writable:!1}),b}function cs(b){var v=(function(x){if(ln(x)!="object"||!x)return x;var S=x[Symbol.toPrimitive];if(S!==void 0){var k=S.call(x,"string");if(ln(k)!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)})(b);return ln(v)=="symbol"?v:v+""}function Vr(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}var fs=Kr((function b(){Vr(this,b),this.id=null,this.sequence=null,this.system=null,this.title=null,this.description=null,this.advertiser=null,this.pricing=null,this.survey=null,this.errorURLTemplates=[],this.impressionURLTemplates=[],this.creatives=[],this.extensions=[]})),ds=Kr((function b(){Vr(this,b),this.attributes={},this.children=[]})),hs=Kr((function b(){Vr(this,b),this.name=null,this.value=null,this.attributes={}})),$i=Kr((function b(){Vr(this,b),this.id=null,this.width=0,this.height=0,this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.altText=null,this.companionClickThroughURLTemplate=null,this.companionClickTrackingURLTemplates=[],this.trackingEvents={}})),Wi=Kr((function b(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Vr(this,b),this.id=v.id||null,this.adId=v.adId||null,this.sequence=v.sequence||null,this.apiFramework=v.apiFramework||null,this.trackingEvents={}})),Vi=(function(b){function v(){var x,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Vr(this,v),(x=ui(this,v,[S])).type="companion",x.variations=[],x}return Yn(v,b),Kr(v)})(Wi);function yn(b){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x=[];for(var S in v.ASSETURI&&(v.ASSETURI=En(v.ASSETURI)),v.CONTENTPLAYHEAD&&(v.CONTENTPLAYHEAD=En(v.CONTENTPLAYHEAD)),v.ERRORCODE&&!/^[0-9]{3}$/.test(v.ERRORCODE)&&(v.ERRORCODE=900),v.CACHEBUSTING=Yi(Math.round(1e8*Math.random()).toString()),v.TIMESTAMP=En(new Date().toISOString()),v.RANDOM=v.random=v.CACHEBUSTING,b){var k=b[S];if(typeof k=="string"){for(var F in v){var _=v[F],H="[".concat(F,"]"),V="%%".concat(F,"%%");k=(k=k.replace(H,_)).replace(V,_)}x.push(k)}}return x}function En(b){return encodeURIComponent(b).replace(/[!'()*]/g,(function(v){return"%".concat(v.charCodeAt(0).toString(16))}))}function Yi(b){return b.length<8?Ei(0,8-b.length,!1).map((function(v){return"0"})).join("")+b:b}function Ei(b,v,x){for(var S=[],k=b<v,F=x?k?v+1:v-1:v,_=b;k?_<F:_>F;k?_++:_--)S.push(_);return S}var Hn={track:function(b,v){yn(b,v).forEach((function(x){typeof window<"u"&&window!==null&&(new Image().src=x)}))},resolveURLTemplates:yn,encodeURIComponentRFC3986:En,leftpad:Yi,range:Ei,isNumeric:function(b){return!isNaN(parseFloat(b))&&isFinite(b)},flatten:function b(v){return v.reduce((function(x,S){return x.concat(Array.isArray(S)?b(S):S)}),[])}},Nr=function(b,v){var x=b.childNodes;for(var S in x){var k=x[S];if(k.nodeName===v)return k}},yr=function(b,v){var x=[],S=b.childNodes;for(var k in S){var F=S[k];F.nodeName===v&&x.push(F)}return x},As=function(b,v){if(!v)return b;if(b.indexOf("//")===0){var x=location.protocol;return"".concat(x).concat(b)}return b.indexOf("://")===-1?"".concat(v.slice(0,v.lastIndexOf("/")),"/").concat(b):b},bn=function(b){return["true","TRUE","1"].indexOf(b)!==-1},tr=function(b){return b&&(b.textContent||b.text||"").trim()},bi=function(b,v,x){var S=v.getAttribute(b);S&&x.setAttribute(b,S)},jn=function(b){if(b==null)return-1;if(Hn.isNumeric(b))return parseInt(b);var v=b.split(":");if(v.length!==3)return-1;var x=v[2].split("."),S=parseInt(x[0]);x.length===2&&(S+=parseFloat("0.".concat(x[1])));var k=parseInt(60*v[1]),F=parseInt(60*v[0]*60);return isNaN(F)||isNaN(k)||isNaN(S)||k>3600||S>60?-1:F+k+S},gs=function(b){var v=[],x=null;return b.forEach((function(S,k){if(S.sequence&&(S.sequence=parseInt(S.sequence,10)),S.sequence>1){var F=b[k-1];if(F&&F.sequence===S.sequence-1)return void(x&&x.push(S));delete S.sequence}x=[S],v.push(x)})),v},Ci=function(b,v){b.errorURLTemplates=v.errorURLTemplates.concat(b.errorURLTemplates),b.impressionURLTemplates=v.impressionURLTemplates.concat(b.impressionURLTemplates),b.extensions=v.extensions.concat(b.extensions),b.creatives.forEach((function(x){if(v.trackingEvents&&v.trackingEvents[x.type])for(var S in v.trackingEvents[x.type]){var k=v.trackingEvents[x.type][S];x.trackingEvents[S]||(x.trackingEvents[S]=[]),x.trackingEvents[S]=x.trackingEvents[S].concat(k)}})),v.videoClickTrackingURLTemplates&&v.videoClickTrackingURLTemplates.length&&b.creatives.forEach((function(x){x.type==="linear"&&(x.videoClickTrackingURLTemplates=x.videoClickTrackingURLTemplates.concat(v.videoClickTrackingURLTemplates))})),v.videoCustomClickURLTemplates&&v.videoCustomClickURLTemplates.length&&b.creatives.forEach((function(x){x.type==="linear"&&(x.videoCustomClickURLTemplates=x.videoCustomClickURLTemplates.concat(v.videoCustomClickURLTemplates))})),v.videoClickThroughURLTemplate&&b.creatives.forEach((function(x){x.type==="linear"&&x.videoClickThroughURLTemplate==null&&(x.videoClickThroughURLTemplate=v.videoClickThroughURLTemplate)}))};function po(b,v){var x=new Vi(v);return yr(b,"Companion").forEach((function(S){var k=new $i;k.id=S.getAttribute("id")||null,k.width=S.getAttribute("width"),k.height=S.getAttribute("height"),k.companionClickTrackingURLTemplates=[],yr(S,"HTMLResource").forEach((function(F){k.type=F.getAttribute("creativeType")||"text/html",k.htmlResource=tr(F)})),yr(S,"IFrameResource").forEach((function(F){k.type=F.getAttribute("creativeType")||0,k.iframeResource=tr(F)})),yr(S,"StaticResource").forEach((function(F){k.type=F.getAttribute("creativeType")||0,yr(S,"AltText").forEach((function(_){k.altText=tr(_)})),k.staticResource=tr(F)})),yr(S,"TrackingEvents").forEach((function(F){yr(F,"Tracking").forEach((function(_){var H=_.getAttribute("event"),V=tr(_);H&&V&&(k.trackingEvents[H]==null&&(k.trackingEvents[H]=[]),k.trackingEvents[H].push(V))}))})),yr(S,"CompanionClickTracking").forEach((function(F){k.companionClickTrackingURLTemplates.push(tr(F))})),k.companionClickThroughURLTemplate=tr(Nr(S,"CompanionClickThrough")),k.companionClickTrackingURLTemplate=tr(Nr(S,"CompanionClickTracking")),x.variations.push(k)})),x}var ps=(function(b){function v(){var x,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Vr(this,v),(x=ui(this,v,[S])).type="linear",x.duration=0,x.skipDelay=null,x.mediaFiles=[],x.videoClickThroughURLTemplate=null,x.videoClickTrackingURLTemplates=[],x.videoCustomClickURLTemplates=[],x.adParameters=null,x.icons=[],x}return Yn(v,b),Kr(v)})(Wi),mo=Kr((function b(){Vr(this,b),this.program=null,this.height=0,this.width=0,this.xPosition=0,this.yPosition=0,this.apiFramework=null,this.offset=null,this.duration=0,this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.iconClickThroughURLTemplate=null,this.iconClickTrackingURLTemplates=[],this.iconViewTrackingURLTemplate=null})),vo=Kr((function b(){Vr(this,b),this.id=null,this.fileURL=null,this.deliveryType="progressive",this.mimeType=null,this.codec=null,this.bitrate=0,this.minBitrate=0,this.maxBitrate=0,this.width=0,this.height=0,this.apiFramework=null,this.scalable=null,this.maintainAspectRatio=null}));function yo(b,v){var x,S=new ps(v);S.duration=jn(tr(Nr(b,"Duration")));var k=b.getAttribute("skipoffset");if(k==null)S.skipDelay=null;else if(k.charAt(k.length-1)==="%"&&S.duration!==-1){var F=parseInt(k,10);S.skipDelay=S.duration*(F/100)}else S.skipDelay=jn(k);var _=Nr(b,"VideoClicks");_&&(S.videoClickThroughURLTemplate=tr(Nr(_,"ClickThrough")),yr(_,"ClickTracking").forEach((function(Y){S.videoClickTrackingURLTemplates.push(tr(Y))})),yr(_,"CustomClick").forEach((function(Y){S.videoCustomClickURLTemplates.push(tr(Y))})));var H=Nr(b,"AdParameters");H&&(S.adParameters=tr(H)),yr(b,"TrackingEvents").forEach((function(Y){yr(Y,"Tracking").forEach((function(ue){var z=ue.getAttribute("event"),ee=tr(ue);if(z&&ee){if(z==="progress"){if(!(x=ue.getAttribute("offset")))return;z=x.charAt(x.length-1)==="%"?"progress-".concat(x):"progress-".concat(Math.round(jn(x)))}S.trackingEvents[z]==null&&(S.trackingEvents[z]=[]),S.trackingEvents[z].push(ee)}}))})),yr(b,"MediaFiles").forEach((function(Y){yr(Y,"MediaFile").forEach((function(ue){var z=new vo;z.id=ue.getAttribute("id"),z.fileURL=tr(ue),z.deliveryType=ue.getAttribute("delivery"),z.codec=ue.getAttribute("codec"),z.mimeType=ue.getAttribute("type"),z.apiFramework=ue.getAttribute("apiFramework"),z.bitrate=parseInt(ue.getAttribute("bitrate")||0),z.minBitrate=parseInt(ue.getAttribute("minBitrate")||0),z.maxBitrate=parseInt(ue.getAttribute("maxBitrate")||0),z.width=parseInt(ue.getAttribute("width")||0),z.height=parseInt(ue.getAttribute("height")||0);var ee=ue.getAttribute("scalable");ee&&typeof ee=="string"&&((ee=ee.toLowerCase())==="true"?z.scalable=!0:ee==="false"&&(z.scalable=!1));var ne=ue.getAttribute("maintainAspectRatio");ne&&typeof ne=="string"&&((ne=ne.toLowerCase())==="true"?z.maintainAspectRatio=!0:ne==="false"&&(z.maintainAspectRatio=!1)),S.mediaFiles.push(z)}))}));var V=Nr(b,"Icons");return V&&yr(V,"Icon").forEach((function(Y){var ue=new mo;ue.program=Y.getAttribute("program"),ue.height=parseInt(Y.getAttribute("height")||0),ue.width=parseInt(Y.getAttribute("width")||0),ue.xPosition=(function(ee){return["left","right"].indexOf(ee)!==-1?ee:parseInt(ee||0)})(Y.getAttribute("xPosition")),ue.yPosition=(function(ee){return["top","bottom"].indexOf(ee)!==-1?ee:parseInt(ee||0)})(Y.getAttribute("yPosition")),ue.apiFramework=Y.getAttribute("apiFramework"),ue.offset=jn(Y.getAttribute("offset")),ue.duration=jn(Y.getAttribute("duration")),yr(Y,"HTMLResource").forEach((function(ee){ue.type=ee.getAttribute("creativeType")||"text/html",ue.htmlResource=tr(ee)})),yr(Y,"IFrameResource").forEach((function(ee){ue.type=ee.getAttribute("creativeType")||0,ue.iframeResource=tr(ee)})),yr(Y,"StaticResource").forEach((function(ee){ue.type=ee.getAttribute("creativeType")||0,ue.staticResource=tr(ee)}));var z=Nr(Y,"IconClicks");z&&(ue.iconClickThroughURLTemplate=tr(Nr(z,"IconClickThrough")),yr(z,"IconClickTracking").forEach((function(ee){ue.iconClickTrackingURLTemplates.push(tr(ee))}))),ue.iconViewTrackingURLTemplate=tr(Nr(Y,"IconViewTracking")),S.icons.push(ue)})),S}var Hi,ms=(function(b){function v(){var x,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Vr(this,v),(x=ui(this,v,[S])).type="nonlinear",x.variations=[],x}return Yn(v,b),Kr(v)})(Wi),vs=Kr((function b(){Vr(this,b),this.id=null,this.width=0,this.height=0,this.expandedWidth=0,this.expandedHeight=0,this.scalable=!0,this.maintainAspectRatio=!0,this.minSuggestedDuration=0,this.apiFramework="static",this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.nonlinearClickThroughURLTemplate=null,this.nonlinearClickTrackingURLTemplates=[],this.adParameters=null}));function ys(b,v){var x=new ms(v);return yr(b,"TrackingEvents").forEach((function(S){var k,F;yr(S,"Tracking").forEach((function(_){k=_.getAttribute("event"),F=tr(_),k&&F&&(x.trackingEvents[k]==null&&(x.trackingEvents[k]=[]),x.trackingEvents[k].push(F))}))})),yr(b,"NonLinear").forEach((function(S){var k=new vs;k.id=S.getAttribute("id")||null,k.width=S.getAttribute("width"),k.height=S.getAttribute("height"),k.expandedWidth=S.getAttribute("expandedWidth"),k.expandedHeight=S.getAttribute("expandedHeight"),k.scalable=bn(S.getAttribute("scalable")),k.maintainAspectRatio=bn(S.getAttribute("maintainAspectRatio")),k.minSuggestedDuration=jn(S.getAttribute("minSuggestedDuration")),k.apiFramework=S.getAttribute("apiFramework"),yr(S,"HTMLResource").forEach((function(_){k.type=_.getAttribute("creativeType")||"text/html",k.htmlResource=tr(_)})),yr(S,"IFrameResource").forEach((function(_){k.type=_.getAttribute("creativeType")||0,k.iframeResource=tr(_)})),yr(S,"StaticResource").forEach((function(_){k.type=_.getAttribute("creativeType")||0,k.staticResource=tr(_)}));var F=Nr(S,"AdParameters");F&&(k.adParameters=tr(F)),k.nonlinearClickThroughURLTemplate=tr(Nr(S,"NonLinearClickThrough")),yr(S,"NonLinearClickTracking").forEach((function(_){k.nonlinearClickTrackingURLTemplates.push(tr(_))})),x.variations.push(k)})),x}function ji(b){var v=b.childNodes;for(var x in v){var S=v[x];if(["Wrapper","InLine"].indexOf(S.nodeName)!==-1){if(bi("id",b,S),bi("sequence",b,S),S.nodeName==="Wrapper")return Es(S);if(S.nodeName==="InLine")return ci(S)}}}function ci(b){var v=b.childNodes,x=new fs;for(var S in x.id=b.getAttribute("id")||null,x.sequence=b.getAttribute("sequence")||null,v){var k=v[S];switch(k.nodeName){case"Error":x.errorURLTemplates.push(tr(k));break;case"Impression":x.impressionURLTemplates.push(tr(k));break;case"Creatives":yr(k,"Creative").forEach((function(F){var _={id:F.getAttribute("id")||null,adId:Ki(F),sequence:F.getAttribute("sequence")||null,apiFramework:F.getAttribute("apiFramework")||null};for(var H in F.childNodes){var V=F.childNodes[H];switch(V.nodeName){case"Linear":var Y=yo(V,_);Y&&x.creatives.push(Y);break;case"NonLinearAds":var ue=ys(V,_);ue&&x.creatives.push(ue);break;case"CompanionAds":var z=po(V,_);z&&x.creatives.push(z)}}}));break;case"Extensions":Eo(x.extensions,yr(k,"Extension"));break;case"AdSystem":x.system={value:tr(k),version:k.getAttribute("version")||null};break;case"AdTitle":x.title=tr(k);break;case"Description":x.description=tr(k);break;case"Advertiser":x.advertiser=tr(k);break;case"Pricing":x.pricing={value:tr(k),model:k.getAttribute("model")||null,currency:k.getAttribute("currency")||null};break;case"Survey":x.survey=tr(k)}}return x}function Es(b){var v=ci(b),x=Nr(b,"VASTAdTagURI");if(x?v.nextWrapperURL=tr(x):(x=Nr(b,"VASTAdTagURL"))&&(v.nextWrapperURL=tr(Nr(x,"URL"))),v.creatives.forEach((function(S){if(["linear","nonlinear"].indexOf(S.type)!==-1){if(S.trackingEvents){v.trackingEvents||(v.trackingEvents={}),v.trackingEvents[S.type]||(v.trackingEvents[S.type]={});var k=function(_){var H=S.trackingEvents[_];v.trackingEvents[S.type][_]||(v.trackingEvents[S.type][_]=[]),H.forEach((function(V){v.trackingEvents[S.type][_].push(V)}))};for(var F in S.trackingEvents)k(F)}S.videoClickTrackingURLTemplates&&(v.videoClickTrackingURLTemplates||(v.videoClickTrackingURLTemplates=[]),S.videoClickTrackingURLTemplates.forEach((function(_){v.videoClickTrackingURLTemplates.push(_)}))),S.videoClickThroughURLTemplate&&(v.videoClickThroughURLTemplate=S.videoClickThroughURLTemplate),S.videoCustomClickURLTemplates&&(v.videoCustomClickURLTemplates||(v.videoCustomClickURLTemplates=[]),S.videoCustomClickURLTemplates.forEach((function(_){v.videoCustomClickURLTemplates.push(_)})))}})),v.nextWrapperURL)return v}function Eo(b,v){v.forEach((function(x){var S=new ds,k=x.attributes,F=x.childNodes;if(x.attributes)for(var _ in k){var H=k[_];H.nodeName&&H.nodeValue&&(S.attributes[H.nodeName]=H.nodeValue)}for(var V in F){var Y=F[V],ue=tr(Y);if(Y.nodeName!=="#comment"&&ue!==""){var z=new hs;if(z.name=Y.nodeName,z.value=ue,Y.attributes){var ee=Y.attributes;for(var ne in ee){var X=ee[ne];z.attributes[X.nodeName]=X.nodeValue}}S.children.push(z)}}b.push(S)}))}function Ki(b){return b.getAttribute("AdID")||b.getAttribute("adID")||b.getAttribute("adId")||null}function On(){}function mr(){mr.init.call(this)}function bs(b){return b._maxListeners===void 0?mr.defaultMaxListeners:b._maxListeners}function xi(b,v,x,S){var k,F,_;if(typeof x!="function")throw new TypeError('"listener" argument must be a function');if((F=b._events)?(F.newListener&&(b.emit("newListener",v,x.listener?x.listener:x),F=b._events),_=F[v]):(F=b._events=new On,b._eventsCount=0),_){if(typeof _=="function"?_=F[v]=S?[x,_]:[_,x]:S?_.unshift(x):_.push(x),!_.warned&&(k=bs(b))&&k>0&&_.length>k){_.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+_.length+" "+v+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=b,H.type=v,H.count=_.length,(function(V){typeof console.warn=="function"?console.warn(V):console.log(V)})(H)}}else _=F[v]=x,++b._eventsCount;return b}function zi(b,v,x){var S=!1;function k(){b.removeListener(v,k),S||(S=!0,x.apply(b,arguments))}return k.listener=x,k}function Ti(b){var v=this._events;if(v){var x=v[b];if(typeof x=="function")return 1;if(x)return x.length}return 0}function O(b,v){for(var x=new Array(v);v--;)x[v]=b[v];return x}On.prototype=Object.create(null),mr.EventEmitter=mr,mr.usingDomains=!1,mr.prototype.domain=void 0,mr.prototype._events=void 0,mr.prototype._maxListeners=void 0,mr.defaultMaxListeners=10,mr.init=function(){this.domain=null,mr.usingDomains&&(!Hi.active||this instanceof Hi.Domain||(this.domain=Hi.active)),this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new On,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},mr.prototype.setMaxListeners=function(b){if(typeof b!="number"||b<0||isNaN(b))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=b,this},mr.prototype.getMaxListeners=function(){return bs(this)},mr.prototype.emit=function(b){var v,x,S,k,F,_,H,V=b==="error";if(_=this._events)V=V&&_.error==null;else if(!V)return!1;if(H=this.domain,V){if(v=arguments[1],!H){if(v instanceof Error)throw v;var Y=new Error('Uncaught, unspecified "error" event. ('+v+")");throw Y.context=v,Y}return v||(v=new Error('Uncaught, unspecified "error" event')),v.domainEmitter=this,v.domain=H,v.domainThrown=!1,H.emit("error",v),!1}if(!(x=_[b]))return!1;var ue=typeof x=="function";switch(S=arguments.length){case 1:(function(z,ee,ne){if(ee)z.call(ne);else for(var X=z.length,j=O(z,X),se=0;se<X;++se)j[se].call(ne)})(x,ue,this);break;case 2:(function(z,ee,ne,X){if(ee)z.call(ne,X);else for(var j=z.length,se=O(z,j),re=0;re<j;++re)se[re].call(ne,X)})(x,ue,this,arguments[1]);break;case 3:(function(z,ee,ne,X,j){if(ee)z.call(ne,X,j);else for(var se=z.length,re=O(z,se),ae=0;ae<se;++ae)re[ae].call(ne,X,j)})(x,ue,this,arguments[1],arguments[2]);break;case 4:(function(z,ee,ne,X,j,se){if(ee)z.call(ne,X,j,se);else for(var re=z.length,ae=O(z,re),le=0;le<re;++le)ae[le].call(ne,X,j,se)})(x,ue,this,arguments[1],arguments[2],arguments[3]);break;default:for(k=new Array(S-1),F=1;F<S;F++)k[F-1]=arguments[F];(function(z,ee,ne,X){if(ee)z.apply(ne,X);else for(var j=z.length,se=O(z,j),re=0;re<j;++re)se[re].apply(ne,X)})(x,ue,this,k)}return!0},mr.prototype.addListener=function(b,v){return xi(this,b,v,!1)},mr.prototype.on=mr.prototype.addListener,mr.prototype.prependListener=function(b,v){return xi(this,b,v,!0)},mr.prototype.once=function(b,v){if(typeof v!="function")throw new TypeError('"listener" argument must be a function');return this.on(b,zi(this,b,v)),this},mr.prototype.prependOnceListener=function(b,v){if(typeof v!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(b,zi(this,b,v)),this},mr.prototype.removeListener=function(b,v){var x,S,k,F,_;if(typeof v!="function")throw new TypeError('"listener" argument must be a function');if(!(S=this._events))return this;if(!(x=S[b]))return this;if(x===v||x.listener&&x.listener===v)--this._eventsCount==0?this._events=new On:(delete S[b],S.removeListener&&this.emit("removeListener",b,x.listener||v));else if(typeof x!="function"){for(k=-1,F=x.length;F-- >0;)if(x[F]===v||x[F].listener&&x[F].listener===v){_=x[F].listener,k=F;break}if(k<0)return this;if(x.length===1){if(x[0]=void 0,--this._eventsCount==0)return this._events=new On,this;delete S[b]}else(function(H,V){for(var Y=V,ue=Y+1,z=H.length;ue<z;Y+=1,ue+=1)H[Y]=H[ue];H.pop()})(x,k);S.removeListener&&this.emit("removeListener",b,_||v)}return this},mr.prototype.removeAllListeners=function(b){var v,x;if(!(x=this._events))return this;if(!x.removeListener)return arguments.length===0?(this._events=new On,this._eventsCount=0):x[b]&&(--this._eventsCount==0?this._events=new On:delete x[b]),this;if(arguments.length===0){for(var S,k=Object.keys(x),F=0;F<k.length;++F)(S=k[F])!=="removeListener"&&this.removeAllListeners(S);return this.removeAllListeners("removeListener"),this._events=new On,this._eventsCount=0,this}if(typeof(v=x[b])=="function")this.removeListener(b,v);else if(v)do this.removeListener(b,v[v.length-1]);while(v[0]);return this},mr.prototype.listeners=function(b){var v,x=this._events;return x&&(v=x[b])?typeof v=="function"?[v.listener||v]:(function(S){for(var k=new Array(S.length),F=0;F<k.length;++F)k[F]=S[F].listener||S[F];return k})(v):[]},mr.listenerCount=function(b,v){return typeof b.listenerCount=="function"?b.listenerCount(v):Ti.call(b,v)},mr.prototype.listenerCount=Ti,mr.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var $=function(b,v,x){var S=typeof window.ActiveXObject=="function"?new window.ActiveXObject("Microsoft.XMLDOM"):void 0;if(!S)return x(new Error("FlashURLHandler: Microsoft.XMLDOM format not supported"));S.async=!1,request.open("GET",b),request.timeout=v.timeout||0,request.withCredentials=v.withCredentials||!1,request.send(),request.onprogress=function(){},request.onload=function(){S.loadXML(request.responseText),x(null,S)}},oe=function(){return window.XDomainRequest&&(b=new XDomainRequest),!!b;var b},ce=function(b,v,x){x(new Error("Please bundle the library for node to use the node urlHandler"))};function ge(){try{var b=new window.XMLHttpRequest;return"withCredentials"in b?b:null}catch(v){return console.log("Error in XHRURLHandler support check:",v),null}}var he=function(b,v,x){if(window.location.protocol==="https:"&&b.indexOf("http://")===0)return x(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{var S=ge();S.open("GET",b),S.timeout=v.timeout||0,S.withCredentials=v.withCredentials||!1,S.overrideMimeType&&S.overrideMimeType("text/xml"),S.onreadystatechange=function(){S.readyState===4&&(S.status===200?x(null,S.responseXML):x(new Error("XHRURLHandler: ".concat(S.statusText))))},S.send()}catch{x(new Error("XHRURLHandler: Unexpected error"))}},Te=function(){return!!ge()},Ue={get:function(b,v,x){return x||(typeof v=="function"&&(x=v),v={}),typeof window>"u"||window===null?ce(b,v,x):Te()?he(b,v,x):oe()?$(b,v,x):x(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}},Vt=Kr((function b(){Vr(this,b),this.ads=[],this.errorURLTemplates=[]})),jt={ERRORCODE:900,extensions:[]},Tr=(function(b){function v(){var x;return Vr(this,v),(x=ui(this,v)).remainingAds=[],x.parentURLs=[],x.errorURLTemplates=[],x.rootErrorURLTemplates=[],x.maxWrapperDepth=null,x.URLTemplateFilters=[],x.fetchingOptions={},x}return Yn(v,b),Kr(v,[{key:"addURLTemplateFilter",value:function(x){typeof x=="function"&&this.URLTemplateFilters.push(x)}},{key:"removeURLTemplateFilter",value:function(){this.URLTemplateFilters.pop()}},{key:"countURLTemplateFilters",value:function(){return this.URLTemplateFilters.length}},{key:"clearURLTemplateFilters",value:function(){this.URLTemplateFilters=[]}},{key:"trackVastError",value:function(x,S){for(var k=arguments.length,F=new Array(k>2?k-2:0),_=2;_<k;_++)F[_-2]=arguments[_];this.emit("VAST-error",Object.assign.apply(Object,[jt,S].concat(F))),Hn.track(x,S)}},{key:"getErrorURLTemplates",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:"fetchVAST",value:function(x,S,k){var F=this;return new Promise((function(_,H){F.URLTemplateFilters.forEach((function(V){x=V(x)})),F.parentURLs.push(x),F.emit("VAST-resolving",{url:x,wrapperDepth:S,originalUrl:k}),F.urlHandler.get(x,F.fetchingOptions,(function(V,Y){F.emit("VAST-resolved",{url:x,error:V}),V?H(V):_(Y)}))}))}},{key:"initParsingStatus",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.rootURL="",this.remainingAds=[],this.parentURLs=[],this.errorURLTemplates=[],this.rootErrorURLTemplates=[],this.maxWrapperDepth=x.wrapperLimit||10,this.fetchingOptions={timeout:x.timeout,withCredentials:x.withCredentials},this.urlHandler=x.urlhandler||Ue}},{key:"getRemainingAds",value:function(x){var S=this;if(this.remainingAds.length===0)return Promise.reject(new Error("No more ads are available for the given VAST"));var k=x?Hn.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(k,{wrapperDepth:0,originalUrl:this.rootURL}).then((function(F){return S.buildVASTResponse(F)}))}},{key:"getAndParseVAST",value:function(x){var S=this,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.initParsingStatus(k),this.rootURL=x,this.fetchVAST(x).then((function(F){return k.originalUrl=x,k.isRootVAST=!0,S.parse(F,k).then((function(_){return S.buildVASTResponse(_)}))}))}},{key:"parseVAST",value:function(x){var S=this,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.initParsingStatus(k),k.isRootVAST=!0,this.parse(x,k).then((function(F){return S.buildVASTResponse(F)}))}},{key:"buildVASTResponse",value:function(x){var S=new Vt;return S.ads=x,S.errorURLTemplates=this.getErrorURLTemplates(),this.completeWrapperResolving(S),S}},{key:"parse",value:function(x,S){var k=S.resolveAll,F=k===void 0||k,_=S.wrapperSequence,H=_===void 0?null:_,V=S.originalUrl,Y=V===void 0?null:V,ue=S.wrapperDepth,z=ue===void 0?0:ue,ee=S.isRootVAST,ne=ee!==void 0&&ee;if(!x||!x.documentElement||x.documentElement.nodeName!=="VAST")return Promise.reject(new Error("Invalid VAST XMLDocument"));var X=[],j=x.documentElement.childNodes;for(var se in j){var re=j[se];if(re.nodeName==="Error"){var ae=tr(re);ne?this.rootErrorURLTemplates.push(ae):this.errorURLTemplates.push(ae)}if(re.nodeName==="Ad"){var le=ji(re);le?X.push(le):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}var ie=X.length,xe=X[ie-1];return ie===1&&H!=null&&xe&&!xe.sequence&&(xe.sequence=H),F===!1&&(this.remainingAds=gs(X),X=this.remainingAds.shift()),this.resolveAds(X,{wrapperDepth:z,originalUrl:Y})}},{key:"resolveAds",value:function(){var x=this,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],k=arguments.length>1?arguments[1]:void 0,F=k.wrapperDepth,_=k.originalUrl,H=[];return S.forEach((function(V){var Y=x.resolveWrappers(V,F,_);H.push(Y)})),Promise.all(H).then((function(V){var Y=Hn.flatten(V);if(!Y&&x.remainingAds.length>0){var ue=x.remainingAds.shift();return x.resolveAds(ue,{wrapperDepth:F,originalUrl:_})}return Y}))}},{key:"resolveWrappers",value:function(x,S,k){var F=this;return new Promise((function(_,H){if(S++,!x.nextWrapperURL)return delete x.nextWrapperURL,_(x);if(S>=F.maxWrapperDepth||F.parentURLs.indexOf(x.nextWrapperURL)!==-1)return x.errorCode=302,delete x.nextWrapperURL,_(x);x.nextWrapperURL=As(x.nextWrapperURL,k);var V=x.sequence;k=x.nextWrapperURL,F.fetchVAST(x.nextWrapperURL,S,k).then((function(Y){return F.parse(Y,{originalUrl:k,wrapperSequence:V,wrapperDepth:S}).then((function(ue){if(delete x.nextWrapperURL,ue.length===0)return x.creatives=[],_(x);ue.forEach((function(z){z&&Ci(z,x)})),_(ue)}))})).catch((function(Y){x.errorCode=301,x.errorMessage=Y.message,_(x)}))}))}},{key:"completeWrapperResolving",value:function(x){if(x.ads.length===0)this.trackVastError(x.errorURLTemplates,{ERRORCODE:303});else for(var S=x.ads.length-1;S>=0;S--){var k=x.ads[S];(k.errorCode||k.creatives.length===0)&&(this.trackVastError(k.errorURLTemplates.concat(x.errorURLTemplates),{ERRORCODE:k.errorCode||303},{ERRORMESSAGE:k.errorMessage||""},{extensions:k.extensions},{system:k.system}),x.ads.splice(S,1))}}}])})(mr),_r=null,Kn={data:{},length:0,getItem:function(b){return this.data[b]},setItem:function(b,v){this.data[b]=v,this.length=Object.keys(this.data).length},removeItem:function(b){delete data[b],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},zn=(function(){return Kr((function b(){Vr(this,b),this.storage=this.initStorage()}),[{key:"initStorage",value:function(){if(_r)return _r;try{_r=typeof window<"u"&&window!==null?window.localStorage||window.sessionStorage:null}catch{_r=null}return _r&&!this.isStorageDisabled(_r)||(_r=Kn).clear(),_r}},{key:"isStorageDisabled",value:function(b){var v="__VASTStorage__";try{if(b.setItem(v,v),b.getItem(v)!==v)return b.removeItem(v),!0}catch{return!0}return b.removeItem(v),!1}},{key:"getItem",value:function(b){return this.storage.getItem(b)}},{key:"setItem",value:function(b,v){return this.storage.setItem(b,v)}},{key:"removeItem",value:function(b){return this.storage.removeItem(b)}},{key:"clear",value:function(){return this.storage.clear()}}])})(),An=(function(){return Kr((function b(v,x,S){Vr(this,b),this.cappingFreeLunch=v||0,this.cappingMinimumTimeInterval=x||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new Tr,this.storage=S||new zn,this.lastSuccessfulAd===void 0&&(this.lastSuccessfulAd=0),this.totalCalls===void 0&&(this.totalCalls=0),this.totalCallsTimeout===void 0&&(this.totalCallsTimeout=0)}),[{key:"getParser",value:function(){return this.vastParser}},{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(b){this.storage.setItem("vast-client-last-successful-ad",b)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(b){this.storage.setItem("vast-client-total-calls",b)}},{key:"totalCallsTimeout",get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(b){this.storage.setItem("vast-client-total-calls-timeout",b)}},{key:"hasRemainingAds",value:function(){return this.vastParser.remainingAds.length>0}},{key:"getNextAds",value:function(b){return this.vastParser.getRemainingAds(b)}},{key:"get",value:function(b){var v=this,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S=Date.now();return(x=Object.assign(this.defaultOptions,x)).hasOwnProperty("resolveAll")||(x.resolveAll=!1),this.totalCallsTimeout<S?(this.totalCalls=1,this.totalCallsTimeout=S+36e5):this.totalCalls++,new Promise((function(k,F){if(v.cappingFreeLunch>=v.totalCalls)return F(new Error("VAST call canceled – FreeLunch capping not reached yet ".concat(v.totalCalls,"/").concat(v.cappingFreeLunch)));var _=S-v.lastSuccessfulAd;if(_<0)v.lastSuccessfulAd=0;else if(_<v.cappingMinimumTimeInterval)return F(new Error("VAST call canceled – (".concat(v.cappingMinimumTimeInterval,")ms minimum interval reached")));v.vastParser.getAndParseVAST(b,x).then((function(H){return k(H)})).catch((function(H){return F(H)}))}))}}])})(),qi=(function(b){function v(x,S,k){var F,_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;for(var H in Vr(this,v),(F=ui(this,v)).ad=S,F.creative=k,F.variation=_,F.muted=!1,F.impressed=!1,F.skippable=!1,F.trackingEvents={},F._alreadyTriggeredQuartiles={},F.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],F.creative.trackingEvents){var V=F.creative.trackingEvents[H];F.trackingEvents[H]=V.slice(0)}return F.creative instanceof ps?F._initLinearTracking():F._initVariationTracking(),x&&F.on("start",(function(){x.lastSuccessfulAd=Date.now()})),F}return Yn(v,b),Kr(v,[{key:"_initLinearTracking",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:"_initVariationTracking",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var x in this.variation.trackingEvents){var S=this.variation.trackingEvents[x];this.trackingEvents[x]?this.trackingEvents[x]=this.trackingEvents[x].concat(S.slice(0)):this.trackingEvents[x]=S.slice(0)}this.variation instanceof vs?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):this.variation instanceof $i&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:"setDuration",value:function(x){this.assetDuration=x,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}}},{key:"setProgress",value:function(x){var S=this,k=this.skipDelay||-1;if(k===-1||this.skippable||(k>x?this.emit("skip-countdown",k-x):(this.skippable=!0,this.emit("skip-countdown",0))),this.assetDuration>0){var F=[];if(x>0){var _=Math.round(x/this.assetDuration*100);for(var H in F.push("start"),F.push("progress-".concat(_,"%")),F.push("progress-".concat(Math.round(x))),this.quartiles)this.isQuartileReached(H,this.quartiles[H],x)&&(F.push(H),this._alreadyTriggeredQuartiles[H]=!0)}F.forEach((function(V){S.track(V,!0)})),x<this.progress&&this.track("rewind")}this.progress=x}},{key:"isQuartileReached",value:function(x,S,k){var F=!1;return S<=k&&!this._alreadyTriggeredQuartiles[x]&&(F=!0),F}},{key:"setMuted",value:function(x){this.muted!==x&&this.track(x?"mute":"unmute"),this.muted=x}},{key:"setPaused",value:function(x){this.paused!==x&&this.track(x?"pause":"resume"),this.paused=x}},{key:"setFullscreen",value:function(x){this.fullscreen!==x&&this.track(x?"fullscreen":"exitFullscreen"),this.fullscreen=x}},{key:"setExpand",value:function(x){this.expanded!==x&&this.track(x?"expand":"collapse"),this.expanded=x}},{key:"setSkipDelay",value:function(x){typeof x=="number"&&(this.skipDelay=x)}},{key:"trackImpression",value:function(){this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates),this.track("creativeView"))}},{key:"errorWithCode",value:function(x){this.trackURLs(this.ad.errorURLTemplates,{ERRORCODE:x})}},{key:"complete",value:function(){this.track("complete")}},{key:"close",value:function(){this.track(this.linear?"closeLinear":"close")}},{key:"skip",value:function(){this.track("skip"),this.trackingEvents=[]}},{key:"click",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates);var S=this.clickThroughURLTemplate||x;if(S){var k=this.linear?{CONTENTPLAYHEAD:this.progressFormatted()}:{},F=Hn.resolveURLTemplates([S],k)[0];this.emit("clickthrough",F)}}},{key:"track",value:function(x){var S=arguments.length>1&&arguments[1]!==void 0&&arguments[1];x==="closeLinear"&&!this.trackingEvents[x]&&this.trackingEvents.close&&(x="close");var k=this.trackingEvents[x],F=this.emitAlwaysEvents.indexOf(x)>-1;k?(this.emit(x,""),this.trackURLs(k)):F&&this.emit(x,""),S&&(delete this.trackingEvents[x],F&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(x),1))}},{key:"trackURLs",value:function(x){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(S.ASSETURI=this.creative.mediaFiles[0].fileURL),S.CONTENTPLAYHEAD=this.progressFormatted()),Hn.track(x,S)}},{key:"progressFormatted",value:function(){var x=parseInt(this.progress),S=x/3600;S.length<2&&(S="0".concat(S));var k=x/60%60;k.length<2&&(k="0".concat(k));var F=x%60;return F.length<2&&(F="0".concat(k)),"".concat(S,":").concat(k,":").concat(F,".").concat(parseInt(100*(this.progress-x)))}}])})(mr),Cs=function(b,v,x,S){var k,F={},_={started:!1,active:!1,isVideoEnded:!1,lang:x.getLanguage()},H=null,V="",Y=null,ue="",z="",ee=!1,ne=x.getBrowser(),X=ne.os==="Android"||ne.os==="iOS";(k=document.createElement("div")).setAttribute("class","op-ads"),k.setAttribute("id","op-ads"),x.getContainer().append(k),(Y=document.createElement("video")).setAttribute("playsinline","true"),Y.setAttribute("title","Advertisement"),Y.setAttribute("class","op-ads-vast-video"),(z=document.createElement("div")).setAttribute("class","op-ads-button"),(ue=document.createElement("div")).setAttribute("class","op-ads-textview"),z.append(ue),k.append(Y),k.append(z),V=k;var j=new An,se=null,re=null,ae=function(le){console.log(le),Y.style.display="none",v.trigger(fr,{code:le.code,message:le.message}),_.active=!1,_.started=!0,v.play()};return F.isActive=function(){return _.active},F.started=function(){return _.started},F.play=function(){return _.started?Y.play():new Promise((function(le,ie){var xe=function(){v.metaLoaded()?(OvenPlayerConsole.log("VAST : main contents meta loaded."),(function(){OvenPlayerConsole.log("VAST : checkAutoplaySupport() ");var Me=document.createElement("video");Me.setAttribute("playsinline","true"),Me.src=en,Me.load(),Y.load(),X&&v.getName()!==me&&b.load();var Je=function(De,We){ee=De,Me.pause(),Me.remove()};return new Promise((function(De,We){if(Me.play){var Ye=Me.play();Ye!==void 0?Ye.then((function(){OvenPlayerConsole.log("VAST : auto play allowed."),Je(!0),De()})).catch((function(Ie){OvenPlayerConsole.log("VAST : auto play failed",Ie.message),Je(!1),De()})):(OvenPlayerConsole.log("VAST : promise not support"),Je(!0),De())}else OvenPlayerConsole.log("VAST : !temporarySupportCheckVideo.play"),Je(!0),De()}))})().then((function(){x.isAutoStart()&&!ee?(OvenPlayerConsole.log("VAST : autoplayAllowed : false"),_.started=!1,ie(new Error("autoplayNotAllowed"))):(j.get(S).then((function(Me){if(OvenPlayerConsole.log("VAST : initRequest()"),!(re=Me.ads[0]))throw{code:401,message:"File not found. Unable to find Linear/MediaFile from URI."};se=new qi(j,re,re.creatives[0]),OvenPlayerConsole.log("VAST : created ad tracker."),H=(function(De,We,Ye,Ie,Se,ze,He){var lt={},tt={},ye=de(ze),we=de(Se),je=de(De);Ye.on(Qr,(function(nt){nt.mute?De.muted=!0:(De.muted=!1,De.volume=nt.volume/100)}),tt);var rt=function(){Ie.active=!1,we.hide(),!Ie.started||Ye.getPosition()!==0&&Ie.isVideoEnded||(je.hide(),Ye.play()),Ye.trigger(at)},St=function(nt){ye.hasClass("videoAdUiAction")&&(We.skip(),De.pause(),rt())};return ze.addEventListener("click",St,!1),lt.error=function(){OvenPlayerConsole.log("VAST : listener : error.",De.error),console.log("VAST : listener : error.",De.error);var nt={},wt=De.error&&De.error.code||0;wt===2?(nt.code=402,nt.message="Timeout of MediaFile URI."):wt===3?(nt.code=405,nt.message="Problem displaying MediaFile. Video player found a MediaFile with supported type but couldn’t display it. MediaFile may include: unsupported codecs, different MIME type than MediaFile@type, unsupported delivery method, etc."):wt===4?(nt.code=403,nt.message="Couldn’t find MediaFile that is supported by this video player, based on the attributes of the MediaFile element."):(nt.code=400,nt.message="General Linear error. Video player is unable to display the Linear Ad."),We.errorWithCode(nt.code),He("405")},lt.canplay=function(){},lt.ended=function(){We.complete(),rt()},lt.click=function(nt){We.click()},lt.play=function(){We.setPaused(!1)},lt.pause=function(){We.setPaused(!0)},lt.timeupdate=function(nt){We.setProgress(nt.target.currentTime),Ye.trigger(Rr,{duration:De.duration,position:De.currentTime})},lt.volumechange=function(nt){OvenPlayerConsole.log("VAST : listener : Ad Video Volumechange."),We.setMuted(nt.target.muted)},lt.loadedmetadata=function(){OvenPlayerConsole.log("VAST : listener : Ad CONTENT LOADED ."),Mt===Ye.getState()&&Ye.pause(),We.trackImpression(),Ye.trigger(ft,{remaining:De.duration,isLinear:!0}),De.play()},We.on("skip",(function(){OvenPlayerConsole.log("VAST : listener : skipped")})),We.on("mute",(function(){OvenPlayerConsole.log("VAST : listener : muted")})),We.on("unmute",(function(){OvenPlayerConsole.log("VAST : listener : unmuted")})),We.on("resume",(function(){OvenPlayerConsole.log("VAST : listener : vastTracker resumed."),Ie.started&&Ye.setState(be)})),We.on("pause",(function(){OvenPlayerConsole.log("VAST : listener : vastTracker paused."),Ye.setState(Xe)})),We.on("clickthrough",(function(nt){OvenPlayerConsole.log("VAST : listener : clickthrough :",nt),window.open(nt,"_blank")})),We.on("skip-countdown",(function(nt){nt===0?(Ie.lang==="ko"?ye.html("광고 건너뛰기<i class='op-con op-arrow-right btn-right'></i>"):ye.html("Ad Skip<i class='op-con op-arrow-right btn-right'></i>"),ye.addClass("videoAdUiAction")):Ie.lang==="ko"?ye.html(parseInt(nt)+1+"초 후에 이 광고를 건너뛸 수 있습니다."):ye.html("You can skip this ad in "+(parseInt(nt)+1))})),We.on("rewind",(function(){OvenPlayerConsole.log("VAST : listener : rewind")})),We.on("start",(function(){OvenPlayerConsole.log("VAST : listener : started"),Ie.started=!0,Ie.active=!0,je.show(),we.show(),Ye.trigger(vr,{isLinear:!0}),Ye.setState(be)})),We.on("firstQuartile",(function(){OvenPlayerConsole.log("VAST : listener : firstQuartile")})),We.on("midpoint",(function(){OvenPlayerConsole.log("VAST : listener : midpoint")})),We.on("thirdQuartile",(function(){OvenPlayerConsole.log("VAST : listener : thirdQuartile")})),We.on("creativeView",(function(){OvenPlayerConsole.log("VAST : listener : creativeView")})),Object.keys(lt).forEach((function(nt){De.removeEventListener(nt,lt[nt]),De.addEventListener(nt,lt[nt])})),tt.destroy=function(){OvenPlayerConsole.log("EventListener : destroy()"),ze.removeEventListener("click",St,!1),Object.keys(lt).forEach((function(nt){De.removeEventListener(nt,lt[nt])}))},tt})(Y,se,v,_,z,ue,ae);var Je="";re.creatives&&re.creatives.length>0&&re.creatives[0].mediaFiles&&re.creatives[0].mediaFiles.length>0&&re.creatives[0].mediaFiles[0].fileURL&&(Je=re.creatives[0].mediaFiles[0].fileURL,OvenPlayerConsole.log("VAST : media url : ",Je)),Y.src=Je,Y.volume=b.volume,Y.muted=b.muted})).catch((function(Me){ae(Me)})),le())}))):setTimeout(xe,100)};xe()}))},F.pause=function(){Y.pause()},F.videoEndedCallback=function(le){le(),_.isVideoEnded=!0},F.destroy=function(){H&&(H.destroy(),H=null),se=null,j=null,V.remove()},F},xs=function(b,v,x){OvenPlayerConsole.log("[Provider] loaded. ");var S={};hr(S);var k=b.element,F=null,_=null;b.adTagUrl&&(OvenPlayerConsole.log("[Provider] Ad Client - ",v.getAdClient()),(F=v.getAdClient()==="vast"?Cs(k,S,v,b.adTagUrl):sn(k,S,v,b.adTagUrl))||console.log("Can not load due to google ima for Ads.")),_=(function(V,Y,ue,z){var ee={};OvenPlayerConsole.log("EventListener loaded.",V,Y);var ne={},X=-1,j=V;return ee.canplay=function(){Y.setCanSeek(!0),Y.trigger("bufferFull"),OvenPlayerConsole.log("EventListener : on canplay")},ee.durationchange=function(){ee.progress(),OvenPlayerConsole.log("EventListener : on durationchange"),Y.trigger("durationChanged")},ee.ended=function(){OvenPlayerConsole.log("EventListener : on ended"),j.pause(),Y.getState()!==Pt&&Y.getState()!==It&&Y.getState()!==Fe&&(ue?ue((function(){Y.setState(It)})):Y.setState(It))},ee.loadeddata=function(){},ee.loadedmetadata=function(){var se=Y.getSources(),re=Y.getCurrentSource(),ae=re>-1?se[re].type:"",le={duration:Y.isLive()?1/0:j.duration,type:ae};Y.setMetaLoaded(),OvenPlayerConsole.log("EventListener : on loadedmetadata",le),Y.trigger($r,le)},ee.pause=function(){return Y.getState()!==It&&Y.getState()!==Fe&&!j.ended&&!j.error&&j.currentTime!==j.duration&&(OvenPlayerConsole.log("EventListener : on pause"),void Y.setState(Zt))},ee.loadstart=function(){z&&!z.getConfig().showBigPlayButton&&z.getConfig().autoStart&&Y.setState(Ze)},ee.play=function(){X=-1,j.paused||Y.getState()===Mt||Y.setState(Ze)},ee.playing=function(){OvenPlayerConsole.log("EventListener : on playing"),X<0&&Y.setState(Mt)},ee.progress=function(){var se=j.buffered;if(!se)return!1;var re,ae=j.duration,le=j.currentTime,ie=(re=(se.length>0?se.end(se.length-1):0)/ae,Math.max(Math.min(re,1),0));Y.setBuffer(100*ie),Y.trigger(jr,{bufferPercent:100*ie,position:le,duration:ae}),OvenPlayerConsole.log("EventListener : on progress",100*ie)},ee.timeupdate=function(){var se=j.currentTime,re=j.duration;if(!isNaN(re)){if(se>re)return j.pause(),void Y.setState(It);var ae=Y.getSources()[Y.getCurrentSource()].sectionStart;ae&&se<ae&&Y.getState()===Mt&&Y.seek(ae);var le=Y.getSources()[Y.getCurrentSource()].sectionEnd;if(le&&se>le&&Y.getState()===Mt)return Y.stop(),void Y.setState(It);re>9e15&&(re=1/0),Y.isSeeking()||j.paused||Y.getState()!==qe&&Y.getState()!==Ze&&Y.getState()!==be||(function(ie,xe){return ie.toFixed(2)===xe.toFixed(2)})(X,se)||(X=-1,Y.setState(Mt)),ae&&ae>0&&(se-=ae)<0&&(se=0),le&&(re=le),ae&&(re-=ae),(Y.getState()===Mt||Y.isSeeking())&&Y.trigger(Ir,{position:se,duration:re})}},ee.seeking=function(){Y.setSeeking(!0),OvenPlayerConsole.log("EventListener : on seeking",j.currentTime),Y.trigger("seek",{position:j.currentTime})},ee.seeked=function(){Y.isSeeking()&&(OvenPlayerConsole.log("EventListener : on seeked"),Y.setSeeking(!1),Y.trigger("seeked"))},ee.stalled=function(){OvenPlayerConsole.log("EventListener : on stalled")},ee.waiting=function(){OvenPlayerConsole.log("EventListener : on waiting",Y.getState()),Y.isSeeking()?Y.setState(Ze):Y.getState()===Mt&&(X=j.currentTime,Y.setState(qe))},ee.volumechange=function(){OvenPlayerConsole.log("EventListener : on volumechange",Math.round(100*j.volume)),Y.trigger(Qr,{volume:Math.round(100*j.volume),mute:j.muted})},ee.error=function(){var se={0:300,1:301,2:302,3:303,4:304}[j.error&&j.error.code||0]||0;OvenPlayerConsole.log("EventListener : on error",se),xr(Le.codes[se],Y)},Object.keys(ee).forEach((function(se){j.removeEventListener(se,ee[se]),j.addEventListener(se,ee[se])})),ne.destroy=function(){OvenPlayerConsole.log("EventListener : destroy()"),Object.keys(ee).forEach((function(se){j.removeEventListener(se,ee[se])}))},ne})(k,S,F?F.videoEndedCallback:null,v),k.playbackRate=k.defaultPlaybackRate=v.getPlaybackRate(),b.zoomFactor=1;var H=function(V){var Y=b.sources[b.currentSource];if(b.framerate=Y.framerate,S.setVolume(v.getVolume()),b.framerate||v.setTimecodeMode(!0),x)x(Y,V);else{OvenPlayerConsole.log("source loaded : ",Y,"lastPlayPosition : "+V);var ue=k.src;Y.file!==ue&&(k.src=Y.file,(ue||ue==="")&&k.load()),S.on($r,(function(){V>0&&S.seek(V)}))}};return S.getName=function(){return b.name},S.getMse=function(){return b.mse},S.getMediaElement=function(){return b.element},S.canSeek=function(){return b.canSeek},S.setCanSeek=function(V){b.canSeek=V},S.isSeeking=function(){return b.seeking},S.setSeeking=function(V){b.seeking=V},S.setMetaLoaded=function(){b.isLoaded=!0},S.metaLoaded=function(){return b.isLoaded},S.setState=function(V){if(b.state!==V){var Y=b.state;if(OvenPlayerConsole.log("Provider : setState()",V),Y===be&&(V===Fe||V===Pt))return!1;switch(OvenPlayerConsole.log("Provider : triggerSatatus",V),V){case It:S.trigger(Ft);break;case Zt:S.trigger(ke,{prevState:b.state,newstate:Zt});break;case Xe:S.trigger(ke,{prevState:b.state,newstate:Xe});break;case Mt:S.trigger(ut,{prevState:b.state,newstate:Mt});break;case be:S.trigger(ut,{prevState:b.state,newstate:be})}b.state=V,S.trigger(Wt,{prevstate:Y,newstate:b.state})}},S.getState=function(){return b.state},S.setBuffer=function(V){b.buffer=V},S.getBuffer=function(){return b.buffer},S.isLive=function(){return!!b.isLive||k.duration===1/0},S.getDuration=function(){return S.isLive()?1/0:k.duration},S.getDvrWindow=function(){return b.dvrWindow},S.getPosition=function(){return k?k.currentTime:0},S.setVolume=function(V){if(!k)return!1;k.volume=V/100,v.setVolume(V)},S.getVolume=function(){return v.getVolume()},S.setMute=function(V){if(!k)return!1;if(V===void 0){var Y=v.isMute();k.muted=!Y,v.setMute(!Y),S.trigger(In,{mute:v.isMute()})}else k.muted=V,v.setMute(V),S.trigger(In,{mute:v.isMute()});return k.muted},S.getMute=function(){return v.isMute()},S.preload=function(V,Y){return b.sources=V,b.currentSource=hn(V,v),H(Y||0),new Promise((function(ue,z){v.isMute()&&S.setMute(!0),v.getVolume()&&S.setVolume(v.getVolume()),ue()}))},S.load=function(V){b.sources=V,b.currentSource=hn(V,v),H(0)},S.play=function(){if(OvenPlayerConsole.log("Provider : play()"),!k)return!1;if(S.getState()!==Mt)if(F&&F.isActive()||F&&!F.started())F.play().then((function(Y){OvenPlayerConsole.log("Provider : ads play success")})).catch((function(Y){OvenPlayerConsole.log("Provider : ads play fail",Y)}));else{var V=k.play();V!==void 0?V.then((function(){OvenPlayerConsole.log("Provider : video play success")})).catch((function(Y){OvenPlayerConsole.log("Provider : video play error",Y.message)})):OvenPlayerConsole.log("Provider : video play success (ie)")}},S.pause=function(){if(OvenPlayerConsole.log("Provider : pause()"),!k)return!1;S.getState()===Mt?k.pause():S.getState()===be&&F.pause()},S.seek=function(V){if(!k)return!1;k.currentTime=V},S.setPlaybackRate=function(V){return!!k&&(S.trigger("playbackRateChanged",{playbackRate:V}),k.playbackRate=k.defaultPlaybackRate=V)},S.getPlaybackRate=function(){return k?k.playbackRate:0},S.getZoomFactor=function(){return b.zoomFactor},S.setZoomFactor=function(V){return S.trigger(Ar,{zoomFactor:V}),b.zoomFactor=V},S.getSources=function(){return k?b.sources.map((function(V,Y){var ue={file:V.file,type:V.type,label:V.label,index:Y,sectionStart:V.sectionStart,sectionEnd:V.sectionEnd,gridThumbnail:V.gridThumbnail};return V.lowLatency&&(ue.lowLatency=V.lowLatency),ue})):[]},S.getCurrentSource=function(){return b.currentSource},S.setCurrentSource=function(V,Y){if(V>-1&&b.sources&&b.sources.length>V)return OvenPlayerConsole.log("source changed : "+V),b.currentSource=V,v.setSourceIndex(V),S.setState(Pt),Y&&H(k.currentTime||0),b.currentSource},S.getQualityLevels=function(){return k?b.qualityLevels:[]},S.getCurrentQuality=function(){return k?b.currentQuality:null},S.setCurrentQuality=function(V){},S.getAudioTracks=function(){return k?b.audioTracks:[]},S.getCurrentAudioTrack=function(){return k?b.currentAudioTrack:[]},S.setCurrentAudioTrack=function(V){},S.getSubtitleTracks=function(){return k?b.subtitleTracks:[]},S.getCurrentSubtitleTrack=function(){return k?b.currentSubtitleTrack:[]},S.setCurrentSubtitleTrack=function(V){},S.isAutoQuality=function(){},S.setAutoQuality=function(V){},S.getFramerate=function(){return b.framerate},S.setFramerate=function(V){return b.framerate=V},S.seekFrame=function(V){var Y=b.framerate,ue=(k.currentTime*Y+V)/Y;ue+=1e-5,S.pause(),S.seek(ue)},S.stop=function(){if(!k)return!1;for(OvenPlayerConsole.log("CORE : stop() "),k.removeAttribute("preload"),k.removeAttribute("src");k.firstChild;)k.removeChild(k.firstChild);S.pause(),S.setState(Pt)},S.destroy=function(){if(!k)return!1;S.stop(),_.destroy(),F&&(F.destroy(),F=null),S.off(),OvenPlayerConsole.log("CORE : destroy() player stop, listener, event destroied")},S.super=function(V){var Y=S[V];return function(){return Y.apply(S,arguments)}},S};function $a(b){for(var v=window.atob(b),x=v.length,S=new Uint8Array(new ArrayBuffer(x)),k=0;k<x;k++)S[k]=v.charCodeAt(k);return S}function Gc(b){for(var v,x,S,k,F,_,H,V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Y="",ue=0;ue<b.length;)k=(v=b[ue++])>>2,F=(3&v)<<4|(x=ue<b.length?b[ue++]:Number.NaN)>>4,_=(15&x)<<2|(S=ue<b.length?b[ue++]:Number.NaN)>>6,H=63&S,isNaN(x)?_=H=64:isNaN(S)&&(H=64),Y+=V.charAt(k)+V.charAt(F)+V.charAt(_)+V.charAt(H);return Y}var Qc=function(b,v,x){var S=xs({name:bt,element:b,mse:null,isLoaded:!1,canSeek:!1,isLive:!1,seeking:!1,state:Pt,buffer:0,framerate:0,currentQuality:-1,qualityLevels:[],currentAudioTrack:-1,audioTracks:[],currentSource:-1,sources:[],adTagUrl:x,subtitleTracks:[],currentSubtitleTrack:-1},v,null),k=S.super("destroy");OvenPlayerConsole.log("HTML5 PROVIDER LOADED.");var F=null;function _(V,Y){return new Promise((function(ue,z){if(!b.webkitKeys)try{b.webkitSetMediaKeys(new window.WebKitMediaKeys("com.apple.fps.1_0"))}catch(ne){return void z(ne)}var ee;try{ee=b.webkitKeys.createSession("video/mp4",(function(ne){var X=ne.id,j=ne.initData,se=ne.cert;try{typeof X=="string"&&(X=(function(xe){for(var Me=new ArrayBuffer(2*xe.length),Je=new Uint16Array(Me),De=0;De<xe.length;De++)Je[De]=xe.charCodeAt(De);return Je})(X));var re=0,ae=new ArrayBuffer(j.byteLength+4+X.byteLength+4+se.byteLength),le=new DataView(ae);new Uint8Array(ae,re,j.byteLength).set(j),re+=j.byteLength,le.setUint32(re,X.byteLength,!0),re+=4;var ie=new Uint16Array(ae,re,X.length);return ie.set(X),re+=ie.byteLength,le.setUint32(re,se.byteLength,!0),re+=4,new Uint8Array(ae,re,se.byteLength).set(se),new Uint8Array(ae,0,ae.byteLength)}catch{return null}})({id:Y,initData:V,cert:F}))}catch(ne){return void z(ne)}ee.contentId=Y,ee.addEventListener("webkitkeymessage",(function(ne){var X;(X=ne.message,new Promise((function(j,se){var re=v.getConfig().hlsConfig.drmSystems["com.apple.fps"].licenseUrl,ae=new Headers({"Content-Type":"application/x-www-form-urlencoded"});v.getConfig().licenseCustomHeader&&ae.append(v.getConfig().licenseCustomHeader.key,v.getConfig().licenseCustomHeader.value),fetch(re,{method:"POST",headers:ae,body:"spc="+Gc(X)}).then((function(le){le.text().then((function(ie){j($a(ie))})).catch((function(ie){se(ie)}))})).catch((function(le){se(le)}))}))).then((function(j){ee.update(new Uint8Array(j)),ue()})).catch((function(j){z(j)}))})),ee.addEventListener("webkitkeyadded",(function(){})),ee.addEventListener("webkitkeyerror",(function(){var ne=ee.error;z(ne)}))}))}function H(V){V.initDataType;var Y,ue=V.initData,z=(Y=new Uint16Array(ue.buffer),String.fromCharCode.apply(null,Y));_(ue,z.substring(z.indexOf("skd://")+6)).catch((function(ee){Le.codes[107].message="Could not add add key.",xr(Le.codes[107],S)}))}return v.getConfig().hlsConfig&&v.getConfig().hlsConfig.emeEnabled&&new Promise((function(V,Y){var ue;(ue=v.getConfig().hlsConfig.drmSystems["com.apple.fps"].serverCertificateUrl,new Promise((function(z,ee){fetch(ue).then((function(ne){ne.text().then((function(X){z($a(X))})).catch((function(X){ee(X)}))})).catch((function(ne){ee(ne)}))}))).then((function(z){F=z,b.addEventListener("webkitneedkey",H,{once:!0})})).catch((function(z){Y(z)}))})).catch((function(V){Le.codes[107].message="Could not load drm certificate.",xr(Le.codes[107],S)})),S.destroy=function(){OvenPlayerConsole.log("HTML5 : PROVIDER DESTROYED."),k()},S},$c=function(b,v,x,S,k,F,_,H){var V={},Y={},ue=null,z=!1,ee=null,ne=null,X={},j=!1,se=!1,re=null,ae=!1;_.getConfig().webrtcConfig&&_.getConfig().webrtcConfig.recoverPacketLoss===!0&&(se=!0);var le=!0;_.getConfig().webrtcConfig&&_.getConfig().webrtcConfig.generatePublicCandidate===!1&&(le=_.getConfig().webrtcConfig.generatePublicCandidate);var ie=$e(),xe=null;function Me(ye){var we=null;return ne&&ye===ne.id?we=ne.peerConnection:X[ye]&&(we=X[ye].peerConnection),we}function Je(ye){ye.statisticsTimer&&clearTimeout(ye.statisticsTimer),ye.status||(ye.status={},ye.status.lostPacketsArr=[],ye.status.slotLength=8,ye.status.prevPacketsLost=0,ye.status.avg8Losses=0,ye.status.avgMoreThanThresholdCount=0,ye.status.threshold=40);var we=ye.status.lostPacketsArr,je=ye.status.slotLength,rt=ye.status.prevPacketsLost,St=ye.status.avg8Losses,nt=ye.status.threshold;ye.statisticsTimer=setTimeout((function(){if(!ye.peerConnection)return!1;ye.peerConnection.getStats().then((function(wt){wt&&_.getConfig().autoFallback&&wt&&(wt.forEach((function(Ct){if(Ct.type==="inbound-rtp"&&Ct.kind==="video"&&!Ct.isRemote){var pt=parseInt(Ct.packetsLost)-parseInt(rt);we.push(parseInt(Ct.packetsLost)-parseInt(rt)),we.length>je&&we.shift(),we.length===je&&(St=u().reduce(we,(function(nr,mt){return nr+mt}),0)/je,OvenPlayerConsole.log("Last8 LOST PACKET AVG  : "+St,"Current Packet LOST: "+pt,"Total Packet Lost: "+Ct.packetsLost,we),St>nt?(ye.status.avgMoreThanThresholdCount=ye.status.avgMoreThanThresholdCount+1,ye.status.avgMoreThanThresholdCount>=60&&(OvenPlayerConsole.log("NETWORK UNSTABLED!!! "),lt(Le.codes[510]))):ye.status.avgMoreThanThresholdCount=0),ye.status.prevPacketsLost=Ct.packetsLost}})),Je(ye))}))}),2e3)}function De(ye,we,je,rt,St){var nt={};if(_.getConfig().webrtcConfig&&_.getConfig().webrtcConfig.iceServers)nt.iceServers=_.getConfig().webrtcConfig.iceServers,_.getConfig().webrtcConfig.iceTransportPolicy&&(nt.iceTransportPolicy=_.getConfig().webrtcConfig.iceTransportPolicy);else if(St){nt.iceServers=[];for(var wt=0;wt<St.length;wt++){var Ct=St[wt],pt={};pt.urls=Ct.urls;for(var nr=!1,mt=Ye(v),Bt=0;Bt<pt.urls.length;Bt++)if(pt.urls[Bt].indexOf(mt)>-1){nr=!0;break}if(!nr&&pt.urls.length>0){var qt=u().clone(pt.urls[0]),ar=Ie(qt);mt&&ar&&pt.urls.push(qt.replace(ar,mt))}pt.username=Ct.username||Ct.user_name,pt.credential=Ct.credential,nt.iceServers.push(pt)}nt.iceTransportPolicy="relay"}else nt=V;OvenPlayerConsole.log("Main Peer Connection Config : ",nt);var Jt=null;try{Jt=new RTCPeerConnection(nt),b.trigger("peerConnectionPrepared",Jt)}catch(Ut){var pr=Le.codes[506];return pr.error=Ut,void lt(pr)}ne={id:ye,peerId:we,peerConnection:Jt},Jt.setRemoteDescription(new RTCSessionDescription(je)).then((function(){Jt.createAnswer().then((function(Ut){var ir=(function(br){for(var gr=br.split(`\r
`),gt=-1,dr=0;dr<gr.length-1;dr++)if(gr[dr]=gr[dr].toLowerCase(),gr[dr].indexOf("a=rtpmap")>-1&&gr[dr].indexOf("opus")>-1){gt=gr[dr].split(" ")[0].split(":")[1];break}return gt})(je.sdp);ir>-1&&(function(br,gr){for(var gt=br.split(`\r
`),dr=!1,zr=0;zr<gt.length-1;zr++)if(gt[zr]=gt[zr].toLowerCase(),gt[zr].indexOf("a=fmtp:"+gr)>-1){gt[zr].indexOf("stereo=1")>-1&&(dr=!0);break}return dr})(je.sdp,ir)&&(Ut.sdp=(function(br,gr){for(var gt=br.split(`\r
`),dr=0;dr<gt.length-1;dr++)if(gt[dr].indexOf("a=fmtp:"+gr)>-1){gt[dr].indexOf("stereo=1")===-1&&(gt[dr]=gt[dr]+";stereo=1");break}return gt.join(`\r
`)})(Ut.sdp,ir)),OvenPlayerConsole.log("Local SDP",Ut),tt(ue,{id:ye,peer_id:we,command:"answer",sdp:Ut}),OvenPlayerConsole.log("create Host Answer : success"),Jt.setLocalDescription(Ut).then((function(){})).catch((function(br){var gr=Le.codes[505];gr.error=br,lt(gr)}))})).catch((function(Ut){var ir=Le.codes[504];ir.error=Ut,lt(ir)}))})).catch((function(Ut){var ir=Le.codes[503];ir.error=Ut,lt(ir)})),rt&&ze(Jt,rt),Jt.onicecandidate=function(Ut){Ut.candidate&&(OvenPlayerConsole.log("WebRTCLoader send candidate to server : ",Ut.candidate),tt(ue,{id:ye,peer_id:we,command:"candidate",candidates:[Ut.candidate]}))},Jt.onconnectionstatechange=function(Ut){OvenPlayerConsole.log("[on connection state change]",Jt.connectionState,Ut),Jt.connectionState==="connected"&&S&&S()},Jt.onicecandidateerror=function(Ut){},Jt.onicegatheringstatechange=function(Ut){},Jt.oniceconnectionstatechange=function(Ut){OvenPlayerConsole.log("[on ice connection state change]",Jt.iceConnectionState,Ut),Jt.iceConnectionState==="connected"&&S&&S(),(Jt.iceConnectionState==="disconnected"||Jt.iceConnectionState==="closed")&&(j||ne&&lt(Le.codes[511]))},Jt.ontrack=function(Ut){if(OvenPlayerConsole.log("stream received."),OvenPlayerConsole.log("Recovery On Packet Loss :",se),se&&Je(ne),x(Ut),_.getConfig().webrtcConfig&&_.getConfig().webrtcConfig.playoutDelayHint)for(var ir=_.getConfig().webrtcConfig.playoutDelayHint,br=ne.peerConnection.getReceivers(),gr=0;gr<br.length;gr++){var gt=br[gr];gt.track.kind==="audio"?(gt.playoutDelayHint=ir,gt.jitterBufferDelayHint=ir):gt.playoutDelayHint=ir,OvenPlayerConsole.log("WebRTC playoutDelayHint",gt,ir)}}}function We(ye,we){if(ee){var je=new RTCPeerConnection(V);X[we]={id:we,peerId:ye,peerConnection:je},je.addStream(ee),je.createOffer((function(rt){je.setLocalDescription(rt),tt(ue,{id:ye,peer_id:we,sdp:rt,command:"offer_p2p"})}),(function(rt){}),{}),je.onicecandidate=function(rt){rt.candidate&&(OvenPlayerConsole.log("WebRTCLoader send candidate to server : "+rt.candidate),tt(ue,{id:ye,peer_id:we,command:"candidate_p2p",candidates:[rt.candidate]}))}}else setTimeout((function(){We(ye,we)}),100)}function Ye(ye){var we,je="";return(we=ye.match(/^(?:wss?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n\?\=]+)/im))&&(je=we[1]),je}function Ie(ye){var we,je="";return(we=ye.match(new RegExp("\\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b","gi")))&&(je=we[0]),je}function Se(ye){var we=u().clone(ye),je=Ye(v),rt=Ie(we.candidate);return new Promise((function(St,nt){rt!==""&&rt!==je||St(null),ie.browser!=="Firefox"||Ie(je)?(we.candidate=we.candidate.replace(rt,je),St(we)):St(null)}))}function ze(ye,we){for(var je=0;je<we.length;je++)if(we[je]&&we[je].candidate){var rt=we[je];if(ye.addIceCandidate(new RTCIceCandidate(rt)).then((function(){OvenPlayerConsole.log("addIceCandidate : success")})).catch((function(nt){var wt=Le.codes[502];wt.error=nt,lt(wt)})),le){var St=Se(rt);St&&St.then((function(nt){nt&&ye.addIceCandidate(new RTCIceCandidate(nt)).then((function(){OvenPlayerConsole.log("cloned addIceCandidate : success")})).catch((function(wt){var Ct=Le.codes[502];Ct.error=wt,lt(Ct)}))}))}}}function He(){try{(ue=new WebSocket(v)).onopen=function(){z=!0,tt(ue,{command:"request_offer"})},ue.onmessage=function(ye){var we=JSON.parse(ye.data);if(we.error){var je=Le.codes[501];return je.error=we.error,void lt(je)}if(Object.keys(we).length!==0||we.constructor!==Object)if(we.command!=="ping"){if(we.command==="offer"){var rt=we.iceServers||we.ice_servers;De(we.id,we.peer_id,we.sdp,we.candidates,rt),we.peer_id===0?b.trigger(dn,!1):b.trigger(dn,!0)}if(we.command==="request_offer_p2p"&&We(we.id,we.peer_id),we.command==="answer_p2p"&&Me(we.peer_id).setRemoteDescription(new RTCSessionDescription(we.sdp)).then((function(mt){})).catch((function(mt){var Bt=Le.codes[503];Bt.error=mt,lt(Bt)})),we.command==="candidate"&&ze(Me(we.id),we.candidates),we.command==="candidate_p2p"&&ze(Me(we.peer_id),we.candidates),we.command==="notification"){if(we.type==="playlist"){var St=we.message.renditions;re=we.message;for(var nt=0;nt<St.length;nt++){var wt=St[nt];(wt.video_track||wt.audio_track)&&H.qualityLevels.push({bitrate:wt.video_track?wt.video_track.video.bitrate:wt.audio_track.bitrate,height:wt.video_track?wt.video_track.video.height:0,width:wt.video_track?wt.video_track.video.width:0,index:nt,label:wt.name})}H.currentQuality=0,ae=we.message.auto}if(we.type==="rendition_changed"){var Ct=we.message;we.auto&&(ae=we.auto);for(var pt=-1,nr=0;nr<re.renditions.length;nr++)if(Ct.rendition_name===re.renditions[nr].name){pt=nr,H.currentQuality=nr;break}b.trigger(rn,{isAuto:ae,currentQuality:pt,type:"render"})}}we.command==="stop"&&(ne.peerId===we.peer_id?(ee=null,ne.peerConnection.close(),ne=null,b.pause(),tt(ue,{command:"request_offer"})):X[we.peer_id]&&(X[we.peer_id].peerConnection.close(),delete X[we.peer_id]))}else tt(ue,{command:"pong"});else OvenPlayerConsole.log("Empty Message")},ue.onclose=function(ye){if(!j){if(S&&!z)return void lt();var we=Le.codes[501];ne&&(we=Le.codes[511]),lt(we)}},ue.onerror=function(ye){}}catch(ye){lt(ye)}}function lt(ye){if(OvenPlayerConsole.log("WebRTC Loader closePeer()"),ye||(j=!0),ne&&(ne.statisticsTimer&&clearTimeout(ne.statisticsTimer),ee=null,OvenPlayerConsole.log("Closing main peer connection..."),ne.peerConnection&&ne.peerConnection.close(),ne.peerConnection=null,b.trigger("peerConnectionDestroyed"),ne=null),Object.keys(X).length>0){for(var we in X){var je=X[we].peerConnection;je&&(OvenPlayerConsole.log("Closing client peer connection..."),je.close(),je=null)}X={}}ue?(OvenPlayerConsole.log("Closing websocket connection..."),OvenPlayerConsole.log("Send Signaling : Stop."),ue.readyState===1&&(j=!0,ne&&tt(ue,{command:"stop",id:ne.id}),ue.close())):j=!1,ue=null,ye&&(k&&k(ye),F(ye,b))}function tt(ye,we){ye&&ye.send(JSON.stringify(we))}return xe=window.onbeforeunload,window.onbeforeunload=function(ye){xe&&xe(ye),OvenPlayerConsole.log("This calls auto when browser closed."),lt()},b.setCurrentQuality=function(ye){if(!re||!ne)return-1;var we=re.renditions[ye];return we&&(tt(ue,{command:"change_rendition",id:ne.id,rendition_name:we.name,auto:!1}),ae=!1,H.currentQuality=ye),H.currentQuality},b.isAutoQuality=function(){return ae},b.setAutoQuality=function(ye){ne&&(tt(ue,{command:"change_rendition",id:ne.id,auto:ye}),ae=ye)},Y.connect=function(){OvenPlayerConsole.log("WebRTCLoader connecting..."),OvenPlayerConsole.log("WebRTCLoader url : "+v),He()},Y.destroy=function(){j=!0,lt(),window.onbeforeunload=xe,xe=null},Y};function Xi(b){return Xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},Xi(b)}function Wa(b,v){var x=Object.keys(b);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(b);v&&(S=S.filter((function(k){return Object.getOwnPropertyDescriptor(b,k).enumerable}))),x.push.apply(x,S)}return x}function Va(b){for(var v=1;v<arguments.length;v++){var x=arguments[v]!=null?arguments[v]:{};v%2?Wa(Object(x),!0).forEach((function(S){Wc(b,S,x[S])})):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(x)):Wa(Object(x)).forEach((function(S){Object.defineProperty(b,S,Object.getOwnPropertyDescriptor(x,S))}))}return b}function Wc(b,v,x){return(v=(function(S){var k=(function(F){if(Xi(F)!="object"||!F)return F;var _=F[Symbol.toPrimitive];if(_!==void 0){var H=_.call(F,"string");if(Xi(H)!="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(F)})(S);return Xi(k)=="symbol"?k:k+""})(v))in b?Object.defineProperty(b,v,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[v]=x,b}var qn,_n,Vc=function(b,v,x){var S={},k=null,F=null,_=null,H=null,V=null,Y=null,ue={name:Lt,element:b,mse:null,listener:null,isLoaded:!1,canSeek:!1,isLive:!1,seeking:!1,state:Pt,buffer:0,framerate:0,currentQuality:-1,currentSource:-1,qualityLevels:[],sources:[],adTagUrl:x},z=1e4,ee=0,ne=null,X=!1;function j(){if(or(V.file,V.type)){clearTimeout(ne),OvenPlayerConsole.log("WEBRTC : onBeforeLoad : ",V),k&&(k.destroy(),k=null);var re=null,ae=null;ee>0&&(re=function(){clearTimeout(ne)},ae=function(){clearTimeout(ne),performance.now(),X=!0}),k=$c(S,V.file,(function(le){b.srcObject&&(b.srcObject=null),Y&&(Y.close(),Y=null);var ie=le.streams[0];if(b.srcObject=ie,ie.getAudioTracks().length>0){var xe=window.AudioContext||window.webkitAudioContext;(function(Se){var ze=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),He=!1;ze&&Se.state==="suspended"&&document.addEventListener("touchend",(function(){He||Se.state==="running"||(Se.resume(),He=!0)}))})(Y=new xe),Y.createMediaStreamSource(ie)}if(le.receiver.track.kind==="video"&&v.getConfig().parseStream.enabled){var Me=new Blob([`/**\r
 * Created by rock on 2025. 2\r
 */\r
\r
const OVENMEDIAENGINE_SEI_METADATA_UUID = '464d4c475241494e434f4c4f55524201';\r
\r
function removeEmulationPreventionBytes(data) {\r
  const rbsp = [];\r
  for (let i = 0; i < data.length; i++) {\r
\r
    if (i > 2 && data[i - 2] === 0x00 && data[i - 1] === 0x00 && data[i] === 0x03) {\r
      continue; // skip 0x03\r
    }\r
    rbsp.push(data[i]);\r
  }\r
  return new Uint8Array(rbsp);\r
}\r
\r
function parseSEIPayload(rbsp) {\r
\r
  const messages = [];\r
\r
  let i = 0;\r
  const rbspLength = rbsp[rbsp.length - 1] === 0x80 ? rbsp.length - 1 : rbsp.length;\r
\r
  while (i < rbspLength) {\r
\r
    let type = 0;\r
    while (rbsp[i] === 0xFF) {\r
      type += 255;\r
      i++;\r
    }\r
    type += rbsp[i++];\r
\r
    let size = 0;\r
    while (rbsp[i] === 0xFF) {\r
      size += 255;\r
      i++;\r
    }\r
    size += rbsp[i++];\r
\r
    const payload = rbsp.slice(i, i + size);\r
    i += size;\r
\r
    messages.push({ type, size, payload });\r
\r
    return { type, size, payload };\r
  }\r
\r
  return messages;\r
}\r
\r
function toHexString(byteArray, delimiter = '') {\r
  return Array.from(byteArray, byte => {\r
    return ('0' + (byte & 0xFF).toString(16)).slice(-2);\r
  }).join(delimiter);\r
}\r
\r
function toHexArray(byteArray) {\r
  return Array.from(byteArray, byte => {\r
    return ('0' + (byte & 0xFF).toString(16)).slice(-2);\r
  });\r
}\r
\r
function toUUID(byteArray) {\r
  const hexString = toHexString(byteArray);\r
  return [\r
    hexString.slice(0, 8),\r
    hexString.slice(8, 12),\r
    hexString.slice(12, 16),\r
    hexString.slice(16, 20),\r
    hexString.slice(20, 24),\r
    hexString.slice(24, 32)\r
  ].join('-');\r
}\r
\r
function toTimestamp(byteArray) {\r
  const hexString = toHexString(byteArray);\r
  return parseInt(hexString, 16);\r
}\r
\r
function toAsciiString(byteArray) {\r
  return String.fromCharCode.apply(null, byteArray);\r
}\r
\r
function findNalStartIndex(frameData, offset) {\r
  while (offset < frameData.byteLength - 4) {\r
    if ((frameData[offset] === 0x00 && frameData[offset + 1] === 0x00)\r
      && (frameData[offset + 2] === 0x01 || (frameData[offset + 2] === 0x00 && frameData[offset + 3] === 0x01))) {\r
      return offset;\r
    } else {\r
      offset += 1;\r
    }\r
  }\r
  return -1;\r
}\r
\r
function getNalus(frameData) {\r
\r
  let offset = 0;\r
  const headerSize = 1;\r
  const nalus = [];\r
\r
  while (offset < frameData.byteLength - 4) {\r
\r
    const startCodeIndex = findNalStartIndex(frameData, offset);\r
\r
    if (startCodeIndex >= offset) {\r
\r
      const startCodeLength = frameData[startCodeIndex + 2] === 0x01 ? 3 : 4;\r
      const nextStartCodeIndex = findNalStartIndex(frameData, startCodeIndex + startCodeLength + headerSize);\r
\r
      if (nextStartCodeIndex > startCodeIndex) {\r
\r
        nalus.push(frameData.subarray(startCodeIndex, nextStartCodeIndex));\r
        offset = nextStartCodeIndex;\r
      } else {\r
\r
        nalus.push(frameData.subarray(startCodeIndex));\r
        break;\r
      }\r
    } else {\r
      break;\r
    }\r
  }\r
  return nalus;\r
}\r
\r
function createReceiverTransform() {\r
  return new TransformStream({\r
    start() { },\r
    flush() { },\r
    async transform(encodedFrame, controller) {\r
\r
      const nalus = getNalus(new Uint8Array(encodedFrame.data));\r
\r
      nalus.forEach((nalu) => {\r
\r
        const startCodeLength = nalu[2] === 0x01 ? 3 : 4;\r
        const headerCodeLength = 1;\r
        const nalHeader = nalu[startCodeLength];\r
        const nalType = nalHeader & 0x1F;\r
\r
        // NAL Type SEI\r
        if (nalType === 6) {\r
\r
          const rbsp = removeEmulationPreventionBytes(nalu.subarray(startCodeLength + headerCodeLength));\r
\r
          const parsedSei = parseSEIPayload(rbsp);\r
\r
          const eventData = {\r
            nalu: nalu,\r
            sei: parsedSei\r
          };\r
\r
          const uuid = toHexString(parsedSei.payload.subarray(0, 16));\r
\r
          if (uuid === OVENMEDIAENGINE_SEI_METADATA_UUID) {\r
\r
            postMessage({\r
              action: 'sei', data: {\r
                ...eventData,\r
                registered: true,\r
                uuid: toUUID(parsedSei.payload.subarray(0, 16)),\r
                timecode: toTimestamp(parsedSei.payload.subarray(16, 24)),\r
                userdata: parsedSei.payload.subarray(24)\r
              }\r
            });\r
          } else {\r
\r
            postMessage({\r
              action: 'sei', data: {\r
                ...eventData,\r
                registered: false\r
              }\r
            });\r
          }\r
        }\r
      });\r
\r
      controller.enqueue(encodedFrame);\r
    }\r
  })\r
}\r
\r
function setupPipe({ readable, writable }, transform) {\r
  readable\r
    .pipeThrough(transform)\r
    .pipeTo(writable)\r
}\r
\r
addEventListener('rtctransform', (event) => {\r
  setupPipe(event.transformer, createReceiverTransform());\r
});\r
\r
addEventListener('message', (event) => {\r
  const { action } = event.data;\r
\r
  switch (action) {\r
    case 'rtctransform':\r
      setupPipe(event.data, createReceiverTransform())\r
      break;\r
    default:\r
      break;\r
  }\r
});\r
`],{type:"application/javascript"}),Je=URL.createObjectURL(Me),De=new Worker(Je);if("RTCRtpScriptTransform"in window)le.receiver.transform=new RTCRtpScriptTransform(De);else{var We=le.receiver.createEncodedStreams(),Ye=We.readable,Ie=We.writable;De.postMessage({action:"rtctransform",readable:Ye,writable:Ie},[Ye,Ie])}De.addEventListener("message",(function(Se){Se.data.action==="sei"&&S.trigger("metaData",Va(Va({},Se.data.data),{},{type:"sei"}))}))}}),ae,re,xr,v,ue),performance.now(),k.connect(),ee>0&&(S.once(Wt,(function(le){X||le.newstate===Pt&&(clearTimeout(ne),se())})),S.once(kt,(function(){X=!1})),ne=setTimeout((function(){if(ee>0)X||(se(),j());else{se();var le=Le.codes[512];xr(le,S)}ee--}),z))}}function se(){k&&(k.destroy(),k=null,b.srcObject=null)}return S=xs(ue,v,(function(re){var ae=v.getConfig();ae.webrtcConfig&&(typeof ae.webrtcConfig.connectionTimeout=="number"&&ae.webrtcConfig.connectionTimeout>0&&(z=ae.webrtcConfig.connectionTimeout),typeof ae.webrtcConfig.timeoutMaxRetry=="number"&&ae.webrtcConfig.timeoutMaxRetry>0&&(ee=ae.webrtcConfig.timeoutMaxRetry)),V=re,j()})),F=S.super("destroy"),_=S.super("play"),H=S.super("stop"),OvenPlayerConsole.log("WEBRTC PROVIDER LOADED."),S.removeStream=function(){b.srcObject=null},S.destroy=function(){clearTimeout(ne),se(),OvenPlayerConsole.log("WEBRTC :  PROVIDER DESTROYED."),F()},S.play=function(){(!k||ee>0&&!X)&&j(),_()},S.stop=function(){clearTimeout(ne),se(),H()},S},bo=function(b,v,x){var S=1e3;if(Math.abs(b)<S)return b+" B";var k=x,F=["k"+k,"M"+k,"G"+k,"T"+k,"P"+k,"E"+k,"Z"+k,"Y"+k],_=-1;do b/=S,++_;while(Math.abs(b)>=S&&_<F.length-1);return b.toFixed(1)+F[_]},Yc=function(b,v,x){var S={},k=null,F=null,_=null,H=0,V="";try{if(dashjs.Version<"3.0.0")throw Le.codes[103];var Y=function(ne){k.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:ne}}}})},ue=function(){return k.getSettings().streaming.abr.autoSwitchBitrate.video};(k=dashjs.MediaPlayer().create()).initialize(b,null,!1),window.op_dash=k;var z={name:me,element:b,mse:k,listener:null,isLoaded:!1,canSeek:!1,isLive:!1,seeking:!1,state:Pt,buffer:0,framerate:0,currentQuality:-1,currentSource:-1,qualityLevels:[],sources:[],adTagUrl:x};S=xs(z,v,(function(ne,X){OvenPlayerConsole.log("DASH : Attach File : ",ne,"lastPlayPosition : "+X),Y(!0),V=ne.file,ne.lowLatency===!0?(k.updateSettings({streaming:{lowLatencyEnabled:ne.lowLatency}}),v.getConfig().lowLatencyMpdLiveDelay&&typeof v.getConfig().lowLatencyMpdLiveDelay=="number"&&k.updateSettings({streaming:{liveDelay:v.getConfig().lowLatencyMpdLiveDelay}})):k.updateSettings({streaming:{lowLatencyEnabled:!1,liveDelay:void 0}}),k.updateSettings({debug:{logLevel:dashjs.Debug.LOG_LEVEL_NONE}});var j=v.getConfig().dashConfig;j&&k.updateSettings(j),S.trigger("dashPrepared",k),k.attachSource(V),H=X})),F=S.super("play"),_=S.super("destroy"),OvenPlayerConsole.log("DASH PROVIDER LOADED."),k.on(dashjs.MediaPlayer.events.ERROR,(function(ne){var X=Le.codes[302];X.error=ne,xr(X,S)})),k.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,(function(ne){ne&&ne.mediaType&&ne.mediaType==="video"&&S.trigger(rn,{isAuto:ue(),currentQuality:z.currentQuality,type:"request"})})),k.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,(function(ne){ne&&ne.mediaType&&ne.mediaType==="video"&&(z.currentQuality=ne.newQuality,S.trigger(rn,{isAuto:ue(),currentQuality:ne.newQuality,type:"render"}))})),k.on(dashjs.MediaPlayer.events.PLAYBACK_METADATA_LOADED,(function(ne){OvenPlayerConsole.log("DASH : PLAYBACK_METADATA_LOADED  : ",k.getQualityFor("video"),k.getBitrateInfoListFor("video"),k.getBitrateInfoListFor("video")[k.getQualityFor("video")]);var X=k.getBitrateInfoListFor("video");z.currentQuality=k.getQualityFor("video");for(var j=0;j<X.length;j++)u().findWhere(z.qualityLevels,{bitrate:X[j].bitrate,height:X[j].height,width:X[j].width})||z.qualityLevels.push({bitrate:X[j].bitrate,height:X[j].height,width:X[j].width,index:X[j].qualityIndex,label:X[j].width+"x"+X[j].height+", "+bo(X[j].bitrate,!0,"bps")});k.isDynamic()&&(z.isLive=!0),H&&!z.isLive&&k.seek(H)})),S.play=function(ne){S.getState()===be||S.getState()===Xe||F(ne)},S.setCurrentQuality=function(ne){return S.getState()!==Mt&&S.play(),z.currentQuality=ne,ue()&&Y(!1),k.setQualityFor("video",ne),z.currentQuality},S.isAutoQuality=function(){return ue()},S.setAutoQuality=function(ne){Y(ne)},S.destroy=function(){k.destroy?k.destroy():k.reset(),k=null,S.trigger("dashDestroyed"),OvenPlayerConsole.log("DASH : PROVIDER DESTROYED."),_()}}catch(ne){if(ne&&ne.code&&ne.code===103)throw ne;var ee=Le.codes[105];throw ee.error=ne,ee}return S},Hc=function(b,v,x){var S={},k=null,F=null,_=null,H=null,V=!1;try{var Y={debug:!1},ue=v.getConfig().hlsConfig;if(ue)for(var z in ue)Y[z]=ue[z];v.getConfig().licenseCustomHeader&&(Y.licenseXhrSetup=function(X,j,se,re){X.setRequestHeader(v.getConfig().licenseCustomHeader.key,v.getConfig().licenseCustomHeader.value)}),(k=new Hls(Y)).attachMedia(b);var ee={name:ot,element:b,mse:k,listener:null,isLoaded:!1,canSeek:!1,isLive:!1,seeking:!1,state:Pt,buffer:0,dvrWindow:0,framerate:0,currentQuality:-1,qualityLevels:[],currentAudioTrack:-1,audioTracks:[],currentSource:-1,sources:[],adTagUrl:x,subtitleTracks:[],currentSubtitleTrack:-1};S=xs(ee,v,(function(X,j){OvenPlayerConsole.log("HLS : onExtendedLoad : ",X,"lastPlayPosition : "+j),S.trigger("hlsPrepared",k),k.loadSource(X.file),k.once(Hls.Events.MANIFEST_LOADED,(function(se,re){for(var ae=0;ae<k.levels.length;ae++){var le=k.levels[ae];ee.qualityLevels.push({bitrate:le.bitrate,height:le.height,width:le.width,index:ae,label:le.width+"x"+le.height+", "+bo(le.bitrate,!0,"bps")})}if(ee.currentQuality=k.firstLevel,k.audioTracks&&k.audioTracks.length>0)for(var ie=0;ie<k.audioTracks.length;ie++){var xe=k.audioTracks[ie];ee.audioTracks.push({index:xe.id,label:xe.name}),xe.default===!0&&(ee.currentAudioTrack=xe.id)}if(k.subtitleTracks&&k.subtitleTracks.length>0)for(var Me=0;Me<k.subtitleTracks.length;Me++){var Je=k.subtitleTracks[Me];ee.subtitleTracks.push({index:Je.id,label:Je.name?Je.name:Je.lang?Je.lang:Je.id})}})),k.once(Hls.Events.LEVEL_LOADED,(function(se,re){V=!0,H&&(clearTimeout(H),H=null),re.details.live?ee.isLive=!0:j&&j>=0&&S.seek(j)})),k.on(Hls.Events.LEVEL_SWITCHED,(function(se,re){ee.currentQuality=re.level,S.trigger(rn,{isAuto:k.autoLevelEnabled,currentQuality:ee.currentQuality,type:"render"})})),k.on(Hls.Events.AUDIO_TRACK_SWITCHED,(function(se,re){ee.currentAudioTrack=re.id,S.trigger(Ln,{currentAudioTrack:ee.currentAudioTrack})})),k.on(Hls.Events.SUBTITLE_TRACK_SWITCH,(function(se,re){ee.currentSubtitleTrack=re.id,S.trigger(Re,{currentSubtitleTrack:ee.currentSubtitleTrack})})),k.on(Hls.Events.LEVEL_UPDATED,(function(se,re){re&&re.details&&(ee.dvrWindow=re.details.totalduration)})),k.on(Hls.Events.ERROR,(function(se,re){if(re&&re.networkDetails&&re.networkDetails.status===202)return H&&(clearTimeout(H),H=null),S.setState(Ze),void(H=setTimeout((function(){k&&(S.stop(),k.stopLoad(),k.loadSource(X.file))}),1e3));if(re.fatal){var ae=302;re&&re.networkDetails&&re.networkDetails.status===400?ae=306:re&&re.networkDetails&&re.networkDetails.status===403?ae=307:re&&re.networkDetails&&re.networkDetails.status===406&&(ae=308);var le=Le.codes[ae];le.error=re,xr(le,S)}})),S.on(Wt,(function(se){V||se.prevstate!==Ze||se.newstate!==Pt||(H&&(clearTimeout(H),H=null),k&&k.stopLoad())}))})),S.setCurrentQuality=function(X){return k.currentLevel=X,ee.currentQuality=X,ee.currentQuality},S.isAutoQuality=function(){return k.autoLevelEnabled},S.setAutoQuality=function(X){k.currentLevel=X?-1:k.currentLevel},S.setCurrentAudioTrack=function(X){return k.audioTrack=X,ee.currentAudioTrack=X,ee.currentAudioTrack},S.setCurrentSubtitleTrack=function(X){return k.subtitleTrack=X,ee.currentSubtitleTrack=X,ee.currentSubtitleTrack},S.getDuration=function(){return b.duration},F=S.super("stop"),S.stop=function(){H&&(clearTimeout(H),H=null),k&&k.stopLoad(),F()},_=S.super("destroy"),S.destroy=function(){H&&(clearTimeout(H),H=null),k&&(k.destroy(),S.trigger("hlsDestroyed")),k=null,OvenPlayerConsole.log("HLS : PROVIDER DESTROYED."),_()},OvenPlayerConsole.log("HLS PROVIDER LOADED.")}catch(X){var ne=Le.codes[106];throw ne.error=X,ne}return S},jc=function(b){var v={};hr(v),OvenPlayerConsole.log("API loaded.");var x=(function(z){var ee={},ne={playlist:[],currentIndex:0},X=nn();OvenPlayerConsole.log("PlaylistManager loaded.");var j=function(se){if(se&&(se.file||se.host||se.application||se.stream)){var re=Object.assign({},{default:!1},se);re.file=f(""+re.file),re.host&&re.application&&re.stream&&(re.file=re.host+"/"+re.application+"/stream/"+re.stream,delete re.host,delete re.application,delete re.stream);var ae=/^[^/]+\/(?:x-)?([^/]+)$/;if(ae.test(re.type)&&(re.mimeType=re.type,re.type=re.type.replace(ae,"$1")),ct(re.file)?re.type="rtmp":or(re.file)?re.type="webrtc":Nt(re.file,re.type)?re.type="hls":Or(re.file,re.type)?re.type="dash":re.type||(re.type=h(re.file)),re.lowLatency&&(re.lowLatency=re.lowLatency),re.type){switch(re.type){case"m3u8":case"vnd.apple.mpegurl":re.type="hls";break;case"m4a":re.type="aac";break;case"smil":re.type="rtmp"}return Object.keys(re).forEach((function(le){re[le]===""&&delete re[le]})),re}}};return ee.initPlaylist=function(se,re){OvenPlayerConsole.log("PlaylistManager setPlaylist() ",se);var ae=(u().isArray(se)?se:[se]).map((function(le){u().isArray(le.tracks)||delete le.tracks;var ie=Object.assign({},{sources:[],tracks:[],title:""},le);ie.sources!==Object(ie.sources)||u().isArray(ie.sources)||(ie.sources=[j(ie.sources)]),u().isArray(ie.sources)&&ie.sources.length!==0||(ie.sources=[j(ie)]),u().isArray(ie.sources)&&ie.sources.length!==0||(le.levels?ie.sources=le.levels:ie.sources=[j(le)]);for(var xe=0;xe<ie.sources.length;xe++){var Me,Je=ie.sources[xe];if(Je){var De=Je.default;Je.default=!!De&&De.toString()==="true",ie.sources[xe].label||(ie.sources[xe].label=ie.sources[xe].type+"-"+xe.toString()),Me=j(ie.sources[xe]),X.findProviderNameBySource(Me)?ie.sources[xe]=Me:ie.sources[xe]=null}}return ie.sources=ie.sources.filter((function(We){return!!We})),!ie.title&&ie.sources[0]&&ie.sources[0].label&&(ie.title=ie.sources[0].label),re.isCurrentProtocolOnly()&&(ie.sources=(function(We){if(We){var Ye=ie.sources[0].type;return u().filter(We,{type:Ye})}})(ie.sources)),u().isArray(ie.tracks)||(ie.tracks=[]),u().isArray(ie.captions)&&(ie.tracks=ie.tracks.concat(ie.captions),delete ie.captions),ie.tracks=ie.tracks.map((function(We){return!(!We||!We.file)&&Object.assign({},{kind:"captions",default:!1},We)})).filter((function(We){return!!We})),ie})).filter((function(le){return le.sources&&le.sources.length>0}))||[];return ne.playlist=ae,ae},ee.getPlaylist=function(){return OvenPlayerConsole.log("PlaylistManager getPlaylist() ",ne.playlist),ne.playlist},ee.getCurrentPlayList=function(){return ne.playlist[ne.currentIndex]?ne.playlist[ne.currentIndex]:[]},ee.getCurrentPlaylistIndex=function(){return ne.currentIndex},ee.setCurrentPlaylist=function(se){return ne.playlist[se]&&(ne.currentIndex=se,z.trigger(dt,ne.currentIndex)),ne.currentIndex},ee.getCurrentSources=function(){return ne.playlist[ne.currentIndex]?(OvenPlayerConsole.log("PlaylistManager getCurrentSources() ",ne.playlist[ne.currentIndex].sources),ne.playlist[ne.currentIndex].sources):null},ee.getCurrentAdTag=function(){if(ne.playlist[ne.currentIndex])return ne.playlist[ne.currentIndex].adTagUrl||""},ee})(v),S=(function(){var z=nn(),ee={},ne={};OvenPlayerConsole.log("ProviderController loaded.");var X=function(se,re){ee[se]||(OvenPlayerConsole.log("ProviderController _registerProvider() ",se),ee[se]=re)},j={html5:function(){var se=Qc;return X(bt,se),{name:bt,provider:se}},webrtc:function(){var se=Vc;return X(Lt,se),{name:Lt,provider:se}},dash:function(){var se=Yc;return X(me,se),{name:me,provider:se}},hls:function(){var se=Hc;return X(ot,se),{name:ot,provider:se}}};return ne.loadProviders=function(se){var re=z.findProviderNamesByPlaylist(se);return OvenPlayerConsole.log("ProviderController loadProviders() ",re),re?Promise.all(re.filter((function(ae){return!!j[ae]})).map((function(ae){return j[ae]()}))):Promise.reject(Le.codes[101])},ne.findByName=function(se){return OvenPlayerConsole.log("ProviderController findByName() ",se),ee[se]},ne.getProviderBySource=function(se){var re=z.findProviderNameBySource(se);return OvenPlayerConsole.log("ProviderController getProviderBySource() ",re),ne.findByName(re)},ne.isSameProvider=function(se,re){return OvenPlayerConsole.log("ProviderController isSameProvider() ",z.findProviderNameBySource(se),z.findProviderNameBySource(re)),z.findProviderNameBySource(se)===z.findProviderNameBySource(re)},ne})(),k=$e(),F=(function(z,ee){var ne={},X=de(z),j="";return OvenPlayerConsole.log("MediaManager loaded. browser : ",ee),ne.createMedia=function(se,re){return ne.empty(),ae=re.isLoop(),le=re.isAutoStart(),(j=document.createElement("video")).setAttribute("preload","auto"),j.setAttribute("disableremoteplayback",""),j.setAttribute("webkit-playsinline","true"),j.setAttribute("playsinline","true"),ae&&j.setAttribute("loop",""),le&&j.setAttribute("autoplay",""),X.append(j),j;var ae,le},ne.createAdContainer=function(){var se=document.createElement("div");return se.setAttribute("class","op-ads"),X.append(se),se},ne.empty=function(){OvenPlayerConsole.log("MediaManager removeElement()"),X.removeChild(j),j=null},ne.destroy=function(){X.removeChild(),X=null,j!=null&&j!==""&&(j.srcObject=null),j=null},ne})(b,k),_="",H="",V="",Y=function(z){OvenPlayerConsole.log("runNextPlaylist");var ee=z,ne=!!x.getPlaylist()[ee];H.setSourceIndex(0),H.setVolume(_.getVolume()),ne?(x.setCurrentPlaylist(ee),ue()):v.trigger(et,null)},ue=function(z){return S.loadProviders(x.getCurrentPlayList()).then((function(ee){if(ee.length<1)throw Le.codes[101];_&&(_.destroy(),_=null),V&&(V.destroy(),V=null),V=(function(j,se){var re={},ae=[],le=-1,ie=Gt(),xe=!0;OvenPlayerConsole.log("Caption Manager >> ",se);var Me=function(Ie,Se){return Ie.data=Se||[],Ie.name=Ie.label||Ie.name||Ie.language,Ie.id=(function(ze,He){var lt,tt=ze.kind||"cc";return lt=ze.default||ze.defaulttrack?"default":ze.id||tt+He,xe&&(Je(ae.length||0),xe=!1),lt})(Ie,ae.length),ae.push(Ie),Ie.id},Je=function(Ie){le=Ie,j.trigger(Br,le)};if(j.getConfig().playlist&&j.getConfig().playlist.length>0){var De=j.getConfig().playlist[se];if(De&&De.tracks&&De.tracks.length>0)for(var We=function(){var Ie=De.tracks[Ye];rr(Ie.kind)&&!u().findWhere(Ie,{file:Ie.file})&&ie.load(Ie,Ie.lang,(function(Se){Se&&Se.length>0&&Me(Ie,Se)}),(function(Se){var ze=Le.codes[305];ze.error=Se,j.trigger(kt,ze)}))},Ye=0;Ye<De.tracks.length;Ye++)We()}return j.on(Ir,(function(Ie){var Se=Ie.position;if(le>-1&&ae[le]){var ze=u().filter(ae[le].data,(function(He){return Se>=He.startTime&&(!He.endTime||Se)<=He.endTime}));ze&&ze.length>0&&j.trigger(an,ze[0])}})),re.flushCaptionList=function(Ie){ae=[],Je(Ie)},re.getCaptionList=function(){return ae||[]},re.getCurrentCaption=function(){return le},re.setCurrentCaption=function(Ie){if(!(Ie>-2&&Ie<ae.length))return null;Je(Ie)},re.addCaption=function(Ie){rr(Ie.kind)&&!u().findWhere(ie,{file:Ie.file})&&ie.load(Ie,(function(Se){Se&&Se.length>0&&Me(Ie,Se)}),(function(Se){var ze=errors[305];ze.error=Se,j.trigger(kt,ze)}))},re.removeCaption=function(Ie){return Ie>-1&&Ie<ae.length?(ae.splice(Ie,1),ae):null},re.destroy=function(){ae=[],ie=null,j.off(Ir,null,re)},re})(v,x.getCurrentPlaylistIndex()),OvenPlayerConsole.log("API : init() captions");var ne=hn(x.getCurrentSources(),H),X=ee[ne].name;OvenPlayerConsole.log("API : init() provider",X),_=ee[ne].provider(F.createMedia(X,H),H,x.getCurrentAdTag()),X==="rtmp"&&Object.assign(v,(function(j){return{externalCallbackCreep:function(se){return se.name&&se.data?j.triggerEventFromExternal(se.name,se.data):null}}})(_)),_.on("all",(function(j,se){if(j===kt&&(X===Lt&&_.removeStream(),H.getConfig().autoFallback&&v.getCurrentSource()+1<v.getSources().length))return v.pause(),void v.setCurrentSource(v.getCurrentSource()+1);j===$t&&Y(x.getCurrentPlaylistIndex()+1),j===$r&&H.isAutoStart()&&v.play(),v.trigger(j,se)}))})).then((function(){_.preload(x.getCurrentSources(),z).then((function(){})).catch((function(ee){if(ee&&ee.code&&Le.codes[ee.code])v.trigger(kt,Le.codes[ee.code]);else{var ne=Le.codes[100];ne.error=ee,v.trigger(kt,ne)}}))})).catch((function(ee){if(ee&&ee.code&&Le.codes[ee.code])v.trigger(kt,Le.codes[ee.code]);else{var ne=Le.codes[100];ne.error=ee,v.trigger(kt,ne)}}))};return v.init=function(z){z||(z={}),z.mediaContainer=b,z.browser=k,H=(function(ee,ne){OvenPlayerConsole.log("Configurator loaded.",ee);var X=(function(j){(function(De){Object.keys(De).forEach((function(We){We!=="id"&&(De[We]=(function(Ye){if(Ye===void 0)return null;if(typeof Ye=="string"&&Ye.length<6){var Ie=Ye.toLowerCase();if(Ie==="true")return!0;if(Ie==="false")return!1;if(!isNaN(Number(Ye))&&!isNaN(parseFloat(Ye)))return Number(Ye)}return Ye})(De[We]))}))})(j);var se=Object.assign({},{mediaContainer:"",playbackRates:[2,1.5,1,.5,.25],playbackRate:1,mute:!1,volume:100,loop:!1,controls:!0,autoStart:!1,autoFallback:!0,timecode:!0,sourceIndex:-1,browser:"",hidePlaylistIcon:!1,rtmpBufferTime:1,rtmpBufferTimeMax:3,adClient:"googleima",currentProtocolOnly:!1,systemText:null,lang:"en",loadingRetryCount:0,expandFullScreenUI:!0,fullscreenOption:null,showBigPlayButton:!0,doubleTapToSeek:!1,showZoomSettings:!1,legacyUI:!1,parseStream:{enabled:!1}},j),re=[];se.systemText&&(re=u().isArray(se.systemText)?se.systemText:[se.systemText]);for(var ae=0;ae<re.length;ae++)if(re[ae].lang){var le=u().findWhere(Ke,{lang:re[ae].lang});if(le)Er(le,re[ae]);else{(le=u().findWhere(Ke,{lang:"en"})).lang=re[ae].lang;var ie=Er({},le,re[ae]);Ke.push(ie)}}se.systemText=u().findWhere(Ke,{lang:se.lang});var xe=se.playbackRates;(xe=xe.filter((function(De){return u().isNumber(De)&&De>=.25&&De<=4})).map((function(De){return Math.round(4*De)/4}))).indexOf(1)<0&&xe.push(1),xe.sort(),se.playbackRates=xe,se.rtmpBufferTime=se.rtmpBufferTime>10?10:se.rtmpBufferTime,se.rtmpBufferTimeMax=se.rtmpBufferTimeMax>50?50:se.rtmpBufferTimeMax,se.playbackRates.indexOf(se.playbackRate)<0&&(se.playbackRate=1);var Me=se.playlist;if(Me)u().isArray(Me.playlist)&&(se.feedData=Me,se.playlist=Me.playlist);else{var Je=u().pick(se,["title","description","type","image","file","sources","tracks","host","application","stream","adTagUrl"]);se.playlist=[Je]}return delete se.duration,se})(ee);return{getConfig:function(){return X},getAdClient:function(){return X.adClient},setConfig:function(j,se){X[j]=se},getContainer:function(){return X.mediaContainer},getPlaybackRate:function(){return X.playbackRate},setPlaybackRate:function(j){return X.playbackRate=j,j},getZoomFactor:function(){return X.zoomFactor},setZoomFactor:function(j){return X.zoomFactor=j,j},getQualityLabel:function(){return X.qualityLabel},setQualityLabel:function(j){X.qualityLabel=j},isCurrentProtocolOnly:function(){return X.currentProtocolOnly},getSourceIndex:function(){return X.sourceIndex},setSourceIndex:function(j){X.sourceIndex=j},setTimecodeMode:function(j){X.timecode!==j&&(X.timecode=j,ne.trigger(Wr,j))},isTimecodeMode:function(){return X.timecode},getRtmpBufferTime:function(){return X.rtmpBufferTime},getRtmpBufferTimeMax:function(){return X.rtmpBufferTimeMax},setMute:function(j){X.mute=j},isMute:function(){return X.mute},getVolume:function(){return X.volume},setVolume:function(j){X.volume=j},isLoop:function(){return X.loop},isAutoStart:function(){return X.autoStart},isControls:function(){return X.controls},getPlaybackRates:function(){return X.playbackRates},getBrowser:function(){return X.browser},getSystemText:function(){return X.systemText},getLanguage:function(){return X.lang},getPlaylist:function(){return X.playlist},setPlaylist:function(j){return u().isArray(j)?X.playlist=j:X.playlist=[j],X.playlist}}})(z,v),OvenPlayerConsole.log("API : init()"),OvenPlayerConsole.log("API : init() config : ",H),Le.codes=H.getSystemText().api.error,x.initPlaylist(H.getPlaylist(),H),OvenPlayerConsole.log("API : init() sources : ",x.getCurrentSources()),ue(),setTimeout((function(){v.trigger(Qt)}))},v.getProviderName=function(){return _?_.getName():null},v.getProvider=function(){return _},v.getMseInstance=function(){return _?_.getMse():null},v.getConfig=function(){return OvenPlayerConsole.log("API : getConfig()",H.getConfig()),H.getConfig()},v.getBrowser=function(){return H.getBrowser()},v.setTimecodeMode=function(z){OvenPlayerConsole.log("API : setTimecodeMode()",z),H.setTimecodeMode(z)},v.isTimecodeMode=function(){return OvenPlayerConsole.log("API : isTimecodeMode()"),H.isTimecodeMode()},v.getFramerate=function(){if(OvenPlayerConsole.log("API : getFramerate()"),_)return _.getFramerate()},v.seekFrame=function(z){return _?(OvenPlayerConsole.log("API : seekFrame()",z),_.seekFrame(z)):null},v.getDuration=function(){return _?(OvenPlayerConsole.log("API : getDuration()",_.getDuration()),_.getDuration()):null},v.getDvrWindow=function(){return _?(OvenPlayerConsole.log("API : getDvrWindow()",_.getDvrWindow()),_.getDvrWindow()):null},v.getPosition=function(){return _?(OvenPlayerConsole.log("API : getPosition()",_.getPosition()),_.getPosition()):null},v.getVolume=function(){return _?(OvenPlayerConsole.log("API : getVolume()",_.getVolume()),_.getVolume()):null},v.setVolume=function(z){if(!_)return null;OvenPlayerConsole.log("API : setVolume() "+z),_.setVolume(z)},v.setMute=function(z){return _?(OvenPlayerConsole.log("API : setMute() "+z),_.setMute(z)):null},v.getMute=function(){return _?(OvenPlayerConsole.log("API : getMute() "+_.getMute()),_.getMute()):null},v.load=function(z){return OvenPlayerConsole.log("API : load() ",z),z&&(H.setSourceIndex(0),_&&_.getQualityLevels().length>0&&_.setCurrentQuality(0),"sources"in z?H.setPlaylist(z):H.setPlaylist({sources:z}),x.initPlaylist(H.getPlaylist(),H)),ue()},v.play=function(){if(!_)return null;OvenPlayerConsole.log("API : play() "),_.metaLoaded()||H.isAutoStart()?_.play():v.once($r,(function(){_.play()}))},v.pause=function(){if(!_)return null;OvenPlayerConsole.log("API : pause() "),_.pause()},v.seek=function(z){if(!_)return null;OvenPlayerConsole.log("API : seek() "+z),_.seek(z)},v.setPlaybackRate=function(z){return _?(OvenPlayerConsole.log("API : setPlaybackRate() ",z),_.setPlaybackRate(H.setPlaybackRate(z))):null},v.getPlaybackRate=function(){return _?(OvenPlayerConsole.log("API : getPlaybackRate() ",_.getPlaybackRate()),_.getPlaybackRate()):null},v.setZoomFactor=function(z){return _?(OvenPlayerConsole.log("API : setZoomFactor() ",z),_.setZoomFactor(H.setZoomFactor(z))):null},v.getZoomFactor=function(){return _?(OvenPlayerConsole.log("API : getZoomFactor() ",_.getZoomFactor()),_.getZoomFactor()):null},v.getPlaylist=function(){return OvenPlayerConsole.log("API : getPlaylist() ",x.getPlaylist()),x.getPlaylist()},v.getCurrentPlaylist=function(){return OvenPlayerConsole.log("API : getCurrentPlaylist() ",x.getCurrentPlaylistIndex()),x.getCurrentPlaylistIndex()},v.setCurrentPlaylist=function(z){OvenPlayerConsole.log("API : setCurrentPlaylist() ",z),Y(z)},v.getSources=function(){return _?(OvenPlayerConsole.log("API : getSources() ",_.getSources()),_.getSources()):null},v.getCurrentSource=function(){return _?(OvenPlayerConsole.log("API : getCurrentSource() ",_.getCurrentSource()),_.getCurrentSource()):null},v.setCurrentSource=function(z){if(!_)return null;OvenPlayerConsole.log("API : setCurrentSource() ",z);var ee=_.getPosition();return H.setSourceIndex(z),ue(ee).then((function(){v.trigger(Zr,{currentSource:z})})),z},v.getQualityLevels=function(){return _?(OvenPlayerConsole.log("API : getQualityLevels() ",_.getQualityLevels()),_.getQualityLevels()):null},v.getCurrentQuality=function(){return _?(OvenPlayerConsole.log("API : getCurrentQuality() ",_.getCurrentQuality()),_.getCurrentQuality()):null},v.setCurrentQuality=function(z){return _?(OvenPlayerConsole.log("API : setCurrentQuality() ",z),_.setCurrentQuality(z)):null},v.getAudioTracks=function(){return _?(OvenPlayerConsole.log("API : getAudioTracks() ",_.getAudioTracks()),_.getAudioTracks()):null},v.getCurrentAudioTrack=function(){return _?(OvenPlayerConsole.log("API : getCurrentAudioTrack() ",_.getCurrentAudioTrack()),_.getCurrentAudioTrack()):null},v.setCurrentAudioTrack=function(z){return _?(OvenPlayerConsole.log("API : setCurrentAudioTrack() ",z),_.setCurrentAudioTrack(z)):null},v.getSubtitleTracks=function(){return _?(OvenPlayerConsole.log("API : getSubtitleTracks() ",_.getSubtitleTracks()),_.getSubtitleTracks()):null},v.getCurrentSubtitleTrack=function(){return _?(OvenPlayerConsole.log("API : getCurrentSubtitleTrack() ",_.getCurrentSubtitleTrack()),_.getCurrentSubtitleTrack()):null},v.setCurrentSubtitleTrack=function(z){return _?(OvenPlayerConsole.log("API : setCurrentSubtitleTrack() ",z),_.setCurrentSubtitleTrack(z)):null},v.isAutoQuality=function(){return _?(OvenPlayerConsole.log("API : isAutoQuality()"),_.isAutoQuality()):null},v.setAutoQuality=function(z){return _?(OvenPlayerConsole.log("API : setAutoQuality() ",z),_.setAutoQuality(z)):null},v.getCaptionList=function(){return V?(OvenPlayerConsole.log("API : getCaptionList() ",V.getCaptionList()),V.getCaptionList()):null},v.getCurrentCaption=function(){return V?(OvenPlayerConsole.log("API : getCurrentCaption() ",V.getCurrentCaption()),V.getCurrentCaption()):null},v.setCurrentCaption=function(z){if(!V)return null;OvenPlayerConsole.log("API : setCurrentCaption() ",z),V.setCurrentCaption(z)},v.addCaption=function(z){return V?(OvenPlayerConsole.log("API : addCaption() "),V.addCaption(z)):null},v.removeCaption=function(z){return V?(OvenPlayerConsole.log("API : removeCaption() ",z),V.removeCaption(z)):null},v.getBuffer=function(){if(!_)return null;OvenPlayerConsole.log("API : getBuffer() ",_.getBuffer()),_.getBuffer()},v.getState=function(){return _?(OvenPlayerConsole.log("API : getState() ",_.getState()),_.getState()):null},v.stop=function(){if(!_)return null;OvenPlayerConsole.log("API : stop() "),_.stop()},v.remove=function(){OvenPlayerConsole.log("API : remove() "),V&&(V.destroy(),V=null),_&&(_.destroy(),_=null),F&&(F.destroy(),F=null),v.trigger(Qe),v.off(),S=null,x=null,H=null,OvenPlayerConsole.log("API : remove() - currentProvider, providerController, playlistManager, playerConfig, api event destroed. "),Co.removePlayer(v)},v.getMediaElement=function(){return _.getMediaElement()},v.getVersion=function(){return s},v},Co=(_n=(qn={}).playerList=[],qn.create=function(b,v){window.OvenPlayerConsole&&Object.keys(window.OvenPlayerConsole).length!==0||(window.OvenPlayerConsole={},OvenPlayerConsole.log=function(){});var x=Mr(b),S=jc(x);return S.init(v),_n.push(S),S},qn.getPlayerList=function(){return _n},qn.getPlayerByContainerId=function(b){for(var v=0;v<_n.length;v++)if(_n[v].getContainerId()===b)return _n[v];return null},qn.getPlayerByIndex=function(b){return _n[b]||null},qn.removePlayer=function(b){for(var v=0;v<_n.length;v++)_n[v]===b&&_n.splice(v,1)},qn.generateWebrtcUrls=function(b){return(u().isArray(b)?b:[b]).map((function(v,x){if(v.host&&or(v.host)&&v.application&&v.stream)return{file:v.host+"/"+v.application+"/"+v.stream,type:"webrtc",label:v.label?v.label:"webrtc-"+(x+1)}}))},qn.debug=function(b){return window.OvenPlayerConsole=b?{log:window.console.log}:{log:function(){}},b},qn),Xn=function(b,v){var x='<div id="'+v.id+'" class="op-setting-panel '+(v.isRoot?"animated fadeIn":"")+'" style="max-height: '+v.height+'px"><div class="op-setting-title-container"><div class="op-setting-title" tabindex="0">'+(v.isRoot?"":'<span class="op-setting-title-previcon">&lt;</span>')+'<span class="op-setting-title-title">'+v.title+'</span></div></div><div class="op-setting-item-container">';return u().forEach(v.body,(function(S){x+=Kc(S,v.useCheck)})),x+="</div></div>"},Kc=function(b,v){return'<div class="op-setting-item" op-panel-type="'+b.panelType+'" op-data-value="'+b.value+'">'+(v?'<span class="op-setting-item-checked '+(b.isCheck?"op-show":"")+'">&#x2713;</span>':"")+'<span class="op-setting-item-title">'+b.title+"</span>"+(b.hasNext?'<span class="op-setting-item-nexticon">&gt;</span><span class="op-setting-item-value">'+b.description+"</span>":"")+"</div>"},zc=function(b,v){return'<div class="op-playlist-card '.concat(v?"active":"",'" data-index="').concat(b.index,'">')+'<div class="op-playlist-card-thumbnail '.concat(b.image?"":"empty",'">').concat(b.image?"<img src=".concat(b.image,">"):'<i class="op-con op-empty-video"></i>'," ").concat(b.duration?'<span class="op-badge">'.concat(A(b.duration),"</span>"):""," </div>")+'<div class="op-playlist-card-title">'.concat(b.title,"</div>")+"</div>"},Ya={TextViewTemplate:function(b){return'<div class="textView" style="padding : 5px; background: red; position : absolute; top: 0;">'+"<h3>".concat(b,"</h3>")+'<button type="button" class="btn">button</button></div>'},ViewTemplate:function(b,v){return'<div class="ovenplayer op-wrapper" tabindex="-1" '.concat(v?'id = "'.concat(v,'"'):"",">")+'<div class="op-ratio"></div><div class="op-player op-clear"><div class="op-core-ui-wrapper op-clear"><div class="op-media-element-container op-clear"></div><div class="op-ui op-clear"></div></div></div></div>'},HelpersTemplate:function(b,v){return'<div class="op-helpers-container"></div>'},BigButtonTemplate:function(b,v){return'<div class="op-bigbutton-container ">'+"".concat(v===Mt?'<i class="op-con op-pause-big"></i>':"")+"".concat(v===Zt?'<i class="op-bigbutton op-con op-play-big"></i>':"")+"".concat(v===Pt?'<i class="op-bigbutton op-con op-play-big"></i>':"")+"".concat(v===It?'<i class="op-bigbutton op-con op-replay-big"></i>':"")+"</div>"},ThumbnailTemplate:function(b,v){return'<div class="op-thumbnail-container"><div class="op-thumbnail-wrapper">'+"".concat(v.title?'<div class="op-thumbnail-header">'.concat(v.title,"</div>"):"")+"</div></div>"},WaterMarkTemplate:function(b,v){return'<div class="op-watermark-container"><div class="op-watermark">'+"".concat(v.waterMark.image?'<img src="'.concat(v.waterMark.image,'">'):"")+"".concat(v.waterMark.text?'<span class="op-watermark-text">'.concat(v.waterMark.text,"</span>"):"")+"</div></div>"},MessageBoxTemplate:function(b,v){return'<div class="op-message-box op-clear '.concat(v.dontClose===!0?"op-message-box-default-cursor":"",'">')+'<div class="op-message-container ">'+'<div class="op-message-text">'.concat(v.message)+"".concat(v.description?'<div class="op-message-description">'.concat(v.description,"</div>"):"")+"</div>"+"".concat(v.iconClass?'<div class="op-message-icon"><i class="op-con '.concat(v.iconClass,'"></i></div>'):"")+"</div></div>"},SpinnerTemplate:function(b){return'<div class="op-spinner-container"><div class="op-spinner"></div></div>'},ContextPanelTemplate:function(b){return'<div class="op-context-panel animated fadeIn"><div class="op-context-item" tabindex="1">'+'<span class="op-context-item-text">'.concat(b.context," ").concat(s,"</span>")+"</div></div>"},CaptionViewerTemplate:function(b){return'<div class="op-caption-viewer">    <div class="op-caption-text-container">        <pre class="op-caption-text"></pre>      </div></div>'},ControlsTemplate:function(b,v){return'<div class="op-controls-container op-clear"><div class="op-bottom-panel op-clear"><div class="op-gradient-bottom op-clear"></div><div class="op-controls op-clear"><div class="op-left-controls op-clear"></div><div class="op-right-controls op-clear">'+'<div class="playlist-holder op-navigators op-clear">'.concat(v?'<button class="op-button op-playlist-button"><i class="op-con op-playlist-icon"></i></button>':"","</div>")+'<div class="setting-holder op-navigators op-clear"></div><div class="fullscreen-holder op-navigators op-clear"></div></div></div><div class="op-progressbar-container op-clear"></div></div></div>'},VolumeButtonTemplate:function(b){return'<div class="op-navigators op-volume-controller"><button class="op-button op-volume-button"><i class="op-con op-volume-max"></i><i class="op-con op-volume-small"></i><i class="op-con op-volume-mute"></i></button><div class="op-volume-slider-container"><div class="op-volume-silder"><div class="op-volume-slider-bg"></div><div class="op-volume-slider-value"></div><div class="op-volume-slider-handle"></div></div></div></div>'},ProgressBarTemplate:function(b){return'<div class="op-progressbar" tabindex="0"><div class="op-progressbar-padding"></div><div class="op-progress-list"><div class="op-load-progress"></div><div class="op-play-progress op-play-background-color"></div><div class="op-hover-progress"></div></div><div class="op-progressbar-knob-container"><div class="op-progressbar-knob op-play-background-color"></div></div><span class="op-progressbar-preview"></span><span class="op-progressbar-time">00:00</span></div>'},PlayButtonTemplate:function(b){return'<div class="op-navigators op-play-controller"><button class="op-button op-play-button" type="button"><i class="op-con op-play"></i><i class="op-con op-pause" style="display: none;"></i><i class="op-con op-replay" style="display: none;"></i></button><button class="op-button op-seek-button op-seek-button-back" type="button"><i class="op-con op-seek-back"></i><span class="op-seek-back-text">10</span></button><button class="op-button op-seek-button op-seek-button-forward" type="button"><i class="op-con op-seek-forward"></i><span class="op-seek-forward-text">10</span></button></div>'},SettingButtonTemplate:function(b){return'<button class="op-button op-setting-button"><i class="op-con op-setting"></i></button>'},FrameButtonsTemplate:function(b){return'<div class="op-frame-buttons"><button class="op-button op-frame-button" op-data-value="-5"><div class="frame-icon"><span class="btn-text">-5f</span></div></button><button class="op-button op-frame-button" op-data-value="-1"><div class="frame-icon"><span class="btn-text">-1f</span></div></button><button class="op-button op-frame-button" op-data-value="+1"><div class="frame-icon reverse"><span class="btn-text">+1f</span></div></button><button class="op-button op-frame-button" op-data-value="+5"><div class="frame-icon reverse"><span class="btn-text">+5f</span></div></button></div>'},TimeDisplayTemplate:function(b,v){return'<div class="op-navigators op-time-display">'+(v.duration===1/0?'<span class="op-live-badge" disabled="disabled">'+(v.type==="webrtc"?v.isP2P?'<span class="op-live-badge-lowlatency">'.concat(b.controls.low_latency_p2p,"</span>"):'<span class="op-live-badge-lowlatency">'.concat(b.controls.low_latency_live,"</span>"):'<span class="op-live-text" title="Skip ahead to live.">'.concat(b.controls.live,"</span>"))+"</span>":'<span class="op-time-current">00:00</span><span class="op-time-separator"> / </span><span class="op-time-duration">00:00</span>')+"</div>"},FullScreenButtonTemplate:function(b){return'<button class="op-button op-fullscreen-button"><i class="op-con op-fullscreen-expand"></i><i class="op-con op-fullscreen-compress"></i></button>'},PanelsTemplate:Xn,SpeedPanelTemplate:Xn,ZoomPanelTemplate:Xn,SourcePanelTemplate:Xn,QualityPanelTemplate:Xn,AudioTrackPanelTemplate:Xn,SubtitleTrackPanelTemplate:Xn,CaptionPanelTemplate:Xn,TimeDisplayPanelTemplate:Xn,PlaylistPanelTemplate:function(b,v){return'<div class="op-playlist" tabindex="0">'+'<div class="op-playlist-header">'.concat(b.playlist,' <i class="op-con op-close-icon btn-close"></i></div>')+'<div class="op-playlist-body"><div class="op-playlist-body-container"><div class="op-playlist-body-center"><div class="op-playlist-body-row"></div></div></div><div class="op-playlist-body-arrows"><i class="op-con op-arrow-left btn-left"></i><i class="op-con op-arrow-right btn-right"></i></div></div></div>'}},kr=function(b,v,x,S,k,F,_,H){var V,Y=u().isElement(b)?de(b):b,ue={},z=null,ee={};ee.data=S;var ne=function(X){var j=document.createElement("div");return j.innerHTML=X,V=de(j.firstChild),j.firstChild};return x&&x.systemText&&(z=x.systemText.ui),H?Y.replace(ne(Ya[v+"Template"](z,S))):Y.append(ne(Ya[v+"Template"](z,S))),F&&F(V,ee),Object.keys(k).forEach((function(X){var j=X.split(" "),se=j[0].replace(/ /gi,""),re=j[1].replace(/ /gi,""),ae="";if(ae=re==="document"||re==="window"||re==="body"?de(re):V.find(re)||(V.hasClass(re.replace(".",""))?V:null),!(se&&re&&ae))return!1;var le=Object.keys(ue).length++,ie=function(We){return k[X](We,V,ee)};ue[le]={name:se,target:re,callback:ie};var xe=null;se.indexOf("touch")>-1&&(xe={passive:!0});var Me=ae.get().length;if(Me>1)for(var Je=ae.get(),De=0;De<Me;De++)Je[De].addEventListener(se,ie,xe);else ae.get().addEventListener(se,ie,xe)})),ee.destroy=function(){Object.keys(ue).forEach((function(X){var j=ue[X],se="",re=(se=j.target==="document"||j.target==="window"||j.target==="body"?de(j.target):V.find(j.target)||(V.hasClass(j.target.replace(".",""))?V:null)).get().length;if(re>1)for(var ae=se.get(),le=0;le<re;le++)ae[le].removeEventListener(j.name,j.callback);else se.get().removeEventListener(j.name,j.callback);delete ue[X]})),V&&(H?(V.removeChild(),V.removeAttribute("class")):V.remove()),_&&_(ee)},ee},Ha=function(b,v,x,S,k,F,_,H){var V="",Y={message:x,description:S,iconClass:F,dontClose:H},ue={"click .op-message-text":function(z,ee,ne){z.stopPropagation(),H||(V&&clearTimeout(V),_&&_(),ne.destroy())},"click .op-con":function(z,ee,ne){z.preventDefault(),H||(V&&clearTimeout(V),_&&_(),ne.destroy())}};return kr(b,"MessageBox",v.getConfig(),Y,ue,(function(z,ee){k&&(V=setTimeout((function(){ee.destroy()}),k||5e3))}),(function(){}))},qc=function(b,v){var x,S,k=!1,F="",_="",H="",V=null,Y=v.getConfig().image||v.getConfig().title,ue=v.getConfig().waterMark&&v.getConfig().waterMark.image||v.getConfig().waterMark&&v.getConfig().waterMark.text,z=!1;return kr(b,"Helpers",v.getConfig(),null,{},(function(ee,ne){var X=!1,j=-1;function se(ae){v.getConfig().showBigPlayButton&&(v.getState()!==Pt&&v.getState()!==It||(_&&_.destroy(),F&&F.destroy(),F=(function(le,ie,xe){var Me={"click .op-bigbutton-container":function(Je){Je.preventDefault(),Je.stopPropagation();var De=ie.getState(),We=ie.getPlaylist(),Ye=ie.getCurrentPlaylist();De===Pt||De===Zt?ie.play():De===Fe?ie.setCurrentSource(ie.getCurrentSource()):De===It&&We.length===Ye+1&&(ie.seek(0),ie.play())}};return kr(le,"BigButton",ie.getConfig(),xe,Me,(function(Je,De,We){}),(function(){}))})(ee,v,ae)))}function re(){var ae=v.getMediaElement();ae&&(ae.poster=""),v.getConfig().image&&(ae.poster=v.getConfig().image),x&&x.destroy(),x=(function(le,ie,xe){return kr(le,"Thumbnail",ie.getConfig(),xe,{},(function(Me,Je){}),(function(){}))})(ee,v,v.getConfig())}H=(function(ae,le){var ie="";return Object.assign(kr(ae,"Spinner",le.getConfig(),null,{},(function(xe,Me){ie=xe}),(function(){})),{show:function(xe){xe?ie.show():ie.hide()}})})(ee,v),(function(ae,le,ie){de(le.getContainerElement()),kr(ae,"CaptionViewer",le.getConfig(),ie,{},(function(xe,Me,Je){var De=!1,We=0;le.on(Br,(function(Ye){Ye>-1?De=!1:(De=!0,xe.find(".op-caption-text").text(""))}),Je),le.on(an,(function(Ye){if(!De&&Ye&&Ye.text){var Ie=Ye.endTime-Ye.startTime;We&&clearTimeout(We),xe.find(".op-caption-text").html(Ye.text),Ie&&(We=setTimeout((function(){xe.find(".op-caption-text").text("")}),1e3*Ie))}}),Je)}),(function(xe){ae.find(".op-caption-text").text(""),le.off(Br,null,xe),le.off(an,null,xe)}))})(ee,v),v.on(Qt,(function(){Y&&re(),ue&&(S&&S.destroy(),S=(function(ae,le,ie){var xe=null,Me=null;return kr(ae,"WaterMark",le.getConfig(),ie,{},(function(Je,De){xe=Je.find(".op-watermark"),Me=Je.find(".op-watermark-text");var We=le.getConfig().waterMark,Ye=We.position||"top-right",Ie=We.y||"5%",Se=We.x||"2.8125%";xe.css(Ye.split("-")[0],Ie),xe.css(Ye.split("-")[1],Se);var ze=We.width||"auto",He=We.height||"auto";xe.css("width",ze),xe.css("height",He);var lt=We.opacity||.7;xe.css("opacity",lt),We.text&&We.font&&u().each(We.font,(function(tt,ye){Me.css(ye,tt)}))}),(function(){}))})(ee,v,v.getConfig())),k||(se(Zt),k=!0)}),ne),v.on(er,(function(ae){ae.message&&(F&&F.destroy(),_&&_.destroy(),V=Ha(ee,v,ae.message,null,ae.timer,ae.iconClass,ae.onClickCallback,!1),v.once(In,(function(le){!le.mute&&V&&V.destroy()}),ne))}),ne),v.on(Wt,(function(ae){ae&&ae.newstate&&(ae.newstate===Pt&&_&&_.destroy(),ae.newstate===Mt||ae.newstate===be?(z=!1,_&&_.destroy(),F&&F.destroy(),x&&x.destroy(),X||H.show(!1)):ae.newstate===It?(H.show(!1),se(ae.newstate)):ae.newstate===Ze||ae.newstate==="adLoading"?(z=!1,_&&_.destroy(),F&&F.destroy(),H.show(!0)):X||H.show(!1))}),ne),v.on(Zr,(function(){Y&&re()})),v.on(rn,(function(ae){if(ae.currentQuality<0)return!1;ae.isAuto?(X=!1,H.show(!1)):ae.type==="request"?(j=ae.currentQuality,X=!0,H.show(!0)):ae.type==="render"&&j===ae.currentQuality&&(X=!1,H.show(!1))}),ne),v.on(kt,(function(ae){if(ae.code===510&&(z=!0),ae.code===101&&v.getPlaylist().length===0&&(z=!0),!z){var le="",ie="";F&&F.destroy(),ae&&ae.code&&ae.code>=100&&ae.code<1e3?(le=ae.message,ae.code===100&&(ie=ae.error.toString())):le="Can not play due to unknown reasons.",OvenPlayerConsole.log("error occured : ",ae),(function(xe,Me,Je,De){F&&F.destroy(),_&&_.destroy(),_=Ha(ee,v,xe,Me,null,De,null,!0)})(le,ie,0,"op-warning code-"+ae.code)}}),ne),v.on(xt,(function(ae){var le="Because the network connection is unstable, the following media source will be played.";v.getCurrentSource()+1===v.getQualityLevels().length&&(le="Network connection is unstable. Check the network connection."),OvenPlayerConsole.log(le)}),ne),v.on(et,(function(){Y&&re()}),ne)}),(function(ee){v.off(Qt,null,ee),v.off(Wt,null,ee),v.off(er,null,ee),v.off(kt,null,ee),v.off(xt,null,ee),v.off(et,null,ee),v.off(dt,null,ee)}))},Mn=[],Cn=function(){var b={},v=function(){for(var x=0;x<Mn.length;x++)Mn[x].data.setFront(!1);Mn.length&&Mn[Mn.length-1].data.setFront(!0)};return b.clear=function(){u().each(Mn,(function(x){x.destroy()})),Mn=[],v()},b.removeLastItem=function(){Mn.pop().destroy(),v()},b.add=function(x){Mn.push(x),v()},b.size=function(){return Mn.length},b},Ts={speed:"Speed",speedUnit:"x",source:"Source",quality:"Quality",audioTrack:"Audio",caption:"Caption",display:"Display",zoom:"Zoom",subtitleTrack:"Subtitle"},Xc=function(b,v,x){var S=de(v.getContainerElement()),k=Cn(),F=v.getConfig();function _(V,Y){var ue={id:"panel-"+new Date().getTime(),title:"",body:[],useCheck:!0,panelType:Y,height:S.height()-S.find(".op-bottom-panel").height()};if(ue.title=Ts[Y],Y==="speed")for(var z=V.getConfig().playbackRates,ee=V.getPlaybackRate(),ne=0;ne<z.length;ne++){var X={title:z[ne]+Ts.speedUnit,isCheck:ee===z[ne],value:z[ne],description:z[ne],panelType:Y};ue.body.push(X)}else if(Y==="zoom"){var j={title:"+5%",isCheck:!1,value:.05,description:.05,panelType:Y},se={title:"100%",isCheck:!1,value:0,description:1,panelType:Y},re={title:"-5%",isCheck:!1,value:-.05,description:-.05,panelType:Y};ue.body.push(j),ue.body.push(se),ue.body.push(re)}else if(Y==="source")for(var ae=V.getSources(),le=0;le<ae.length;le++){var ie={title:ae[le].label,isCheck:V.getCurrentSource()===le,value:le,panelType:Y};ue.body.push(ie)}else if(Y==="quality"){var xe=V.getQualityLevels(),Me=V.isAutoQuality();ue.body.push({title:F.systemText.ui.quality.auto,isCheck:Me,value:"AUTO",panelType:Y});for(var Je=0;Je<xe.length;Je++){var De={title:xe[Je].label,isCheck:!Me&&V.getCurrentQuality()===Je,value:Je,panelType:Y};ue.body.push(De)}}else if(Y==="audioTrack")for(var We=V.getAudioTracks(),Ye=0;Ye<We.length;Ye++){var Ie={title:We[Ye].label,isCheck:We[Ye].index===V.getCurrentAudioTrack(),value:We[Ye].index,panelType:Y};ue.body.push(Ie)}else if(Y==="subtitleTrack"){var Se=V.getSubtitleTracks();ue.body.push({title:"Off",isCheck:V.getCurrentSubtitleTrack()===-1,value:-1,panelType:Y});for(var ze=0;ze<Se.length;ze++){var He={title:Se[ze].label,isCheck:Se[ze].index===V.getCurrentSubtitleTrack(),value:Se[ze].index,panelType:Y};ue.body.push(He)}}else if(Y==="caption"){var lt=V.getCaptionList();ue.body.push({title:"Off",isCheck:V.getCurrentCaption()===-1,value:-1,panelType:Y});for(var tt=0;tt<lt.length;tt++){var ye={title:lt[tt].label,isCheck:V.getCurrentCaption()===tt,value:tt,panelType:Y};ue.body.push(ye)}}else if(Y==="display")for(var we=["Play time","Framecode"],je=0;je<we.length;je++){var rt={title:we[je],isCheck:V.isTimecodeMode()?we[je]==="Play time":we[je]==="Framecode",value:we[je],panelType:Y};ue.body.push(rt)}return ue}F&&F.systemText&&Object.keys(Ts).forEach((function(V){Ts[V]=F.systemText.ui.setting[V]})),x.setFront=function(V){V?S.find("#"+x.id).removeClass("background"):S.find("#"+x.id).addClass("background")};var H={"click .op-setting-item":function(V,Y,ue){if(V.preventDefault(),S.find("#"+x.id).hasClass("background"))return!1;var z=de(V.currentTarget).attr("op-panel-type"),ee=null;z==="speed"?ee=(function(ne,X,j){var se=de(X.getContainerElement()),re=Cn();j.setFront=function(le){le?se.find("#"+j.id).removeClass("background"):se.find("#"+j.id).addClass("background")};var ae={"click .op-setting-item":function(le,ie,xe){le.preventDefault();var Me=de(le.currentTarget).attr("op-data-value");X.setPlaybackRate(parseFloat(Me)),re.clear()},"click .op-setting-title":function(le,ie,xe){le.preventDefault(),re.removeLastItem()}};return kr(ne,"SpeedPanel",X.getConfig(),j,ae,(function(le,ie){}),(function(le){}))})(b,v,_(v,z)):z==="zoom"?ee=(function(ne,X,j){var se=de(X.getContainerElement()),re=se.find(".op-media-element-container"),ae=Cn();j.setFront=function(ie){ie?se.find("#"+j.id).removeClass("background"):se.find("#"+j.id).addClass("background")};var le={"click .op-setting-item":function(ie,xe,Me){ie.preventDefault();var Je=de(ie.currentTarget).attr("op-data-value"),De=X.getZoomFactor();(De=Je==0?1:parseFloat(De)+parseFloat(Je))<=0&&(De=0),re.get().style.setProperty("--mediaZoom",X.setZoomFactor(parseFloat(De).toFixed(2)))},"click .op-setting-title":function(ie,xe,Me){ie.preventDefault(),ae.removeLastItem()}};return kr(ne,"ZoomPanel",X.getConfig(),j,le,(function(ie,xe){}),(function(ie){}))})(b,v,_(v,z)):z==="source"?ee=(function(ne,X,j){var se=de(X.getContainerElement()),re=Cn();j.setFront=function(le){le?se.find("#"+j.id).removeClass("background"):se.find("#"+j.id).addClass("background")};var ae={"click .op-setting-item":function(le,ie,xe){le.preventDefault();var Me=de(le.currentTarget).attr("op-data-value");X.setCurrentSource(parseInt(Me)),re.clear()},"click .op-setting-title":function(le,ie,xe){le.preventDefault(),re.removeLastItem()}};return kr(ne,"SourcePanel",X.getConfig(),j,ae,(function(le,ie){}),(function(le){}))})(b,v,_(v,z)):z==="quality"?ee=(function(ne,X,j){var se=de(X.getContainerElement()),re=Cn();j.setFront=function(le){le?se.find("#"+j.id).removeClass("background"):se.find("#"+j.id).addClass("background")};var ae={"click .op-setting-item":function(le,ie,xe){le.preventDefault();var Me=de(le.currentTarget).attr("op-data-value");Me==="AUTO"?X.setAutoQuality(!X.isAutoQuality()):X.setCurrentQuality(parseInt(Me)),re.clear()},"click .op-setting-title":function(le,ie,xe){le.preventDefault(),re.removeLastItem()}};return kr(ne,"QualityPanel",X.getConfig(),j,ae,(function(le,ie){X.on(rn,(function(xe){var Me=xe.currentQuality;xe.type==="render"&&u().forEach(se.find("#"+ie.data.id).find(".op-setting-item").get(),(function(Je){var De=de(Je);De.find(".op-setting-item-checked").hasClass("op-show")&&De.find(".op-setting-item-checked").removeClass("op-show"),xe.isAuto||Me!==parseInt(De.attr("op-data-value"))||De.find(".op-setting-item-checked").addClass("op-show"),xe.isAuto&&De.attr("op-data-value")==="AUTO"&&De.find(".op-setting-item-checked").addClass("op-show")}))}),ie)}),(function(le){X.off(rn,null,le)}))})(b,v,_(v,z)):z==="audioTrack"?ee=(function(ne,X,j){var se=de(X.getContainerElement()),re=Cn();j.setFront=function(le){le?se.find("#"+j.id).removeClass("background"):se.find("#"+j.id).addClass("background")};var ae={"click .op-setting-item":function(le,ie,xe){le.preventDefault();var Me=de(le.currentTarget).attr("op-data-value");X.setCurrentAudioTrack(parseInt(Me)),re.clear()},"click .op-setting-title":function(le,ie,xe){le.preventDefault(),re.removeLastItem()}};return kr(ne,"AudioTrackPanel",X.getConfig(),j,ae,(function(le,ie){X.on(Ln,(function(xe){u().forEach(se.find("#"+ie.data.id).find(".op-setting-item").get(),(function(Me){var Je=de(Me);Je.find(".op-setting-item-checked").hasClass("op-show")&&Je.find(".op-setting-item-checked").removeClass("op-show"),xe.currentAudioTrack===parseInt(Je.attr("op-data-value"))&&Je.find(".op-setting-item-checked").addClass("op-show")}))}),ie)}),(function(le){X.off(Ln,null,le)}))})(b,v,_(v,z)):z==="subtitleTrack"?ee=(function(ne,X,j){var se=de(X.getContainerElement()),re=Cn();j.setFront=function(le){le?se.find("#"+j.id).removeClass("background"):se.find("#"+j.id).addClass("background")};var ae={"click .op-setting-item":function(le,ie,xe){le.preventDefault();var Me=de(le.currentTarget).attr("op-data-value");X.setCurrentSubtitleTrack(parseInt(Me)),re.clear()},"click .op-setting-title":function(le,ie,xe){le.preventDefault(),re.removeLastItem()}};return kr(ne,"SubtitleTrackPanel",X.getConfig(),j,ae,(function(le,ie){X.on(Re,(function(xe){u().forEach(se.find("#"+ie.data.id).find(".op-setting-item").get(),(function(Me){var Je=de(Me);Je.find(".op-setting-item-checked").hasClass("op-show")&&Je.find(".op-setting-item-checked").removeClass("op-show"),xe.currentSubtitleTrack===parseInt(Je.attr("op-data-value"))&&Je.find(".op-setting-item-checked").addClass("op-show")}))}),ie)}),(function(le){X.off(Re,null,le)}))})(b,v,_(v,z)):z==="caption"?ee=(function(ne,X,j){var se=de(X.getContainerElement()),re=Cn();j.setFront=function(le){le?se.find("#"+j.id).removeClass("background"):se.find("#"+j.id).addClass("background")};var ae={"click .op-setting-item":function(le,ie,xe){le.preventDefault();var Me=de(le.currentTarget).attr("op-data-value");X.setCurrentCaption(parseFloat(Me)),re.clear()},"click .op-setting-title":function(le,ie,xe){le.preventDefault(),re.removeLastItem()}};return kr(ne,"CaptionPanel",X.getConfig(),j,ae,(function(le,ie){}),(function(le){}))})(b,v,_(v,z)):z==="display"&&(ee=(function(ne,X,j){var se=de(X.getContainerElement()),re=Cn();j.setFront=function(le){le?se.find("#"+j.id).removeClass("background"):se.find("#"+j.id).addClass("background")};var ae={"click .op-setting-item":function(le,ie,xe){le.preventDefault();var Me=de(le.currentTarget).attr("op-data-value");X.setTimecodeMode(Me==="Play time"),re.clear()},"click .op-setting-title":function(le,ie,xe){le.preventDefault(),re.removeLastItem()}};return kr(ne,"TimeDisplayPanel",X.getConfig(),j,ae,(function(le,ie){}),(function(le){}))})(b,v,_(v,z))),k.add(ee)},"click .op-setting-title":function(V,Y,ue){if(V.preventDefault(),S.find("#"+x.id).hasClass("background"))return!1;k.removeLastItem()}};return kr(b,"Panels",v.getConfig(),x,H,(function(V,Y){S.find(".op-setting-panel")&&S.find(".op-setting-panel").css("max-height",S.height()-S.find(".op-bottom-panel").height()+"px"),v.on(rn,(function(ue){var z=ue.currentQuality;ue.type==="render"&&S.find("#"+Y.data.id).find(".op-setting-item")&&u().forEach(S.find("#"+Y.data.id).find(".op-setting-item").get()||[],(function(ee){var ne=de(ee);if(ne.attr("op-panel-type")==="quality"){var X=v.getQualityLevels()[z];ne.find(".op-setting-item-value").text(X.width+"x"+X.height+", "+bo(X.bitrate,!0,"bps"))}}))}),Y),v.on(Ln,(function(ue){u().forEach(S.find("#"+Y.data.id).find(".op-setting-item").get()||[],(function(z){var ee=de(z);ee.attr("op-panel-type")==="audioTrack"&&ee.find(".op-setting-item-value").text(v.getAudioTracks()[ue.currentAudioTrack].label)}))}),Y),v.on(Re,(function(ue){u().forEach(S.find("#"+Y.data.id).find(".op-setting-item").get()||[],(function(z){var ee=de(z);ee.attr("op-panel-type")==="subtitleTrack"&&(ue.currentSubtitleTrack===-1?ee.find(".op-setting-item-value").text("Off"):ee.find(".op-setting-item-value").text(v.getSubtitleTracks()[ue.currentSubtitleTrack].label))}))}),Y),v.on(Ar,(function(ue){u().forEach(S.find("#"+Y.data.id).find(".op-setting-item").get()||[],(function(z){var ee=de(z);ee.attr("op-panel-type")==="zoom"&&ee.find(".op-setting-item-value").text(Math.round(100*ue.zoomFactor)+"%")}))}),Y)}),(function(V){v.off(rn,null,V),v.off(Ln,null,V),v.off(Re,null,V),v.off(Ar,null,V)}))},xn={speed:"Speed",speedUnit:"x",source:"Source",quality:"Quality",audioTrack:"Audio",caption:"Caption",display:"Display",zoom:"Zoom",subtitleTrack:"Subtitle"},xo=function(b,v){var x,S="",k="",F="",_="",H="",V="",Y=!1,ue=!1,z=!1,ee=v.getConfig().browser,ne=ee.os==="Android",X=ee.os==="iOS",j=de(v.getContainerElement()),se={};Y=v.getPlaylist().length>1,v.getConfig().hidePlaylistIcon===!0&&(Y=!1),v.getConfig().legacyUI===!0&&(Y=!0);var re={"mouseleave .op-controls":function(ae,le,ie){ae.preventDefault(),S.setMouseDown(!1),le.find(".op-volume-slider-container").removeClass("active")},"click .op-playlist-button":function(ae,le,ie){ae.preventDefault(),(function(xe,Me){var Je=de(Me.getContainerElement()),De="",We=Me.getPlaylist(),Ye=We.length,Ie=6,Se=0,ze=[];function He(ye){var we,je,rt=Math.ceil(Ye/Ie),St=Me.getCurrentPlaylist();ze=We.slice(ye*Ie,ye*Ie+Ie),De.find(".op-playlist-body-row").removeChild(),De.find(".op-arrow-left").removeClass("disable"),De.find(".op-arrow-right").removeClass("disable");for(var nt=0;nt<ze.length;nt++){var wt=ye*Ie+nt;ze[nt].index=wt,De.find(".op-playlist-body-row").get().append((we=zc(ze[nt],St===wt),je=void 0,(je=document.createElement("div")).innerHTML=we,je.firstChild))}ye===0&&De.find(".op-arrow-left").addClass("disable"),ye+1===rt&&De.find(".op-arrow-right").addClass("disable")}function lt(){var ye=Me.getCurrentPlaylist();return Math.ceil((ye+1)/Ie)-1}Je.width()>576?Ie=6:Je.width()<=576&&(Ie=1);var tt={"click .btn-close":function(ye,we,je){ye.preventDefault(),je.destroy()},"click .op-arrow-left":function(ye,we,je){ye.preventDefault(),de(ye.target).hasClass("disable")||He(--Se)},"click .op-arrow-right":function(ye,we,je){ye.preventDefault(),de(ye.target).hasClass("disable")||He(++Se)}};kr(xe,"PlaylistPanel",Me.getConfig(),We,tt,(function(ye,we){De=ye,He(Se=lt()),Me.on(At,(function(je){je==="xsmall"&&Ie===6?(Ie=1,He(Se=lt())):je!=="small"&&je!=="medium"&&je!=="large"||Ie!==1||(Ie=6,He(Se=lt()))}),we),Me.on(dt,(function(je){He(Se=lt())}),we),ye.get().addEventListener("click",(function(je){for(var rt=je.target;rt;){if(de(rt).hasClass("op-playlist-card"))return void Me.setCurrentPlaylist(parseInt(de(rt).attr("data-index")));rt=rt.parentElement}}),!0)}),(function(ye){Me.off(At,null,ye),Me.off(dt,null,ye)}))})(le,v)}};return kr(b,"Controls",v.getConfig(),Y,re,(function(ae,le){function ie(Ie,Se){_&&_.destroy(),_=(function(ze,He,lt,tt){var ye=de(He.getContainerElement());He.getConfig().disableSeekUI&&ze.addClass("op-progressbar-container-disabled");var we=0,je=!1,rt=!1,St=Cn(),nt="",wt=0,Ct=null,pt="",nr="",mt="",Bt="",qt="",ar="",Jt=0,pr="",Ut="",ir=He.getBrowser().mobile,br=He.getMediaElement(),gr=!1,gt=!1;function dr(Dt){Dt<0&&(Dt=0),Dt>1&&(Dt=1);var lr=pt.width(),Yt=lr*Dt;mt.css("width",Yt+"px"),Bt.css("left",Yt+"px");var Dr=(lr-Jt)*Dt;qt.css("left",Dr+"px"),we=Yt}function zr(Dt){var lr=pt.width()*Dt;Bt.css("width",(Dt===0?Dt:lr-we)+"px")}function kn(Dt){var lr=pt.width(),Yt=pt.offset().left,Dr=Dt.pageX;Dt.touches&&(Dr=Dt.pageX||Dt.touches[0].clientX);var Yr=(Dr-Yt)/lr;return Yr<0?0:Yr>1?1:Yr}function ri(Dt,lr){if(St.size()>0||Dt<0)return pr.hide(),void Ut.hide();pr.show(),Ut.show();var Yt,Dr=Zi(Dt);Yt=Dr.second;var Yr=pr.width(),fi=pt.width(),gf=fi*Dt,To=lr.pageX-pt.offset().left;lr.touches&&(To=(lr.pageX||lr.touches[0].clientX)-pt.offset().left);var Ka=function(ks){return To<ks/2?0:fi-To<ks/2?fi-ks:gf-ks/2},pf=Ka(Yr);if(pr.css("left",pf+"px"),He.getSources()[He.getCurrentSource()].gridThumbnail){var mf=He.getConfig().gridThumbnail.thumbnailInterval,Is=He.getConfig().gridThumbnail.originalThumbnailWidth,So=He.getConfig().gridThumbnail.originalThumbnailHeight,Ii=He.getConfig().gridThumbnail.columnCount,Ls=He.getConfig().gridThumbnail.rowCount,di=He.getConfig().gridThumbnail.resizeScale;Ut.css("width",Is*di+"px"),Ut.css("height",So*di+"px"),Ut.css("background-size",Is*di*Ii+"px "+So*di*Ls+"px");var Rs=Math.floor(Yt/mf),za=Math.floor(Rs/(Ii*Ls)),qa=Math.floor(Rs%(Ii*Ls)/Ii),Xa=Rs%(Ii*Ls)%Ii,vf=-1*Xa*Is*di,yf=-1*qa*So*di;OvenPlayerConsole.log("Grid Thumbnail:",Rs+": "+za+"("+qa+", "+Xa+")");var wo=He.getSources()[He.getCurrentSource()].gridThumbnail[za];nt!==wo&&(Ut.css("background-image","url("+wo+")"),nt=wo),Ut.css("background-position","left "+vf+"px top "+yf+"px");var Ef=Ka(Is*di);Ut.css("left",Ef+"px")}else Ut.hide()}function wi(Dt){var lr=(wt||0)*Dt;if(gr)if(gt){var Yt=Rn(br),Dr=Yt.end-Yt.start;lr=Yt.start+Dr*Dt}else{var Yr=He.getDvrWindow();lr=wt-Yr+Yr*Dt}var fi=He.getSources()[He.getCurrentSource()].sectionStart;fi&&fi>0&&(lr+=fi),He.seek(lr)}function Zi(Dt){var lr=0,Yt=0;if(gr&&!gt)Yt=(lr=He.getDvrWindow())*(1-Dt),He.isTimecodeMode()?pr.text("- "+A(Yt)):pr.text("- "+Math.round(Yt*He.getFramerate()));else if(gr&&gt){var Dr=Rn(br);Yt=(lr=Dr.end-Dr.start)*(1-Dt),He.isTimecodeMode()?pr.text("- "+A(Yt)):pr.text("- "+Math.round(Yt*He.getFramerate()))}else Yt=(lr=He.getDuration())*Dt,He.isTimecodeMode()?pr.text(A(Yt)):pr.text(Math.round(Yt*He.getFramerate()));return{duration:lr,second:Yt}}tt&&tt.type===ot&&tt.duration===1/0&&(gr=!0,He.getProviderName()===bt&&(gt=!0));var ja={"touchstart .op-progressbar":function(Dt){if(lt)return!1;rt=!0;var lr=kn(Dt);if(lr<0)return!1;dr(lr),zr(0),wi(lr)},"touchmove .op-progressbar":function(Dt){if(rt){var lr=kn(Dt);if(lr<0)return!1;dr(lr),zr(0),wi(lr),Ct=Dt,ri(lr,Dt)}},"touchend .op-progressbar":function(Dt){rt&&(rt=!1),ye.removeClass("op-progressbar-hover"),pr.hide(),Ut.hide()},"mouseenter .op-progressbar":function(Dt,lr,Yt){Dt.preventDefault(),ir||(lt||(je=!0,pr.show()),ye.addClass("op-progressbar-hover"))},"mouseleave .op-progressbar":function(Dt,lr,Yt){Dt.preventDefault(),rt=!1,(je=!1)||(ye.removeClass("op-progressbar-hover"),pr.hide(),Ut.hide()),zr(0)},"mousedown .op-progressbar":function(Dt,lr,Yt){if(Dt.preventDefault(),lt||ir)return!1;rt=!0;var Dr=kn(Dt);if(Dr<0||Dr>1)return!1;dr(Dr),zr(0),wi(Dr)},"mousemove .op-progressbar":function(Dt,lr,Yt){if(Dt.preventDefault(),!rt&&!lt&&!ir){var Dr=kn(Dt);zr(Dr),Ct=Dt,ri(Dr,Dt)}if(rt&&!ir){var Yr=kn(Dt);if(Yr<0)return!1;dr(Yr),zr(0),wi(Yr),Ct=Dt,ri(Yr,Dt)}},"mouseup .op-progressbar":function(Dt,lr,Yt){Dt.preventDefault(),rt&&!ir&&(rt=!1,ye.removeClass("op-progressbar-hover"))}};return He.getConfig().disableSeekUI&&(ja={}),kr(ze,"ProgressBar",He.getConfig(),null,ja,(function(Dt,lr){pt=Dt,nr=Dt.find(".op-load-progress"),mt=Dt.find(".op-play-progress"),Bt=Dt.find(".op-hover-progress"),qt=Dt.find(".op-progressbar-knob-container"),ar=Dt.find(".op-progressbar-knob"),Jt=ar.width(),pr=Dt.find(".op-progressbar-time"),Ut=Dt.find(".op-progressbar-preview"),ar.hide(),lt?He.on(Rr,(function(Yt){Yt&&Yt.duration&&typeof Yt.position=="number"&&(dr(Yt.position/Yt.duration),Yt.duration)}),lr):(He.on(Ir,(function(Yt){if(Yt&&Yt.duration&&typeof Yt.position=="number"){ar.show(),wt=Yt.duration;var Dr=Yt.position/Yt.duration;if(gr)if(gt){var Yr=Rn(br);Dr=(Yt.position-Yr.start)/(Yr.end-Yr.start)}else je&&Ct&&Zi(kn(Ct)),Dr=(He.getDvrWindow()-(Yt.duration-Yt.position))/He.getDvrWindow();dr(Dr)}}),lr),He.on(jr,(function(Yt){var Dr,Yr;Yt&&Yt.bufferPercent&&(Dr=Yt.bufferPercent/100,Yr=pt.width()*Dr,nr.css("width",Yr+"px"))}),lr))}),(function(Dt){lt?He.off(Rr,null,Dt):(He.off(Ir,null,Dt),He.off(jr,null,Dt))}))})(ae.find(".op-progressbar-container"),v,Ie,Se)}function xe(){F&&F.destroy(),F=(function(Ie,Se){var ze=Cn(),He={"click .op-setting-button":function(lt,tt,ye){lt.preventDefault();var we=tt.closest(".op-controls-container");if(ze.size()>0)ze.clear();else{var je=(function(rt){var St={id:"panel-"+new Date().getTime(),title:"Settings",body:[],isRoot:!0,panelType:""},nt=rt.getConfig();nt&&nt.systemText&&(Object.keys(xn).forEach((function(Zi){xn[Zi]=nt.systemText.ui.setting[Zi]})),St.title=nt.systemText.ui.setting.title);var wt=rt.getSources(),Ct=wt&&wt.length>0?wt[rt.getCurrentSource()]:null,pt=rt.getQualityLevels(),nr=pt&&pt.length>0?pt[rt.getCurrentQuality()]:null,mt=rt.getAudioTracks(),Bt=mt&&mt.length>0?mt[rt.getCurrentAudioTrack()]:null,qt=rt.getCaptionList(),ar=rt.getCurrentCaption(),Jt=rt.getFramerate(),pr=nt.showZoomSettings,Ut=rt.getSubtitleTracks(),ir=null;if(Ut&&Ut.length&&rt.getCurrentSubtitleTrack()>-1&&(ir=Ut[rt.getCurrentSubtitleTrack()]),Ct){var br={title:xn.speed,value:rt.getPlaybackRate()+xn.speedUnit,description:rt.getPlaybackRate()+xn.speedUnit,panelType:"speed",hasNext:!0};St.body.push(br)}if(wt&&wt.length>1){var gr={title:xn.source,value:Ct?Ct.label:"Default",description:Ct?Ct.label:"Default",panelType:"source",hasNext:!0};St.body.push(gr)}if(pt&&pt.length>0){var gt={title:xn.quality,value:nr?nr.label:"Default",description:nr?nr.label:"Default",panelType:"quality",hasNext:!0};St.body.push(gt)}if(mt&&mt.length>0){var dr={title:xn.audioTrack,value:Bt?Bt.label:"Default",description:Bt?Bt.label:"Default",panelType:"audioTrack",hasNext:!0};St.body.push(dr)}if(Ut&&Ut.length>0){var zr={title:xn.subtitleTrack,value:ir?ir.label:"Off",description:ir?ir.label:"Off",panelType:"subtitleTrack",hasNext:!0};St.body.push(zr)}if(qt&&qt.length>0){var kn={title:xn.caption,value:qt[ar]?qt[ar].label:"Off",description:qt[ar]?qt[ar].label:"Off",panelType:"caption",hasNext:!0};St.body.push(kn)}if(Jt>0){var ri={title:xn.display,value:rt.isTimecodeMode()?"Play time":"Framecode",description:rt.isTimecodeMode()?"Play time":"Framecode",panelType:"display",hasNext:!0};St.body.push(ri)}if(pr){var wi={title:xn.zoom,value:Math.round(100*rt.getZoomFactor())+"%",description:Math.round(100*rt.getZoomFactor())+"%",panelType:"zoom",hasNext:!0};St.body.push(wi)}return St})(Se);ze.add(Xc(we,Se,je))}}};return kr(Ie,"SettingButton",Se.getConfig(),null,He,(function(lt,tt){}),(function(lt){}))})(ae.find(".setting-holder"),v)}function Me(){V||(V=(function(Ie,Se){var ze=de(Se.getContainerElement()),He="",lt="",tt=!1,ye=(Se.getConfig(),Se.getBrowser()),we=ye.os==="iOS",je=(ye.os,""),rt=!1,St={onfullscreenchange:"fullscreenchange",onmozfullscreenchange:"mozfullscreenchange",onwebkitfullscreenchange:"webkitfullscreenchange",MSFullscreenChange:"MSFullscreenChange"};function nt(){var Bt=!1,qt=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;return qt&&ze.get()===qt&&(Bt=!0),Bt}function wt(){OvenPlayerConsole.log("FULLSCREEN STATE : ",nt()),nt()?(rt&&document.body.classList.add("op-fullscreen-helper"),ze.addClass("op-fullscreen"),tt=!0,He.hide(),lt.show()):(rt&&document.body.classList.remove("op-fullscreen-helper"),ze.removeClass("op-fullscreen"),tt=!1,He.show(),lt.hide())}function Ct(){OvenPlayerConsole.log("afterFullScreenChangedCallback () "),wt(),Se.trigger(Kt,tt)}function pt(){tt?(ze.removeClass("op-fullscreen"),document.body.classList.remove("op-fullscreen-helper"),tt=!1,He.show(),lt.hide()):(document.body.classList.add("op-fullscreen-helper"),ze.addClass("op-fullscreen"),tt=!0,He.hide(),lt.show()),Se.trigger(Kt,tt)}function nr(){var Bt;!tt||we&&!nt()?we&&Se.getConfig().iOSFakeFullScreen?(rt=!0,pt()):(function(){var qt,ar="",Jt=ze.get(),pr=ze.find("video")?ze.find("video").get():Jt,Ut=null;if(we){if(pr.length>1)for(var ir=0;ir<pr.length;ir++){var br=pr[ir].getAttribute("title");br&&br==="Advertisement"?Ut=pr[ir]:qt=pr[ir]}else qt=pr;Ut&&Se.getState()===ft||Se.getState()===be||Se.getState()===Xe?Ut.webkitEnterFullScreen&&(ar=Ut.webkitEnterFullScreen(),tt=!0):qt.webkitEnterFullScreen&&(ar=qt.webkitEnterFullScreen(),tt=!0)}else if(Jt.requestFullscreen){var gr=Se.getConfig().fullscreenOption;ar=Jt.requestFullscreen(gr)}else Jt.webkitRequestFullScreen?ar=Jt.webkitRequestFullScreen():Jt.mozRequestFullScreen?ar=Jt.mozRequestFullScreen():Jt.msRequestFullscreen&&(ar=Jt.msRequestFullscreen());ar&&ar.then((function(){tt=!0,rt=!1})).catch((function(gt){rt=!0,pt()}))})():rt?pt():(Bt="",document.exitFullscreen?Bt=document.exitFullscreen():document.webkitExitFullscreen?Bt=document.webkitExitFullscreen():document.webkitExitFullScreen?Bt=document.webkitExitFullScreen():document.mozCancelFullScreen?Bt=document.mozCancelFullScreen():document.msExitFullscreen&&(Bt=document.msExitFullscreen()),Bt&&Bt.then((function(){tt=!1})).catch((function(qt){})))}Se.toggleFullScreen=nr;var mt={"click .op-fullscreen-button":function(Bt,qt,ar){Bt.preventDefault(),Se.trigger("fullscreenRequested",null),nr()}};return kr(Ie,"FullScreenButton",Se.getConfig(),null,mt,(function(Bt,qt){var ar,Jt;He=Bt.find(".op-fullscreen-expand"),lt=Bt.find(".op-fullscreen-compress"),wt(),ar=ze.get(),Jt="",ar.requestFullscreen?Jt=St.onfullscreenchange:ar.webkitRequestFullScreen?Jt=St.onwebkitfullscreenchange:ar.mozRequestFullScreen?Jt=St.onmozfullscreenchange:ar.msRequestFullscreen?Jt=St.MSFullscreenChange:Object.keys(St).forEach((function(pr){document[pr]&&(Jt=St[pr])})),(je=Jt)&&document.addEventListener(je,Ct,!1),Se.on(vr,(function(pr){var Ut,ir=ze.find("video")?ze.find("video").get():ze.get();if(pr.isLinear&&we&&tt){if(ir.length>1)for(var br=0;br<ir.length;br++){var gr=ir[br].getAttribute("title");gr&&gr==="Advertisement"?ir[br]:Ut=ir[br]}else Ut=ir;Ut&&Ut.webkitExitFullscreen&&(Ut.webkitExitFullscreen(),tt=!1)}}),qt)}),(function(Bt){je&&document.removeEventListener(je,Ct),Se.off(vr,null,Bt)}))})(ae.find(".fullscreen-holder"),v))}function Je(Ie){Ie.duration>9e15&&(Ie.duration=1/0);var Se=v.getSources()[v.getCurrentSource()].sectionStart,ze=v.getSources()[v.getCurrentSource()].sectionEnd;ze&&(Ie.duration=ze),Se&&(Ie.duration=Ie.duration-Se),(function(He){H&&H.destroy(),H=(function(lt,tt,ye){var we="",je="",rt="",St=tt.getMediaElement(),nt=!1,wt=!1,Ct=0;function pt(mt){return A(mt)}var nr={"click .op-live-text":function(mt,Bt,qt){if(mt.preventDefault(),nt&&!wt){var ar=tt.getMseInstance().liveSyncPosition;tt.seek(ar)}else nt&&wt&&tt.seek(Rn(St).end)}};return kr(lt,"TimeDisplay",tt.getConfig(),ye,nr,(function(mt,Bt){Ct=0;var qt=tt.isTimecodeMode();we=mt.find(".op-time-current"),je=mt.find(".op-time-duration"),rt=mt.find(".op-live-badge"),mt.find(".op-live-text"),ye&&ye.type===ot&&ye.duration===1/0&&(nt=!0,tt.getProviderName()===bt&&(wt=!0)),ye.duration!==1/0?(qt?je.text(pt(ye.duration)):(we.text(0),je.text(Math.round(ye.duration*tt.getFramerate())+" ("+tt.getFramerate()+"fps)")),tt.on(Wr,(function(ar){(qt=ar)?(we.text(pt(Ct)),je.text(pt(ye.duration))):(we.text(Math.round(Ct*tt.getFramerate())),je.text(Math.round(ye.duration*tt.getFramerate())+" ("+tt.getFramerate()+"fps)"))}),Bt),tt.on(Ir,(function(ar){Ct=ar.position,qt?we.text(pt(ar.position)):we.text(Math.round(ar.position*tt.getFramerate()))}),Bt)):nt&&!wt?tt.on(Ir,(function(ar){tt.getConfig().legacyUI||(tt.getMseInstance().liveSyncPosition-ar.position>tt.getMseInstance().targetLatency?rt.addClass("op-live-badge-delayed"):rt.removeClass("op-live-badge-delayed"))}),Bt):nt&&wt&&rt.addClass("op-live-badge-none")}),(function(mt){tt.off(Wr,null,mt),tt.off(Ir,null,mt)}))})(ae.find(".op-left-controls"),v,He)})(Ie),Me(),v.getFramerate&&v.getFramerate(),Ie.duration===1/0?(OvenPlayerConsole.log("[[[[LIVE MODE]]]]"),Ie.type===ot?ie(!1,Ie):_&&_.destroy()):ie(!1),ue=!0}function De(){_&&_.destroy(),xe(),Me(),j.removeClass("linear-ad"),ie(!1)}k=(function(Ie,Se){var ze="",He="",lt="",tt="",ye="",we="",je="",rt={"click .op-play-button":function(St,nt,wt){St.preventDefault();var Ct=Se.getState(),pt=Se.getPlaylist(),nr=Se.getCurrentPlaylist();Ct===Pt?Se.play():Ct===Mt||Ct===be?Se.pause():Ct===Ze||Ct===qe?Se.stop():Ct===Zt||Ct===Xe?Se.play():Ct===Fe?Se.setCurrentSource(Se.getCurrentSource()):Ct===It&&pt.length===nr+1&&(Se.seek(0),Se.play())},"click .op-seek-button-back":function(St,nt,wt){var Ct=Se.getConfig().seekControlInterval;Ct||(Ct=10);var pt=Se.getPosition()-Ct;pt<0&&(pt=0),Se.seek(pt)},"click .op-seek-button-forward":function(St,nt,wt){var Ct=Se.getConfig().seekControlInterval;Ct||(Ct=10);var pt=Se.getPosition()+Ct;pt>Se.getDuration()&&(pt=Se.getDuration()),Se.seek(pt)}};return kr(Ie,"PlayButton",Se.getConfig(),null,rt,(function(St,nt){ze=St.find(".op-play-button .op-play"),He=St.find(".op-play-button .op-pause"),lt=St.find(".op-play-button .op-replay"),tt=St.find(".op-seek-button-back"),ye=St.find(".op-seek-button-forward"),we=St.find(".op-seek-back-text"),je=St.find(".op-seek-forward-text"),Se.on(Wt,(function(Ct){var pt;Ct&&Ct.newstate&&(pt=Ct.newstate,ze.hide(),He.hide(),lt.hide(),pt===Mt||pt===be||pt===Ze||pt===qe?He.show():pt===Zt||pt===Xe?ze.show():pt===It?lt.show():ze.show())}),nt),Se.getConfig().showSeekControl||(tt.hide(),ye.hide());var wt=Se.getConfig().seekControlInterval;wt?(we.text(wt),je.text(wt)):(we.text(10),je.text(10))}),(function(St){Se.off(Wt,null,St)}))})(ae.find(".op-left-controls"),v),S=(function(Ie,Se){var ze="",He="",lt="",tt="",ye="",we="",je="",rt=!1,St=0,nt=Se.getBrowser().os==="iOS"||Se.getBrowser().os==="Android";function wt(mt){Se.getMute()&&(mt=0),(function(qt){ye.hide(),we.hide(),je.hide(),qt>=70?ye.show():qt<70&&qt>0?we.show():qt==0?je.show():ye.show()})(mt);var Bt=St*mt/100;lt.css("left",Bt+"px"),tt.css("width",Bt+"px")}function Ct(mt){var Bt=((mt.pageX||mt.touches[0].clientX)-He.offset().left)/70*100;return Bt<0&&(Bt=0),Bt>100&&(Bt=100),Bt}var pt={"click .op-volume-button":function(mt,Bt,qt){mt.preventDefault(),nt||(Se.getVolume()===0?(Se.setMute(!1),Se.setVolume(100)):Se.setMute())},"mouseenter .op-volume-button":function(mt,Bt,qt){mt.preventDefault(),nt||ze.addClass("active")},"mouseleave .op-volume-silder":function(mt,Bt,qt){mt.preventDefault(),rt=!1},"mousedown .op-volume-silder":function(mt,Bt,qt){mt.preventDefault(),rt=!0,Se.setMute(!1),Se.setVolume(Ct(mt))},"mouseup .op-volume-silder":function(mt,Bt,qt){mt.preventDefault(),rt=!1},"mousemove .op-volume-silder":function(mt,Bt,qt){if(mt.preventDefault(),!rt)return!1;Se.setVolume(Ct(mt))},"touchstart .op-volume-button":function(mt){nt&&(Se.getMute()?Se.setMute(!1):Se.setMute(!0))}},nr=kr(Ie,"VolumeButton",Se.getConfig(),null,pt,(function(mt,Bt){ze=mt.find(".op-volume-slider-container"),Se.getBrowser().mobile&&ze.hide(),He=mt.find(".op-volume-silder"),lt=mt.find(".op-volume-slider-handle"),tt=mt.find(".op-volume-slider-value"),ye=mt.find(".op-volume-max"),we=mt.find(".op-volume-small"),je=mt.find(".op-volume-mute"),St=64,lt.css("left",St+"px"),wt(Se.getVolume()),Se.on(Qt,(function(){wt(Se.getVolume())}),Bt),Se.on(Qr,(function(qt){wt(qt.volume)}),Bt),Se.on(In,(function(qt){qt.mute?wt(0):wt(Se.getVolume())}),Bt)}),(function(mt){Se.off(Qt,null,mt),Se.off(Qr,null,mt),Se.off(In,null,mt)}));return nr.setMouseDown=function(mt){rt=mt},nr})(ae.find(".op-left-controls"),v);var We=v.getPlaylist(),Ye=v.getCurrentPlaylist();We&&We[Ye]&&We[Ye].adTagUrl||xe(),Me(),v.on(Qt,(function(){ae.show()}),le),v.on($r,(function(Ie){x=Ie.duration,se=Ie,Ie.isP2P=z,Je(Ie)}),le),v.on(Ir,(function(Ie){(ne||v&&v.getProviderName&&v.getProviderName()==="rtmp")&&!x&&se&&se.duration!==Ie.duration&&(se=Ie,Je(Ie))}),le),v.on(At,(function(Ie){j.find(".op-setting-panel")&&j.find(".op-setting-panel").css("max-height",j.height()-j.find(".op-bottom-panel").height()+"px")}),le),v.on(dn,(function(Ie){z=Ie}),le),v.on(ut,(function(){if(!ue){var Ie="";v.getSources().length>0&&v.getSources()[v.getCurrentSource()]&&v.getSources()[v.getCurrentSource()].type&&(Ie=v.getSources()[v.getCurrentSource()].type),Je({isP2P:z,duration:v.getDuration(),type:Ie})}ae.show()}),le),v.on(kt,(function(Ie){ae.show()}),le),v.on(vr,(function(Ie){Ie.isLinear?(j.addClass("linear-ad"),ie(!0),F&&F.destroy(),X&&V&&V.destroy()):j.removeClass("linear-ad")}),le),v.on(at,(function(){De()}),le),v.on(fr,(function(){De()}),le),v.on(Zr,(function(){De()}),le)}),(function(ae){v.off($r,null,ae),v.off(Ir,null,ae),v.off(at,null,ae),v.off(vr,null,ae),v.off(dn,null,ae),v.off(fr,null,ae),v.off(At,null,ae),v.off(Zr,null,ae),H&&H.destroy(),k&&k.destroy(),_&&_.destroy(),V&&V.destroy(),S&&S.destroy()}))},Zc=t(88769),Jc=t.n(Zc),ef=t(85072),tf=t.n(ef),rf=t(97825),nf=t.n(rf),sf=t(77659),of=t.n(sf),af=t(55056),lf=t.n(af),uf=t(10540),cf=t.n(uf),ff=t(41113),df=t.n(ff),Ss=t(69534),Si={};Si.styleTagTransform=df(),Si.setAttributes=lf(),Si.insert=of().bind(null,"head"),Si.domAPI=nf(),Si.insertStyleElement=cf(),tf()(Ss.A,Si),Ss.A&&Ss.A.locals&&Ss.A.locals;var ws,hf=function(b){var v,x="",S="",k="",F="",_=null,H="",V=!1,Y=Cn(),ue="",z="",ee=null,ne={};function X(ie,xe){if(H&&(clearTimeout(H),H=null),ie){if(Y.size()>0)return!1;v.addClass("op-autohide")}else v.removeClass("op-autohide"),xe&&(H=setTimeout((function(){if(Y.size()>0)return!1;v.addClass("op-autohide")}),3e3))}function j(){_.play()}function se(ie,xe){var Me,Je=_.getDuration(),De=_.getPosition();Me=xe?Math.max(De-ie,0):Math.min(De+ie,Je),_.seek(Me)}function re(ie){var xe,Me=_.getVolume();xe=ie?Math.min(Me+5,100):Math.max(Me-5,0),_.setVolume(xe)}function ae(){var ie=v.width();ie<576?(ue="xsmall",v.addClass("xsmall"),ie<490&&v.addClass("xxsmall")):ie<768?(ue="small",v.addClass("small")):ie<992?(ue="medium",v.addClass("medium")):(ue="large",v.addClass("large"))}var le={"click .ovenplayer":function(ie,xe,Me){if(_&&_.trigger(Et,ie),F)return ie.preventDefault(),F.destroy(),F=null,!1;if(!de(ie.target).closest(".op-controls-container")&&!de(ie.target).closest(".op-setting-panel")){if(Y.size()>0)return ie.preventDefault(),Y.clear(),!1;_.getDuration()===1/0||_.getBrowser().mobile||j()}},"dblclick .ovenplayer":function(ie,xe,Me){if(_){var Je=(function(Se){var ze=Se.target.getBoundingClientRect();return Se.offsetX>=.6666666666666666*ze.width?"right":Se.offsetX>=.3333333333333333*ze.width?"middle":"left"})(ie),De=_.getPosition(),We=_.getConfig().doubleTapToSeek;if(We&&Je=="left"){var Ye=Math.max(De-10,0);OvenPlayerConsole.log("Seeking to ".concat(Ye)),_.seek(Ye)}if(We&&Je==="right"){var Ie=Math.min(De+10,_.getDuration());OvenPlayerConsole.log("Seeking to ".concat(Ie)),_.seek(Ie)}Je!=="middle"&&We||(OvenPlayerConsole.log("Toggling fullscreen"),_.getConfig().expandFullScreenUI&&_.toggleFullScreen&&(de(ie.target).closest(".op-controls-container")||de(ie.target).closest(".op-setting-panel")||_.toggleFullScreen()))}},"touchstart .ovenplayer":function(ie,xe,Me){X(!1,!0)},"mouseenter .ovenplayer":function(ie,xe,Me){ie.preventDefault(),X(!1,!0)},"mousemove .ovenplayer":function(ie,xe,Me){ie.preventDefault(),X(!1,!0)},"mouseleave .ovenplayer":function(ie,xe,Me){ie.preventDefault(),X(!0)},"keydown .ovenplayer":function(ie,xe,Me){var Je=_.getFramerate();switch(ie.keyCode){case 16:ie.preventDefault(),V=!0;break;case 32:ie.preventDefault(),j();break;case 37:ie.preventDefault(),_.getConfig().disableSeekUI||(V&&Je?_.seekFrame(-1):se(5,!0));break;case 39:ie.preventDefault(),_.getConfig().disableSeekUI||(V&&Je?_.seekFrame(1):se(5,!1));break;case 38:ie.preventDefault(),re(!0);break;case 40:ie.preventDefault(),re(!1)}},"keyup .ovenplayer":function(ie,xe,Me){ie.keyCode===16&&(ie.preventDefault(),V=!1)},"contextmenu .ovenplayer":function(ie,xe,Me){if(ie.stopPropagation(),!de(ie.currentTarget).find("object"))return ie.preventDefault(),Je=ie.pageX,De=ie.pageY,F&&(F.destroy(),F=null),F=(function(We,Ye,Ie){var Se=de(Ye.getContainerElement()),ze={"click .op-context-item":function(He,lt,tt){He.preventDefault(),window.open("https://github.com/AirenSoft/OvenPlayer","_blank")}};return kr(We,"ContextPanel",Ye.getConfig(),Ie,ze,(function(He,lt){var tt=He.width(),ye=He.height(),we=Math.min(Ie.pageX-Se.offset().left,Se.width()-tt),je=Math.min(Ie.pageY-Se.offset().top,Se.height()-ye);He.css("left",we+"px"),He.css("top",je+"px")}),(function(){}))})(v,_,{pageX:Je,pageY:De}),!1;var Je,De}};return(ne=kr(b,"View",null,b.id,le,(function(ie,xe){v=ie,x=xe,ae(),z=ue,ee=new(Jc())(v.get(),(function(){v.removeClass("large"),v.removeClass("medium"),v.removeClass("small"),v.removeClass("xsmall"),v.removeClass("xxsmall"),ae(),ue!==z&&(z=ue,_&&_.trigger(At,z))}))}),(function(){ee&&(ee.detach(),ee=null),k&&(k.destroy(),k=null),S&&(S.destroy(),S=null)}),!0)).getMediaElementContainer=function(){return v.find(".op-media-element-container").get()},ne.setApi=function(ie){(_=ie).getContainerElement=function(){return v.get()},_.getContainerId=function(){return v.get().id},_.on(Qt,(function(We){S||(S=xo(v.find(".op-ui"),ie)),xe||v.addClass("op-no-controls"),X(!1,!0)})),_.on(kt,(function(We){if(_){var Ye=_.getSources()||[];S&&Ye.length}})),_.on(Qe,(function(We){x.destroy()})),_.on(ut,(function(We){!S&&xe&&(S=xo(v.find(".op-ui"),ie))}));var xe=_.getConfig()&&_.getConfig().controls;k=qc(v.find(".op-ui"),ie),S=xo(v.find(".op-ui"),ie);var Me=_.getConfig().aspectRatio;if(Me&&Me.split(":").length===2){var Je=1*Me.split(":")[0],De=1*Me.split(":")[1]/Je*100;v.find(".op-ratio").css("padding-bottom",De+"%")}_.showControls=function(We,Ye){We?(v.removeClass("op-no-controls"),X(!1,!Ye)):v.addClass("op-no-controls")}},ne},Af=(ws={},Object.assign(ws,Co),ws.create=function(b,v){var x=Mr(b),S=hf(x),k=Co.create(S.getMediaElementContainer(),v);return S.setApi(k),OvenPlayerConsole.log("[OvenPlayer] v."+s),k},ws)},53439:function(){(function(i){if("window"in i&&"document"in i){document.querySelectorAll||(document.querySelectorAll=function(u){var f,h=document.createElement("style"),A=[];for(document.documentElement.firstChild.appendChild(h),document._qsa=[],h.styleSheet.cssText=u+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",window.scrollBy(0,0),h.parentNode.removeChild(h);document._qsa.length;)(f=document._qsa.shift()).style.removeAttribute("x-qsa"),A.push(f);return document._qsa=null,A}),document.querySelector||(document.querySelector=function(u){var f=document.querySelectorAll(u);return f.length?f[0]:null}),document.getElementsByClassName||(document.getElementsByClassName=function(u){return u=String(u).replace(/^|\s+/g,"."),document.querySelectorAll(u)}),i.Node=i.Node||function(){throw TypeError("Illegal constructor")},[["ELEMENT_NODE",1],["ATTRIBUTE_NODE",2],["TEXT_NODE",3],["CDATA_SECTION_NODE",4],["ENTITY_REFERENCE_NODE",5],["ENTITY_NODE",6],["PROCESSING_INSTRUCTION_NODE",7],["COMMENT_NODE",8],["DOCUMENT_NODE",9],["DOCUMENT_TYPE_NODE",10],["DOCUMENT_FRAGMENT_NODE",11],["NOTATION_NODE",12]].forEach((function(u){u[0]in i.Node||(i.Node[u[0]]=u[1])})),i.DOMException=i.DOMException||function(){throw TypeError("Illegal constructor")},[["INDEX_SIZE_ERR",1],["DOMSTRING_SIZE_ERR",2],["HIERARCHY_REQUEST_ERR",3],["WRONG_DOCUMENT_ERR",4],["INVALID_CHARACTER_ERR",5],["NO_DATA_ALLOWED_ERR",6],["NO_MODIFICATION_ALLOWED_ERR",7],["NOT_FOUND_ERR",8],["NOT_SUPPORTED_ERR",9],["INUSE_ATTRIBUTE_ERR",10],["INVALID_STATE_ERR",11],["SYNTAX_ERR",12],["INVALID_MODIFICATION_ERR",13],["NAMESPACE_ERR",14],["INVALID_ACCESS_ERR",15]].forEach((function(u){u[0]in i.DOMException||(i.DOMException[u[0]]=u[1])})),(function(){function u(h,A,g){if(typeof A=="function"){h==="DOMContentLoaded"&&(h="load");var p=this,m=function(y){y._timeStamp=Date.now(),y._currentTarget=p,A.call(this,y),y._currentTarget=null};this["_"+h+A]=m,this.attachEvent("on"+h,m)}}function f(h,A,g){if(typeof A=="function"){h==="DOMContentLoaded"&&(h="load");var p=this["_"+h+A];p&&(this.detachEvent("on"+h,p),this["_"+h+A]=null)}}"Element"in i&&!Element.prototype.addEventListener&&Object.defineProperty&&(Event.CAPTURING_PHASE=1,Event.AT_TARGET=2,Event.BUBBLING_PHASE=3,Object.defineProperties(Event.prototype,{CAPTURING_PHASE:{get:function(){return 1}},AT_TARGET:{get:function(){return 2}},BUBBLING_PHASE:{get:function(){return 3}},target:{get:function(){return this.srcElement}},currentTarget:{get:function(){return this._currentTarget}},eventPhase:{get:function(){return this.srcElement===this.currentTarget?Event.AT_TARGET:Event.BUBBLING_PHASE}},bubbles:{get:function(){switch(this.type){case"click":case"dblclick":case"mousedown":case"mouseup":case"mouseover":case"mousemove":case"mouseout":case"mousewheel":case"keydown":case"keypress":case"keyup":case"resize":case"scroll":case"select":case"change":case"submit":case"reset":return!0}return!1}},cancelable:{get:function(){switch(this.type){case"click":case"dblclick":case"mousedown":case"mouseup":case"mouseover":case"mouseout":case"mousewheel":case"keydown":case"keypress":case"keyup":case"submit":return!0}return!1}},timeStamp:{get:function(){return this._timeStamp}},stopPropagation:{value:function(){this.cancelBubble=!0}},preventDefault:{value:function(){this.returnValue=!1}},defaultPrevented:{get:function(){return this.returnValue===!1}}}),[Window,HTMLDocument,Element].forEach((function(h){h.prototype.addEventListener=u,h.prototype.removeEventListener=f})))})(),(function(){function u(f,h){h=h||{bubbles:!1,cancelable:!1,detail:void 0};var A=document.createEvent("CustomEvent");return A.initCustomEvent(f,h.bubbles,h.cancelable,h.detail),A}"CustomEvent"in i&&typeof i.CustomEvent=="function"||(u.prototype=i.Event.prototype,i.CustomEvent=u)})(),window.addEvent=function(u,f,h){u.addEventListener?u.addEventListener(f,h,!1):u.attachEvent&&(u["e"+f+h]=h,u[f+h]=function(){var A=window.event;A.currentTarget=u,A.preventDefault=function(){A.returnValue=!1},A.stopPropagation=function(){A.cancelBubble=!0},A.target=A.srcElement,A.timeStamp=Date.now(),u["e"+f+h].call(this,A)},u.attachEvent("on"+f,u[f+h]))},window.removeEvent=function(u,f,h){u.removeEventListener?u.removeEventListener(f,h,!1):u.detachEvent&&(u.detachEvent("on"+f,u[f+h]),u[f+h]=null,u["e"+f+h]=null)},(function(){function u(h,A){function g(y){return y.length?y.split(/\s+/g):[]}function p(y,E){var C=g(E),T=C.indexOf(y);return T!==-1&&C.splice(T,1),C.join(" ")}if(Object.defineProperties(this,{length:{get:function(){return g(h[A]).length}},item:{value:function(y){var E=g(h[A]);return 0<=y&&y<E.length?E[y]:null}},contains:{value:function(y){if((y=String(y)).length===0)throw SyntaxError();if(/\s/.test(y))throw Error("InvalidCharacterError");return g(h[A]).indexOf(y)!==-1}},add:{value:function(){var y=Array.prototype.slice.call(arguments).map(String);if(y.some((function(w){return w.length===0})))throw SyntaxError();if(y.some((function(w){return/\s/.test(w)})))throw Error("InvalidCharacterError");try{var E=h[A],C=g(E);if((y=y.filter((function(w){return C.indexOf(w)===-1}))).length===0)return;E.length===0||/\s$/.test(E)||(E+=" "),E+=y.join(" "),h[A]=E}finally{var T=g(h[A]).length;this.length!==T&&(this.length=T)}}},remove:{value:function(){var y=Array.prototype.slice.call(arguments).map(String);if(y.some((function(T){return T.length===0})))throw SyntaxError();if(y.some((function(T){return/\s/.test(T)})))throw Error("InvalidCharacterError");try{var E=h[A];y.forEach((function(T){E=p(T,E)})),h[A]=E}finally{var C=g(h[A]).length;this.length!==C&&(this.length=C)}}},toggle:{value:function(y){var E=arguments[1];try{if((y=String(y)).length===0)throw SyntaxError();if(/\s/.test(y))throw Error("InvalidCharacterError");var C=g(h[A]).indexOf(y);if(C!==-1&&(!E||E===void 0))return h[A]=p(y,h[A]),!1;if(C!==-1&&E)return!0;var T=h[A];return T.length===0||/\s$/.test(T)||(T+=" "),T+=y,h[A]=T,!0}finally{var w=g(h[A]).length;this.length!==w&&(this.length=w)}}},toString:{value:function(){return h[A]}}}),"length"in this)for(var m=0;m<100;++m)Object.defineProperty(this,String(m),{get:(function(y){return function(){return this.item(y)}})(m)});else this.length=g(h[A]).length}function f(h,A){"Element"in i&&Element.prototype&&Object.defineProperty&&Object.defineProperty(Element.prototype,h,{get:A})}"classList"in document.createElement("span")?window.getClassList=function(h){return h.classList}:(window.getClassList=function(h){return new u(h,"className")},f("classList",(function(){return new u(this,"className")}))),"relList"in document.createElement("link")?window.getRelList=function(h){return h.relList}:(window.getRelList=function(h){return new u(h,"rel")},f("relList",(function(){return new u(this,"rel")}))),(function(){if("DOMTokenList"in i){var h=document.createElement("span");"classList"in h&&(h.classList.toggle("x",!1),h.classList.contains("x")&&(i.DOMTokenList.prototype.toggle=function(A){var g=arguments[1];if(g===void 0){var p=!this.contains(A);return this[p?"add":"remove"](A),p}return this[(g=!!g)?"add":"remove"](A),g}))}})(),"previousElementSibling"in document.documentElement||f("previousElementSibling",(function(){for(var h=this.previousSibling;h&&h.nodeType!==Node.ELEMENT_NODE;)h=h.previousSibling;return h})),"nextElementSibling"in document.documentElement||f("nextElementSibling",(function(){for(var h=this.nextSibling;h&&h.nodeType!==Node.ELEMENT_NODE;)h=h.nextSibling;return h}))})(),"Element"in i&&!Element.prototype.matches&&(Element.prototype.msMatchesSelector?Element.prototype.matches=Element.prototype.msMatchesSelector:Element.prototype.oMatchesSelector?Element.prototype.matches=Element.prototype.oMatchesSelector:Element.prototype.mozMatchesSelector?Element.prototype.matches=Element.prototype.mozMatchesSelector:Element.prototype.webkitMatchesSelector?Element.prototype.matches=Element.prototype.webkitMatchesSelector:document.querySelectorAll&&(Element.prototype.matches=function(u){for(var f=(this.document||this.ownerDocument).querySelectorAll(u),h=f.length;--h>=0&&f.item(h)!==this;);return h>-1})),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(u){var f,h=(this.document||this.ownerDocument).querySelectorAll(u),A=this;do for(f=h.length;--f>=0&&h.item(f)!==A;);while(f<0&&(A=A.parentElement));return A});var l={prepend:function(){var u=[].slice.call(arguments);u=a(u),this.insertBefore(u,this.firstChild)},append:function(){var u=[].slice.call(arguments);u=a(u),this.appendChild(u)}};s(i.Document||i.HTMLDocument,l),s(i.DocumentFragment,l),s(i.Element,l);var t={before:function(){var u=[].slice.call(arguments),f=this.parentNode;if(f){for(var h=this.previousSibling;u.indexOf(h)!==-1;)h=h.previousSibling;var A=a(u);f.insertBefore(A,h?h.nextSibling:f.firstChild)}},after:function(){var u=[].slice.call(arguments),f=this.parentNode;if(f){for(var h=this.nextSibling;u.indexOf(h)!==-1;)h=h.nextSibling;var A=a(u);f.insertBefore(A,h)}},replaceWith:function(){var u=[].slice.call(arguments),f=this.parentNode;if(f){for(var h=this.nextSibling;u.indexOf(h)!==-1;)h=h.nextSibling;var A=a(u);this.parentNode===f?f.replaceChild(A,this):f.insertBefore(A,h)}},remove:function(){this.parentNode&&this.parentNode.removeChild(this)}};s(i.DocumentType,t),s(i.Element,t),s(i.CharacterData,t)}function s(u,f){u&&Object.keys(f).forEach((function(h){if(!(h in u)&&!(h in u.prototype))try{Object.defineProperty(u.prototype,h,Object.getOwnPropertyDescriptor(f,h))}catch{u[h]=f[h]}}))}function a(u){var f=null;return u=u.map((function(h){return h instanceof Node?h:document.createTextNode(h)})),u.length===1?f=u[0]:(f=document.createDocumentFragment(),u.forEach((function(h){f.appendChild(h)}))),f}})(self)},88769:function(i,l){var t,s;s=this,(t=(function(){return s.returnExportsGlobal=(function(){var a=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(A){return window.setTimeout(A,20)};function u(){var A,g;this.q=[],this.add=function(p){this.q.push(p)},this.call=function(){for(A=0,g=this.q.length;A<g;A++)this.q[A].call()}}function f(A,g){if(A.resizedAttached){if(A.resizedAttached)return void A.resizedAttached.add(g)}else A.resizedAttached=new u,A.resizedAttached.add(g);A.resizeSensor=document.createElement("div"),A.resizeSensor.className="resize-sensor";var p="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden; opacity: 0;direction: ltr;",m="position: absolute; left: 0; top: 0; transition: 0s;";A.resizeSensor.style.cssText=p,A.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+p+'"><div style="'+m+'"></div></div><div class="resize-sensor-shrink" style="'+p+'"><div style="'+m+' width: 200%; height: 200%"></div></div>',A.appendChild(A.resizeSensor),(function(G,W){return G.currentStyle?G.currentStyle[W]:window.getComputedStyle?window.getComputedStyle(G,null).getPropertyValue(W):G.style[W]})(A,"position")=="static"&&(A.style.position="relative");var y=A.resizeSensor.childNodes[0],E=y.childNodes[0],C=A.resizeSensor.childNodes[1],T=function(){E.style.width="100000px",E.style.height="100000px",y.scrollLeft=1e5,y.scrollTop=1e5,C.scrollLeft=1e5,C.scrollTop=1e5};T();var w,I,L,R,B=!1,P=function(){A.resizedAttached&&(B&&(A.resizedAttached.call(),B=!1),a(P))};a(P);var N=function(){(L=A.offsetWidth)==w&&(R=A.offsetHeight)==I||(B=!0,w=L,I=R),T()},U=function(G,W,K){G.attachEvent?G.attachEvent("on"+W,K):G.addEventListener(W,K)};U(y,"scroll",N),U(C,"scroll",N)}var h=function(A,g){var p=Object.prototype.toString.call(A),m=this._isCollectionTyped=p==="[object Array]"||p==="[object NodeList]"||p==="[object HTMLCollection]"||typeof jQuery<"u"&&A instanceof window.jQuery||typeof Elements<"u"&&A instanceof window.Elements;if(this._element=A,m)for(var y=0,E=A.length;y<E;y++)f(A[y],g);else f(A,g)};return h.prototype.detach=function(){var A=this._isCollectionTyped,g=this._element;if(A)for(var p=0,m=g.length;p<m;p++)h.detach(g[p]);else h.detach(g)},h.detach=function(A){A.resizeSensor&&(A.hasChildNodes()&&A.removeChild(A.resizeSensor),delete A.resizeSensor,delete A.resizedAttached)},h})()}).apply(l,[]))===void 0||(i.exports=t)},69986:function(i,l,t){var s,a,u;function f(h){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},f(h)}u=function(){var h="1.13.1",A=(typeof self>"u"?"undefined":f(self))=="object"&&self.self===self&&self||(t.g===void 0?"undefined":f(t.g))=="object"&&t.g.global===t.g&&t.g||Function("return this")()||{},g=Array.prototype,p=Object.prototype,m=typeof Symbol<"u"?Symbol.prototype:null,y=g.push,E=g.slice,C=p.toString,T=p.hasOwnProperty,w=typeof ArrayBuffer<"u",I=typeof DataView<"u",L=Array.isArray,R=Object.keys,B=Object.create,P=w&&ArrayBuffer.isView,N=isNaN,U=isFinite,G=!{toString:null}.propertyIsEnumerable("toString"),W=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],K=Math.pow(2,53)-1;function M(O,$){return $=$==null?O.length-1:+$,function(){for(var oe=Math.max(arguments.length-$,0),ce=Array(oe),ge=0;ge<oe;ge++)ce[ge]=arguments[ge+$];switch($){case 0:return O.call(this,ce);case 1:return O.call(this,arguments[0],ce);case 2:return O.call(this,arguments[0],arguments[1],ce)}var he=Array($+1);for(ge=0;ge<$;ge++)he[ge]=arguments[ge];return he[$]=ce,O.apply(this,he)}}function Q(O){var $=f(O);return $==="function"||$==="object"&&!!O}function Z(O){return O===void 0}function J(O){return O===!0||O===!1||C.call(O)==="[object Boolean]"}function q(O){var $="[object "+O+"]";return function(oe){return C.call(oe)===$}}var te=q("String"),fe=q("Number"),Ee=q("Date"),Ae=q("RegExp"),Ce=q("Error"),Oe=q("Symbol"),Ne=q("ArrayBuffer"),Be=q("Function"),Ge=A.document&&A.document.childNodes;(typeof Int8Array>"u"?"undefined":f(Int8Array))!="object"&&typeof Ge!="function"&&(Be=function(O){return typeof O=="function"||!1});var Ve=Be,$e=q("Object"),it=I&&$e(new DataView(new ArrayBuffer(8))),yt=typeof Map<"u"&&$e(new Map),Tt=q("DataView"),st=it?function(O){return O!=null&&Ve(O.getInt8)&&Ne(O.buffer)}:Tt,ht=L||q("Array");function _t(O,$){return O!=null&&T.call(O,$)}var Ht=q("Arguments");(function(){Ht(arguments)||(Ht=function(O){return _t(O,"callee")})})();var Gt=Ht;function Pt(O){return fe(O)&&N(O)}function It(O){return function(){return O}}function Zt(O){return function($){var oe=O($);return typeof oe=="number"&&oe>=0&&oe<=K}}function Mt(O){return function($){return $?.[O]}}var Fe=Mt("byteLength"),Ze=Zt(Fe),qe=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,ft=w?function(O){return P?P(O)&&!st(O):Ze(O)&&qe.test(C.call(O))}:It(!1),be=Mt("length");function Xe(O,$){$=(function(Te){for(var Ue={},Vt=Te.length,jt=0;jt<Vt;++jt)Ue[Te[jt]]=!0;return{contains:function(Tr){return Ue[Tr]},push:function(Tr){return Ue[Tr]=!0,Te.push(Tr)}}})($);var oe=W.length,ce=O.constructor,ge=Ve(ce)&&ce.prototype||p,he="constructor";for(_t(O,he)&&!$.contains(he)&&$.push(he);oe--;)(he=W[oe])in O&&O[he]!==ge[he]&&!$.contains(he)&&$.push(he)}function at(O){if(!Q(O))return[];if(R)return R(O);var $=[];for(var oe in O)_t(O,oe)&&$.push(oe);return G&&Xe(O,$),$}function fr(O,$){var oe=at($),ce=oe.length;if(O==null)return!ce;for(var ge=Object(O),he=0;he<ce;he++){var Te=oe[he];if($[Te]!==ge[Te]||!(Te in ge))return!1}return!0}function bt(O){return O instanceof bt?O:this instanceof bt?void(this._wrapped=O):new bt(O)}function Lt(O){return new Uint8Array(O.buffer||O,O.byteOffset||0,Fe(O))}bt.VERSION=h,bt.prototype.value=function(){return this._wrapped},bt.prototype.valueOf=bt.prototype.toJSON=bt.prototype.value,bt.prototype.toString=function(){return String(this._wrapped)};var me="[object DataView]";function ot(O,$,oe,ce){if(O===$)return O!==0||1/O==1/$;if(O==null||$==null)return!1;if(O!=O)return $!=$;var ge=f(O);return(ge==="function"||ge==="object"||f($)=="object")&&(function he(Te,Ue,Vt,jt){Te instanceof bt&&(Te=Te._wrapped),Ue instanceof bt&&(Ue=Ue._wrapped);var Tr=C.call(Te);if(Tr!==C.call(Ue))return!1;if(it&&Tr=="[object Object]"&&st(Te)){if(!st(Ue))return!1;Tr=me}switch(Tr){case"[object RegExp]":case"[object String]":return""+Te==""+Ue;case"[object Number]":return+Te!=+Te?+Ue!=+Ue:+Te==0?1/+Te==1/Ue:+Te==+Ue;case"[object Date]":case"[object Boolean]":return+Te==+Ue;case"[object Symbol]":return m.valueOf.call(Te)===m.valueOf.call(Ue);case"[object ArrayBuffer]":case me:return he(Lt(Te),Lt(Ue),Vt,jt)}var _r=Tr==="[object Array]";if(!_r&&ft(Te)){if(Fe(Te)!==Fe(Ue))return!1;if(Te.buffer===Ue.buffer&&Te.byteOffset===Ue.byteOffset)return!0;_r=!0}if(!_r){if(f(Te)!="object"||f(Ue)!="object")return!1;var Kn=Te.constructor,zn=Ue.constructor;if(Kn!==zn&&!(Ve(Kn)&&Kn instanceof Kn&&Ve(zn)&&zn instanceof zn)&&"constructor"in Te&&"constructor"in Ue)return!1}jt=jt||[];for(var An=(Vt=Vt||[]).length;An--;)if(Vt[An]===Te)return jt[An]===Ue;if(Vt.push(Te),jt.push(Ue),_r){if((An=Te.length)!==Ue.length)return!1;for(;An--;)if(!ot(Te[An],Ue[An],Vt,jt))return!1}else{var qi,Cs=at(Te);if(An=Cs.length,at(Ue).length!==An)return!1;for(;An--;)if(!_t(Ue,qi=Cs[An])||!ot(Te[qi],Ue[qi],Vt,jt))return!1}return Vt.pop(),jt.pop(),!0})(O,$,oe,ce)}function $t(O){if(!Q(O))return[];var $=[];for(var oe in O)$.push(oe);return G&&Xe(O,$),$}function Qt(O){var $=be(O);return function(oe){if(oe==null)return!1;var ce=$t(oe);if(be(ce))return!1;for(var ge=0;ge<$;ge++)if(!Ve(oe[O[ge]]))return!1;return O!==kt||!Ve(oe[Qe])}}var Qe="forEach",dt=["clear","delete"],et=["get","has","set"],xt=dt.concat(Qe,et),kt=dt.concat(et),Wt=["add"].concat(dt,Qe,"has"),Ft=yt?Qt(xt):q("Map"),ke=yt?Qt(kt):q("WeakMap"),ut=yt?Qt(Wt):q("Set"),Et=q("WeakSet");function At(O){for(var $=at(O),oe=$.length,ce=Array(oe),ge=0;ge<oe;ge++)ce[ge]=O[$[ge]];return ce}function Kt(O){for(var $={},oe=at(O),ce=0,ge=oe.length;ce<ge;ce++)$[O[oe[ce]]]=oe[ce];return $}function er(O){var $=[];for(var oe in O)Ve(O[oe])&&$.push(oe);return $.sort()}function Ar(O,$){return function(oe){var ce=arguments.length;if($&&(oe=Object(oe)),ce<2||oe==null)return oe;for(var ge=1;ge<ce;ge++)for(var he=arguments[ge],Te=O(he),Ue=Te.length,Vt=0;Vt<Ue;Vt++){var jt=Te[Vt];$&&oe[jt]!==void 0||(oe[jt]=he[jt])}return oe}}var vr=Ar($t),Rr=Ar(at),jr=Ar($t,!0);function Ir(O){if(!Q(O))return{};if(B)return B(O);var $=function(){};$.prototype=O;var oe=new $;return $.prototype=null,oe}function Qr(O){return Q(O)?ht(O)?O.slice():vr({},O):O}function In(O){return ht(O)?O:[O]}function $r(O){return bt.toPath(O)}function Zr(O,$){for(var oe=$.length,ce=0;ce<oe;ce++){if(O==null)return;O=O[$[ce]]}return oe?O:void 0}function rn(O,$,oe){var ce=Zr(O,$r($));return Z(ce)?oe:ce}function an(O){return O}function Br(O){return O=Rr({},O),function($){return fr($,O)}}function Wr(O){return O=$r(O),function($){return Zr($,O)}}function dn(O,$,oe){if($===void 0)return O;switch(oe??3){case 1:return function(ce){return O.call($,ce)};case 3:return function(ce,ge,he){return O.call($,ce,ge,he)};case 4:return function(ce,ge,he,Te){return O.call($,ce,ge,he,Te)}}return function(){return O.apply($,arguments)}}function Ln(O,$,oe){return O==null?an:Ve(O)?dn(O,$,oe):Q(O)&&!ht(O)?Br(O):Wr(O)}function Re(O,$){return Ln(O,$,1/0)}function Le(O,$,oe){return bt.iteratee!==Re?bt.iteratee(O,$):Ln(O,$,oe)}function Ke(){}function rr(O,$){return $==null&&($=O,O=0),O+Math.floor(Math.random()*($-O+1))}bt.toPath=In,bt.iteratee=Re;var Pe=Date.now||function(){return new Date().getTime()};function Er(O){var $=function(he){return O[he]},oe="(?:"+at(O).join("|")+")",ce=RegExp(oe),ge=RegExp(oe,"g");return function(he){return he=he==null?"":""+he,ce.test(he)?he.replace(ge,$):he}}var hr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},sr=Er(hr),de=Er(Kt(hr)),ct=bt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},or=/(.)^/,Nt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Or=/\\|'|\r|\n|\u2028|\u2029/g;function Mr(O){return"\\"+Nt[O]}var nn=/^\s*(\w|\$)+\s*$/,en=0;function xr(O,$,oe,ce,ge){if(!(ce instanceof $))return O.apply(oe,ge);var he=Ir(O.prototype),Te=O.apply(he,ge);return Q(Te)?Te:he}var hn=M((function(O,$){var oe=hn.placeholder,ce=function(){for(var ge=0,he=$.length,Te=Array(he),Ue=0;Ue<he;Ue++)Te[Ue]=$[Ue]===oe?arguments[ge++]:$[Ue];for(;ge<arguments.length;)Te.push(arguments[ge++]);return xr(O,ce,this,this,Te)};return ce}));hn.placeholder=bt;var Rn=M((function(O,$,oe){if(!Ve(O))throw new TypeError("Bind must be called on a function");var ce=M((function(ge){return xr(O,ce,$,this,oe.concat(ge))}));return ce})),sn=Zt(be);function ln(O,$,oe,ce){if(ce=ce||[],$||$===0){if($<=0)return ce.concat(O)}else $=1/0;for(var ge=ce.length,he=0,Te=be(O);he<Te;he++){var Ue=O[he];if(sn(Ue)&&(ht(Ue)||Gt(Ue)))if($>1)ln(Ue,$-1,oe,ce),ge=ce.length;else for(var Vt=0,jt=Ue.length;Vt<jt;)ce[ge++]=Ue[Vt++];else oe||(ce[ge++]=Ue)}return ce}var ui=M((function(O,$){var oe=($=ln($,!1,!1)).length;if(oe<1)throw new Error("bindAll must be passed function names");for(;oe--;){var ce=$[oe];O[ce]=Rn(O[ce],O)}return O})),Qi=M((function(O,$,oe){return setTimeout((function(){return O.apply(null,oe)}),$)})),vi=hn(Qi,bt,1);function Yn(O){return function(){return!O.apply(this,arguments)}}function yi(O,$){var oe;return function(){return--O>0&&(oe=$.apply(this,arguments)),O<=1&&($=null),oe}}var go=hn(yi,2);function Kr(O,$,oe){$=Le($,oe);for(var ce,ge=at(O),he=0,Te=ge.length;he<Te;he++)if($(O[ce=ge[he]],ce,O))return ce}function cs(O){return function($,oe,ce){oe=Le(oe,ce);for(var ge=be($),he=O>0?0:ge-1;he>=0&&he<ge;he+=O)if(oe($[he],he,$))return he;return-1}}var Vr=cs(1),fs=cs(-1);function ds(O,$,oe,ce){for(var ge=(oe=Le(oe,ce,1))($),he=0,Te=be(O);he<Te;){var Ue=Math.floor((he+Te)/2);oe(O[Ue])<ge?he=Ue+1:Te=Ue}return he}function hs(O,$,oe){return function(ce,ge,he){var Te=0,Ue=be(ce);if(typeof he=="number")O>0?Te=he>=0?he:Math.max(he+Ue,Te):Ue=he>=0?Math.min(he+1,Ue):he+Ue+1;else if(oe&&he&&Ue)return ce[he=oe(ce,ge)]===ge?he:-1;if(ge!=ge)return(he=$(E.call(ce,Te,Ue),Pt))>=0?he+Te:-1;for(he=O>0?Te:Ue-1;he>=0&&he<Ue;he+=O)if(ce[he]===ge)return he;return-1}}var $i=hs(1,Vr,ds),Wi=hs(-1,fs);function Vi(O,$,oe){var ce=(sn(O)?Vr:Kr)(O,$,oe);if(ce!==void 0&&ce!==-1)return O[ce]}function yn(O,$,oe){var ce,ge;if($=dn($,oe),sn(O))for(ce=0,ge=O.length;ce<ge;ce++)$(O[ce],ce,O);else{var he=at(O);for(ce=0,ge=he.length;ce<ge;ce++)$(O[he[ce]],he[ce],O)}return O}function En(O,$,oe){$=Le($,oe);for(var ce=!sn(O)&&at(O),ge=(ce||O).length,he=Array(ge),Te=0;Te<ge;Te++){var Ue=ce?ce[Te]:Te;he[Te]=$(O[Ue],Ue,O)}return he}function Yi(O){var $=function(oe,ce,ge,he){var Te=!sn(oe)&&at(oe),Ue=(Te||oe).length,Vt=O>0?0:Ue-1;for(he||(ge=oe[Te?Te[Vt]:Vt],Vt+=O);Vt>=0&&Vt<Ue;Vt+=O){var jt=Te?Te[Vt]:Vt;ge=ce(ge,oe[jt],jt,oe)}return ge};return function(oe,ce,ge,he){var Te=arguments.length>=3;return $(oe,dn(ce,he,4),ge,Te)}}var Ei=Yi(1),Hn=Yi(-1);function Nr(O,$,oe){var ce=[];return $=Le($,oe),yn(O,(function(ge,he,Te){$(ge,he,Te)&&ce.push(ge)})),ce}function yr(O,$,oe){$=Le($,oe);for(var ce=!sn(O)&&at(O),ge=(ce||O).length,he=0;he<ge;he++){var Te=ce?ce[he]:he;if(!$(O[Te],Te,O))return!1}return!0}function As(O,$,oe){$=Le($,oe);for(var ce=!sn(O)&&at(O),ge=(ce||O).length,he=0;he<ge;he++){var Te=ce?ce[he]:he;if($(O[Te],Te,O))return!0}return!1}function bn(O,$,oe,ce){return sn(O)||(O=At(O)),(typeof oe!="number"||ce)&&(oe=0),$i(O,$,oe)>=0}var tr=M((function(O,$,oe){var ce,ge;return Ve($)?ge=$:($=$r($),ce=$.slice(0,-1),$=$[$.length-1]),En(O,(function(he){var Te=ge;if(!Te){if(ce&&ce.length&&(he=Zr(he,ce)),he==null)return;Te=he[$]}return Te==null?Te:Te.apply(he,oe)}))}));function bi(O,$){return En(O,Wr($))}function jn(O,$,oe){var ce,ge,he=-1/0,Te=-1/0;if($==null||typeof $=="number"&&f(O[0])!="object"&&O!=null)for(var Ue=0,Vt=(O=sn(O)?O:At(O)).length;Ue<Vt;Ue++)(ce=O[Ue])!=null&&ce>he&&(he=ce);else $=Le($,oe),yn(O,(function(jt,Tr,_r){((ge=$(jt,Tr,_r))>Te||ge===-1/0&&he===-1/0)&&(he=jt,Te=ge)}));return he}function gs(O,$,oe){if($==null||oe)return sn(O)||(O=At(O)),O[rr(O.length-1)];var ce=sn(O)?Qr(O):At(O),ge=be(ce);$=Math.max(Math.min($,ge),0);for(var he=ge-1,Te=0;Te<$;Te++){var Ue=rr(Te,he),Vt=ce[Te];ce[Te]=ce[Ue],ce[Ue]=Vt}return ce.slice(0,$)}function Ci(O,$){return function(oe,ce,ge){var he=$?[[],[]]:{};return ce=Le(ce,ge),yn(oe,(function(Te,Ue){var Vt=ce(Te,Ue,oe);O(he,Te,Vt)})),he}}var po=Ci((function(O,$,oe){_t(O,oe)?O[oe].push($):O[oe]=[$]})),ps=Ci((function(O,$,oe){O[oe]=$})),mo=Ci((function(O,$,oe){_t(O,oe)?O[oe]++:O[oe]=1})),vo=Ci((function(O,$,oe){O[oe?0:1].push($)}),!0),yo=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Hi(O,$,oe){return $ in oe}var ms=M((function(O,$){var oe={},ce=$[0];if(O==null)return oe;Ve(ce)?($.length>1&&(ce=dn(ce,$[1])),$=$t(O)):(ce=Hi,$=ln($,!1,!1),O=Object(O));for(var ge=0,he=$.length;ge<he;ge++){var Te=$[ge],Ue=O[Te];ce(Ue,Te,O)&&(oe[Te]=Ue)}return oe})),vs=M((function(O,$){var oe,ce=$[0];return Ve(ce)?(ce=Yn(ce),$.length>1&&(oe=$[1])):($=En(ln($,!1,!1),String),ce=function(ge,he){return!bn($,he)}),ms(O,ce,oe)}));function ys(O,$,oe){return E.call(O,0,Math.max(0,O.length-($==null||oe?1:$)))}function ji(O,$,oe){return O==null||O.length<1?$==null||oe?void 0:[]:$==null||oe?O[0]:ys(O,O.length-$)}function ci(O,$,oe){return E.call(O,$==null||oe?1:$)}var Es=M((function(O,$){return $=ln($,!0,!0),Nr(O,(function(oe){return!bn($,oe)}))})),Eo=M((function(O,$){return Es(O,$)}));function Ki(O,$,oe,ce){J($)||(ce=oe,oe=$,$=!1),oe!=null&&(oe=Le(oe,ce));for(var ge=[],he=[],Te=0,Ue=be(O);Te<Ue;Te++){var Vt=O[Te],jt=oe?oe(Vt,Te,O):Vt;$&&!oe?(Te&&he===jt||ge.push(Vt),he=jt):oe?bn(he,jt)||(he.push(jt),ge.push(Vt)):bn(ge,Vt)||ge.push(Vt)}return ge}var On=M((function(O){return Ki(ln(O,!0,!0))}));function mr(O){for(var $=O&&jn(O,be).length||0,oe=Array($),ce=0;ce<$;ce++)oe[ce]=bi(O,ce);return oe}var bs=M(mr);function xi(O,$){return O._chain?bt($).chain():$}function zi(O){return yn(er(O),(function($){var oe=bt[$]=O[$];bt.prototype[$]=function(){var ce=[this._wrapped];return y.apply(ce,arguments),xi(this,oe.apply(bt,ce))}})),bt}yn(["pop","push","reverse","shift","sort","splice","unshift"],(function(O){var $=g[O];bt.prototype[O]=function(){var oe=this._wrapped;return oe!=null&&($.apply(oe,arguments),O!=="shift"&&O!=="splice"||oe.length!==0||delete oe[0]),xi(this,oe)}})),yn(["concat","join","slice"],(function(O){var $=g[O];bt.prototype[O]=function(){var oe=this._wrapped;return oe!=null&&(oe=$.apply(oe,arguments)),xi(this,oe)}}));var Ti=zi({__proto__:null,VERSION:h,restArguments:M,isObject:Q,isNull:function(O){return O===null},isUndefined:Z,isBoolean:J,isElement:function(O){return!(!O||O.nodeType!==1)},isString:te,isNumber:fe,isDate:Ee,isRegExp:Ae,isError:Ce,isSymbol:Oe,isArrayBuffer:Ne,isDataView:st,isArray:ht,isFunction:Ve,isArguments:Gt,isFinite:function(O){return!Oe(O)&&U(O)&&!isNaN(parseFloat(O))},isNaN:Pt,isTypedArray:ft,isEmpty:function(O){if(O==null)return!0;var $=be(O);return typeof $=="number"&&(ht(O)||te(O)||Gt(O))?$===0:be(at(O))===0},isMatch:fr,isEqual:function(O,$){return ot(O,$)},isMap:Ft,isWeakMap:ke,isSet:ut,isWeakSet:Et,keys:at,allKeys:$t,values:At,pairs:function(O){for(var $=at(O),oe=$.length,ce=Array(oe),ge=0;ge<oe;ge++)ce[ge]=[$[ge],O[$[ge]]];return ce},invert:Kt,functions:er,methods:er,extend:vr,extendOwn:Rr,assign:Rr,defaults:jr,create:function(O,$){var oe=Ir(O);return $&&Rr(oe,$),oe},clone:Qr,tap:function(O,$){return $(O),O},get:rn,has:function(O,$){for(var oe=($=$r($)).length,ce=0;ce<oe;ce++){var ge=$[ce];if(!_t(O,ge))return!1;O=O[ge]}return!!oe},mapObject:function(O,$,oe){$=Le($,oe);for(var ce=at(O),ge=ce.length,he={},Te=0;Te<ge;Te++){var Ue=ce[Te];he[Ue]=$(O[Ue],Ue,O)}return he},identity:an,constant:It,noop:Ke,toPath:In,property:Wr,propertyOf:function(O){return O==null?Ke:function($){return rn(O,$)}},matcher:Br,matches:Br,times:function(O,$,oe){var ce=Array(Math.max(0,O));$=dn($,oe,1);for(var ge=0;ge<O;ge++)ce[ge]=$(ge);return ce},random:rr,now:Pe,escape:sr,unescape:de,templateSettings:ct,template:function(O,$,oe){!$&&oe&&($=oe),$=jr({},$,bt.templateSettings);var ce=RegExp([($.escape||or).source,($.interpolate||or).source,($.evaluate||or).source].join("|")+"|$","g"),ge=0,he="__p+='";O.replace(ce,(function(jt,Tr,_r,Kn,zn){return he+=O.slice(ge,zn).replace(Or,Mr),ge=zn+jt.length,Tr?he+=`'+
((__t=(`+Tr+`))==null?'':_.escape(__t))+
'`:_r?he+=`'+
((__t=(`+_r+`))==null?'':__t)+
'`:Kn&&(he+=`';
`+Kn+`
__p+='`),jt})),he+=`';
`;var Te,Ue=$.variable;if(Ue){if(!nn.test(Ue))throw new Error("variable is not a bare identifier: "+Ue)}else he=`with(obj||{}){
`+he+`}
`,Ue="obj";he=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+he+`return __p;
`;try{Te=new Function(Ue,"_",he)}catch(jt){throw jt.source=he,jt}var Vt=function(jt){return Te.call(this,jt,bt)};return Vt.source="function("+Ue+`){
`+he+"}",Vt},result:function(O,$,oe){var ce=($=$r($)).length;if(!ce)return Ve(oe)?oe.call(O):oe;for(var ge=0;ge<ce;ge++){var he=O?.[$[ge]];he===void 0&&(he=oe,ge=ce),O=Ve(he)?he.call(O):he}return O},uniqueId:function(O){var $=++en+"";return O?O+$:$},chain:function(O){var $=bt(O);return $._chain=!0,$},iteratee:Re,partial:hn,bind:Rn,bindAll:ui,memoize:function(O,$){var oe=function(ce){var ge=oe.cache,he=""+($?$.apply(this,arguments):ce);return _t(ge,he)||(ge[he]=O.apply(this,arguments)),ge[he]};return oe.cache={},oe},delay:Qi,defer:vi,throttle:function(O,$,oe){var ce,ge,he,Te,Ue=0;oe||(oe={});var Vt=function(){Ue=oe.leading===!1?0:Pe(),ce=null,Te=O.apply(ge,he),ce||(ge=he=null)},jt=function(){var Tr=Pe();Ue||oe.leading!==!1||(Ue=Tr);var _r=$-(Tr-Ue);return ge=this,he=arguments,_r<=0||_r>$?(ce&&(clearTimeout(ce),ce=null),Ue=Tr,Te=O.apply(ge,he),ce||(ge=he=null)):ce||oe.trailing===!1||(ce=setTimeout(Vt,_r)),Te};return jt.cancel=function(){clearTimeout(ce),Ue=0,ce=ge=he=null},jt},debounce:function(O,$,oe){var ce,ge,he,Te,Ue,Vt=function(){var Tr=Pe()-ge;$>Tr?ce=setTimeout(Vt,$-Tr):(ce=null,oe||(Te=O.apply(Ue,he)),ce||(he=Ue=null))},jt=M((function(Tr){return Ue=this,he=Tr,ge=Pe(),ce||(ce=setTimeout(Vt,$),oe&&(Te=O.apply(Ue,he))),Te}));return jt.cancel=function(){clearTimeout(ce),ce=he=Ue=null},jt},wrap:function(O,$){return hn($,O)},negate:Yn,compose:function(){var O=arguments,$=O.length-1;return function(){for(var oe=$,ce=O[$].apply(this,arguments);oe--;)ce=O[oe].call(this,ce);return ce}},after:function(O,$){return function(){if(--O<1)return $.apply(this,arguments)}},before:yi,once:go,findKey:Kr,findIndex:Vr,findLastIndex:fs,sortedIndex:ds,indexOf:$i,lastIndexOf:Wi,find:Vi,detect:Vi,findWhere:function(O,$){return Vi(O,Br($))},each:yn,forEach:yn,map:En,collect:En,reduce:Ei,foldl:Ei,inject:Ei,reduceRight:Hn,foldr:Hn,filter:Nr,select:Nr,reject:function(O,$,oe){return Nr(O,Yn(Le($)),oe)},every:yr,all:yr,some:As,any:As,contains:bn,includes:bn,include:bn,invoke:tr,pluck:bi,where:function(O,$){return Nr(O,Br($))},max:jn,min:function(O,$,oe){var ce,ge,he=1/0,Te=1/0;if($==null||typeof $=="number"&&f(O[0])!="object"&&O!=null)for(var Ue=0,Vt=(O=sn(O)?O:At(O)).length;Ue<Vt;Ue++)(ce=O[Ue])!=null&&ce<he&&(he=ce);else $=Le($,oe),yn(O,(function(jt,Tr,_r){((ge=$(jt,Tr,_r))<Te||ge===1/0&&he===1/0)&&(he=jt,Te=ge)}));return he},shuffle:function(O){return gs(O,1/0)},sample:gs,sortBy:function(O,$,oe){var ce=0;return $=Le($,oe),bi(En(O,(function(ge,he,Te){return{value:ge,index:ce++,criteria:$(ge,he,Te)}})).sort((function(ge,he){var Te=ge.criteria,Ue=he.criteria;if(Te!==Ue){if(Te>Ue||Te===void 0)return 1;if(Te<Ue||Ue===void 0)return-1}return ge.index-he.index})),"value")},groupBy:po,indexBy:ps,countBy:mo,partition:vo,toArray:function(O){return O?ht(O)?E.call(O):te(O)?O.match(yo):sn(O)?En(O,an):At(O):[]},size:function(O){return O==null?0:sn(O)?O.length:at(O).length},pick:ms,omit:vs,first:ji,head:ji,take:ji,initial:ys,last:function(O,$,oe){return O==null||O.length<1?$==null||oe?void 0:[]:$==null||oe?O[O.length-1]:ci(O,Math.max(0,O.length-$))},rest:ci,tail:ci,drop:ci,compact:function(O){return Nr(O,Boolean)},flatten:function(O,$){return ln(O,$,!1)},without:Eo,uniq:Ki,unique:Ki,union:On,intersection:function(O){for(var $=[],oe=arguments.length,ce=0,ge=be(O);ce<ge;ce++){var he=O[ce];if(!bn($,he)){var Te;for(Te=1;Te<oe&&bn(arguments[Te],he);Te++);Te===oe&&$.push(he)}}return $},difference:Es,unzip:mr,transpose:mr,zip:bs,object:function(O,$){for(var oe={},ce=0,ge=be(O);ce<ge;ce++)$?oe[O[ce]]=$[ce]:oe[O[ce][0]]=O[ce][1];return oe},range:function(O,$,oe){$==null&&($=O||0,O=0),oe||(oe=$<O?-1:1);for(var ce=Math.max(Math.ceil(($-O)/oe),0),ge=Array(ce),he=0;he<ce;he++,O+=oe)ge[he]=O;return ge},chunk:function(O,$){if($==null||$<1)return[];for(var oe=[],ce=0,ge=O.length;ce<ge;)oe.push(E.call(O,ce,ce+=$));return oe},mixin:zi,default:bt});return Ti._=Ti,Ti},f(l)=="object"?i.exports=u():(a=typeof(s=u)=="function"?s.call(l,t,l,i):s)===void 0||(i.exports=a)},69534:function(i,l,t){var s=t(71354),a=t.n(s),u=t(76314),f=t.n(u),h=t(4417),A=t.n(h),g=new URL(t(85971),t.b),p=new URL(t(58233),t.b),m=new URL(t(36923),t.b),y=f()(a()),E=A()(g),C=A()(p),T=A()(m);y.push([i.id,'@charset "UTF-8";@keyframes op-spinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@-webkit-keyframes op-slideOutDown{from{-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0)}to{visibility:hidden;-webkit-transform:translate3d(0, 100%, 0);transform:translate3d(0, 100%, 0)}}@keyframes op-slideOutDown{from{-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0)}to{visibility:hidden;-webkit-transform:translate3d(0, 100%, 0);transform:translate3d(0, 100%, 0)}}@-webkit-keyframes op-slideInUp{from{-webkit-transform:translate3d(0, 100%, 0);transform:translate3d(0, 100%, 0);opacity:1}to{-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0)}}@keyframes op-slideInUp{from{-webkit-transform:translate3d(0, 100%, 0);transform:translate3d(0, 100%, 0);opacity:1}to{-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0)}}@font-face{font-family:"frameIcon";src:url('+E+") format('truetype');font-weight:normal;font-style:normal}@font-face{font-family:'op-icons';src:url("+C+") format('truetype');font-weight:normal;font-style:normal}@font-face{font-family:'op-seek-icons';src:url("+T+`) format('truetype');font-weight:normal;font-style:normal}:root{--op-accent-color:#50e3c2}.op-fullscreen-helper{overflow:hidden;position:fixed}.op-wrapper.ovenplayer{position:relative;max-height:100%;overflow:hidden;zoom:1 !important;width:100%;display:block;font-family:Helvetica,Arial,sans-serif;background-color:#000;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;color:#fff;font-size:14px;font-weight:100;outline:0;-webkit-touch-callout:none;user-select:none}.op-wrapper.ovenplayer *{box-sizing:inherit}.op-wrapper.ovenplayer object{width:100%;height:100%;position:absolute}.op-wrapper.ovenplayer:before,.op-wrapper.ovenplayer:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}.op-wrapper.ovenplayer *,.op-wrapper.ovenplayer *:before,.op-wrapper.ovenplayer *:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}.op-wrapper.ovenplayer.op-fullscreen{width:100vw !important;height:100vh !important;top:0;right:0;bottom:0;left:0;z-index:9999;margin:0;position:fixed}.op-wrapper.ovenplayer.op-fullscreen .op-watermark-container,.op-wrapper.ovenplayer.op-fullscreen .op-thumbnail-container{width:100vw;max-width:calc(100vh * 16 / 9);height:calc(100vw * 9 / 16);max-height:100vh;top:50%;left:50%;transform:translate(-50%, -50%)}.op-wrapper.ovenplayer.op-autohide{cursor:none}.op-wrapper.ovenplayer.op-autohide .op-bottom-panel{-webkit-animation-name:op-slideOutDown;animation-name:op-slideOutDown;-webkit-animation-duration:.2s;animation-duration:.2s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.op-wrapper.ovenplayer.op-autohide .op-progressbar-container,.op-wrapper.ovenplayer.op-autohide .op-controls .op-button{cursor:none}.op-wrapper.ovenplayer.op-autohide .op-caption-text-container{bottom:25px}.op-wrapper.ovenplayer.op-no-controls .op-controls-container{display:none !important}.op-wrapper.ovenplayer .op-ratio{padding-bottom:56.25%}.op-wrapper.ovenplayer ::-webkit-scrollbar{width:5px;height:8px}.op-wrapper.ovenplayer ::-webkit-scrollbar-button:start:decrement,.op-wrapper.ovenplayer ::-webkit-scrollbar-button:end:increment{display:block;height:3px;background:#2f2f3e}.op-wrapper.ovenplayer ::-webkit-scrollbar-track{background:#2f2f3e;-webkit-border-radius:10px;border-radius:10px}.op-wrapper.ovenplayer ::-webkit-scrollbar-thumb{height:50px;width:50px;background:#606071;-webkit-border-radius:8px;border-radius:8px}.op-wrapper.ovenplayer .op-clear{color:inherit;background-color:transparent;padding:0;margin:0;float:none;font-family:Helvetica,Arial,sans-serif;font-size:1em;line-height:1em;list-style:none;text-transform:none;vertical-align:baseline;border:0;font-variant:inherit;font-stretch:inherit;-webkit-tap-highlight-color:rgba(255,255,255,0)}.op-player{position:absolute;top:0;height:100%;width:100%}.op-player .op-core-ui-wrapper{position:relative;height:100%}.op-player .op-media-element-container{position:absolute;left:0px;top:0px;width:100%;height:100%;transform:scale(var(--mediaZoom))}.op-player .op-media-element-container video{position:absolute;left:0;top:0;width:100%;height:100%}.op-player .op-media-element-container object{width:100%;height:100%}.op-ads{position:absolute;height:100%;width:100%;padding-bottom:34px;top:0}.op-ads>div{position:absolute !important;width:100% !important;height:100% !important}.op-ads>div iframe{pointer-events:auto}.op-ads video.op-ads-vast-video{background-color:#000;position:absolute;width:100%;height:100%;left:0;top:0;z-index:1}.op-ads .op-ads-button{bottom:36px;cursor:default;margin-right:4px;pointer-events:auto;position:absolute;right:0;z-index:1;width:auto !important;height:auto !important;border-radius:4px;background-color:rgba(18,18,28,0.7);min-width:155px;display:none}.op-ads .op-ads-button .op-ads-textview{color:#e6e6e6;font-weight:normal;font-size:11px;padding:6px 12px;text-align:center;display:inline-block;width:100%;vertical-align:middle}.op-ads .op-ads-button .videoAdUiAction{padding:8px 24px;cursor:pointer;direction:ltr;font-weight:normal;font-size:20px;border:1px solid rgba(255,255,255,0.5)}.op-ads .op-ads-button .videoAdUiAction:hover{border-radius:4px;border:1px solid #fff}.op-ads .op-ads-button .videoAdUiAction i{display:inline-block;width:auto}.op-button{display:inline-block;border:none;background:transparent;padding:0;color:inherit;text-align:inherit;overflow:hidden;font-weight:100;text-indent:0 !important}.op-button:focus,.op-button{outline:0}i.op-con{font-family:"op-icons","op-seek-icons";font-style:normal;font-weight:normal;speak:none;font-size:inherit;width:auto;font-size:30px;line-height:30px;display:block;text-decoration:inherit;text-align:center;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;cursor:pointer}i.op-con.disable{color:#4f4f4f}i.op-con.op-close-icon::before{content:"\\e900"}i.op-con.op-pause-big::before{content:"\\e911"}i.op-con.op-fullscreen-compress::before{content:"\\e901"}i.op-con.op-fullscreen-expand::before{content:"\\e902"}i.op-con.op-arrow-left::before{content:"\\e903"}i.op-con.op-arrow-right::before{content:"\\e909"}i.op-con.op-empty-video::before{content:"\\e904"}i.op-con.op-play::before{content:"\\e906"}i.op-con.op-replay::before{content:"\\e908"}i.op-con.op-seek-back::before{content:"\\e920"}i.op-con.op-seek-forward::before{content:"\\e921"}i.op-con.op-playlist-icon::before{content:"\\e907"}i.op-con.op-replay-big::before{content:"\\e908"}i.op-con.op-setting::before{content:"\\e90A"}i.op-con.op-pause::before{content:"\\e90C"}i.op-con.op-volume-small{display:none;margin-top:-1px}i.op-con.op-volume-small::before{content:"\\e90D"}i.op-con.op-volume-mute{display:none}i.op-con.op-volume-mute::before{content:"\\e90E"}i.op-con.op-volume-max::before{content:"\\e90F"}i.op-con.op-play-big::before{content:"\\e910"}i.op-con.op-warning::before{content:"\\e912"}.op-badge{display:inline-block;padding:.75em .714em .714em .68em;font-size:1em;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.286em;background-color:#12121c}.op-playlist{position:absolute;width:100%;height:100%;left:0;top:0;padding:2.857em;background:#000;z-index:6}.op-playlist .op-badge{position:absolute;top:.857em;right:.857em;opacity:.7}.op-playlist .btn-left{float:left;font-size:2.857em}.op-playlist .btn-right{float:right;font-size:2.857em}.op-playlist .op-playlist-header{font-size:2.857em;font-weight:bold}.op-playlist .op-playlist-header:after{display:block;content:'';clear:both}.op-playlist .op-playlist-header .op-con.op-close-icon{float:right}.op-playlist .op-playlist-body{height:100%;overflow:hidden;position:relative}.op-playlist .op-playlist-body .op-playlist-body-arrows{margin-top:-15px;position:absolute;top:50%;height:30px;-ms-transform:translateY(-50%);transform:translateY(-50%);width:100%;left:0}.op-playlist .op-playlist-body .op-playlist-body-container{width:100%;height:100%;position:relative;margin-right:auto;margin-left:auto;max-width:992px}.op-playlist .op-playlist-body .op-playlist-body-container .op-playlist-body-center{margin:0;position:absolute;top:50%;padding-right:3em;padding-left:3em;-ms-transform:translateY(-50%);transform:translateY(-50%);width:100%}.op-playlist .op-playlist-body .op-playlist-body-row{margin-right:-15px;margin-left:-15px;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.op-playlist .op-playlist-body .op-playlist-body-row .op-playlist-card{padding-right:15px;padding-left:15px;margin:15px 0;-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%;cursor:pointer}.op-playlist .op-playlist-body .op-playlist-body-row .op-playlist-card.active{color:#50e3c2;color:var(--op-accent-color)}.op-playlist .op-playlist-body .op-playlist-body-row .op-playlist-card.active .op-playlist-card-thumbnail{border-color:#50e3c2;border-color:var(--op-accent-color)}.op-playlist .op-playlist-body .op-playlist-body-row .op-playlist-card .op-playlist-card-thumbnail{position:relative;display:block;width:100%;padding:0;overflow:hidden;border:.214em solid transparent;background-color:#000}.op-playlist .op-playlist-body .op-playlist-body-row .op-playlist-card .op-playlist-card-thumbnail img{position:absolute;top:0;bottom:0;left:0;width:100%;height:100%;border:0}.op-playlist .op-playlist-body .op-playlist-body-row .op-playlist-card .op-playlist-card-thumbnail.empty{background-color:#bababa}.op-playlist .op-playlist-body .op-playlist-body-row .op-playlist-card .op-playlist-card-thumbnail.empty>i{margin:0;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);color:#fff !important;font-size:1.6em !important}.op-playlist .op-playlist-body .op-playlist-body-row .op-playlist-card .op-playlist-card-thumbnail::before{padding-top:56.25%;display:block;content:""}.op-playlist .op-playlist-body .op-playlist-body-row .op-playlist-card .op-playlist-card-title{margin-top:.857em;font-size:1.429em;padding:2px 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.op-message-box{position:absolute;top:0;left:0;width:100%;height:100%;z-index:4}.op-message-box .op-message-container{position:absolute;top:45%;margin-top:-35px;width:100%;padding:0 12px;text-align:center}.op-message-box .op-message-container .op-message-text{display:inline-block;background-color:rgba(18,18,28,0.3);padding:.8em 1.2em;word-wrap:break-word;max-width:80%;border-radius:4px;cursor:pointer}.op-message-box .op-message-container .op-message-text .op-message-description{font-size:12px;margin-top:12px;color:#999}.op-message-box .op-message-container .op-message-icon{display:inline-block;margin-top:12px;width:100%}.op-message-box .op-message-container .op-message-icon i.op-con{cursor:pointer;font-size:80px;width:80px;height:80px;line-height:80px;display:inline-block;text-shadow:2px 2px 7px rgba(0,0,0,0.8),0 0 1px #000}.op-message-box.op-message-box-default-cursor .op-message-container .op-message-text{cursor:default}.op-message-box.op-message-box-default-cursor .op-message-container .op-message-icon i.op-con{cursor:default}.op-bigbutton-container{cursor:pointer;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);text-align:center;z-index:5}.op-bigbutton-container .op-bigbutton{width:80px;height:80px;display:block;font-size:80px;line-height:80px;text-shadow:2px 2px 7px rgba(0,0,0,0.8),0 0 1px #000}.op-thumbnail-container{position:absolute;width:100%;height:100%;top:0;left:0;z-index:2;pointer-events:none}.op-thumbnail-container .op-thumbnail-wrapper{position:absolute;left:0;top:0;width:100%;height:100%}.op-thumbnail-container .op-thumbnail-wrapper img{width:100%;height:100%}.op-thumbnail-container .op-thumbnail-wrapper .op-thumbnail-header{position:absolute;left:1rem;top:1rem;padding:0 .5rem;font-size:2.857em;font-weight:bold;line-height:1.4;text-shadow:2px 2px 7px rgba(0,0,0,0.8),0 0 1px #000}.op-thumbnail-container .op-thumbnail-wrapper .op-thumbnail-header:after{display:block;content:'';clear:both}.op-watermark-container{position:absolute;width:100%;height:100%;top:0;left:0;z-index:3}.op-watermark-container .op-watermark{position:absolute;display:inline-block}.op-watermark-container .op-watermark img{width:100%;height:auto}.op-watermark-container .op-watermark .op-watermark-text{font-size:14px}.op-setting-panel{position:absolute;bottom:55px;right:12px;overflow-y:auto;max-height:100%;width:260px;user-select:none;background-color:rgba(28,28,28,0.9);text-shadow:0 0 2px rgba(0,0,0,0.5);z-index:8}.op-setting-panel.background{display:none}.op-setting-panel .op-setting-title,.op-setting-panel .op-setting-item{width:100%;height:38px;line-height:38px;cursor:pointer;outline:none;text-align:left}.op-setting-panel .op-setting-title-container .op-setting-title .op-setting-title-title{padding-left:12px;font-weight:bold}.op-setting-panel .op-setting-title-container .op-setting-title .op-setting-title-previcon{padding:0 0 0 12px;margin-right:-6px}.op-setting-panel .op-setting-item-container .op-setting-item:hover{background-color:rgba(255,255,255,0.1)}.op-setting-panel .op-setting-item-container .op-setting-item .op-setting-item-title{padding-left:12px}.op-setting-panel .op-setting-item-container .op-setting-item .op-setting-item-nexticon{float:right;padding-right:12px;margin-left:-6px}.op-setting-panel .op-setting-item-container .op-setting-item span.op-setting-item-value{float:right;padding-right:12px}.op-setting-panel .op-setting-item-container .op-setting-item .op-setting-item-checked{padding-left:12px;visibility:hidden}.op-setting-panel .op-setting-item-container .op-setting-item .op-setting-item-checked.op-show{visibility:visible}.op-controls-container{display:none}.op-controls-container .op-bottom-panel{position:absolute;left:0px;bottom:0px;width:100%;z-index:5;-webkit-animation-name:op-slideInUp;animation-name:op-slideInUp;-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.op-controls-container .op-bottom-panel .op-gradient-bottom{position:absolute;width:100%;height:100%;background-color:rgba(18,18,18,0.5);pointer-events:none}.op-controls-container .op-bottom-panel .op-progressbar-container{display:block;position:relative;width:100%;height:4px;bottom:50px}.op-controls-container .op-bottom-panel .op-progressbar-container.op-progressbar-container-disabled{cursor:default}.op-controls-container .op-bottom-panel .op-progressbar-container .op-progressbar-padding{position:absolute;width:100%;height:15px;bottom:-5px;cursor:pointer}.op-controls-container .op-bottom-panel .op-controls{position:relative;width:100%;height:50px;text-align:left;overflow:hidden}.op-controls-container .op-bottom-panel .op-controls:after{content:'';clear:both}.op-controls-container .op-bottom-panel .op-controls .op-setting-button{position:relative;margin-right:12px}.op-controls-container .op-bottom-panel .op-controls .op-playlist-button{position:relative;margin-right:12px}.op-controls-container .op-bottom-panel .op-controls .op-navigators{float:left;height:30px;line-height:30px}.op-controls-container .op-bottom-panel .op-controls .op-left-controls{position:absolute;top:0;left:0;padding:14px 0 10px 0}.op-controls-container .op-bottom-panel .op-controls .op-left-controls:after{content:'';clear:both}.op-controls-container .op-bottom-panel .op-controls .op-right-controls{position:absolute;top:0;right:0;padding:14px 0 10px 0}.op-controls-container .op-bottom-panel .op-controls .op-right-controls:after{content:'';clear:both}.op-controls-container .op-bottom-panel .op-controls .op-frame-buttons{position:relative;display:inline-block;margin-left:14px;overflow:hidden;font-weight:100;height:30px}.op-controls-container .op-bottom-panel .op-controls .op-frame-buttons .op-frame-button{margin-right:6px;position:relative;text-align:center;color:#fff}.op-controls-container .op-bottom-panel .op-controls .op-frame-buttons .op-frame-button .frame-icon{position:relative}.op-controls-container .op-bottom-panel .op-controls .op-frame-buttons .op-frame-button .frame-icon.reverse:after{content:'\\e900'}.op-controls-container .op-bottom-panel .op-controls .op-frame-buttons .op-frame-button .frame-icon:after{font-family:'frameIcon' !important;speak:none;content:'\\e901';font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:absolute;font-size:2.4em;left:0;line-height:30px;height:30px}.op-controls-container .op-bottom-panel .op-controls .op-frame-buttons .op-frame-button .frame-icon .btn-text{font-weight:bold;font-size:.8em;line-height:30px;height:30px}.op-progressbar{position:absolute;bottom:0;left:0;width:100%;height:100%;outline:none;margin-top:10px}.op-progressbar .op-play-background-color{background-color:#50e3c2;background-color:var(--op-accent-color)}.op-progressbar .op-progress-list{cursor:pointer;position:relative;height:100%;background:rgba(255,255,255,0.2)}.op-progressbar .op-progress-list .op-load-progress,.op-progressbar .op-progress-list .op-play-progress,.op-progressbar .op-progress-list .op-hover-progress{position:absolute;left:0;bottom:0;width:100%;height:100%}.op-progressbar .op-progress-list .op-play-progress{width:0}.op-progressbar .op-progress-list .op-load-progress{width:0;background-color:rgba(255,255,255,0.5)}.op-progressbar .op-progress-list .op-hover-progress{left:0;width:0;background-color:rgba(255,255,255,0.6)}.op-progressbar .op-progressbar-knob-container{position:absolute;top:-5px;left:0}.op-progressbar .op-progressbar-knob-container .op-progressbar-knob{width:14px;height:14px;border-radius:7px;cursor:pointer}.op-progressbar .op-progressbar-time{display:none;position:absolute;bottom:15px;left:auto;width:auto;background-color:rgba(28,28,28,0.9);border-radius:2px;padding:5px 9px;font-size:.8em;line-height:15px;user-select:none;white-space:nowrap;opacity:.7}.op-progressbar-hover .op-progressbar-time{display:inline-block}.op-on-error .op-progressbar-time{display:none}.op-progressbar-section-start,.op-progressbar-section-end{display:none;position:absolute;width:3px;height:14px;bottom:-5px;background-color:#50e3c2;background-color:var(--op-accent-color)}.op-progressbar-preview{position:absolute;display:none;bottom:50px;border:2px solid #fff;border-radius:2px;background-color:#000;z-index:9}.op-play-controller{margin-left:15px}.op-seek-button{position:relative;top:0px}.op-seek-button.op-seek-button-back{margin-left:12px}.op-seek-button.op-seek-button-forward{margin-left:6px}.op-seek-button i{padding-top:1px;font-size:26px}.op-seek-button span{position:absolute;top:10.5px;left:0;right:0;text-align:center;font-size:10px;line-height:10px;cursor:pointer}.op-volume-controller{display:inline-block;position:relative;margin-left:12px}.op-volume-controller:after{content:'';clear:both}.op-volume-controller .op-volume-button{float:left}@-webkit-keyframes slide{100%{left:0}}@keyframes slide{100%{left:0}}.op-volume-controller .op-volume-slider-container{float:left;opacity:0;position:relative;width:0px;margin-right:0;line-height:30px;height:30px;cursor:pointer;user-select:none;outline:none}.op-volume-controller .op-volume-slider-container.active{width:70px;opacity:1;margin-left:8px;-moz-transition:opacity .4s cubic-bezier(0, 0, .2, 1);-webkit-transition:opacity .4s cubic-bezier(0, 0, .2, 1);transition:opacity .4s cubic-bezier(0, 0, .2, 1)}.op-volume-controller .op-volume-slider-container .op-volume-silder{height:100%;position:relative}.op-volume-controller .op-volume-slider-container .op-volume-silder .op-volume-slider-bg,.op-volume-controller .op-volume-slider-container .op-volume-silder .op-volume-slider-value{position:absolute;display:block;left:0;top:50%;height:4px;margin-top:-2px;border-radius:10px}.op-volume-controller .op-volume-slider-container .op-volume-silder .op-volume-slider-bg{width:100%;background:#fff}.op-volume-controller .op-volume-slider-container .op-volume-silder .op-volume-slider-value{width:100%;background:#50e3c2;background:var(--op-accent-color);border-radius:10px 0 0 10px}.op-volume-controller .op-volume-slider-container .op-volume-silder .op-volume-slider-handle{position:absolute;top:50%;left:30px;width:12px;height:12px;border-radius:10px;margin-top:-6px;background:#fff}.op-time-display{float:left;position:relative;margin-left:14px;height:30px;line-height:30px;white-space:nowrap;vertical-align:top;font-size:14px;user-select:none}.op-time-display .op-live-badge{opacity:1;width:auto;display:inline-block}.op-time-display .op-live-badge:before{background:#ff0000;display:inline-block;position:relative;top:-2px;width:6px;height:6px;margin-right:5px;content:'';border-radius:6px}.op-time-display .op-live-badge.op-live-badge-delayed:before{background:#fff}.op-time-display .op-live-badge.op-live-badge-none:before{display:none}.op-time-display .op-live-badge .op-live-badge-lowlatency{display:inline-block;margin-right:5px}.op-time-display .op-live-badge .op-live-text{cursor:pointer}.op-context-panel{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;display:block;position:absolute;overflow:hidden;width:200px;padding:6px 0;z-index:8;background:rgba(28,28,28,0.9);text-shadow:0 0 2px rgba(0,0,0,0.5);font-weight:lighter;user-select:none}.op-context-panel:before,.op-context-panel:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}.op-context-panel *,.op-context-panel *:before,.op-context-panel *:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}.op-context-panel .op-context-item{width:100%;height:38px;padding-left:12px;line-height:38px;cursor:pointer;outline:none;font-size:.8em;font-weight:lighter;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.op-context-panel .op-context-item:hover{background-color:rgba(255,255,255,0.1)}.op-fullscreen-button{position:relative;margin-right:15px}.op-fullscreen-button .op-fullscreen-compress{display:none}.op-spinner-container{position:absolute;top:50%;width:64px;left:50%;margin-left:-32px;margin-top:-32px;z-index:7;display:none}.op-spinner-container .op-spinner{display:inline-block;position:relative;width:64px;height:64px;border:4px solid transparent;border-top:4px solid #50e3c2;border-top:4px solid var(--op-accent-color);border-radius:50%;animation:spin 1.2s cubic-bezier(.5, 0, .5, 1) infinite}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.op-caption-viewer .op-caption-text-container{position:absolute;bottom:60px;width:100%;padding:0 12px;text-align:center;-moz-transition:bottom .25s cubic-bezier(0, 0, .2, 1);-webkit-transition:bottom .25s cubic-bezier(0, 0, .2, 1);transition:bottom .25s cubic-bezier(0, 0, .2, 1)}.op-caption-viewer .op-caption-text-container .op-caption-text{color:#fff;font-size:1em;line-height:1.2em;text-shadow:2px 2px 2px gray;padding:.1em .3em;user-select:none;word-break:break-word;white-space:pre-line;border:none;background:none}.op-caption-button{width:36px}.op-caption-button>i{font-size:18px;-moz-transition:color .25s cubic-bezier(0, 0, .2, 1);-webkit-transition:color .25s cubic-bezier(0, 0, .2, 1);transition:color .25s cubic-bezier(0, 0, .2, 1)}.op-caption-active .op-caption-button>i{color:#F36446}.op-wrapper.ovenplayer.large{font-size:14px}.op-wrapper.ovenplayer.large .op-caption-text{font-size:2em;line-height:2em}.op-wrapper.ovenplayer.medium{font-size:12px}.op-wrapper.ovenplayer.medium .op-caption-text{font-size:1.4em;line-height:1.4em}.op-wrapper.ovenplayer.small{font-size:10px}.op-wrapper.ovenplayer.small .op-caption-text{font-size:1.4em;line-height:1.4em}.op-wrapper.ovenplayer.small .op-playlist{padding:1rem}.op-wrapper.ovenplayer.small .op-playlist .op-playlist-card{margin:5px 0}.op-wrapper.ovenplayer.xsmall{font-size:10px}.op-wrapper.ovenplayer.xsmall .op-bigbutton-container .op-bigbutton{width:60px;height:60px;font-size:60px;line-height:60px}.op-wrapper.ovenplayer.xsmall .op-caption-text{font-size:1.4em;line-height:1.4em}.op-wrapper.ovenplayer.xsmall .op-playlist{padding:1rem}.op-wrapper.ovenplayer.xsmall .op-playlist .op-playlist-header{font-size:2em}.op-wrapper.ovenplayer.xsmall .op-playlist .op-playlist-card{margin:5px 0;-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%;padding:0 6em}.op-wrapper.ovenplayer.xsmall .op-playlist .op-playlist-card .op-playlist-card-title{margin-top:0}.op-wrapper.ovenplayer.xsmall .op-message-box .op-message-container{top:50%;font-weight:bold}.op-wrapper.ovenplayer.xsmall .op-message-box .op-message-container .op-message-icon{margin-top:0}.op-wrapper.ovenplayer.xsmall .op-message-box .op-message-container .op-message-icon .op-con{font-size:40px;width:40px;height:40px;line-height:40px}.op-wrapper.ovenplayer.xsmall .op-ads-button{bottom:22px}.op-wrapper.ovenplayer.xsmall .op-ads-button .videoAdUiAction{padding:4px;font-size:14px}.op-wrapper.ovenplayer.xxsmall .op-left-controls{max-width:240px;overflow:hidden}.op-wrapper.ovenplayer.xxsmall .op-live-badge-lowlatency{max-width:75px}.op-wrapper.ovenplayer.linear-ad .op-bottom-panel{height:34px}.op-wrapper.ovenplayer.linear-ad .op-bottom-panel .op-controls{top:4px}.op-wrapper.ovenplayer.linear-ad .op-bottom-panel .op-controls .op-left-controls{height:30px;padding:0}.op-wrapper.ovenplayer.linear-ad .op-bottom-panel .op-controls .op-right-controls{height:30px;padding:0}.op-wrapper.ovenplayer.linear-ad .op-ads{top:0;bottom:0}.op-wrapper.ovenplayer.linear-ad .op-button i.op-con{width:24px;height:24px;font-size:24px}.op-wrapper.ovenplayer.linear-ad .op-controls-container .op-bottom-panel .op-progressbar-container{bottom:50px}@keyframes fade{from{opacity:.3}55%{opacity:1}75%{opacity:1}to{opacity:.3}}@-webkit-keyframes bounceIn{from,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215, .61, .355, 1);animation-timing-function:cubic-bezier(.215, .61, .355, 1)}0%{opacity:0;-webkit-transform:scale3d(.5, .5, .5);transform:scale3d(.5, .5, .5)}20%{-webkit-transform:scale3d(1.1, 1.1, 1.1);transform:scale3d(1.1, 1.1, 1.1)}40%{-webkit-transform:scale3d(.9, .9, .9);transform:scale3d(.9, .9, .9)}60%{opacity:1;-webkit-transform:scale3d(1.03, 1.03, 1.03);transform:scale3d(1.03, 1.03, 1.03)}80%{-webkit-transform:scale3d(.97, .97, .97);transform:scale3d(.97, .97, .97)}to{opacity:1;-webkit-transform:scale3d(1, 1, 1);transform:scale3d(1, 1, 1)}}@keyframes bounceIn{from,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215, .61, .355, 1);animation-timing-function:cubic-bezier(.215, .61, .355, 1)}0%{opacity:0;-webkit-transform:scale3d(.3, .3, .3);transform:scale3d(.3, .3, .3)}20%{-webkit-transform:scale3d(1.1, 1.1, 1.1);transform:scale3d(1.1, 1.1, 1.1)}40%{-webkit-transform:scale3d(.9, .9, .9);transform:scale3d(.9, .9, .9)}60%{opacity:1;-webkit-transform:scale3d(1.03, 1.03, 1.03);transform:scale3d(1.03, 1.03, 1.03)}80%{-webkit-transform:scale3d(.97, .97, .97);transform:scale3d(.97, .97, .97)}to{opacity:1;-webkit-transform:scale3d(1, 1, 1);transform:scale3d(1, 1, 1)}}.op-player .bounceIn{-webkit-animation-duration:.75s;animation-duration:.75s;-webkit-animation-name:bounceIn;animation-name:bounceIn}@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.op-player .fadeIn{-webkit-animation-name:fadeIn;animation-name:fadeIn}.op-player .animated{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both}@media (prefers-reduced-motion){.op-player .animated{-webkit-animation:unset !important;animation:unset !important;-webkit-transition:none !important;transition:none !important}}@media only screen and (max-width:399px){.op-seek-button{display:none !important}}`,"",{version:3,sources:["webpack://./src/stylesheet/ovenplayer.less"],names:[],mappings:"AAAA,gBAAS,CAMT,sBACE,GACE,sBAAW,CAGb,KACE,wBAAW,CAAA,CAIf,mCACE,KACE,sCAAA,CACA,8BAAW,CAGb,GACE,iBAAA,CACA,yCAAA,CACA,iCAAW,CAAA,CAIf,2BACE,KACE,sCAAA,CACA,8BAAW,CAGb,GACE,iBAAA,CACA,yCAAA,CACA,iCAAW,CAAA,CAIf,gCACE,KACE,yCAAA,CACA,iCAAA,CACA,SAAA,CAGF,GACE,sCAAA,CACA,8BAAW,CAAA,CAIf,wBACE,KACE,yCAAA,CACA,iCAAA,CACA,SAAA,CAGF,GACE,sCAAA,CACA,8BAAW,CAAA,CAIf,WACE,uBAAA,CACA,8DAAA,CACA,kBAAA,CACA,iBAAA,CAGF,WACE,sBAAA,CACA,8DAAA,CACA,kBAAA,CACA,iBAAA,CAGF,WACE,2BAAA,CACA,8DAAA,CACA,kBAAA,CACA,iBAAA,CAOF,MACE,yBAAA,CAGF,sBACE,eAAA,CAEA,cAAA,CAGF,uBACE,iBAAA,CACA,eAAA,CAEA,eAAA,CACA,iBAAA,CACA,UAAA,CACA,aAAA,CACA,sCAAA,CACA,qBAAA,CACA,0BAAA,CACA,6BAAA,CACA,qBAAA,CACA,UAAA,CACA,cAAA,CACA,eAAA,CACA,SAAA,CAEA,0BAAA,CACA,gBAAA,CAnBF,yBAsBI,kBAAA,CAtBJ,8BA0BI,UAAA,CACA,WAAA,CACA,iBAAA,CAGF,2DAEE,0BAAA,CACA,6BAAA,CACA,qBAAA,CAGF,wFAGE,0BAAA,CACA,6BAAA,CACA,qBAAA,CAGF,qCACE,sBAAA,CACA,uBAAA,CACA,KAAA,CACA,OAAA,CACA,QAAA,CACA,MAAA,CACA,YAAA,CACA,QAAA,CACA,cAAA,CATF,0HAaI,WAAA,CACA,8BAAA,CACA,2BAAA,CACA,gBAAA,CACA,OAAA,CACA,QAAA,CACA,+BAAW,CAKf,mCACE,WAAA,CADF,oDAKI,sCAAA,CACA,8BAAA,CAEA,8BAAA,CACA,sBAAA,CACA,gCAAA,CACA,wBAAA,CAXJ,wHAgBI,WAAA,CAhBJ,8DAoBI,WAAA,CAIJ,6DAGI,uBAAA,CAjGN,iCAsGI,qBAAA,CAIF,2CACE,SAAA,CACA,UAAA,CAGF,kIAEE,aAAA,CACA,UAAA,CACA,kBAAA,CAGF,iDACE,kBAAA,CACA,0BAAA,CACA,kBAAA,CAGF,iDACE,WAAA,CACA,UAAA,CACA,kBAAA,CACA,yBAAA,CACA,iBAAA,CAjIJ,iCAqII,aAAA,CACA,4BAAA,CACA,SAAA,CACA,QAAA,CACA,UAAA,CACA,sCAAA,CACA,aAAA,CACA,eAAA,CACA,eAAA,CACA,mBAAA,CACA,uBAAA,CACA,QAAA,CACA,oBAAA,CACA,oBAAA,CACA,+CAAA,CAIJ,WACE,iBAAA,CACA,KAAA,CACA,WAAA,CACA,UAAA,CAJF,+BASI,iBAAA,CACA,WAAA,CAVJ,uCAoBI,iBAAA,CACA,QAAA,CACA,OAAA,CACA,UAAA,CACA,WAAA,CACA,iCAAiB,CAzBrB,6CA4BM,iBAAA,CACA,MAAA,CACA,KAAA,CACA,UAAA,CACA,WAAA,CAhCN,8CAoCM,UAAA,CACA,WAAA,CAiBN,QACE,iBAAA,CACA,WAAA,CACA,UAAA,CACA,mBAAA,CAEA,KAAA,CAEA,YACE,4BAAA,CACA,qBAAA,CACA,sBAAA,CAHF,mBAMI,mBAAA,CAdN,gCAmBI,qBAAA,CACA,iBAAA,CACA,UAAA,CACA,WAAA,CACA,MAAA,CACA,KAAA,CACA,SAAA,CAzBJ,uBA6BI,WAAA,CACA,cAAA,CACA,gBAAA,CACA,mBAAA,CACA,iBAAA,CACA,OAAA,CACA,SAAA,CACA,qBAAA,CACA,sBAAA,CACA,iBAAA,CACA,mCAAA,CACA,eAAA,CACA,YAAA,CAzCJ,wCA4CM,aAAA,CAEA,kBAAA,CACA,cAAA,CACA,gBAAA,CACA,iBAAA,CACA,oBAAA,CACA,UAAA,CACA,qBAAA,CApDN,wCAwDM,gBAAA,CACA,cAAA,CACA,aAAA,CACA,kBAAA,CACA,cAAA,CACA,sCAAA,CAEA,8CACE,iBAAA,CACA,qBAAA,CAjER,0CAqEQ,oBAAA,CACA,UAAA,CAWR,WACE,oBAAA,CACA,WAAA,CACA,sBAAA,CACA,SAAA,CACA,aAAA,CACA,kBAAA,CACA,eAAA,CACA,eAAA,CACA,wBAAA,CAEA,4BAEE,SAAA,CAIJ,SACE,sCAAA,CACA,iBAAA,CACA,kBAAA,CACA,UAAA,CAEA,iBAAA,CACA,UAAA,CACA,cAAA,CACA,gBAAA,CAEA,aAAA,CACA,uBAAA,CACA,iBAAA,CAGA,mBAAA,CACA,mBAAA,CAGA,kCAAA,CACA,iCAAA,CAEA,cAAA,CAEA,iBACE,aAAA,CAIA,+BACE,eAAS,CAKX,8BACE,eAAS,CAKX,wCACE,eAAS,CAKX,sCACE,eAAS,CAKX,+BACE,eAAS,CAKX,gCACE,eAAS,CAKX,gCACE,eAAS,CAKX,yBACE,eAAS,CAKX,2BACE,eAAS,CAKX,8BACE,eAAS,CAKX,iCACE,eAAS,CAKX,kCACE,eAAS,CAKX,+BACE,eAAS,CAKX,4BACE,eAAS,CAKX,0BACE,eAAS,CAIb,yBACE,YAAA,CACA,eAAA,CAEA,iCACE,eAAS,CAIb,wBACE,YAAA,CAEA,gCACE,eAAS,CAKX,+BACE,eAAS,CAKX,6BACE,eAAS,CAKX,4BACE,eAAS,CAKf,UACE,oBAAA,CACA,iCAAA,CACA,aAAA,CACA,aAAA,CACA,iBAAA,CACA,kBAAA,CACA,uBAAA,CACA,oBAAA,CACA,wBAAA,CAGF,aACE,iBAAA,CACA,UAAA,CACA,WAAA,CACA,MAAA,CACA,KAAA,CACA,eAAA,CACA,eAAA,CACA,SAAA,CARF,uBAWI,iBAAA,CACA,UAAA,CACA,YAAA,CACA,UAAA,CAdJ,uBAkBI,UAAA,CACA,iBAAA,CAnBJ,wBAuBI,WAAA,CACA,iBAAA,CAxBJ,iCA4BI,iBAAA,CACA,gBAAA,CAEA,uCACE,aAAA,CACA,UAAA,CACA,UAAA,CAlCN,uDAsCM,WAAA,CAtCN,+BA2CI,WAAA,CACA,eAAA,CACA,iBAAA,CA7CJ,wDAgDM,gBAAA,CACA,iBAAA,CACA,OAAA,CACA,WAAA,CACA,8BAAA,CACA,0BAAA,CACA,UAAA,CACA,MAAA,CAvDN,2DA2DM,UAAA,CACA,WAAA,CACA,iBAAA,CACA,iBAAA,CACA,gBAAA,CACA,eAAA,CAhEN,oFAmEQ,QAAA,CACA,iBAAA,CACA,OAAA,CACA,iBAAA,CACA,gBAAA,CACA,8BAAA,CACA,0BAAA,CACA,UAAA,CA1ER,qDA+EM,kBAAA,CACA,iBAAA,CACA,mBAAA,CACA,YAAA,CACA,kBAAA,CACA,cAAA,CApFN,uEAwFQ,kBAAA,CACA,iBAAA,CACA,aAAA,CACA,yBAAA,CACA,YAAA,CACA,mBAAA,CACA,WAAA,CACA,uBAAA,CACA,mBAAA,CACA,oBAAA,CACA,cAAA,CAEA,8EACE,aAAA,CACA,4BAAO,CAFT,0GAKI,oBAAA,CACA,mCAAc,CA1G1B,mGA+GU,iBAAA,CACA,aAAA,CACA,UAAA,CACA,SAAA,CACA,eAAA,CACA,+BAAA,CACA,qBAAA,CArHV,uGAwHY,iBAAA,CACA,KAAA,CACA,QAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CACA,QAAA,CAGF,yGACE,wBAAA,CAEA,2GACE,QAAA,CACA,iBAAA,CACA,OAAA,CACA,QAAA,CACA,+BAAA,CACA,qBAAA,CACA,0BAAA,CAIJ,2GACE,kBAAA,CACA,aAAA,CACA,UAAS,CAlJrB,+FAuJU,iBAAA,CACA,iBAAA,CACA,aAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CAcV,gBACE,iBAAA,CACA,KAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CACA,SAAA,CANF,sCASI,iBAAA,CACA,OAAA,CACA,gBAAA,CACA,UAAA,CACA,cAAA,CACA,iBAAA,CAdJ,uDAiBM,oBAAA,CACA,mCAAA,CACA,kBAAA,CACA,oBAAA,CACA,aAAA,CACA,iBAAA,CACA,cAAA,CAvBN,+EA0BQ,cAAA,CACA,eAAA,CACA,UAAA,CA5BR,uDAkCM,oBAAA,CACA,eAAA,CACA,UAAA,CApCN,gEAuCQ,cAAA,CACA,cAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CACA,oBAAA,CACA,oDAAA,CAcR,qFACE,cAAA,CAGF,8FACE,cAAA,CAOF,wBACE,cAAA,CACA,iBAAA,CACA,OAAA,CACA,QAAA,CACA,+BAAA,CACA,iBAAA,CACA,SAAA,CAPF,sCAUI,UAAA,CACA,WAAA,CACA,aAAA,CACA,cAAA,CACA,gBAAA,CACA,oDAAA,CAQJ,wBACE,iBAAA,CACA,UAAA,CACA,WAAA,CAEA,KAAA,CACA,MAAA,CAEA,SAAA,CACA,mBAAA,CATF,8CAYI,iBAAA,CACA,MAAA,CACA,KAAA,CACA,UAAA,CACA,WAAA,CAhBJ,kDAmBM,UAAA,CACA,WAAA,CApBN,mEAwBM,iBAAA,CACA,SAAA,CACA,QAAA,CACA,eAAA,CACA,iBAAA,CACA,gBAAA,CACA,eAAA,CACA,oDAAA,CAEA,yEACE,aAAA,CACA,UAAA,CACA,UAAA,CAUR,wBACE,iBAAA,CACA,UAAA,CACA,WAAA,CAEA,KAAA,CACA,MAAA,CAEA,SAAA,CARF,sCAWI,iBAAA,CACA,oBAAA,CAZJ,0CAeM,UAAA,CACA,WAAA,CAhBN,yDAoBM,cAAA,CASN,kBACE,iBAAA,CACA,WAAA,CACA,UAAA,CACA,eAAA,CACA,eAAA,CACA,WAAA,CAEA,gBAAA,CACA,mCAAA,CACA,mCAAA,CACA,SAAA,CAEA,6BAGE,YAAA,CAhBJ,uEAqBI,UAAA,CACA,WAAA,CACA,gBAAA,CACA,cAAA,CACA,YAAA,CACA,eAAA,CA1BJ,wFAgCQ,iBAAA,CACA,gBAAA,CAjCR,2FAsCQ,kBAAA,CACA,iBAAA,CAQF,oEACE,sCAAA,CAhDR,qFAoDQ,iBAAA,CApDR,wFAwDQ,WAAA,CACA,kBAAA,CACA,gBAAA,CA1DR,yFA8DQ,WAAA,CACA,kBAAA,CA/DR,uFAmEQ,iBAAA,CACA,iBAAA,CApER,+FAwEQ,kBAAA,CAYR,uBACE,YAAA,CADF,wCAII,iBAAA,CACA,QAAA,CACA,UAAA,CACA,UAAA,CACA,SAAA,CAaA,mCAAA,CACA,2BAAA,CAEA,8BAAA,CACA,sBAAA,CACA,gCAAA,CACA,wBAAA,CA3BJ,4DAWM,iBAAA,CACA,UAAA,CACA,WAAA,CACA,mCAAA,CACA,mBAAA,CAfN,kEA8BM,aAAA,CACA,iBAAA,CACA,UAAA,CACA,UAAA,CACA,WAAA,CAEA,oGACE,cAAA,CArCR,0FAyCQ,iBAAA,CACA,UAAA,CACA,WAAA,CACA,WAAA,CACA,cAAA,CA7CR,qDAoDM,iBAAA,CACA,UAAA,CACA,WAAA,CACA,eAAA,CACA,eAAA,CAEA,2DACE,UAAA,CACA,UAAA,CA5DR,wEAgEQ,iBAAA,CACA,iBAAA,CAjER,yEAqEQ,iBAAA,CACA,iBAAA,CAtER,oEA0EQ,UAAA,CACA,WAAA,CACA,gBAAA,CA5ER,uEAgFQ,iBAAA,CACA,KAAA,CACA,MAAA,CACA,qBAAA,CAEA,6EACE,UAAA,CACA,UAAA,CAvFV,wEA4FQ,iBAAA,CACA,KAAA,CACA,OAAA,CACA,qBAAA,CAEA,8EACE,UAAA,CACA,UAAA,CAnGV,uEAyGQ,iBAAA,CACA,oBAAA,CACA,gBAAA,CACA,eAAA,CACA,eAAA,CACA,WAAA,CA9GR,wFAiHU,gBAAA,CACA,iBAAA,CACA,iBAAA,CACA,UAAA,CApHV,oGAuHY,iBAAA,CAGE,kHACE,eAAS,CAIb,0GACE,kCAAA,CACA,UAAA,CACA,eAAA,CACA,iBAAA,CACA,kBAAA,CACA,mBAAA,CACA,mBAAA,CAGA,kCAAA,CACA,iCAAA,CACA,iBAAA,CACA,eAAA,CACA,MAAA,CACA,gBAAA,CACA,WAAA,CA/Id,8GAmJc,gBAAA,CACA,cAAA,CACA,gBAAA,CACA,WAAA,CAkBd,gBACE,iBAAA,CACA,QAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CACA,YAAA,CACA,eAAA,CAPF,0CAUI,wBAAA,CACA,uCAAkB,CAXtB,kCAeI,cAAA,CACA,iBAAA,CACA,WAAA,CACA,gCAAA,CAlBJ,6JAuBM,iBAAA,CACA,MAAA,CACA,QAAA,CACA,UAAA,CACA,WAAA,CA3BN,oDA+BM,OAAA,CA/BN,oDAmCM,OAAA,CACA,sCAAA,CApCN,qDAwCM,MAAA,CACA,OAAA,CACA,sCAAA,CA1CN,+CAgDI,iBAAA,CACA,QAAA,CACA,MAAA,CAlDJ,oEAqDM,UAAA,CACA,WAAA,CACA,iBAAA,CACA,cAAA,CAxDN,qCA6DI,YAAA,CACA,iBAAA,CACA,WAAA,CACA,SAAA,CACA,UAAA,CACA,mCAAA,CACA,iBAAA,CACA,eAAA,CACA,cAAA,CACA,gBAAA,CACA,gBAAA,CACA,kBAAA,CACA,UAAA,CAMJ,2CACE,oBAAA,CAGF,kCACE,YAAA,CAGF,0DAEE,YAAA,CACA,iBAAA,CACA,SAAA,CACA,WAAA,CACA,WAAA,CACA,wBAAA,CACA,uCAAkB,CAGpB,wBACE,iBAAA,CACA,YAAA,CACA,WAAA,CACA,qBAAA,CACA,iBAAA,CACA,qBAAA,CACA,SAAA,CAGF,oBACE,gBAAA,CAOF,gBAEE,iBAAA,CACA,OAAA,CAEA,oCACE,gBAAA,CAGF,uCACE,eAAA,CAVJ,kBAcI,eAAA,CACA,cAAA,CAfJ,qBAmBI,iBAAA,CACA,UAAA,CACA,MAAA,CACA,OAAA,CACA,iBAAA,CACA,cAAA,CACA,gBAAA,CACA,cAAA,CAQJ,sBACE,oBAAA,CACA,iBAAA,CACA,gBAAA,CAEA,4BACE,UAAA,CACA,UAAA,CAPJ,wCAWI,UAAA,CAGF,yBACE,KACE,MAAA,CAAA,CAIJ,iBACE,KACE,MAAA,CAAA,CAtBN,kDA4BI,UAAA,CACA,SAAA,CACA,iBAAA,CACA,SAAA,CACA,cAAA,CACA,gBAAA,CACA,WAAA,CACA,cAAA,CACA,gBAAA,CACA,YAAA,CAEA,yDACE,UAAA,CACA,SAAA,CACA,eAAA,CACA,qDAAA,CACA,wDAAA,CACA,gDAAwB,CA7C9B,oEAiDM,WAAA,CACA,iBAAA,CAlDN,qLAsDQ,iBAAA,CACA,aAAA,CACA,MAAA,CACA,OAAA,CACA,UAAA,CACA,eAAA,CACA,kBAAA,CA5DR,yFAgEQ,UAAA,CACA,eAAA,CAjER,4FAqEQ,UAAA,CACA,kBAAA,CACA,iCAAA,CACA,2BAAA,CAxER,6FA+EQ,iBAAA,CACA,OAAA,CACA,SAAA,CACA,UAAA,CACA,WAAA,CACA,kBAAA,CACA,eAAA,CACA,eAAA,CAcR,iBACE,UAAA,CACA,iBAAA,CACA,gBAAA,CACA,WAAA,CACA,gBAAA,CACA,kBAAA,CACA,kBAAA,CACA,cAAA,CACA,gBAAA,CATF,gCAiBI,SAAA,CACA,UAAA,CACA,oBAAA,CAEA,uCACE,kBAAA,CACA,oBAAA,CACA,iBAAA,CACA,QAAA,CACA,SAAA,CACA,UAAA,CACA,gBAAA,CACA,UAAA,CACA,iBAAA,CAGF,6DACE,eAAA,CAGF,0DACE,YAAA,CAtCN,0DA0CM,oBAAA,CACA,gBAAA,CA3CN,8CA+CM,cAAA,CAWN,kBACE,0BAAA,CACA,6BAAA,CACA,qBAAA,CACA,aAAA,CACA,iBAAA,CACA,eAAA,CACA,WAAA,CACA,aAAA,CACA,SAAA,CACA,6BAAA,CACA,mCAAA,CACA,mBAAA,CACA,gBAAA,CAEA,iDAEE,0BAAA,CACA,6BAAA,CACA,qBAAA,CAGF,yEAGE,0BAAA,CACA,6BAAA,CACA,qBAAA,CA3BJ,mCA+BI,UAAA,CACA,WAAA,CACA,iBAAA,CACA,gBAAA,CACA,cAAA,CACA,YAAA,CACA,cAAA,CACA,mBAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CAEA,yCACE,sCAAA,CAeN,sBACE,iBAAA,CACA,iBAAA,CAFF,8CAKI,YAAA,CAQJ,sBACE,iBAAA,CACA,OAAA,CACA,UAAA,CACA,QAAA,CACA,iBAAA,CACA,gBAAA,CACA,SAAA,CACA,YAAA,CARF,kCAYI,oBAAA,CACA,iBAAA,CACA,UAAA,CACA,WAAA,CAEA,4BAAA,CACA,4BAAA,CACA,2CAAA,CACA,iBAAA,CAEA,uDAAqB,CAErB,gBACE,GACE,sBAAW,CAGb,KACE,wBAAW,CAAA,CAYnB,8CAGI,iBAAA,CACA,WAAA,CACA,UAAA,CACA,cAAA,CACA,iBAAA,CACA,qDAAA,CACA,wDAAA,CACA,gDAAwB,CAV5B,+DAaM,UAAA,CACA,aAAA,CACA,iBAAA,CACA,4BAAA,CACA,iBAAA,CACA,gBAAA,CACA,qBAAA,CACA,oBAAA,CACA,WAAA,CACA,eAAA,CAKN,mBACE,UAAA,CAGF,qBACE,cAAA,CACA,oDAAA,CACA,uDAAA,CACA,+CAAuB,CAGzB,wCACE,aAAA,CAOF,6BACE,cAAA,CADF,8CAII,aAAA,CACA,eAAA,CAKJ,8BACE,cAAA,CADF,+CAII,eAAA,CACA,iBAAA,CAIJ,6BACE,cAAA,CADF,8CAII,eAAA,CACA,iBAAA,CALJ,0CASI,YAAA,CATJ,4DAYM,YAAA,CAMN,8BACE,cAAA,CADF,oEAMM,UAAA,CACA,WAAA,CACA,cAAA,CACA,gBAAA,CATN,+CAcI,eAAA,CACA,iBAAA,CAfJ,2CAmBI,YAAA,CAnBJ,+DAsBM,aAAA,CAtBN,6DA0BM,YAAA,CACA,iBAAA,CACA,aAAA,CACA,cAAA,CACA,aAAA,CA9BN,qFAiCQ,YAAA,CAjCR,oEAwCM,OAAA,CACA,gBAAA,CAzCN,qFA4CQ,YAAA,CA5CR,6FA+CU,cAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CAlDV,6CAyDI,WAAA,CAzDJ,8DA4DM,WAAA,CACA,cAAA,CAKN,iDAGI,eAAA,CACA,eAAA,CAJJ,yDAQI,cAAA,CAKJ,kDAGI,WAAA,CAHJ,+DAOM,OAAA,CAPN,iFAUQ,WAAA,CACA,SAAA,CAXR,kFAeQ,WAAA,CACA,SAAA,CAhBR,yCAsBI,KAAA,CACA,QAAA,CAvBJ,qDA4BM,UAAA,CACA,WAAA,CACA,cAAA,CA9BN,mGAyCI,WAAA,CASF,gBACE,KACE,UAAA,CAMF,IACE,SAAA,CAGF,IACE,SAAA,CAGF,GACE,UAAA,CAAA,CAIJ,4BAEE,wBAME,kEAAA,CACA,0DAA2B,CAG7B,GACE,SAAA,CACA,qCAAA,CACA,6BAAW,CAGb,IACE,wCAAA,CACA,gCAAW,CAGb,IACE,qCAAA,CACA,6BAAW,CAGb,IACE,SAAA,CACA,2CAAA,CACA,mCAAW,CAGb,IACE,wCAAA,CACA,gCAAW,CAGb,GACE,SAAA,CACA,kCAAA,CACA,0BAAW,CAAA,CAIf,oBAEE,wBAME,kEAAA,CACA,0DAA2B,CAG7B,GACE,SAAA,CACA,qCAAA,CACA,6BAAW,CAGb,IACE,wCAAA,CACA,gCAAW,CAGb,IACE,qCAAA,CACA,6BAAW,CAGb,IACE,SAAA,CACA,2CAAA,CACA,mCAAW,CAGb,IACE,wCAAA,CACA,gCAAW,CAGb,GACE,SAAA,CACA,kCAAA,CACA,0BAAW,CAAA,CA9GjB,qBAmHI,+BAAA,CACA,uBAAA,CACA,+BAAA,CACA,uBAAA,CAGF,0BACE,KACE,SAAA,CAGF,GACE,SAAA,CAAA,CAIJ,kBACE,KACE,SAAA,CAGF,GACE,SAAA,CAAA,CAzIN,mBA8II,6BAAA,CACA,qBAAA,CA/IJ,qBAmJI,6BAAA,CACA,qBAAA,CACA,gCAAA,CACA,wBAAA,CAGF,gCAAA,qBAEI,kCAAA,CACA,0BAAA,CACA,kCAAA,CACA,0BAAA,CAAA,CAwBN,yCACE,gBACE,uBAAA,CAAA",sourcesContent:[`@charset "UTF-8";

/**
 * @brief   Animation
 * */

@keyframes op-spinner {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

@-webkit-keyframes op-slideOutDown {
  from {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  to {
    visibility: hidden;
    -webkit-transform: translate3d(0, 100%, 0);
    transform: translate3d(0, 100%, 0);
  }
}

@keyframes op-slideOutDown {
  from {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  to {
    visibility: hidden;
    -webkit-transform: translate3d(0, 100%, 0);
    transform: translate3d(0, 100%, 0);
  }
}

@-webkit-keyframes op-slideInUp {
  from {
    -webkit-transform: translate3d(0, 100%, 0);
    transform: translate3d(0, 100%, 0);
    opacity: 1;
  }

  to {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

@keyframes op-slideInUp {
  from {
    -webkit-transform: translate3d(0, 100%, 0);
    transform: translate3d(0, 100%, 0);
    opacity: 1;
  }

  to {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

@font-face {
  font-family: "frameIcon";
  src: url("../assets/images/ic-player-frame-jump.ttf?rxg7gj") format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'op-icons';
  src: url('../assets/fonts/fontello.ttf?13010392') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'op-seek-icons';
  src: url('../assets/fonts/seek-icons.ttf?13010392') format('truetype');
  font-weight: normal;
  font-style: normal;
}

/**
 * @brief   common style
 * */

:root {
  --op-accent-color: #50e3c2;
}

.op-fullscreen-helper {
  overflow: hidden;
  // for preventing scroll on iOS
  position: fixed;
}

.op-wrapper.ovenplayer {
  position: relative;
  max-height: 100%;

  overflow: hidden;
  zoom: 1 !important;
  width: 100%;
  display: block;
  font-family: Helvetica, Arial, sans-serif;
  background-color: #000;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
  color: #fff;
  font-size: 14px;
  font-weight: 100;
  outline: 0;

  -webkit-touch-callout: none;
  user-select: none;

  * {
    box-sizing: inherit;
  }

  object {
    width: 100%;
    height: 100%;
    position: absolute;
  }

  &:before,
  &:after {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
  }

  & *,
  & *:before,
  & *:after {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
  }

  &.op-fullscreen {
    width: 100vw !important;
    height: 100vh !important;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 9999;
    margin: 0;
    position: fixed;

    .op-watermark-container,
    .op-thumbnail-container {
      width: 100vw;
      max-width: calc(100vh * 16 / 9);
      height: calc(100vw * 9 / 16);
      max-height: 100vh;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

  }

  &.op-autohide {
    cursor: none;

    .op-bottom-panel {

      -webkit-animation-name: op-slideOutDown;
      animation-name: op-slideOutDown;

      -webkit-animation-duration: 0.2s;
      animation-duration: 0.2s;
      -webkit-animation-fill-mode: both;
      animation-fill-mode: both;
    }

    .op-progressbar-container,
    .op-controls .op-button {
      cursor: none;
    }

    .op-caption-text-container {
      bottom: 25px;
    }
  }

  &.op-no-controls {

    .op-controls-container {
      display: none !important;
    }
  }

  .op-ratio {
    padding-bottom: 56.25%;
    /*16:9*/
  }

  & ::-webkit-scrollbar {
    width: 5px;
    height: 8px;
  }

  & ::-webkit-scrollbar-button:start:decrement,
  ::-webkit-scrollbar-button:end:increment {
    display: block;
    height: 3px;
    background: #2f2f3e;
  }

  & ::-webkit-scrollbar-track {
    background: #2f2f3e;
    -webkit-border-radius: 10px;
    border-radius: 10px;
  }

  & ::-webkit-scrollbar-thumb {
    height: 50px;
    width: 50px;
    background: #606071;
    -webkit-border-radius: 8px;
    border-radius: 8px;
  }

  .op-clear {
    color: inherit;
    background-color: transparent;
    padding: 0;
    margin: 0;
    float: none;
    font-family: Helvetica, Arial, sans-serif;
    font-size: 1em;
    line-height: 1em;
    list-style: none;
    text-transform: none;
    vertical-align: baseline;
    border: 0;
    font-variant: inherit;
    font-stretch: inherit;
    -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
  }
}

.op-player {
  position: absolute;
  top: 0;
  height: 100%;
  width: 100%;



  .op-core-ui-wrapper {
    position: relative;
    height: 100%;
  }

  .op-media-element-container {
    /* display: block;
    height: 100%;
    width: auto;
    position : relative;*/


    position: absolute;
    left: 0px;
    top: 0px;
    width: 100%;
    height: 100%;
    transform: scale(var(--mediaZoom));

    video {
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
    }

    object {
      width: 100%;
      height: 100%;
    }
  }

  .op-ui {

    /*position : absolute;
    bottom : 0px;
    left : 0px;
    width: 100%;
    height: 100%;*/
    .op-controls-container {}

    .op-helpers-container {}
  }
}

.op-ads {
  position: absolute;
  height: 100%;
  width: 100%;
  padding-bottom: 34px;
  //pointer-events: none;
  top: 0;

  &>div {
    position: absolute !important;
    width: 100% !important;
    height: 100% !important;

    iframe {
      pointer-events: auto;
    }
  }

  video.op-ads-vast-video {
    background-color: rgb(0, 0, 0);
    position: absolute;
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
    z-index: 1;
  }

  .op-ads-button {
    bottom: 36px;
    cursor: default;
    margin-right: 4px;
    pointer-events: auto;
    position: absolute;
    right: 0;
    z-index: 1;
    width: auto !important;
    height: auto !important;
    border-radius: 4px;
    background-color: rgba(18, 18, 28, 0.7);
    min-width: 155px;
    display: none;

    .op-ads-textview {
      color: #e6e6e6;
      //font-family: arial,sans-serif;
      font-weight: normal;
      font-size: 11px;
      padding: 6px 12px;
      text-align: center;
      display: inline-block;
      width: 100%;
      vertical-align: middle;
    }

    .videoAdUiAction {
      padding: 8px 24px;
      cursor: pointer;
      direction: ltr;
      font-weight: normal;
      font-size: 20px;
      border: 1px solid rgba(255, 255, 255, 0.5);

      &:hover {
        border-radius: 4px;
        border: 1px solid rgba(255, 255, 255, 1);
      }

      i {
        display: inline-block;
        width: auto;
      }
    }
  }

}

/**
 * @brief   common components
 * */

.op-button {
  display: inline-block;
  border: none;
  background: transparent;
  padding: 0;
  color: inherit;
  text-align: inherit;
  overflow: hidden;
  font-weight: 100;
  text-indent: 0 !important;

  &:focus,
  & {
    outline: 0;
  }
}

i.op-con {
  font-family: "op-icons", "op-seek-icons";
  font-style: normal;
  font-weight: normal;
  speak: none;

  font-size: inherit;
  width: auto;
  font-size: 30px;
  line-height: 30px;

  display: block;
  text-decoration: inherit;
  text-align: center;

  /* For safety - reset parent styles, that can break glyph codes*/
  font-variant: normal;
  text-transform: none;

  /* Font smoothing. That was taken from TWBS */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  cursor: pointer;

  &.disable {
    color: #4f4f4f;
  }

  &.op-close-icon {
    &::before {
      content: "\\e900";
    }
  }

  &.op-pause-big {
    &::before {
      content: "\\e911";
    }
  }

  &.op-fullscreen-compress {
    &::before {
      content: "\\e901";
    }
  }

  &.op-fullscreen-expand {
    &::before {
      content: "\\e902";
    }
  }

  &.op-arrow-left {
    &::before {
      content: "\\e903";
    }
  }

  &.op-arrow-right {
    &::before {
      content: "\\e909";
    }
  }

  &.op-empty-video {
    &::before {
      content: "\\e904";
    }
  }

  &.op-play {
    &::before {
      content: "\\e906";
    }
  }

  &.op-replay {
    &::before {
      content: "\\e908";
    }
  }

  &.op-seek-back {
    &::before {
      content: "\\e920";
    }
  }

  &.op-seek-forward {
    &::before {
      content: "\\e921";
    }
  }

  &.op-playlist-icon {
    &::before {
      content: "\\e907";
    }
  }

  &.op-replay-big {
    &::before {
      content: "\\e908";
    }
  }

  &.op-setting {
    &::before {
      content: "\\e90A";
    }
  }

  &.op-pause {
    &::before {
      content: "\\e90C";
    }
  }

  &.op-volume-small {
    display: none;
    margin-top: -1px;

    &::before {
      content: "\\e90D";
    }
  }

  &.op-volume-mute {
    display: none;

    &::before {
      content: "\\e90E";
    }
  }

  &.op-volume-max {
    &::before {
      content: "\\e90F";
    }
  }

  &.op-play-big {
    &::before {
      content: "\\e910";
    }
  }

  &.op-warning {
    &::before {
      content: "\\e912";
    }
  }
}

.op-badge {
  display: inline-block;
  padding: .75em .714em .714em .680em;
  font-size: 1em;
  line-height: 1;
  text-align: center;
  white-space: nowrap;
  vertical-align: baseline;
  border-radius: 0.286em;
  background-color: #12121c;
}

.op-playlist {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
  padding: 2.857em;
  background: #000;
  z-index: 6;

  .op-badge {
    position: absolute;
    top: 0.857em;
    right: 0.857em;
    opacity: 0.7;
  }

  .btn-left {
    float: left;
    font-size: 2.857em;
  }

  .btn-right {
    float: right;
    font-size: 2.857em;
  }

  .op-playlist-header {
    font-size: 2.857em;
    font-weight: bold;

    &:after {
      display: block;
      content: '';
      clear: both;
    }

    .op-con.op-close-icon {
      float: right;
    }
  }

  .op-playlist-body {
    height: 100%;
    overflow: hidden;
    position: relative;

    .op-playlist-body-arrows {
      margin-top: -15px;
      position: absolute;
      top: 50%;
      height: 30px;
      -ms-transform: translateY(-50%);
      transform: translateY(-50%);
      width: 100%;
      left: 0;
    }

    .op-playlist-body-container {
      width: 100%;
      height: 100%;
      position: relative;
      margin-right: auto;
      margin-left: auto;
      max-width: 992px;

      .op-playlist-body-center {
        margin: 0;
        position: absolute;
        top: 50%;
        padding-right: 3em;
        padding-left: 3em;
        -ms-transform: translateY(-50%);
        transform: translateY(-50%);
        width: 100%;
      }
    }

    .op-playlist-body-row {
      margin-right: -15px;
      margin-left: -15px;
      display: -ms-flexbox;
      display: flex;
      -ms-flex-wrap: wrap;
      flex-wrap: wrap;


      .op-playlist-card {
        padding-right: 15px;
        padding-left: 15px;
        margin: 15px 0;
        -ms-flex-preferred-size: 0;
        flex-basis: 0;
        -ms-flex-positive: 1;
        flex-grow: 1;
        -ms-flex: 0 0 33.333333%;
        flex: 0 0 33.333333%;
        max-width: 33.333333%;
        cursor: pointer;

        &.active {
          color: #50e3c2;
          color: var(--op-accent-color);

          .op-playlist-card-thumbnail {
            border-color: #50e3c2;
            border-color: var(--op-accent-color);
          }
        }

        .op-playlist-card-thumbnail {
          position: relative;
          display: block;
          width: 100%;
          padding: 0;
          overflow: hidden;
          border: 0.214em solid transparent;
          background-color: #000;

          img {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
          }

          &.empty {
            background-color: #bababa;

            &>i {
              margin: 0;
              position: absolute;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%);
              color: #fff !important;
              font-size: 1.6em !important;
            }
          }

          &::before {
            padding-top: 56.25%;
            display: block;
            content: "";
          }
        }

        .op-playlist-card-title {
          margin-top: 0.857em;
          font-size: 1.429em;
          padding: 2px 0;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }

      }
    }

  }
}


/**
 * @brief   Message Box
 * */

.op-message-box {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 4;

  .op-message-container {
    position: absolute;
    top: 45%;
    margin-top: -35px;
    width: 100%;
    padding: 0 12px;
    text-align: center;

    .op-message-text {
      display: inline-block;
      background-color: rgba(18, 18, 28, .3);
      padding: 0.8em 1.2em;
      word-wrap: break-word;
      max-width: 80%;
      border-radius: 4px;
      cursor: pointer;

      .op-message-description {
        font-size: 12px;
        margin-top: 12px;
        color: #999;
      }
    }


    .op-message-icon {
      display: inline-block;
      margin-top: 12px;
      width: 100%;

      i.op-con {
        cursor: pointer;
        font-size: 80px;
        width: 80px;
        height: 80px;
        line-height: 80px;
        display: inline-block;
        text-shadow: 2px 2px 7px rgb(0 0 0 / 80%), 0px 0px 1px rgb(0 0 0);
      }
    }

    /*.op-message-button{
      display: inline-block;
      padding : 1em;
      margin-left : 0.4em;
      background-color: rgba(28,28,28,.4);
      cursor : pointer;
    }*/
  }
}

.op-message-box.op-message-box-default-cursor .op-message-container .op-message-text {
  cursor: default;
}

.op-message-box.op-message-box-default-cursor .op-message-container .op-message-icon i.op-con {
  cursor: default;
}

/**
 * @brief   Big button
 * */

.op-bigbutton-container {
  cursor: pointer;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  z-index: 5;

  .op-bigbutton {
    width: 80px;
    height: 80px;
    display: block;
    font-size: 80px;
    line-height: 80px;
    text-shadow: 2px 2px 7px rgb(0 0 0 / 80%), 0px 0px 1px rgb(0 0 0);
  }
}

/**
 * @brief   Thumbnail
 * */

.op-thumbnail-container {
  position: absolute;
  width: 100%;
  height: 100%;
  //padding-bottom: 56.25%;
  top: 0;
  left: 0;
  //transform: translate(-50%, -50%);
  z-index: 2;
  pointer-events: none;

  .op-thumbnail-wrapper {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;

    img {
      width: 100%;
      height: 100%;
    }

    .op-thumbnail-header {
      position: absolute;
      left: 1rem;
      top: 1rem;
      padding: 0 0.5rem;
      font-size: 2.857em;
      font-weight: bold;
      line-height: 1.4;
      text-shadow: 2px 2px 7px rgb(0 0 0 / 80%), 0px 0px 1px rgb(0 0 0);

      &:after {
        display: block;
        content: '';
        clear: both;
      }
    }
  }
}

/**
 * @brief   WaterMark
 * */

.op-watermark-container {
  position: absolute;
  width: 100%;
  height: 100%;
  //padding-bottom: 56.25%;
  top: 0;
  left: 0;
  //transform: translate(-50%, -50%);
  z-index: 3;

  .op-watermark {
    position: absolute;
    display: inline-block;

    img {
      width: 100%;
      height: auto;
    }

    .op-watermark-text {
      font-size: 14px;
    }
  }
}

/**
 * @brief   Setting panel
 * */

.op-setting-panel {
  position: absolute;
  bottom: 55px;
  right: 12px;
  overflow-y: auto;
  max-height: 100%;
  width: 260px;
  //font-size: 0.8em;
  user-select: none;
  background-color: rgba(28, 28, 28, .9);
  text-shadow: 0 0 2px rgba(0, 0, 0, .5);
  z-index: 8;

  &.background {
    //opacity: 0;
    //background-color: rgba(28,28,28,.0);
    display: none;
  }

  .op-setting-title,
  .op-setting-item {
    width: 100%;
    height: 38px;
    line-height: 38px;
    cursor: pointer;
    outline: none;
    text-align: left;
  }

  .op-setting-title-container {
    .op-setting-title {
      .op-setting-title-title {
        padding-left: 12px;
        font-weight: bold;
        //font-size: 0.9rem;
      }

      .op-setting-title-previcon {
        padding: 0 0 0 12px;
        margin-right: -6px;
      }

    }
  }

  .op-setting-item-container {
    .op-setting-item {
      &:hover {
        background-color: rgba(255, 255, 255, .1);
      }

      .op-setting-item-title {
        padding-left: 12px;
      }

      .op-setting-item-nexticon {
        float: right;
        padding-right: 12px;
        margin-left: -6px;
      }

      span.op-setting-item-value {
        float: right;
        padding-right: 12px;
      }

      .op-setting-item-checked {
        padding-left: 12px;
        visibility: hidden;
      }

      .op-setting-item-checked.op-show {
        visibility: visible;
      }
    }
  }
}



/**
 * @brief   Controls (container)
 * */

.op-controls-container {
  display: none;

  .op-bottom-panel {
    position: absolute;
    left: 0px;
    bottom: 0px;
    width: 100%;
    z-index: 5;

    .op-gradient-bottom {
      position: absolute;
      width: 100%;
      height: 100%;
      background-color: rgba(18, 18, 18, 0.5);
      pointer-events: none;
      /*-moz-transition: opacity .25s cubic-bezier(0.0,0.0,0.2,1);
      -webkit-transition: opacity .25s cubic-bezier(0.0,0.0,0.2,1);
      transition: opacity .25s cubic-bezier(0.0,0.0,0.2,1);*/
    }

    -webkit-animation-name: op-slideInUp;
    animation-name: op-slideInUp;

    -webkit-animation-duration: 0.5s;
    animation-duration: 0.5s;
    -webkit-animation-fill-mode: both;
    animation-fill-mode: both;

    .op-progressbar-container {
      display: block;
      position: relative;
      width: 100%;
      height: 4px;
      bottom: 50px;

      &.op-progressbar-container-disabled {
        cursor: default;
      }

      .op-progressbar-padding {
        position: absolute;
        width: 100%;
        height: 15px;
        bottom: -5px;
        cursor: pointer;
      }
    }


    /*contols container*/
    .op-controls {
      position: relative;
      width: 100%;
      height: 50px;
      text-align: left;
      overflow: hidden;

      &:after {
        content: '';
        clear: both;
      }

      .op-setting-button {
        position: relative;
        margin-right: 12px;
      }

      .op-playlist-button {
        position: relative;
        margin-right: 12px;
      }

      .op-navigators {
        float: left;
        height: 30px;
        line-height: 30px;
      }

      .op-left-controls {
        position: absolute;
        top: 0;
        left: 0;
        padding: 14px 0 10px 0;

        &:after {
          content: '';
          clear: both;
        }
      }

      .op-right-controls {
        position: absolute;
        top: 0;
        right: 0;
        padding: 14px 0 10px 0;

        &:after {
          content: '';
          clear: both;
        }
      }

      /*maybe not use*/
      .op-frame-buttons {
        position: relative;
        display: inline-block;
        margin-left: 14px;
        overflow: hidden;
        font-weight: 100;
        height: 30px;

        .op-frame-button {
          margin-right: 6px;
          position: relative;
          text-align: center;
          color: #fff;

          .frame-icon {
            position: relative;

            &.reverse {
              &:after {
                content: '\\e900';
              }
            }

            &:after {
              font-family: 'frameIcon' !important;
              speak: none;
              content: '\\e901';
              font-style: normal;
              font-weight: normal;
              font-variant: normal;
              text-transform: none;

              /* Better Font Rendering =========== */
              -webkit-font-smoothing: antialiased;
              -moz-osx-font-smoothing: grayscale;
              position: absolute;
              font-size: 2.4em;
              left: 0;
              line-height: 30px;
              height: 30px;
            }

            .btn-text {
              font-weight: bold;
              font-size: 0.8em;
              line-height: 30px;
              height: 30px;
            }

          }

        }

      }
    }
  }

}


/**
 * @brief   Progressbar
 * */

.op-progressbar {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 100%;
  outline: none;
  margin-top: 10px;

  .op-play-background-color {
    background-color: #50e3c2; // for ie 11
    background-color: var(--op-accent-color);
  }

  .op-progress-list {
    cursor: pointer;
    position: relative;
    height: 100%;
    background: rgba(255, 255, 255, 0.2);

    .op-load-progress,
    .op-play-progress,
    .op-hover-progress {
      position: absolute;
      left: 0;
      bottom: 0;
      width: 100%;
      height: 100%;
    }

    .op-play-progress {
      width: 0;
    }

    .op-load-progress {
      width: 0;
      background-color: rgba(255, 255, 255, .5);
    }

    .op-hover-progress {
      left: 0;
      width: 0;
      background-color: rgba(255, 255, 255, .6);
    }

  }

  .op-progressbar-knob-container {
    position: absolute;
    top: -5px;
    left: 0;

    .op-progressbar-knob {
      width: 14px;
      height: 14px;
      border-radius: 7px;
      cursor: pointer;
    }
  }

  .op-progressbar-time {
    display: none;
    position: absolute;
    bottom: 15px;
    left: auto;
    width: auto;
    background-color: rgba(28, 28, 28, 0.9);
    border-radius: 2px;
    padding: 5px 9px;
    font-size: 0.8em;
    line-height: 15px;
    user-select: none;
    white-space: nowrap;
    opacity: 0.7;
  }


}

.op-progressbar-hover .op-progressbar-time {
  display: inline-block;
}

.op-on-error .op-progressbar-time {
  display: none;
}

.op-progressbar-section-start,
.op-progressbar-section-end {
  display: none;
  position: absolute;
  width: 3px;
  height: 14px;
  bottom: -5px;
  background-color: #50e3c2;
  background-color: var(--op-accent-color);
}

.op-progressbar-preview {
  position: absolute;
  display: none;
  bottom: 50px;
  border: 2px solid #fff;
  border-radius: 2px;
  background-color: #000;
  z-index: 9;
}

.op-play-controller {
  margin-left: 15px;
}

/**
 * @brief   Seek button
 * */

.op-seek-button {
  //display: none;
  position: relative;
  top: 0px;

  &.op-seek-button-back {
    margin-left: 12px;
  }

  &.op-seek-button-forward {
    margin-left: 6px;
  }

  i {
    padding-top: 1px;
    font-size: 26px;
  }

  span {
    position: absolute;
    top: 10.5px;
    left: 0;
    right: 0;
    text-align: center;
    font-size: 10px;
    line-height: 10px;
    cursor: pointer;
  }
}


/**
 * @brief   Volume button
 * */
.op-volume-controller {
  display: inline-block;
  position: relative;
  margin-left: 12px;

  &:after {
    content: '';
    clear: both;
  }

  .op-volume-button {
    float: left;
  }

  @-webkit-keyframes slide {
    100% {
      left: 0;
    }
  }

  @keyframes slide {
    100% {
      left: 0;
    }
  }

  .op-volume-slider-container {
    /*display: inline-block;*/
    float: left;
    opacity: 0;
    position: relative;
    width: 0px;
    margin-right: 0;
    line-height: 30px;
    height: 30px;
    cursor: pointer;
    user-select: none;
    outline: none;

    &.active {
      width: 70px;
      opacity: 1;
      margin-left: 8px;
      -moz-transition: opacity .4s cubic-bezier(0.0, 0.0, 0.2, 1);
      -webkit-transition: opacity .4s cubic-bezier(0.0, 0.0, 0.2, 1);
      transition: opacity .4s cubic-bezier(0.0, 0.0, 0.2, 1);
    }

    .op-volume-silder {
      height: 100%;
      position: relative;

      .op-volume-slider-bg,
      .op-volume-slider-value {
        position: absolute;
        display: block;
        left: 0;
        top: 50%;
        height: 4px;
        margin-top: -2px;
        border-radius: 10px;
      }

      .op-volume-slider-bg {
        width: 100%;
        background: #fff;
      }

      .op-volume-slider-value {
        width: 100%;
        background: #50e3c2;
        background: var(--op-accent-color);
        border-radius: 10px 0 0 10px;
        //-moz-transition: width .2s cubic-bezier(0.0,0.0,0.2,1);
        //-webkit-transition: width .2s cubic-bezier(0.0,0.0,0.2,1);
        //transition: width .2s cubic-bezier(0.0,0.0,0.2,1);
      }

      .op-volume-slider-handle {
        position: absolute;
        top: 50%;
        left: 30px;
        width: 12px;
        height: 12px;
        border-radius: 10px;
        margin-top: -6px;
        background: #fff;
        //-moz-transition: left .2s cubic-bezier(0.0,0.0,0.2,1);
        //-webkit-transition: left .2s cubic-bezier(0.0,0.0,0.2,1);
        //transition: left .2s cubic-bezier(0.0,0.0,0.2,1);
      }
    }
  }
}


/**
 * @brief   Time Display
 * */

.op-time-display {
  float: left;
  position: relative;
  margin-left: 14px;
  height: 30px;
  line-height: 30px;
  white-space: nowrap;
  vertical-align: top;
  font-size: 14px;
  user-select: none;
  /*흠 이부분 어떻게 처리하지*/

  .op-time-current,
  .op-time-separator,
  .op-time-duration {}

  .op-live-badge {
    opacity: 1;
    width: auto;
    display: inline-block;

    &:before {
      background: #ff0000;
      display: inline-block;
      position: relative;
      top: -2px;
      width: 6px;
      height: 6px;
      margin-right: 5px;
      content: '';
      border-radius: 6px;
    }

    &.op-live-badge-delayed:before {
      background: #fff;
    }

    &.op-live-badge-none:before {
      display: none;
    }

    .op-live-badge-lowlatency {
      display: inline-block;
      margin-right: 5px;
    }

    .op-live-text {
      cursor: pointer;
    }
  }

}


/**
 * @brief   Context Panel
 * */

.op-context-panel {
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
  display: block;
  position: absolute;
  overflow: hidden;
  width: 200px;
  padding: 6px 0;
  z-index: 8;
  background: rgba(28, 28, 28, 0.9);
  text-shadow: 0 0 2px rgba(0, 0, 0, .5);
  font-weight: lighter;
  user-select: none;

  &:before,
  &:after {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
  }

  & *,
  & *:before,
  & *:after {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
  }

  .op-context-item {
    width: 100%;
    height: 38px;
    padding-left: 12px;
    line-height: 38px;
    cursor: pointer;
    outline: none;
    font-size: 0.8em;
    font-weight: lighter;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;

    &:hover {
      background-color: rgba(255, 255, 255, .1);
    }
  }

}






/**
 * @brief   FullScreen button
 * */

.op-fullscreen-button {
  position: relative;
  margin-right: 15px;

  .op-fullscreen-compress {
    display: none;
  }
}

/**
 * @brief   spinner
 * */

.op-spinner-container {
  position: absolute;
  top: 50%;
  width: 64px;
  left: 50%;
  margin-left: -32px;
  margin-top: -32px;
  z-index: 7;
  display: none;


  .op-spinner {
    display: inline-block;
    position: relative;
    width: 64px;
    height: 64px;

    border: 4px solid transparent;
    border-top: 4px solid #50e3c2;
    border-top: 4px solid var(--op-accent-color);
    border-radius: 50%;

    animation: spin 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }
  }

}


/**
 * @brief   caption.
 * */

.op-caption-viewer {

  .op-caption-text-container {
    position: absolute;
    bottom: 60px;
    width: 100%;
    padding: 0 12px;
    text-align: center;
    -moz-transition: bottom .25s cubic-bezier(0.0, 0.0, 0.2, 1);
    -webkit-transition: bottom .25s cubic-bezier(0.0, 0.0, 0.2, 1);
    transition: bottom .25s cubic-bezier(0.0, 0.0, 0.2, 1);

    .op-caption-text {
      color: #fff;
      font-size: 1em;
      line-height: 1.2em;
      text-shadow: 2px 2px 2px gray;
      padding: .1em .3em;
      user-select: none;
      word-break: break-word;
      white-space: pre-line;
      border: none;
      background: none;
    }
  }
}

.op-caption-button {
  width: 36px;
}

.op-caption-button>i {
  font-size: 18px;
  -moz-transition: color .25s cubic-bezier(0.0, 0.0, 0.2, 1);
  -webkit-transition: color .25s cubic-bezier(0.0, 0.0, 0.2, 1);
  transition: color .25s cubic-bezier(0.0, 0.0, 0.2, 1);
}

.op-caption-active .op-caption-button>i {
  color: #F36446;
}



/*Responsive  */

.op-wrapper.ovenplayer.large {
  font-size: 14px;

  .op-caption-text {
    font-size: 2em;
    line-height: 2em;
  }

}

.op-wrapper.ovenplayer.medium {
  font-size: 12px;

  .op-caption-text {
    font-size: 1.4em;
    line-height: 1.4em;
  }
}

.op-wrapper.ovenplayer.small {
  font-size: 10px;

  .op-caption-text {
    font-size: 1.4em;
    line-height: 1.4em;
  }

  .op-playlist {
    padding: 1rem;

    .op-playlist-card {
      margin: 5px 0;
    }
  }

}

.op-wrapper.ovenplayer.xsmall {
  font-size: 10px;

  .op-bigbutton-container {

    .op-bigbutton {
      width: 60px;
      height: 60px;
      font-size: 60px;
      line-height: 60px;
    }
  }

  .op-caption-text {
    font-size: 1.4em;
    line-height: 1.4em;
  }

  .op-playlist {
    padding: 1rem;

    .op-playlist-header {
      font-size: 2em;
    }

    .op-playlist-card {
      margin: 5px 0;
      -ms-flex: 0 0 100%;
      flex: 0 0 100%;
      max-width: 100%;
      padding: 0 6em;

      .op-playlist-card-title {
        margin-top: 0;
      }
    }
  }

  .op-message-box {
    .op-message-container {
      top: 50%;
      font-weight: bold;

      .op-message-icon {
        margin-top: 0;

        .op-con {
          font-size: 40px;
          width: 40px;
          height: 40px;
          line-height: 40px;
        }
      }
    }
  }

  .op-ads-button {
    bottom: 22px;

    .videoAdUiAction {
      padding: 4px;
      font-size: 14px;
    }
  }
}

.op-wrapper.ovenplayer.xxsmall {

  .op-left-controls {
    max-width: 240px; // for small layout
    overflow: hidden; // for small layout
  }

  .op-live-badge-lowlatency {
    max-width: 75px;
  }
}

/*AD MODE*/
.op-wrapper.ovenplayer.linear-ad {

  .op-bottom-panel {
    height: 34px;

    .op-controls {

      top: 4px;

      .op-left-controls {
        height: 30px;
        padding: 0;
      }

      .op-right-controls {
        height: 30px;
        padding: 0;
      }
    }
  }

  .op-ads {
    top: 0;
    bottom: 0;
  }

  .op-button {
    i.op-con {
      width: 24px;
      height: 24px;
      font-size: 24px;
    }
  }

  .op-right-controls {
    .op-button {
      //margin-top: -2px;
    }
  }

  .op-controls-container .op-bottom-panel .op-progressbar-container {
    bottom: 50px;
  }
}

/**
 * @brief   Animation
 * */

.op-player {
  @keyframes fade {
    from {
      opacity: 0.3;
    }

    /*5% { opacity: 0.3; }*/
    /*40% { opacity: 1; }*/
    /*50% { opacity: 1; }*/
    55% {
      opacity: 1;
    }

    75% {
      opacity: 1;
    }

    to {
      opacity: 0.3;
    }
  }

  @-webkit-keyframes bounceIn {

    from,
    20%,
    40%,
    60%,
    80%,
    to {
      -webkit-animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
      animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
    }

    0% {
      opacity: 0;
      -webkit-transform: scale3d(0.5, 0.5, 0.5);
      transform: scale3d(0.5, 0.5, 0.5);
    }

    20% {
      -webkit-transform: scale3d(1.1, 1.1, 1.1);
      transform: scale3d(1.1, 1.1, 1.1);
    }

    40% {
      -webkit-transform: scale3d(0.9, 0.9, 0.9);
      transform: scale3d(0.9, 0.9, 0.9);
    }

    60% {
      opacity: 1;
      -webkit-transform: scale3d(1.03, 1.03, 1.03);
      transform: scale3d(1.03, 1.03, 1.03);
    }

    80% {
      -webkit-transform: scale3d(0.97, 0.97, 0.97);
      transform: scale3d(0.97, 0.97, 0.97);
    }

    to {
      opacity: 1;
      -webkit-transform: scale3d(1, 1, 1);
      transform: scale3d(1, 1, 1);
    }
  }

  @keyframes bounceIn {

    from,
    20%,
    40%,
    60%,
    80%,
    to {
      -webkit-animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
      animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
    }

    0% {
      opacity: 0;
      -webkit-transform: scale3d(0.3, 0.3, 0.3);
      transform: scale3d(0.3, 0.3, 0.3);
    }

    20% {
      -webkit-transform: scale3d(1.1, 1.1, 1.1);
      transform: scale3d(1.1, 1.1, 1.1);
    }

    40% {
      -webkit-transform: scale3d(0.9, 0.9, 0.9);
      transform: scale3d(0.9, 0.9, 0.9);
    }

    60% {
      opacity: 1;
      -webkit-transform: scale3d(1.03, 1.03, 1.03);
      transform: scale3d(1.03, 1.03, 1.03);
    }

    80% {
      -webkit-transform: scale3d(0.97, 0.97, 0.97);
      transform: scale3d(0.97, 0.97, 0.97);
    }

    to {
      opacity: 1;
      -webkit-transform: scale3d(1, 1, 1);
      transform: scale3d(1, 1, 1);
    }
  }

  .bounceIn {
    -webkit-animation-duration: 0.75s;
    animation-duration: 0.75s;
    -webkit-animation-name: bounceIn;
    animation-name: bounceIn;
  }

  @-webkit-keyframes fadeIn {
    from {
      opacity: 0;
    }

    to {
      opacity: 1;
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }

    to {
      opacity: 1;
    }
  }

  .fadeIn {
    -webkit-animation-name: fadeIn;
    animation-name: fadeIn;
  }

  .animated {
    -webkit-animation-duration: 1s;
    animation-duration: 1s;
    -webkit-animation-fill-mode: both;
    animation-fill-mode: both;
  }

  @media (prefers-reduced-motion) {
    .animated {
      -webkit-animation: unset !important;
      animation: unset !important;
      -webkit-transition: none !important;
      transition: none !important;
    }
  }


  /* Pulse Shrink */
  /*.op-button {
    //display: inline-block;
    //vertical-align: middle;
    transform: translateZ(0);
    box-shadow: 0 0 1px rgba(0, 0, 0, 0);
    backface-visibility: hidden;
    -moz-osx-font-smoothing: grayscale;
    transition-duration: 0.3s;
    transition-property: transform;
  }
  .op-button:hover,
  .op-button:focus,
  .op-button:active {
    transform: scale(1.1);
  }*/
}


@media only screen and (max-width: 399px) {
  .op-seek-button {
    display: none !important;
  }
}`],sourceRoot:""}]),l.A=y},76314:function(i){i.exports=function(l){var t=[];return t.toString=function(){return this.map((function(s){var a="",u=s[5]!==void 0;return s[4]&&(a+="@supports (".concat(s[4],") {")),s[2]&&(a+="@media ".concat(s[2]," {")),u&&(a+="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {")),a+=l(s),u&&(a+="}"),s[2]&&(a+="}"),s[4]&&(a+="}"),a})).join("")},t.i=function(s,a,u,f,h){typeof s=="string"&&(s=[[null,s,void 0]]);var A={};if(u)for(var g=0;g<this.length;g++){var p=this[g][0];p!=null&&(A[p]=!0)}for(var m=0;m<s.length;m++){var y=[].concat(s[m]);u&&A[y[0]]||(h!==void 0&&(y[5]===void 0||(y[1]="@layer".concat(y[5].length>0?" ".concat(y[5]):""," {").concat(y[1],"}")),y[5]=h),a&&(y[2]&&(y[1]="@media ".concat(y[2]," {").concat(y[1],"}")),y[2]=a),f&&(y[4]?(y[1]="@supports (".concat(y[4],") {").concat(y[1],"}"),y[4]=f):y[4]="".concat(f)),t.push(y))}},t}},4417:function(i){i.exports=function(l,t){return t||(t={}),l&&(l=String(l.__esModule?l.default:l),/^['"].*['"]$/.test(l)&&(l=l.slice(1,-1)),t.hash&&(l+=t.hash),/["'() \t\n]|(%20)/.test(l)||t.needQuotes?'"'.concat(l.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):l)}},71354:function(i){i.exports=function(l){var t=l[1],s=l[3];if(!s)return t;if(typeof btoa=="function"){var a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),f="/*# ".concat(u," */");return[t].concat([f]).join(`
`)}return[t].join(`
`)}},85072:function(i){var l=[];function t(u){for(var f=-1,h=0;h<l.length;h++)if(l[h].identifier===u){f=h;break}return f}function s(u,f){for(var h={},A=[],g=0;g<u.length;g++){var p=u[g],m=f.base?p[0]+f.base:p[0],y=h[m]||0,E="".concat(m," ").concat(y);h[m]=y+1;var C=t(E),T={css:p[1],media:p[2],sourceMap:p[3],supports:p[4],layer:p[5]};if(C!==-1)l[C].references++,l[C].updater(T);else{var w=a(T,f);f.byIndex=g,l.splice(g,0,{identifier:E,updater:w,references:1})}A.push(E)}return A}function a(u,f){var h=f.domAPI(f);return h.update(u),function(A){if(A){if(A.css===u.css&&A.media===u.media&&A.sourceMap===u.sourceMap&&A.supports===u.supports&&A.layer===u.layer)return;h.update(u=A)}else h.remove()}}i.exports=function(u,f){var h=s(u=u||[],f=f||{});return function(A){A=A||[];for(var g=0;g<h.length;g++){var p=t(h[g]);l[p].references--}for(var m=s(A,f),y=0;y<h.length;y++){var E=t(h[y]);l[E].references===0&&(l[E].updater(),l.splice(E,1))}h=m}}},77659:function(i){var l={};i.exports=function(t,s){var a=(function(u){if(l[u]===void 0){var f=document.querySelector(u);if(window.HTMLIFrameElement&&f instanceof window.HTMLIFrameElement)try{f=f.contentDocument.head}catch{f=null}l[u]=f}return l[u]})(t);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(s)}},10540:function(i){i.exports=function(l){var t=document.createElement("style");return l.setAttributes(t,l.attributes),l.insert(t,l.options),t}},55056:function(i,l,t){i.exports=function(s){var a=t.nc;a&&s.setAttribute("nonce",a)}},97825:function(i){i.exports=function(l){if(typeof document>"u")return{update:function(){},remove:function(){}};var t=l.insertStyleElement(l);return{update:function(s){(function(a,u,f){var h="";f.supports&&(h+="@supports (".concat(f.supports,") {")),f.media&&(h+="@media ".concat(f.media," {"));var A=f.layer!==void 0;A&&(h+="@layer".concat(f.layer.length>0?" ".concat(f.layer):""," {")),h+=f.css,A&&(h+="}"),f.media&&(h+="}"),f.supports&&(h+="}");var g=f.sourceMap;g&&typeof btoa<"u"&&(h+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(g))))," */")),u.styleTagTransform(h,a,u.options)})(t,l,s)},remove:function(){(function(s){if(s.parentNode===null)return!1;s.parentNode.removeChild(s)})(t)}}}},41113:function(i){i.exports=function(l,t){if(t.styleSheet)t.styleSheet.cssText=l;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(l))}}},78624:function(i,l,t){var s=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||t.g!==void 0&&t.g||{},a="URLSearchParams"in s,u="Symbol"in s&&"iterator"in Symbol,f="FileReader"in s&&"Blob"in s&&(function(){try{return new Blob,!0}catch{return!1}})(),h="FormData"in s,A="ArrayBuffer"in s;if(A)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=ArrayBuffer.isView||function(M){return M&&g.indexOf(Object.prototype.toString.call(M))>-1};function m(M){if(typeof M!="string"&&(M=String(M)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(M)||M==="")throw new TypeError('Invalid character in header field name: "'+M+'"');return M.toLowerCase()}function y(M){return typeof M!="string"&&(M=String(M)),M}function E(M){var Q={next:function(){var Z=M.shift();return{done:Z===void 0,value:Z}}};return u&&(Q[Symbol.iterator]=function(){return Q}),Q}function C(M){this.map={},M instanceof C?M.forEach((function(Q,Z){this.append(Z,Q)}),this):Array.isArray(M)?M.forEach((function(Q){if(Q.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+Q.length);this.append(Q[0],Q[1])}),this):M&&Object.getOwnPropertyNames(M).forEach((function(Q){this.append(Q,M[Q])}),this)}function T(M){if(!M._noBody)return M.bodyUsed?Promise.reject(new TypeError("Already read")):void(M.bodyUsed=!0)}function w(M){return new Promise((function(Q,Z){M.onload=function(){Q(M.result)},M.onerror=function(){Z(M.error)}}))}function I(M){var Q=new FileReader,Z=w(Q);return Q.readAsArrayBuffer(M),Z}function L(M){if(M.slice)return M.slice(0);var Q=new Uint8Array(M.byteLength);return Q.set(new Uint8Array(M)),Q.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(M){var Q;this.bodyUsed=this.bodyUsed,this._bodyInit=M,M?typeof M=="string"?this._bodyText=M:f&&Blob.prototype.isPrototypeOf(M)?this._bodyBlob=M:h&&FormData.prototype.isPrototypeOf(M)?this._bodyFormData=M:a&&URLSearchParams.prototype.isPrototypeOf(M)?this._bodyText=M.toString():A&&f&&(Q=M)&&DataView.prototype.isPrototypeOf(Q)?(this._bodyArrayBuffer=L(M.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):A&&(ArrayBuffer.prototype.isPrototypeOf(M)||p(M))?this._bodyArrayBuffer=L(M):this._bodyText=M=Object.prototype.toString.call(M):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof M=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a&&URLSearchParams.prototype.isPrototypeOf(M)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f&&(this.blob=function(){var M=T(this);if(M)return M;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return T(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(f)return this.blob().then(I);throw new Error("could not read as ArrayBuffer")},this.text=function(){var M,Q,Z,J,q,te=T(this);if(te)return te;if(this._bodyBlob)return M=this._bodyBlob,Z=w(Q=new FileReader),q=(J=/charset=([A-Za-z0-9_-]+)/.exec(M.type))?J[1]:"utf-8",Q.readAsText(M,q),Z;if(this._bodyArrayBuffer)return Promise.resolve((function(fe){for(var Ee=new Uint8Array(fe),Ae=new Array(Ee.length),Ce=0;Ce<Ee.length;Ce++)Ae[Ce]=String.fromCharCode(Ee[Ce]);return Ae.join("")})(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h&&(this.formData=function(){return this.text().then(N)}),this.json=function(){return this.text().then(JSON.parse)},this}C.prototype.append=function(M,Q){M=m(M),Q=y(Q);var Z=this.map[M];this.map[M]=Z?Z+", "+Q:Q},C.prototype.delete=function(M){delete this.map[m(M)]},C.prototype.get=function(M){return M=m(M),this.has(M)?this.map[M]:null},C.prototype.has=function(M){return this.map.hasOwnProperty(m(M))},C.prototype.set=function(M,Q){this.map[m(M)]=y(Q)},C.prototype.forEach=function(M,Q){for(var Z in this.map)this.map.hasOwnProperty(Z)&&M.call(Q,this.map[Z],Z,this)},C.prototype.keys=function(){var M=[];return this.forEach((function(Q,Z){M.push(Z)})),E(M)},C.prototype.values=function(){var M=[];return this.forEach((function(Q){M.push(Q)})),E(M)},C.prototype.entries=function(){var M=[];return this.forEach((function(Q,Z){M.push([Z,Q])})),E(M)},u&&(C.prototype[Symbol.iterator]=C.prototype.entries);var B=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function P(M,Q){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var Z,J,q=(Q=Q||{}).body;if(M instanceof P){if(M.bodyUsed)throw new TypeError("Already read");this.url=M.url,this.credentials=M.credentials,Q.headers||(this.headers=new C(M.headers)),this.method=M.method,this.mode=M.mode,this.signal=M.signal,q||M._bodyInit==null||(q=M._bodyInit,M.bodyUsed=!0)}else this.url=String(M);if(this.credentials=Q.credentials||this.credentials||"same-origin",!Q.headers&&this.headers||(this.headers=new C(Q.headers)),this.method=(J=(Z=Q.method||this.method||"GET").toUpperCase(),B.indexOf(J)>-1?J:Z),this.mode=Q.mode||this.mode||null,this.signal=Q.signal||this.signal||(function(){if("AbortController"in s)return new AbortController().signal})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&q)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(q),!(this.method!=="GET"&&this.method!=="HEAD"||Q.cache!=="no-store"&&Q.cache!=="no-cache")){var te=/([?&])_=[^&]*/;te.test(this.url)?this.url=this.url.replace(te,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function N(M){var Q=new FormData;return M.trim().split("&").forEach((function(Z){if(Z){var J=Z.split("="),q=J.shift().replace(/\+/g," "),te=J.join("=").replace(/\+/g," ");Q.append(decodeURIComponent(q),decodeURIComponent(te))}})),Q}function U(M,Q){if(!(this instanceof U))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(Q||(Q={}),this.type="default",this.status=Q.status===void 0?200:Q.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=Q.statusText===void 0?"":""+Q.statusText,this.headers=new C(Q.headers),this.url=Q.url||"",this._initBody(M)}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})},R.call(P.prototype),R.call(U.prototype),U.prototype.clone=function(){return new U(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new C(this.headers),url:this.url})},U.error=function(){var M=new U(null,{status:200,statusText:""});return M.ok=!1,M.status=0,M.type="error",M};var G=[301,302,303,307,308];U.redirect=function(M,Q){if(G.indexOf(Q)===-1)throw new RangeError("Invalid status code");return new U(null,{status:Q,headers:{location:M}})};var W=s.DOMException;try{new W}catch{(W=function(Q,Z){this.message=Q,this.name=Z;var J=Error(Q);this.stack=J.stack}).prototype=Object.create(Error.prototype),W.prototype.constructor=W}function K(M,Q){return new Promise((function(Z,J){var q=new P(M,Q);if(q.signal&&q.signal.aborted)return J(new W("Aborted","AbortError"));var te=new XMLHttpRequest;function fe(){te.abort()}if(te.onload=function(){var Ae,Ce,Oe={statusText:te.statusText,headers:(Ae=te.getAllResponseHeaders()||"",Ce=new C,Ae.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(Be){return Be.indexOf(`
`)===0?Be.substr(1,Be.length):Be})).forEach((function(Be){var Ge=Be.split(":"),Ve=Ge.shift().trim();if(Ve){var $e=Ge.join(":").trim();try{Ce.append(Ve,$e)}catch(it){console.warn("Response "+it.message)}}})),Ce)};q.url.indexOf("file://")===0&&(te.status<200||te.status>599)?Oe.status=200:Oe.status=te.status,Oe.url="responseURL"in te?te.responseURL:Oe.headers.get("X-Request-URL");var Ne="response"in te?te.response:te.responseText;setTimeout((function(){Z(new U(Ne,Oe))}),0)},te.onerror=function(){setTimeout((function(){J(new TypeError("Network request failed"))}),0)},te.ontimeout=function(){setTimeout((function(){J(new TypeError("Network request timed out"))}),0)},te.onabort=function(){setTimeout((function(){J(new W("Aborted","AbortError"))}),0)},te.open(q.method,(function(Ae){try{return Ae===""&&s.location.href?s.location.href:Ae}catch{return Ae}})(q.url),!0),q.credentials==="include"?te.withCredentials=!0:q.credentials==="omit"&&(te.withCredentials=!1),"responseType"in te&&(f?te.responseType="blob":A&&(te.responseType="arraybuffer")),Q&&typeof Q.headers=="object"&&!(Q.headers instanceof C||s.Headers&&Q.headers instanceof s.Headers)){var Ee=[];Object.getOwnPropertyNames(Q.headers).forEach((function(Ae){Ee.push(m(Ae)),te.setRequestHeader(Ae,y(Q.headers[Ae]))})),q.headers.forEach((function(Ae,Ce){Ee.indexOf(Ce)===-1&&te.setRequestHeader(Ce,Ae)}))}else q.headers.forEach((function(Ae,Ce){te.setRequestHeader(Ce,Ae)}));q.signal&&(q.signal.addEventListener("abort",fe),te.onreadystatechange=function(){te.readyState===4&&q.signal.removeEventListener("abort",fe)}),te.send(q._bodyInit===void 0?null:q._bodyInit)}))}K.polyfill=!0,s.fetch||(s.fetch=K,s.Headers=C,s.Request=P,s.Response=U)},58233:function(i){i.exports="data:font/ttf;base64,AAEAAAAPAIAAAwBwR1NVQiCLJXoAAAD8AAAAVE9TLzI/IEqpAAABUAAAAFZjbWFwvM20gQAAAagAAAJgY3Z0IAbV/wQAABq4AAAAIGZwZ22KkZBZAAAa2AAAC3BnYXNwAAAAEAAAGrAAAAAIZ2x5Zin85QoAAAQIAAARVmhlYWQXb/zlAAAVYAAAADZoaGVhCWwFkQAAFZgAAAAkaG10eEiN/+MAABW8AAAASGxvY2ElHSFKAAAWBAAAACZtYXhwATsMoQAAFiwAAAAgbmFtZcydHyEAABZMAAACzXBvc3QO9vxxAAAZHAAAAZJwcmVw5UErvAAAJkgAAACGAAEAAAAKADAAPgACREZMVAAObGF0bgAaAAQAAAAAAAAAAQAAAAQAAAAAAAAAAQAAAAFsaWdhAAgAAAABAAAAAQAEAAQAAAABAAgAAQAGAAAAAQAAAAEECAGQAAUAAAJ6ArwAAACMAnoCvAAAAeAAMQECAAACAAUDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFBmRWQAQOkA6RIDUv9qAFoDUgCWAAAAAQAAAAAAAAAAAAUAAAADAAAALAAAAAQAAAGEAAEAAAAAAH4AAwABAAAALAADAAoAAAGEAAQAUgAAAAgACAACAADpBOkK6RL//wAA6QDpBukM//8AAAAAAAAAAQAIABAAGAAAAAEAAgADAAQABQAGAAcACAAJAAoACwAMAA0ADgAPABAAEQAAAQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAA3AAAAAAAAAARAADpAAAA6QAAAAABAADpAQAA6QEAAAACAADpAgAA6QIAAAADAADpAwAA6QMAAAAEAADpBAAA6QQAAAAFAADpBgAA6QYAAAAGAADpBwAA6QcAAAAHAADpCAAA6QgAAAAIAADpCQAA6QkAAAAJAADpCgAA6QoAAAAKAADpDAAA6QwAAAALAADpDQAA6Q0AAAAMAADpDgAA6Q4AAAANAADpDwAA6Q8AAAAOAADpEAAA6RAAAAAPAADpEQAA6REAAAAQAADpEgAA6RIAAAARAAEAAP/SA4AC6AAjABtAGCAZDwUEAEQCAQIAAGYAAAAjACMeHQMFFCsBHgEUBwkBFhUWDwEOAScJAQYjBi8BLgE3CQEmNz4BFwkBPgEDXA4TC/61AU4KAQQCCCMP/rT+sg0IBQgEEAgOAUz+shQJBywMAUwBTgkHAucCFBsM/rT+sg0IBQgEEAgOAUz+sQoBBAIIIw8BTAFOGhEOAgv+tQFOBgIAAgAAAAADQwK2AB4AOwBCQD80AQQDAUcLAQFEAAMEA28GAQQAAgAEAmAFAQABAQBUBQEAAAFWAAEAAUofHwEAHzsfOzEwJyQTEgAeARsHBRQrATIXFgcGFQ4BJic1BwYnLgE/ASMmJyYvASY+ATsBNiUWFxYGByIHBicmNScmNzY3NjIWHQE3NhceAQ8BAbIbBwMCAgEhIAGyFxANBAqxegoFBAMCBwIRDkNZAX8cBAQbDhUuUyA0AgQBAg4JGxSzFxANBAuxAT01H1UsFRERDRV4shIICCgLsAEDAgQDChkTAYQGEQ4dAQIDBAcbMk0gNgwJEg94shIIBikMsAAAAAIAAAAAA08CrgAcADsAPUA6KQEDBAQBAAMCRwADBAAEAwBtBQECAAQDAgReAAABAQBSAAAAAVgAAQABTB4dNDMmJR07HjhEGwYFFisTHgEdATc2Fx4BDwEzFhcWBgciBwYnJjUmPwE+AQEyFxYHDgEHBi4BPQEHDgEnIy4CPwEjJicmNjM3Ns4MD7MXEA4EDLB6IQYFHhEWLlMfMwIBAQETAmYjBgUOAgMFCRsUswgJBQMNEAEKsXsdBgUZEkNZARsCEwx3shIIBigNsQQRDh4BAgMEBhstWUMQEwGOVERWCAYFCQESDnizBgMCARQZCrEEEA8fAQEAAQAA/9UCzALoABUAD0AMCAEARQAAAGYcAQUVKwEeAR8BFgYHCQEWBw4BJwEmNDcBPgECngsIBAEJAgn+tAFOFQkILQz+mwoKAWcIBwLnAgUFAQocCv60/rIbEQ0CCwFlCx0KAWcHAwABAAD/agYjA1IAEwAjQCAHBgUEBAEAAUcCAQAADEgAAQENAUkBAA0KABMBEgMFFCsBMhYVESURJREUBiMhIiY1ETQ2MwR3HSoBZf6bKh370B0qKh0DUiod/vLG/TbG/vIdKiodA1odKgAAAAACAAAAAAMgAq0ADAAPABdAFA8ODQMARAEBAABmAAAADAAMAgUUKwEyFwEWFAcBBiYnETYTLQEBLwcIAdMODv4tESEBAkABdP6MAqsF/tQKIwv+1AoRFQJYIv3D7+8AAAAFAAD/yQOHAtIAEwAxAEAAUQBUAFxAWVRTUiwcBQMCAUcLAQcABgUHBmAKAQUABAAFBGAIAQAJAQIDAAJgAAMBAQNUAAMDAVgAAQMBTEFBMjIVFAEAQVFBTUtIMkAyOzk2JB4UMRUvCwcAEwERDAUUKwEeARcWBw4BBwQlLgEnJjc+ATckBSIGFQcGFRQXHgEzFxYzFjc+ATU3NjU0Jy4BJyYFJRYXFgYHIS4BNjcyJDMyNx4BHwEWDgEjIS4BNjcyNzYDFwcDIyY6AQMDATom/tH+0SY5AgEBAjkmAS/+1A0UAQIDARMMUK9XkXQNEgECAwESDYX+9AGTHQYFGRL9qBETDRdDAQxDcBYLCAMCBwISDv4uEhENFjRo0cenpwIFAjknuromOQIEBAI5Jrq6JjsBA0YTDShuN1xJDBMBAwEFARINKW03W0kNEgECAaYEEA8fAQEhIAEEYAIEBQIKGRMBISABAQP+jXV0AAAAAAEAAAAAAxwCfgA4ADVAMjgAAgIEAUcAAAQAbwAEAgRvAAEDAXAAAgMDAlIAAgIDWAADAgNMNTQvLSopHRslBQUVKxM3Njc+ARcyHgEXFgcGBwYHBiYnJicmNhYXHgEXFjc+AScmJy4BBwYPATMeAQYrAS4BPQE0Mx4BF9VbBAInZzZAdVINDhkYNDdFQYc1NhkGER0JG3dFSTo4MwwNMyp4Oj0sWW4MDgoRrAsOGgoNAQHVVgQBJSkBPWg/RkdFMzURECItLkARGAcWPkwCAicmhkVIMSkdDg8rVAEZGAENC60ZAQ0LAAABAAD/1ALWAugAFwAdQBoSAQABAUcCAQEAAW8AAABmAAAAFwAXOwMFFSsBHgEXARYUBwEGBwYrASIuATcJASYnJjYBUQgGBgFnCgr+mwgGBAYCDhQCCwFM/rIHAQMYAucBAwX+mQodC/6bCAIBFB0MAUwBTgkIEBsAAAAABAAA/8oDigLzAA8AGwCNAQAAgUB+/gEDBKIBAAvaAQUHyAEGBQRHAAkECW8AAwQLBAMLbQACCgcKAgdtAAUHBgcFBm0ABgZuDggCBAALAAQLYAwBAA0BAQoAAWAACgIHClQACgoHWAAHCgdMHBwREAEA9/aurY+OHI0cjXx6cG9tbDc2NDMXFRAbERsADwEPDwUUKwEWFx4BBwYHBi4BJyY3PgEXDgIXFjMyPgEnJicWFx4BFxY/ATY3Njc2NzYXFhcWFxYXHgE3Nh4BFxYHBgcGBwYfARYXFhcWFxYHBgcGBwYHDgEXFg4BBwYnJicmJyYGBw4BBwYnJicmJyYnJiIHBi4BJyY3Njc2NzYmJy4BJyY3Njc2NzY3NjQnJjY3NjciBwYPAQYHBg8BBicmJyYnJgcGBwYfARYGBwYHDgEWMxcWFxYXFgcGBwYeAT8BNjc2FxYXFhceATY1NzY3Njc2FxYXFj4BLwEmJyY3Njc2NzY3PgEnJicuAScmJyYvASY3Njc2NzYnJicmDwEGLgEnLgEB9yoiIBgQEjEjTTwJChMRPyYXIgYOECMYHwMOD+wMDggeBwwJBgkLDxIXGR4gDwsGCAYEBxQRG0k4BQIHBAwJAwQDExYUGxAVAgMWChQMGBQHCwENFQUtIhEVDBcTBw0MAQI0IyUeDgoFCAYEBxYTG0k4BQMIBAsJAwMLFCI0BgYUChMMGBYHDQ8WChwd9QsJBgQDAhEMEhARFQwWEwkOCw0BAQUFFQYYGSgRDRMXDRANEwkMAgMWCw8jEA4SERgTGA4RBAIhHwcJCxARFRYaGg4gCg8HBwQGAQIZDyMYCQ4FDQYKBhsHEA8LCgcFBgQMCgMFBAUQCxAOGkQyAgEUAeMBIB9ZJysVDxQ5JikoJChDASk2ERUoNxIV8wEHAxQDBQQTFhMbEBQDBBUKFAwZFAcMAQ4VBS0iEBQLFREHDAgHCQsQEhcaHiAPCgYIBgQGFBEbSTgFAwgECwkDAwsUIjQGBhQKEwwYFgcNDxUFLSIRFQ0WEwgMDQECMyMlHg4KBQgGBAcWEx5OGxwWDAgOCxQVDg0KBQYEDAoDBQQFEAsQDhpEGBsDAiEgBwkLEBEVFhoaDiAJDwYGAwQFBhMWJxENExcNEA0TCQwCAxYLDyMQCQwMERAaFAsRCwUKFg8HAwIBAgUQCxAOERUMFhMJDgsNAQEFBRUIMyQNEgAAAAIAAAAAArwCrQAKABYAHkAbDgMCAEQDAQIDAABmCwsAAAsWCxYACgAKBAUUKwEeARcRDgEmJxE2BR4BFxEUBiYnET4BAVANEQEBISABAgFvDREBIiABARECqwETDf2oERMNFwJYIgEBEw39qBETDRcCWA8TAAAAAAMAAAAAAuMCrAAVAB8AMwBDQEAOAQIEDQEAAwJHHwEBRR4BAEQFAQQBAgEEAm0AAQACAwECYAADAAADVAADAwBWAAADAEogICAzIDMhJRcZBgUYKwEeARURBgcGLwEjLgEnET4BNzM3PgEHBisBFTMyHwERFx4CBwYHBiYnJjc+ASYvASY3NgH2DRIBFA8Sv3wNEQEBEw55xAMHrQoLZGQLCpK6HysLDQ8jDSUEBhMWDRIXAwIFBgKrARMN/agiAwINnwITDQEKDhMBogMC4gjICHkByk4DQF8uMiIMChASFRlEQhgPEQoOAAAAAwAAAAADjgKsABUAIgA+ADtAOA4BAgE7NS8oBAMCDQEAAwNHIgEBRSEBAEQAAQACAwECXgADAAADVAADAwBWAAADAEohJxcZBAUYKwEeARURFA4BLwIuAScRPgE3Mzc+AQcOAQcrARUzMhYfAREFHgEUDwEXFgcOAS8BBwYuAT8BJyY+AR8BNz4BAfgNEBMZCr98DREBARMOecEICLAGBgUEZGQJBQWUAZMNEAlMThEHBygMTE8OIQwOTU8KDSAOTU4IBwKrAhIN/agNEgMInwECEg0BCg4TAaAFAuIFAgHIAgR7AcpgAhMaCkxPFw8NBQtNTwoMIQ9MTw0hDA1NTwYCAAAEAAAAAAOLAqwAFQAzAEAAVgBkQGFAMAIBAw4BBAcNAQYFPyYCAgAERwgBAwEDbwkBBwEEAQcEbQAGBQAFBgBtAAIAAnAAAQAEBQEEXgAFBgAFVAAFBQBWAAAFAEpBQRYWQVZBVklIPDo5NxYzFjMjIhcZCgUWKwEeARURFA4BLwIuAScRPgE3Mzc+AQUWFxYXFhceAQcGDwEGJyYnNDc+AScmLwEmNzQ3NgUOAQcrARUzMhYfAREXHgIHBgcGIiY2Nz4BJi8BJjU0NzYB+A0QEhkLv3wNEQEBEw55wgUJARQSCwYKBQQ0HBkaPhARDA8BGDIhFBQ2AwIBBwj+TQYGBQRkZAkFBZS7HyoLDg8iCRsUAQ8VDRIXAwIHCAKrAhIN/agNEgMInwECEg0BCg4TAaAEA0ECCgYPCgVFsFRYPwIBBAQMDxo4mEpNNgkLCQwICKEFAgHIAgR7AcpOBEFeLjIhCREdERlDQhgJCwkMBwkAAAAE//T/agP3A1IAAAAYADMANgA0QDE2NQIDAgFHBQECAgBYBAEAAAxIAAMDAVgAAQENAUkaGQIBJyUZMxozDgwBGAIYBgUUKwExFhcWFxYXFgYHDgEHIicuAicmNjc+ARcGBwYHBgcGHgEXHgEzNjc+Ajc2JyYnJicmEwURAfdxamdHSRYXTllFt2FkWk+BUwwQT1VFuFttZWNERhUPGEk6QrFdYFZMfE8KDSEgRUZdWpT+cANSATY2W11wevdWQkgBJSF3m1V151JDSRQBNDNYWmtOoZA3QEQBJCB0l1JlZWNPUCko/iD6AfQAAAT/9P9qA/cDUgAXADAANAA4AFBATQsHCgMFAgQCBQRtBgEEAwIEA2sJAQICAFgIAQAADEgAAwMBWAABAQ0BSTU1MTEZGAEANTg1ODc2MTQxNDMyJSMYMBkwDQsAFwEXDAUUKwEWFxYXFhcWBgcOAQciJy4CJyY2Nz4BFwYHBgcGBwYWFx4BFzI3PgI3NicmJy4BAxEjESERIxEB93FqZ0dJFhdOWUW3YWRaT4FTDBBPVUW4W2xlY0RHFRdLVkKwXWBWTHxQCw4fHkNFuLxGASxGA1IBNjZbXXB691ZCSAElIXebVXXnUkNJFAE0M1ZaanbuU0BFASQfc5VRZGVkT1FW/vL+XAGk/lwBpAAE//v/qAPsAxQAFQAvAD8ASgBUQFE7NAIFBAFHCAEEAgUCBAVtCQEFAwIFA2sGAQAHAQIEAAJgAAMBAQNUAAMDAVkAAQMBTUFAMDAXFgEAQEpBSjA/MD8lHxYvFy8NCgAVARUKBRQrAR4BFxYTFxYGBwYHIS4BJyY/ARI3NhcOAQcGAwcGHgEXFiU2Mz4CJyYnJi8BLgEDMhcWFxUUBicmPQE0Nz4BEx4BBgcGJy4BNzYB9hgqDWjLYxAMGBok/NYgNAcIEXq8YB0zEh8KXLOGDAkkGrQBabRaGCYMDU1lPXssCiAQBgYWAiYRFAIEEQ8SEwUMDRUTDAoLAxQBGRSr/qaoHUMXGQEBLiEjH88BP54uGQESD5f+z+QVMiQBBAMBASIxF4qqZstIEBL++QMIGtUSFQYHGtUIBA0N/qEBIywMDQgHMBQWAAAAAAEAAAABAABrmkE9Xw889QALA+gAAAAA2RzcogAAAADZHNyi//T/agYjA1IAAAAIAAIAAAAAAAAAAQAAA1L/agAABiP/9P/xBiMAAQAAAAAAAAAAAAAAAAAAABID6AAAA+gAAAPoAAAD6AAAA+gAAAYjAAAD6AAAA+gAAAPoAAAD6AAAA+gAAAPoAAAD6AAAA+gAAAPoAAAD6P/0A+j/9APo//sAAAAAAFIA0gFOAYIBuAHoAqADFANSBRwFWAXOBlAHCgeACAYIqwAAAAEAAAASAQEABQAAAAAAAgAeAC4AcwAAAJILcAAAAAAAAAASAN4AAQAAAAAAAAA1AAAAAQAAAAAAAQAIADUAAQAAAAAAAgAHAD0AAQAAAAAAAwAIAEQAAQAAAAAABAAIAEwAAQAAAAAABQALAFQAAQAAAAAABgAIAF8AAQAAAAAACgArAGcAAQAAAAAACwATAJIAAwABBAkAAABqAKUAAwABBAkAAQAQAQ8AAwABBAkAAgAOAR8AAwABBAkAAwAQAS0AAwABBAkABAAQAT0AAwABBAkABQAWAU0AAwABBAkABgAQAWMAAwABBAkACgBWAXMAAwABBAkACwAmAclDb3B5cmlnaHQgKEMpIDIwMTkgYnkgb3JpZ2luYWwgYXV0aG9ycyBAIGZvbnRlbGxvLmNvbWZvbnRlbGxvUmVndWxhcmZvbnRlbGxvZm9udGVsbG9WZXJzaW9uIDEuMGZvbnRlbGxvR2VuZXJhdGVkIGJ5IHN2ZzJ0dGYgZnJvbSBGb250ZWxsbyBwcm9qZWN0Lmh0dHA6Ly9mb250ZWxsby5jb20AQwBvAHAAeQByAGkAZwBoAHQAIAAoAEMAKQAgADIAMAAxADkAIABiAHkAIABvAHIAaQBnAGkAbgBhAGwAIABhAHUAdABoAG8AcgBzACAAQAAgAGYAbwBuAHQAZQBsAGwAbwAuAGMAbwBtAGYAbwBuAHQAZQBsAGwAbwBSAGUAZwB1AGwAYQByAGYAbwBuAHQAZQBsAGwAbwBmAG8AbgB0AGUAbABsAG8AVgBlAHIAcwBpAG8AbgAgADEALgAwAGYAbwBuAHQAZQBsAGwAbwBHAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAHMAdgBnADIAdAB0AGYAIABmAHIAbwBtACAARgBvAG4AdABlAGwAbABvACAAcAByAG8AagBlAGMAdAAuAGgAdAB0AHAAOgAvAC8AZgBvAG4AdABlAGwAbABvAC4AYwBvAG0AAAAAAgAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAQIBAwEEAQUBBgEHAQgBCQEKAQsBDAENAQ4BDwEQAREBEgETAA9pYy1wbGF5ZXItY2xvc2UdaWMtcGxheWVyLWZ1bGxzY3JlZW4tY29tcHJlc3MbaWMtcGxheWVyLWZ1bGxzY3JlZW4tZXhwYW5kDmljLXBsYXllci1sZWZ0E2ljLXBsYXllci1ub24tdGh1bWIOaWMtcGxheWVyLXBsYXkSaWMtcGxheWVyLXBsYXlsaXN0EmljLXBsYXllci1yZS1sYXJnZQ9pYy1wbGF5ZXItcmlnaHQRaWMtcGxheWVyLXNldHRpbmcOaWMtcGxheWVyLXN0b3ASaWMtcGxheWVyLXZvbHVtZS0yFWljLXBsYXllci12b2x1bWUtbXV0ZRBpYy1wbGF5ZXItdm9sdW1lFGljLXBsYXllci1wbGF5LWxhcmdlFGljLXBsYXllci1zdG9wLWxhcmdlEWljLXBsYXllci13YXJuaW5nAAAAAAABAAH//wAPAAAAAAAAAAAAAAAAAAAAAAAYABgAGAAYA1L/agNS/2qwACwgsABVWEVZICBLuAAOUUuwBlNaWLA0G7AoWWBmIIpVWLACJWG5CAAIAGNjI2IbISGwAFmwAEMjRLIAAQBDYEItsAEssCBgZi2wAiwgZCCwwFCwBCZasigBCkNFY0VSW1ghIyEbilggsFBQWCGwQFkbILA4UFghsDhZWSCxAQpDRWNFYWSwKFBYIbEBCkNFY0UgsDBQWCGwMFkbILDAUFggZiCKimEgsApQWGAbILAgUFghsApgGyCwNlBYIbA2YBtgWVlZG7ABK1lZI7AAUFhlWVktsAMsIEUgsAQlYWQgsAVDUFiwBSNCsAYjQhshIVmwAWAtsAQsIyEjISBksQViQiCwBiNCsQEKQ0VjsQEKQ7ABYEVjsAMqISCwBkMgiiCKsAErsTAFJbAEJlFYYFAbYVJZWCNZISCwQFNYsAErGyGwQFkjsABQWGVZLbAFLLAHQyuyAAIAQ2BCLbAGLLAHI0IjILAAI0JhsAJiZrABY7ABYLAFKi2wBywgIEUgsAtDY7gEAGIgsABQWLBAYFlmsAFjYESwAWAtsAgssgcLAENFQiohsgABAENgQi2wCSywAEMjRLIAAQBDYEItsAosICBFILABKyOwAEOwBCVgIEWKI2EgZCCwIFBYIbAAG7AwUFiwIBuwQFlZI7AAUFhlWbADJSNhRESwAWAtsAssICBFILABKyOwAEOwBCVgIEWKI2EgZLAkUFiwABuwQFkjsABQWGVZsAMlI2FERLABYC2wDCwgsAAjQrILCgNFWCEbIyFZKiEtsA0ssQICRbBkYUQtsA4ssAFgICCwDENKsABQWCCwDCNCWbANQ0qwAFJYILANI0JZLbAPLCCwEGJmsAFjILgEAGOKI2GwDkNgIIpgILAOI0IjLbAQLEtUWLEEZERZJLANZSN4LbARLEtRWEtTWLEEZERZGyFZJLATZSN4LbASLLEAD0NVWLEPD0OwAWFCsA8rWbAAQ7ACJUKxDAIlQrENAiVCsAEWIyCwAyVQWLEBAENgsAQlQoqKIIojYbAOKiEjsAFhIIojYbAOKiEbsQEAQ2CwAiVCsAIlYbAOKiFZsAxDR7ANQ0dgsAJiILAAUFiwQGBZZrABYyCwC0NjuAQAYiCwAFBYsEBgWWawAWNgsQAAEyNEsAFDsAA+sgEBAUNgQi2wEywAsQACRVRYsA8jQiBFsAsjQrAKI7ABYEIgYLABYbUQEAEADgBCQopgsRIGK7ByKxsiWS2wFCyxABMrLbAVLLEBEystsBYssQITKy2wFyyxAxMrLbAYLLEEEystsBkssQUTKy2wGiyxBhMrLbAbLLEHEystsBwssQgTKy2wHSyxCRMrLbAeLACwDSuxAAJFVFiwDyNCIEWwCyNCsAojsAFgQiBgsAFhtRAQAQAOAEJCimCxEgYrsHIrGyJZLbAfLLEAHistsCAssQEeKy2wISyxAh4rLbAiLLEDHistsCMssQQeKy2wJCyxBR4rLbAlLLEGHistsCYssQceKy2wJyyxCB4rLbAoLLEJHistsCksIDywAWAtsCosIGCwEGAgQyOwAWBDsAIlYbABYLApKiEtsCsssCorsCoqLbAsLCAgRyAgsAtDY7gEAGIgsABQWLBAYFlmsAFjYCNhOCMgilVYIEcgILALQ2O4BABiILAAUFiwQGBZZrABY2AjYTgbIVktsC0sALEAAkVUWLABFrAsKrABFTAbIlktsC4sALANK7EAAkVUWLABFrAsKrABFTAbIlktsC8sIDWwAWAtsDAsALABRWO4BABiILAAUFiwQGBZZrABY7ABK7ALQ2O4BABiILAAUFiwQGBZZrABY7ABK7AAFrQAAAAAAEQ+IzixLwEVKi2wMSwgPCBHILALQ2O4BABiILAAUFiwQGBZZrABY2CwAENhOC2wMiwuFzwtsDMsIDwgRyCwC0NjuAQAYiCwAFBYsEBgWWawAWNgsABDYbABQ2M4LbA0LLECABYlIC4gR7AAI0KwAiVJiopHI0cjYSBYYhshWbABI0KyMwEBFRQqLbA1LLAAFrAEJbAEJUcjRyNhsAlDK2WKLiMgIDyKOC2wNiywABawBCWwBCUgLkcjRyNhILAEI0KwCUMrILBgUFggsEBRWLMCIAMgG7MCJgMaWUJCIyCwCEMgiiNHI0cjYSNGYLAEQ7ACYiCwAFBYsEBgWWawAWNgILABKyCKimEgsAJDYGQjsANDYWRQWLACQ2EbsANDYFmwAyWwAmIgsABQWLBAYFlmsAFjYSMgILAEJiNGYTgbI7AIQ0awAiWwCENHI0cjYWAgsARDsAJiILAAUFiwQGBZZrABY2AjILABKyOwBENgsAErsAUlYbAFJbACYiCwAFBYsEBgWWawAWOwBCZhILAEJWBkI7ADJWBkUFghGyMhWSMgILAEJiNGYThZLbA3LLAAFiAgILAFJiAuRyNHI2EjPDgtsDgssAAWILAII0IgICBGI0ewASsjYTgtsDkssAAWsAMlsAIlRyNHI2GwAFRYLiA8IyEbsAIlsAIlRyNHI2EgsAUlsAQlRyNHI2GwBiWwBSVJsAIlYbkIAAgAY2MjIFhiGyFZY7gEAGIgsABQWLBAYFlmsAFjYCMuIyAgPIo4IyFZLbA6LLAAFiCwCEMgLkcjRyNhIGCwIGBmsAJiILAAUFiwQGBZZrABYyMgIDyKOC2wOywjIC5GsAIlRlJYIDxZLrErARQrLbA8LCMgLkawAiVGUFggPFkusSsBFCstsD0sIyAuRrACJUZSWCA8WSMgLkawAiVGUFggPFkusSsBFCstsD4ssDUrIyAuRrACJUZSWCA8WS6xKwEUKy2wPyywNiuKICA8sAQjQoo4IyAuRrACJUZSWCA8WS6xKwEUK7AEQy6wKystsEAssAAWsAQlsAQmIC5HI0cjYbAJQysjIDwgLiM4sSsBFCstsEEssQgEJUKwABawBCWwBCUgLkcjRyNhILAEI0KwCUMrILBgUFggsEBRWLMCIAMgG7MCJgMaWUJCIyBHsARDsAJiILAAUFiwQGBZZrABY2AgsAErIIqKYSCwAkNgZCOwA0NhZFBYsAJDYRuwA0NgWbADJbACYiCwAFBYsEBgWWawAWNhsAIlRmE4IyA8IzgbISAgRiNHsAErI2E4IVmxKwEUKy2wQiywNSsusSsBFCstsEMssDYrISMgIDywBCNCIzixKwEUK7AEQy6wKystsEQssAAVIEewACNCsgABARUUEy6wMSotsEUssAAVIEewACNCsgABARUUEy6wMSotsEYssQABFBOwMiotsEcssDQqLbBILLAAFkUjIC4gRoojYTixKwEUKy2wSSywCCNCsEgrLbBKLLIAAEErLbBLLLIAAUErLbBMLLIBAEErLbBNLLIBAUErLbBOLLIAAEIrLbBPLLIAAUIrLbBQLLIBAEIrLbBRLLIBAUIrLbBSLLIAAD4rLbBTLLIAAT4rLbBULLIBAD4rLbBVLLIBAT4rLbBWLLIAAEArLbBXLLIAAUArLbBYLLIBAEArLbBZLLIBAUArLbBaLLIAAEMrLbBbLLIAAUMrLbBcLLIBAEMrLbBdLLIBAUMrLbBeLLIAAD8rLbBfLLIAAT8rLbBgLLIBAD8rLbBhLLIBAT8rLbBiLLA3Ky6xKwEUKy2wYyywNyuwOystsGQssDcrsDwrLbBlLLAAFrA3K7A9Ky2wZiywOCsusSsBFCstsGcssDgrsDsrLbBoLLA4K7A8Ky2waSywOCuwPSstsGossDkrLrErARQrLbBrLLA5K7A7Ky2wbCywOSuwPCstsG0ssDkrsD0rLbBuLLA6Ky6xKwEUKy2wbyywOiuwOystsHAssDorsDwrLbBxLLA6K7A9Ky2wciyzCQQCA0VYIRsjIVlCK7AIZbADJFB4sAEVMC0AS7gAyFJYsQEBjlmwAbkIAAgAY3CxAAVCsgABACqxAAVCswoCAQgqsQAFQrMOAAEIKrEABkK6AsAAAQAJKrEAB0K6AEAAAQAJKrEDAESxJAGIUViwQIhYsQNkRLEmAYhRWLoIgAABBECIY1RYsQMARFlZWVmzDAIBDCq4Af+FsASNsQIARAAA"},36923:function(i){i.exports="data:font/ttf;base64,AAEAAAAPAIAAAwBwR1NVQiCLJXoAAAD8AAAAVE9TLzI/QEsYAAABUAAAAFZjbWFwjePtyQAAAagAAAF+Y3Z0IAAAAAAAAAh4AAAADmZwZ21iLvl6AAAIiAAADgxnYXNwAAAAEAAACHAAAAAIZ2x5ZuLwowoAAAMoAAABiGhlYWQaqKjBAAAEsAAAADZoaGVhBzwDVgAABOgAAAAkaG10eAu4AAAAAAUMAAAADGxvY2EAYADEAAAFGAAAAAhtYXhwAPIOYwAABSAAAAAgbmFtZV/m2rgAAAVAAAAC5XBvc3S0mWDXAAAIKAAAAEhwcmVwfrY7tgAAFpQAAACcAAEAAAAKADAAPgACREZMVAAObGF0bgAaAAQAAAAAAAAAAQAAAAQAAAAAAAAAAQAAAAFsaWdhAAgAAAABAAAAAQAEAAQAAAABAAgAAQAGAAAAAQAAAAED6AGQAAUAAAJ6ArwAAACMAnoCvAAAAeAAMQECAAACAAUDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFBmRWQAwOkg6SEDUv9qAFoDUgCWAAAAAQAAAAAAAAAAAAUAAAADAAAALAAAAAQAAAFWAAEAAAAAAFAAAwABAAAALAADAAoAAAFWAAQAJAAAAAQABAABAADpIf//AADpIP//AAAAAQAEAAAAAQACAAABBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAoAAAAAAAAAAIAAOkgAADpIAAAAAEAAOkhAADpIQAAAAIAAAABAAD/7wNjAy0AKQA/QDwCAQAEAwECAAJMAQEESgACAAEAAgGABQEEAAACBABpAAEDAwFZAAEBA2EAAwEDUQAAACkAKRcXGRQGBhorATUHFzUeARcWFRQHBgcGIicmJyY1NCYiBhUUFxYXFjI3Njc2NTQnJicmAguWlkx/JSUpKENGpEZDKCkTHBQyMVNWxlZTMTIvLU5QAsxhiolvBVNCQ05SRkMoKSkoQ0ZSDhMUDWNWUzEyMjFTVmNfU1EyMwABAAD/7wNjAy0AKgBDQEAVAQIDFAEAAgJMFgEDSgUBAAIBAgABgAADAAIAAwJpAAEEBAFZAAEBBGEABAEEUQEAIyIYFxMSCQgAKgEqBgYWKwEiBhUUBwYHBiInJicmNTQ3PgE3FTcnFQYHBgcGFRQXFhcWMjc2NzY1NCYDQQ0UKShDRqRGQygpJiR/TJaWXlBOLS8yMVNWxlZTMTIUAX8TDlJGQygpKShDRlJOQ0JTBW+JimEGMzJRU19jVlMxMjIxU1ZjDhMAAAEAAAABAADSnNS7Xw889QAPA+gAAAAA286yYAAAAADbzrJgAAD/7wPoAy0AAAAIAAIAAAAAAAAAAQAAA1L/agAAA+gAAAAAA+gAAQAAAAAAAAAAAAAAAAAAAAMD6AAAA+gAAAPoAAAAAAAAAGAAxAABAAAAAwArAAEAAAAAAAIADAAqAI0AAABUDgwAAAAAAAAAEgDeAAEAAAAAAAAANQAAAAEAAAAAAAEACgA1AAEAAAAAAAIABwA/AAEAAAAAAAMACgBGAAEAAAAAAAQACgBQAAEAAAAAAAUACwBaAAEAAAAAAAYACgBlAAEAAAAAAAoAKwBvAAEAAAAAAAsAEwCaAAMAAQQJAAAAagCtAAMAAQQJAAEAFAEXAAMAAQQJAAIADgErAAMAAQQJAAMAFAE5AAMAAQQJAAQAFAFNAAMAAQQJAAUAFgFhAAMAAQQJAAYAFAF3AAMAAQQJAAoAVgGLAAMAAQQJAAsAJgHhQ29weXJpZ2h0IChDKSAyMDIwIGJ5IG9yaWdpbmFsIGF1dGhvcnMgQCBmb250ZWxsby5jb21zZWVrLWljb25zUmVndWxhcnNlZWstaWNvbnNzZWVrLWljb25zVmVyc2lvbiAxLjBzZWVrLWljb25zR2VuZXJhdGVkIGJ5IHN2ZzJ0dGYgZnJvbSBGb250ZWxsbyBwcm9qZWN0Lmh0dHA6Ly9mb250ZWxsby5jb20AQwBvAHAAeQByAGkAZwBoAHQAIAAoAEMAKQAgADIAMAAyADAAIABiAHkAIABvAHIAaQBnAGkAbgBhAGwAIABhAHUAdABoAG8AcgBzACAAQAAgAGYAbwBuAHQAZQBsAGwAbwAuAGMAbwBtAHMAZQBlAGsALQBpAGMAbwBuAHMAUgBlAGcAdQBsAGEAcgBzAGUAZQBrAC0AaQBjAG8AbgBzAHMAZQBlAGsALQBpAGMAbwBuAHMAVgBlAHIAcwBpAG8AbgAgADEALgAwAHMAZQBlAGsALQBpAGMAbwBuAHMARwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABzAHYAZwAyAHQAdABmACAAZgByAG8AbQAgAEYAbwBuAHQAZQBsAGwAbwAgAHAAcgBvAGoAZQBjAHQALgBoAHQAdABwADoALwAvAGYAbwBuAHQAZQBsAGwAbwAuAGMAbwBtAAAAAAIAAAAAAAAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwECAQMBBAAMb3Atc2Vlay1iYWNrD29wLXNlZWstZm9yd2FyZAAAAAEAAf//AA8AAAAAAAAAAAAAAAAAAAAAsAAsILAAVVhFWSAgS7gADlFLsAZTWliwNBuwKFlgZiCKVViwAiVhuQgACABjYyNiGyEhsABZsABDI0SyAAEAQ2BCLbABLLAgYGYtsAIsIyEjIS2wAywgZLMDFBUAQkOwE0MgYGBCsQIUQ0KxJQNDsAJDVHggsAwjsAJDQ2FksARQeLICAgJDYEKwIWUcIbACQ0OyDhUBQhwgsAJDI0KyEwETQ2BCI7AAUFhlWbIWAQJDYEItsAQssAMrsBVDWCMhIyGwFkNDI7AAUFhlWRsgZCCwwFCwBCZasigBDUNFY0WwBkVYIbADJVlSW1ghIyEbilggsFBQWCGwQFkbILA4UFghsDhZWSCxAQ1DRWNFYWSwKFBYIbEBDUNFY0UgsDBQWCGwMFkbILDAUFggZiCKimEgsApQWGAbILAgUFghsApgGyCwNlBYIbA2YBtgWVlZG7ACJbAMQ2OwAFJYsABLsApQWCGwDEMbS7AeUFghsB5LYbgQAGOwDENjuAUAYllZZGFZsAErWVkjsABQWGVZWSBksBZDI0JZLbAFLCBFILAEJWFkILAHQ1BYsAcjQrAII0IbISFZsAFgLbAGLCMhIyGwAysgZLEHYkIgsAgjQrAGRVgbsQENQ0VjsQENQ7AAYEVjsAUqISCwCEMgiiCKsAErsTAFJbAEJlFYYFAbYVJZWCNZIVkgsEBTWLABKxshsEBZI7AAUFhlWS2wByywCUMrsgACAENgQi2wCCywCSNCIyCwACNCYbACYmawAWOwAWCwByotsAksICBFILAOQ2O4BABiILAAUFiwQGBZZrABY2BEsAFgLbAKLLIJDgBDRUIqIbIAAQBDYEItsAsssABDI0SyAAEAQ2BCLbAMLCAgRSCwASsjsABDsAQlYCBFiiNhIGQgsCBQWCGwABuwMFBYsCAbsEBZWSOwAFBYZVmwAyUjYUREsAFgLbANLCAgRSCwASsjsABDsAQlYCBFiiNhIGSwJFBYsAAbsEBZI7AAUFhlWbADJSNhRESwAWAtsA4sILAAI0KzDQwAA0VQWCEbIyFZKiEtsA8ssQICRbBkYUQtsBAssAFgICCwD0NKsABQWCCwDyNCWbAQQ0qwAFJYILAQI0JZLbARLCCwEGJmsAFjILgEAGOKI2GwEUNgIIpgILARI0IjLbASLEtUWLEEZERZJLANZSN4LbATLEtRWEtTWLEEZERZGyFZJLATZSN4LbAULLEAEkNVWLESEkOwAWFCsBErWbAAQ7ACJUKxDwIlQrEQAiVCsAEWIyCwAyVQWLEBAENgsAQlQoqKIIojYbAQKiEjsAFhIIojYbAQKiEbsQEAQ2CwAiVCsAIlYbAQKiFZsA9DR7AQQ0dgsAJiILAAUFiwQGBZZrABYyCwDkNjuAQAYiCwAFBYsEBgWWawAWNgsQAAEyNEsAFDsAA+sgEBAUNgQi2wFSwAsQACRVRYsBIjQiBFsA4jQrANI7AAYEIgYLcYGAEAEQATAEJCQopgILAUI0KwAWGxFAgrsIsrGyJZLbAWLLEAFSstsBcssQEVKy2wGCyxAhUrLbAZLLEDFSstsBossQQVKy2wGyyxBRUrLbAcLLEGFSstsB0ssQcVKy2wHiyxCBUrLbAfLLEJFSstsCssIyCwEGJmsAFjsAZgS1RYIyAusAFdGyEhWS2wLCwjILAQYmawAWOwFmBLVFgjIC6wAXEbISFZLbAtLCMgsBBiZrABY7AmYEtUWCMgLrABchshIVktsCAsALAPK7EAAkVUWLASI0IgRbAOI0KwDSOwAGBCIGCwAWG1GBgBABEAQkKKYLEUCCuwiysbIlktsCEssQAgKy2wIiyxASArLbAjLLECICstsCQssQMgKy2wJSyxBCArLbAmLLEFICstsCcssQYgKy2wKCyxByArLbApLLEIICstsCossQkgKy2wLiwgPLABYC2wLywgYLAYYCBDI7ABYEOwAiVhsAFgsC4qIS2wMCywLyuwLyotsDEsICBHICCwDkNjuAQAYiCwAFBYsEBgWWawAWNgI2E4IyCKVVggRyAgsA5DY7gEAGIgsABQWLBAYFlmsAFjYCNhOBshWS2wMiwAsQACRVRYsQ4GRUKwARawMSqxBQEVRVgwWRsiWS2wMywAsA8rsQACRVRYsQ4GRUKwARawMSqxBQEVRVgwWRsiWS2wNCwgNbABYC2wNSwAsQ4GRUKwAUVjuAQAYiCwAFBYsEBgWWawAWOwASuwDkNjuAQAYiCwAFBYsEBgWWawAWOwASuwABa0AAAAAABEPiM4sTQBFSohLbA2LCA8IEcgsA5DY7gEAGIgsABQWLBAYFlmsAFjYLAAQ2E4LbA3LC4XPC2wOCwgPCBHILAOQ2O4BABiILAAUFiwQGBZZrABY2CwAENhsAFDYzgtsDkssQIAFiUgLiBHsAAjQrACJUmKikcjRyNhIFhiGyFZsAEjQrI4AQEVFCotsDossAAWsBcjQrAEJbAEJUcjRyNhsQwAQrALQytlii4jICA8ijgtsDsssAAWsBcjQrAEJbAEJSAuRyNHI2EgsAYjQrEMAEKwC0MrILBgUFggsEBRWLMEIAUgG7MEJgUaWUJCIyCwCkMgiiNHI0cjYSNGYLAGQ7ACYiCwAFBYsEBgWWawAWNgILABKyCKimEgsARDYGQjsAVDYWRQWLAEQ2EbsAVDYFmwAyWwAmIgsABQWLBAYFlmsAFjYSMgILAEJiNGYTgbI7AKQ0awAiWwCkNHI0cjYWAgsAZDsAJiILAAUFiwQGBZZrABY2AjILABKyOwBkNgsAErsAUlYbAFJbACYiCwAFBYsEBgWWawAWOwBCZhILAEJWBkI7ADJWBkUFghGyMhWSMgILAEJiNGYThZLbA8LLAAFrAXI0IgICCwBSYgLkcjRyNhIzw4LbA9LLAAFrAXI0IgsAojQiAgIEYjR7ABKyNhOC2wPiywABawFyNCsAMlsAIlRyNHI2GwAFRYLiA8IyEbsAIlsAIlRyNHI2EgsAUlsAQlRyNHI2GwBiWwBSVJsAIlYbkIAAgAY2MjIFhiGyFZY7gEAGIgsABQWLBAYFlmsAFjYCMuIyAgPIo4IyFZLbA/LLAAFrAXI0IgsApDIC5HI0cjYSBgsCBgZrACYiCwAFBYsEBgWWawAWMjICA8ijgtsEAsIyAuRrACJUawF0NYUBtSWVggPFkusTABFCstsEEsIyAuRrACJUawF0NYUhtQWVggPFkusTABFCstsEIsIyAuRrACJUawF0NYUBtSWVggPFkjIC5GsAIlRrAXQ1hSG1BZWCA8WS6xMAEUKy2wQyywOisjIC5GsAIlRrAXQ1hQG1JZWCA8WS6xMAEUKy2wRCywOyuKICA8sAYjQoo4IyAuRrACJUawF0NYUBtSWVggPFkusTABFCuwBkMusDArLbBFLLAAFrAEJbAEJiAgIEYjR2GwDCNCLkcjRyNhsAtDKyMgPCAuIzixMAEUKy2wRiyxCgQlQrAAFrAEJbAEJSAuRyNHI2EgsAYjQrEMAEKwC0MrILBgUFggsEBRWLMEIAUgG7MEJgUaWUJCIyBHsAZDsAJiILAAUFiwQGBZZrABY2AgsAErIIqKYSCwBENgZCOwBUNhZFBYsARDYRuwBUNgWbADJbACYiCwAFBYsEBgWWawAWNhsAIlRmE4IyA8IzgbISAgRiNHsAErI2E4IVmxMAEUKy2wRyyxADorLrEwARQrLbBILLEAOyshIyAgPLAGI0IjOLEwARQrsAZDLrAwKy2wSSywABUgR7AAI0KyAAEBFRQTLrA2Ki2wSiywABUgR7AAI0KyAAEBFRQTLrA2Ki2wSyyxAAEUE7A3Ki2wTCywOSotsE0ssAAWRSMgLiBGiiNhOLEwARQrLbBOLLAKI0KwTSstsE8ssgAARistsFAssgABRistsFEssgEARistsFIssgEBRistsFMssgAARystsFQssgABRystsFUssgEARystsFYssgEBRystsFcsswAAAEMrLbBYLLMAAQBDKy2wWSyzAQAAQystsFosswEBAEMrLbBbLLMAAAFDKy2wXCyzAAEBQystsF0sswEAAUMrLbBeLLMBAQFDKy2wXyyyAABFKy2wYCyyAAFFKy2wYSyyAQBFKy2wYiyyAQFFKy2wYyyyAABIKy2wZCyyAAFIKy2wZSyyAQBIKy2wZiyyAQFIKy2wZyyzAAAARCstsGgsswABAEQrLbBpLLMBAABEKy2waiyzAQEARCstsGssswAAAUQrLbBsLLMAAQFEKy2wbSyzAQABRCstsG4sswEBAUQrLbBvLLEAPCsusTABFCstsHAssQA8K7BAKy2wcSyxADwrsEErLbByLLAAFrEAPCuwQistsHMssQE8K7BAKy2wdCyxATwrsEErLbB1LLAAFrEBPCuwQistsHYssQA9Ky6xMAEUKy2wdyyxAD0rsEArLbB4LLEAPSuwQSstsHkssQA9K7BCKy2weiyxAT0rsEArLbB7LLEBPSuwQSstsHwssQE9K7BCKy2wfSyxAD4rLrEwARQrLbB+LLEAPiuwQCstsH8ssQA+K7BBKy2wgCyxAD4rsEIrLbCBLLEBPiuwQCstsIIssQE+K7BBKy2wgyyxAT4rsEIrLbCELLEAPysusTABFCstsIUssQA/K7BAKy2whiyxAD8rsEErLbCHLLEAPyuwQistsIgssQE/K7BAKy2wiSyxAT8rsEErLbCKLLEBPyuwQistsIsssgsAA0VQWLAGG7IEAgNFWCMhGyFZWUIrsAhlsAMkUHixBQEVRVgwWS0AS7gAyFJYsQEBjlmwAbkIAAgAY3CxAAdCsQAAKrEAB0KxAAoqsQAHQrEACiqxAAdCuQAAAAsqsQAHQrkAAAALKrkAAwAARLEkAYhRWLBAiFi5AAMAZESxKAGIUVi4CACIWLkAAwAARFkbsScBiFFYugiAAAEEQIhjVFi5AAMAAERZWVlZWbEADiq4Af+FsASNsQIARLMFZAYAREQ="},85971:function(i){i.exports="data:font/ttf;base64,AAEAAAALAIAAAwAwT1MvMg8SBjMAAAC8AAAAYGNtYXAXVtKQAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5Ztiu3OUAAAF4AAAEAGhlYWQOP/c1AAAFeAAAADZoaGVhCT8FzwAABbAAAAAkaG10eDAABnQAAAXUAAAAOGxvY2EGgAWAAAAGDAAAAB5tYXhwABMARAAABiwAAAAgbmFtZZlKCfsAAAZMAAABhnBvc3QAAwAAAAAH1AAAACAAAwQAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpCQPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qn//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAIkASQN3A5oAKAAAASIGFRQOAiMiLgI1ND4CNxU3JxUOAxUUHgIzMj4CNTQmIwNVDhQwU3BAQHBTMCxNZzuamkmAYDY7ZYlOTollOxQOAeIUDkBwUzAwU3BAPGxSNARyjY1jBT5lhEtOiWU7O2WJTg4UAAEAiQBJA3cDmgAoAAABNQcXNR4DFRQOAiMiLgI1NCYjIgYVFB4CMzI+AjU0LgInAhiamjtnTSwwU3BAQHBTMBQODhQ7ZYlOTollOzZggEkDN2ONjXIENFJsPEBwUzAwU3BADhQUDk6JZTs7ZYlOS4RlPgUABACDAOQFfQKbAAYACgATACAAABMRMxUhETMhESMRAQMzEzMTMwMjARUjFTMVIxUzFSERIb3p/t06AXg6ASWaPn4BfjycQQJb9eTk9/7PAS8Cm/57MQG2/koBtv5KAbb+hAF8/koBtjGLMpgxAbcAAAQATQBJA7MDNwAFAAsAEQAXAAAlITUzNTMFITUzFTMBIzUjNSEFIzUhFSMDs/7N70T9zf7NRO8CM0TvATP83kQBM+9JRKru7qoBvKpE7u5EAAAAAAIAkQBIA4EDNwAFACwAAAEFIxEzBRM3NjQnJiIPAScmIgcGFB8BBwYUFx4BMzI2PwEXHgEzMjY3NjQvAQJR/vy8vAEE400ICAgVB01NBxUHCAhMTAgIAwoEBQoDTU0ECQUECgQICE0DN+/+7+8Bd00IFQcHB01NBwcIFQdNTQcVBwQEBARMTAQEBAQHFQdNAAEA9wBJAxoDNwACAAATCQH3AiP93QM3/on+iQAEAE0ASQOzAzcABQALABEAFwAAJSM1IRUjBSM1IzUhASE1MxUzBSE1MzUzAsREATPv/rxE7wEzAjP+zUTv/c3+ze9ESe5EqqpEARLuqkREqgAAAAACAO8ASQMRAzcABAAIAAATMxEjESEzESPviIgBmoiIAzf9EgLu/RIAAgFEAI0CvALzAAIABQAAATcXFQcnAUS8vLy8AibNzczNzQAAAwCKAEkDjwM3AAUAJQBBAAABBSMRMwU3IiYnJjY3PgE1NCYnLgE3PgEXHgMVFA4CBw4BIyciJicmNjc+ATU0JicuATc+ARceARUUBgcOASMCS/77vLwBBY4IDQMECApATEtACQgEBBMKJz8sGRktQCcCBQIwBw0DBQgKGR4fGQoIBAUTCSgwLycCBQMDN+7+7u5xCAcKFAQbc0ZFdBsEEwoKCAQRNURPKipQQzYQAQF/CAgJFAULLhwcLwsFEwkKCAQSSCwrSBEBAQAAAQAAAAAAAHFIcIdfDzz1AAsEAAAAAADU0tlPAAAAANTS2U8AAAAABX0DmgAAAAgAAgAAAAAAAAABAAADwP/AAAAGAAAAAAAFfQABAAAAAAAAAAAAAAAAAAAADgQAAAAAAAAAAAAAAAIAAAAEAACJBAAAiQYAAIMEAABNBAAAkQQAAPcEAABNBAAA7wQAAUQEAACKAAAAAAAKABQAHgBYAJIAygD0ATwBSgF0AYgBmgIAAAAAAQAAAA4AQgAEAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGljb21vb24AaQBjAG8AbQBvAG8AblZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGljb21vb24AaQBjAG8AbQBvAG8Abmljb21vb24AaQBjAG8AbQBvAG8AblJlZ3VsYXIAUgBlAGcAdQBsAGEAcmljb21vb24AaQBjAG8AbQBvAG8AbkZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="},79306:function(i,l,t){var s=t(94901),a=t(16823),u=TypeError;i.exports=function(f){if(s(f))return f;throw new u(a(f)+" is not a function")}},35548:function(i,l,t){var s=t(33517),a=t(16823),u=TypeError;i.exports=function(f){if(s(f))return f;throw new u(a(f)+" is not a constructor")}},73506:function(i,l,t){var s=t(13925),a=String,u=TypeError;i.exports=function(f){if(s(f))return f;throw new u("Can't set "+a(f)+" as a prototype")}},97080:function(i,l,t){var s=t(94402).has;i.exports=function(a){return s(a),a}},6469:function(i,l,t){var s=t(78227),a=t(2360),u=t(24913).f,f=s("unscopables"),h=Array.prototype;h[f]===void 0&&u(h,f,{configurable:!0,value:a(null)}),i.exports=function(A){h[f][A]=!0}},57829:function(i,l,t){var s=t(68183).charAt;i.exports=function(a,u,f){return u+(f?s(a,u).length:1)}},90679:function(i,l,t){var s=t(1625),a=TypeError;i.exports=function(u,f){if(s(f,u))return u;throw new a("Incorrect invocation")}},28551:function(i,l,t){var s=t(20034),a=String,u=TypeError;i.exports=function(f){if(s(f))return f;throw new u(a(f)+" is not an object")}},77811:function(i){i.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},67394:function(i,l,t){var s=t(44576),a=t(46706),u=t(22195),f=s.ArrayBuffer,h=s.TypeError;i.exports=f&&a(f.prototype,"byteLength","get")||function(A){if(u(A)!=="ArrayBuffer")throw new h("ArrayBuffer expected");return A.byteLength}},3238:function(i,l,t){var s=t(44576),a=t(77811),u=t(67394),f=s.DataView;i.exports=function(h){if(!a||u(h)!==0)return!1;try{return new f(h),!1}catch{return!0}}},15652:function(i,l,t){var s=t(79039);i.exports=s((function(){if(typeof ArrayBuffer=="function"){var a=new ArrayBuffer(8);Object.isExtensible(a)&&Object.defineProperty(a,"a",{value:8})}}))},55169:function(i,l,t){var s=t(3238),a=TypeError;i.exports=function(u){if(s(u))throw new a("ArrayBuffer is detached");return u}},95636:function(i,l,t){var s=t(44576),a=t(79504),u=t(46706),f=t(57696),h=t(55169),A=t(67394),g=t(94483),p=t(1548),m=s.structuredClone,y=s.ArrayBuffer,E=s.DataView,C=Math.min,T=y.prototype,w=E.prototype,I=a(T.slice),L=u(T,"resizable","get"),R=u(T,"maxByteLength","get"),B=a(w.getInt8),P=a(w.setInt8);i.exports=(p||g)&&function(N,U,G){var W,K=A(N),M=U===void 0?K:f(U),Q=!L||!L(N);if(h(N),p&&(N=m(N,{transfer:[N]}),K===M&&(G||Q)))return N;if(K>=M&&(!G||Q))W=I(N,0,M);else{var Z=G&&!Q&&R?{maxByteLength:R(N)}:void 0;W=new y(M,Z);for(var J=new E(N),q=new E(W),te=C(M,K),fe=0;fe<te;fe++)P(q,fe,B(J,fe))}return p||g(N),W}},94644:function(i,l,t){var s,a,u,f=t(77811),h=t(43724),A=t(44576),g=t(94901),p=t(20034),m=t(39297),y=t(36955),E=t(16823),C=t(66699),T=t(36840),w=t(62106),I=t(1625),L=t(42787),R=t(52967),B=t(78227),P=t(33392),N=t(91181),U=N.enforce,G=N.get,W=A.Int8Array,K=W&&W.prototype,M=A.Uint8ClampedArray,Q=M&&M.prototype,Z=W&&L(W),J=K&&L(K),q=Object.prototype,te=A.TypeError,fe=B("toStringTag"),Ee=P("TYPED_ARRAY_TAG"),Ae="TypedArrayConstructor",Ce=f&&!!R&&y(A.opera)!=="Opera",Oe=!1,Ne={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Be={BigInt64Array:8,BigUint64Array:8},Ge=function($e){var it=L($e);if(p(it)){var yt=G(it);return yt&&m(yt,Ae)?yt[Ae]:Ge(it)}},Ve=function($e){if(!p($e))return!1;var it=y($e);return m(Ne,it)||m(Be,it)};for(s in Ne)(u=(a=A[s])&&a.prototype)?U(u)[Ae]=a:Ce=!1;for(s in Be)(u=(a=A[s])&&a.prototype)&&(U(u)[Ae]=a);if((!Ce||!g(Z)||Z===Function.prototype)&&(Z=function(){throw new te("Incorrect invocation")},Ce))for(s in Ne)A[s]&&R(A[s],Z);if((!Ce||!J||J===q)&&(J=Z.prototype,Ce))for(s in Ne)A[s]&&R(A[s].prototype,J);if(Ce&&L(Q)!==J&&R(Q,J),h&&!m(J,fe))for(s in Oe=!0,w(J,fe,{configurable:!0,get:function(){return p(this)?this[Ee]:void 0}}),Ne)A[s]&&C(A[s],Ee,s);i.exports={NATIVE_ARRAY_BUFFER_VIEWS:Ce,TYPED_ARRAY_TAG:Oe&&Ee,aTypedArray:function($e){if(Ve($e))return $e;throw new te("Target is not a typed array")},aTypedArrayConstructor:function($e){if(g($e)&&(!R||I(Z,$e)))return $e;throw new te(E($e)+" is not a typed array constructor")},exportTypedArrayMethod:function($e,it,yt,Tt){if(h){if(yt)for(var st in Ne){var ht=A[st];if(ht&&m(ht.prototype,$e))try{delete ht.prototype[$e]}catch{try{ht.prototype[$e]=it}catch{}}}J[$e]&&!yt||T(J,$e,yt?it:Ce&&K[$e]||it,Tt)}},exportTypedArrayStaticMethod:function($e,it,yt){var Tt,st;if(h){if(R){if(yt){for(Tt in Ne)if((st=A[Tt])&&m(st,$e))try{delete st[$e]}catch{}}if(Z[$e]&&!yt)return;try{return T(Z,$e,yt?it:Ce&&Z[$e]||it)}catch{}}for(Tt in Ne)!(st=A[Tt])||st[$e]&&!yt||T(st,$e,it)}},getTypedArrayConstructor:Ge,isView:function($e){if(!p($e))return!1;var it=y($e);return it==="DataView"||m(Ne,it)||m(Be,it)},isTypedArray:Ve,TypedArray:Z,TypedArrayPrototype:J}},66346:function(i,l,t){var s=t(44576),a=t(79504),u=t(43724),f=t(77811),h=t(10350),A=t(66699),g=t(62106),p=t(56279),m=t(79039),y=t(90679),E=t(91291),C=t(18014),T=t(57696),w=t(15617),I=t(88490),L=t(42787),R=t(52967),B=t(84373),P=t(67680),N=t(23167),U=t(77740),G=t(10687),W=t(91181),K=h.PROPER,M=h.CONFIGURABLE,Q="ArrayBuffer",Z="DataView",J="prototype",q="Wrong index",te=W.getterFor(Q),fe=W.getterFor(Z),Ee=W.set,Ae=s[Q],Ce=Ae,Oe=Ce&&Ce[J],Ne=s[Z],Be=Ne&&Ne[J],Ge=Object.prototype,Ve=s.Array,$e=s.RangeError,it=a(B),yt=a([].reverse),Tt=I.pack,st=I.unpack,ht=function(be){return[255&be]},_t=function(be){return[255&be,be>>8&255]},Ht=function(be){return[255&be,be>>8&255,be>>16&255,be>>24&255]},Gt=function(be){return be[3]<<24|be[2]<<16|be[1]<<8|be[0]},Pt=function(be){return Tt(w(be),23,4)},It=function(be){return Tt(be,52,8)},Zt=function(be,Xe,at){g(be[J],Xe,{configurable:!0,get:function(){return at(this)[Xe]}})},Mt=function(be,Xe,at,fr){var bt=fe(be),Lt=T(at),me=!!fr;if(Lt+Xe>bt.byteLength)throw new $e(q);var ot=bt.bytes,$t=Lt+bt.byteOffset,Qt=P(ot,$t,$t+Xe);return me?Qt:yt(Qt)},Fe=function(be,Xe,at,fr,bt,Lt){var me=fe(be),ot=T(at),$t=fr(+bt),Qt=!!Lt;if(ot+Xe>me.byteLength)throw new $e(q);for(var Qe=me.bytes,dt=ot+me.byteOffset,et=0;et<Xe;et++)Qe[dt+et]=$t[Qt?et:Xe-et-1]};if(f){var Ze=K&&Ae.name!==Q;m((function(){Ae(1)}))&&m((function(){new Ae(-1)}))&&!m((function(){return new Ae,new Ae(1.5),new Ae(NaN),Ae.length!==1||Ze&&!M}))?Ze&&M&&A(Ae,"name",Q):((Ce=function(be){return y(this,Oe),N(new Ae(T(be)),this,Ce)})[J]=Oe,Oe.constructor=Ce,U(Ce,Ae)),R&&L(Be)!==Ge&&R(Be,Ge);var qe=new Ne(new Ce(2)),ft=a(Be.setInt8);qe.setInt8(0,2147483648),qe.setInt8(1,2147483649),!qe.getInt8(0)&&qe.getInt8(1)||p(Be,{setInt8:function(be,Xe){ft(this,be,Xe<<24>>24)},setUint8:function(be,Xe){ft(this,be,Xe<<24>>24)}},{unsafe:!0})}else Oe=(Ce=function(be){y(this,Oe);var Xe=T(be);Ee(this,{type:Q,bytes:it(Ve(Xe),0),byteLength:Xe}),u||(this.byteLength=Xe,this.detached=!1)})[J],Be=(Ne=function(be,Xe,at){y(this,Be),y(be,Oe);var fr=te(be),bt=fr.byteLength,Lt=E(Xe);if(Lt<0||Lt>bt)throw new $e("Wrong offset");if(Lt+(at=at===void 0?bt-Lt:C(at))>bt)throw new $e("Wrong length");Ee(this,{type:Z,buffer:be,byteLength:at,byteOffset:Lt,bytes:fr.bytes}),u||(this.buffer=be,this.byteLength=at,this.byteOffset=Lt)})[J],u&&(Zt(Ce,"byteLength",te),Zt(Ne,"buffer",fe),Zt(Ne,"byteLength",fe),Zt(Ne,"byteOffset",fe)),p(Be,{getInt8:function(be){return Mt(this,1,be)[0]<<24>>24},getUint8:function(be){return Mt(this,1,be)[0]},getInt16:function(be){var Xe=Mt(this,2,be,arguments.length>1&&arguments[1]);return(Xe[1]<<8|Xe[0])<<16>>16},getUint16:function(be){var Xe=Mt(this,2,be,arguments.length>1&&arguments[1]);return Xe[1]<<8|Xe[0]},getInt32:function(be){return Gt(Mt(this,4,be,arguments.length>1&&arguments[1]))},getUint32:function(be){return Gt(Mt(this,4,be,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(be){return st(Mt(this,4,be,arguments.length>1&&arguments[1]),23)},getFloat64:function(be){return st(Mt(this,8,be,arguments.length>1&&arguments[1]),52)},setInt8:function(be,Xe){Fe(this,1,be,ht,Xe)},setUint8:function(be,Xe){Fe(this,1,be,ht,Xe)},setInt16:function(be,Xe){Fe(this,2,be,_t,Xe,arguments.length>2&&arguments[2])},setUint16:function(be,Xe){Fe(this,2,be,_t,Xe,arguments.length>2&&arguments[2])},setInt32:function(be,Xe){Fe(this,4,be,Ht,Xe,arguments.length>2&&arguments[2])},setUint32:function(be,Xe){Fe(this,4,be,Ht,Xe,arguments.length>2&&arguments[2])},setFloat32:function(be,Xe){Fe(this,4,be,Pt,Xe,arguments.length>2&&arguments[2])},setFloat64:function(be,Xe){Fe(this,8,be,It,Xe,arguments.length>2&&arguments[2])}});G(Ce,Q),G(Ne,Z),i.exports={ArrayBuffer:Ce,DataView:Ne}},57029:function(i,l,t){var s=t(48981),a=t(35610),u=t(26198),f=t(84606),h=Math.min;i.exports=[].copyWithin||function(A,g){var p=s(this),m=u(p),y=a(A,m),E=a(g,m),C=arguments.length>2?arguments[2]:void 0,T=h((C===void 0?m:a(C,m))-E,m-y),w=1;for(E<y&&y<E+T&&(w=-1,E+=T-1,y+=T-1);T-- >0;)E in p?p[y]=p[E]:f(p,y),y+=w,E+=w;return p}},84373:function(i,l,t){var s=t(48981),a=t(35610),u=t(26198);i.exports=function(f){for(var h=s(this),A=u(h),g=arguments.length,p=a(g>1?arguments[1]:void 0,A),m=g>2?arguments[2]:void 0,y=m===void 0?A:a(m,A);y>p;)h[p++]=f;return h}},90235:function(i,l,t){var s=t(59213).forEach,a=t(34598)("forEach");i.exports=a?[].forEach:function(u){return s(this,u,arguments.length>1?arguments[1]:void 0)}},35370:function(i,l,t){var s=t(26198);i.exports=function(a,u,f){for(var h=0,A=arguments.length>2?f:s(u),g=new a(A);A>h;)g[h]=u[h++];return g}},97916:function(i,l,t){var s=t(76080),a=t(69565),u=t(48981),f=t(96319),h=t(44209),A=t(33517),g=t(26198),p=t(97040),m=t(70081),y=t(50851),E=Array;i.exports=function(C){var T=u(C),w=A(this),I=arguments.length,L=I>1?arguments[1]:void 0,R=L!==void 0;R&&(L=s(L,I>2?arguments[2]:void 0));var B,P,N,U,G,W,K=y(T),M=0;if(!K||this===E&&h(K))for(B=g(T),P=w?new this(B):E(B);B>M;M++)W=R?L(T[M],M):T[M],p(P,M,W);else for(P=w?new this:[],G=(U=m(T,K)).next;!(N=a(G,U)).done;M++)W=R?f(U,L,[N.value,M],!0):N.value,p(P,M,W);return P.length=M,P}},19617:function(i,l,t){var s=t(25397),a=t(35610),u=t(26198),f=function(h){return function(A,g,p){var m=s(A),y=u(m);if(y===0)return!h&&-1;var E,C=a(p,y);if(h&&g!=g){for(;y>C;)if((E=m[C++])!=E)return!0}else for(;y>C;C++)if((h||C in m)&&m[C]===g)return h||C||0;return!h&&-1}};i.exports={includes:f(!0),indexOf:f(!1)}},43839:function(i,l,t){var s=t(76080),a=t(47055),u=t(48981),f=t(26198),h=function(A){var g=A===1;return function(p,m,y){for(var E,C=u(p),T=a(C),w=f(T),I=s(m,y);w-- >0;)if(I(E=T[w],w,C))switch(A){case 0:return E;case 1:return w}return g?-1:void 0}};i.exports={findLast:h(0),findLastIndex:h(1)}},59213:function(i,l,t){var s=t(76080),a=t(79504),u=t(47055),f=t(48981),h=t(26198),A=t(1469),g=a([].push),p=function(m){var y=m===1,E=m===2,C=m===3,T=m===4,w=m===6,I=m===7,L=m===5||w;return function(R,B,P,N){for(var U,G,W=f(R),K=u(W),M=h(K),Q=s(B,P),Z=0,J=N||A,q=y?J(R,M):E||I?J(R,0):void 0;M>Z;Z++)if((L||Z in K)&&(G=Q(U=K[Z],Z,W),m))if(y)q[Z]=G;else if(G)switch(m){case 3:return!0;case 5:return U;case 6:return Z;case 2:g(q,U)}else switch(m){case 4:return!1;case 7:g(q,U)}return w?-1:C||T?T:q}};i.exports={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6),filterReject:p(7)}},8379:function(i,l,t){var s=t(18745),a=t(25397),u=t(91291),f=t(26198),h=t(34598),A=Math.min,g=[].lastIndexOf,p=!!g&&1/[1].lastIndexOf(1,-0)<0,m=h("lastIndexOf"),y=p||!m;i.exports=y?function(E){if(p)return s(g,this,arguments)||0;var C=a(this),T=f(C);if(T===0)return-1;var w=T-1;for(arguments.length>1&&(w=A(w,u(arguments[1]))),w<0&&(w=T+w);w>=0;w--)if(w in C&&C[w]===E)return w||0;return-1}:g},70597:function(i,l,t){var s=t(79039),a=t(78227),u=t(39519),f=a("species");i.exports=function(h){return u>=51||!s((function(){var A=[];return(A.constructor={})[f]=function(){return{foo:1}},A[h](Boolean).foo!==1}))}},34598:function(i,l,t){var s=t(79039);i.exports=function(a,u){var f=[][a];return!!f&&s((function(){f.call(null,u||function(){return 1},1)}))}},80926:function(i,l,t){var s=t(79306),a=t(48981),u=t(47055),f=t(26198),h=TypeError,A="Reduce of empty array with no initial value",g=function(p){return function(m,y,E,C){var T=a(m),w=u(T),I=f(T);if(s(y),I===0&&E<2)throw new h(A);var L=p?I-1:0,R=p?-1:1;if(E<2)for(;;){if(L in w){C=w[L],L+=R;break}if(L+=R,p?L<0:I<=L)throw new h(A)}for(;p?L>=0:I>L;L+=R)L in w&&(C=y(C,w[L],L,T));return C}};i.exports={left:g(!1),right:g(!0)}},34527:function(i,l,t){var s=t(43724),a=t(34376),u=TypeError,f=Object.getOwnPropertyDescriptor,h=s&&!(function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(A){return A instanceof TypeError}})();i.exports=h?function(A,g){if(a(A)&&!f(A,"length").writable)throw new u("Cannot set read only .length");return A.length=g}:function(A,g){return A.length=g}},67680:function(i,l,t){var s=t(79504);i.exports=s([].slice)},74488:function(i,l,t){var s=t(67680),a=Math.floor,u=function(f,h){var A=f.length;if(A<8)for(var g,p,m=1;m<A;){for(p=m,g=f[m];p&&h(f[p-1],g)>0;)f[p]=f[--p];p!==m++&&(f[p]=g)}else for(var y=a(A/2),E=u(s(f,0,y),h),C=u(s(f,y),h),T=E.length,w=C.length,I=0,L=0;I<T||L<w;)f[I+L]=I<T&&L<w?h(E[I],C[L])<=0?E[I++]:C[L++]:I<T?E[I++]:C[L++];return f};i.exports=u},87433:function(i,l,t){var s=t(34376),a=t(33517),u=t(20034),f=t(78227)("species"),h=Array;i.exports=function(A){var g;return s(A)&&(g=A.constructor,(a(g)&&(g===h||s(g.prototype))||u(g)&&(g=g[f])===null)&&(g=void 0)),g===void 0?h:g}},1469:function(i,l,t){var s=t(87433);i.exports=function(a,u){return new(s(a))(u===0?0:u)}},37628:function(i,l,t){var s=t(26198);i.exports=function(a,u){for(var f=s(a),h=new u(f),A=0;A<f;A++)h[A]=a[f-A-1];return h}},39928:function(i,l,t){var s=t(26198),a=t(91291),u=RangeError;i.exports=function(f,h,A,g){var p=s(f),m=a(A),y=m<0?p+m:m;if(y>=p||y<0)throw new u("Incorrect index");for(var E=new h(p),C=0;C<p;C++)E[C]=C===y?g:f[C];return E}},92804:function(i){var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=l+"+/",s=l+"-_",a=function(u){for(var f={},h=0;h<64;h++)f[u.charAt(h)]=h;return f};i.exports={i2c:t,c2i:a(t),i2cUrl:s,c2iUrl:a(s)}},96319:function(i,l,t){var s=t(28551),a=t(9539);i.exports=function(u,f,h,A){try{return A?f(s(h)[0],h[1]):f(h)}catch(g){a(u,"throw",g)}}},84428:function(i,l,t){var s=t(78227)("iterator"),a=!1;try{var u=0,f={next:function(){return{done:!!u++}},return:function(){a=!0}};f[s]=function(){return this},Array.from(f,(function(){throw 2}))}catch{}i.exports=function(h,A){try{if(!A&&!a)return!1}catch{return!1}var g=!1;try{var p={};p[s]=function(){return{next:function(){return{done:g=!0}}}},h(p)}catch{}return g}},22195:function(i,l,t){var s=t(79504),a=s({}.toString),u=s("".slice);i.exports=function(f){return u(a(f),8,-1)}},36955:function(i,l,t){var s=t(92140),a=t(94901),u=t(22195),f=t(78227)("toStringTag"),h=Object,A=u((function(){return arguments})())==="Arguments";i.exports=s?u:function(g){var p,m,y;return g===void 0?"Undefined":g===null?"Null":typeof(m=(function(E,C){try{return E[C]}catch{}})(p=h(g),f))=="string"?m:A?u(p):(y=u(p))==="Object"&&a(p.callee)?"Arguments":y}},86938:function(i,l,t){var s=t(2360),a=t(62106),u=t(56279),f=t(76080),h=t(90679),A=t(64117),g=t(72652),p=t(51088),m=t(62529),y=t(87633),E=t(43724),C=t(3451).fastKey,T=t(91181),w=T.set,I=T.getterFor;i.exports={getConstructor:function(L,R,B,P){var N=L((function(M,Q){h(M,U),w(M,{type:R,index:s(null),first:null,last:null,size:0}),E||(M.size=0),A(Q)||g(Q,M[P],{that:M,AS_ENTRIES:B})})),U=N.prototype,G=I(R),W=function(M,Q,Z){var J,q,te=G(M),fe=K(M,Q);return fe?fe.value=Z:(te.last=fe={index:q=C(Q,!0),key:Q,value:Z,previous:J=te.last,next:null,removed:!1},te.first||(te.first=fe),J&&(J.next=fe),E?te.size++:M.size++,q!=="F"&&(te.index[q]=fe)),M},K=function(M,Q){var Z,J=G(M),q=C(Q);if(q!=="F")return J.index[q];for(Z=J.first;Z;Z=Z.next)if(Z.key===Q)return Z};return u(U,{clear:function(){for(var M=G(this),Q=M.first;Q;)Q.removed=!0,Q.previous&&(Q.previous=Q.previous.next=null),Q=Q.next;M.first=M.last=null,M.index=s(null),E?M.size=0:this.size=0},delete:function(M){var Q=this,Z=G(Q),J=K(Q,M);if(J){var q=J.next,te=J.previous;delete Z.index[J.index],J.removed=!0,te&&(te.next=q),q&&(q.previous=te),Z.first===J&&(Z.first=q),Z.last===J&&(Z.last=te),E?Z.size--:Q.size--}return!!J},forEach:function(M){for(var Q,Z=G(this),J=f(M,arguments.length>1?arguments[1]:void 0);Q=Q?Q.next:Z.first;)for(J(Q.value,Q.key,this);Q&&Q.removed;)Q=Q.previous},has:function(M){return!!K(this,M)}}),u(U,B?{get:function(M){var Q=K(this,M);return Q&&Q.value},set:function(M,Q){return W(this,M===0?0:M,Q)}}:{add:function(M){return W(this,M=M===0?0:M,M)}}),E&&a(U,"size",{configurable:!0,get:function(){return G(this).size}}),N},setStrong:function(L,R,B){var P=R+" Iterator",N=I(R),U=I(P);p(L,R,(function(G,W){w(this,{type:P,target:G,state:N(G),kind:W,last:null})}),(function(){for(var G=U(this),W=G.kind,K=G.last;K&&K.removed;)K=K.previous;return G.target&&(G.last=K=K?K.next:G.state.first)?m(W==="keys"?K.key:W==="values"?K.value:[K.key,K.value],!1):(G.target=null,m(void 0,!0))}),B?"entries":"values",!B,!0),y(R)}}},91625:function(i,l,t){var s=t(79504),a=t(56279),u=t(3451).getWeakData,f=t(90679),h=t(28551),A=t(64117),g=t(20034),p=t(72652),m=t(59213),y=t(39297),E=t(91181),C=E.set,T=E.getterFor,w=m.find,I=m.findIndex,L=s([].splice),R=0,B=function(U){return U.frozen||(U.frozen=new P)},P=function(){this.entries=[]},N=function(U,G){return w(U.entries,(function(W){return W[0]===G}))};P.prototype={get:function(U){var G=N(this,U);if(G)return G[1]},has:function(U){return!!N(this,U)},set:function(U,G){var W=N(this,U);W?W[1]=G:this.entries.push([U,G])},delete:function(U){var G=I(this.entries,(function(W){return W[0]===U}));return~G&&L(this.entries,G,1),!!~G}},i.exports={getConstructor:function(U,G,W,K){var M=U((function(q,te){f(q,Q),C(q,{type:G,id:R++,frozen:null}),A(te)||p(te,q[K],{that:q,AS_ENTRIES:W})})),Q=M.prototype,Z=T(G),J=function(q,te,fe){var Ee=Z(q),Ae=u(h(te),!0);return Ae===!0?B(Ee).set(te,fe):Ae[Ee.id]=fe,q};return a(Q,{delete:function(q){var te=Z(this);if(!g(q))return!1;var fe=u(q);return fe===!0?B(te).delete(q):fe&&y(fe,te.id)&&delete fe[te.id]},has:function(q){var te=Z(this);if(!g(q))return!1;var fe=u(q);return fe===!0?B(te).has(q):fe&&y(fe,te.id)}}),a(Q,W?{get:function(q){var te=Z(this);if(g(q)){var fe=u(q);if(fe===!0)return B(te).get(q);if(fe)return fe[te.id]}},set:function(q,te){return J(this,q,te)}}:{add:function(q){return J(this,q,!0)}}),M}}},16468:function(i,l,t){var s=t(46518),a=t(44576),u=t(79504),f=t(92796),h=t(36840),A=t(3451),g=t(72652),p=t(90679),m=t(94901),y=t(64117),E=t(20034),C=t(79039),T=t(84428),w=t(10687),I=t(23167);i.exports=function(L,R,B){var P=L.indexOf("Map")!==-1,N=L.indexOf("Weak")!==-1,U=P?"set":"add",G=a[L],W=G&&G.prototype,K=G,M={},Q=function(Ee){var Ae=u(W[Ee]);h(W,Ee,Ee==="add"?function(Ce){return Ae(this,Ce===0?0:Ce),this}:Ee==="delete"?function(Ce){return!(N&&!E(Ce))&&Ae(this,Ce===0?0:Ce)}:Ee==="get"?function(Ce){return N&&!E(Ce)?void 0:Ae(this,Ce===0?0:Ce)}:Ee==="has"?function(Ce){return!(N&&!E(Ce))&&Ae(this,Ce===0?0:Ce)}:function(Ce,Oe){return Ae(this,Ce===0?0:Ce,Oe),this})};if(f(L,!m(G)||!(N||W.forEach&&!C((function(){new G().entries().next()})))))K=B.getConstructor(R,L,P,U),A.enable();else if(f(L,!0)){var Z=new K,J=Z[U](N?{}:-0,1)!==Z,q=C((function(){Z.has(1)})),te=T((function(Ee){new G(Ee)})),fe=!N&&C((function(){for(var Ee=new G,Ae=5;Ae--;)Ee[U](Ae,Ae);return!Ee.has(-0)}));te||((K=R((function(Ee,Ae){p(Ee,W);var Ce=I(new G,Ee,K);return y(Ae)||g(Ae,Ce[U],{that:Ce,AS_ENTRIES:P}),Ce}))).prototype=W,W.constructor=K),(q||fe)&&(Q("delete"),Q("has"),P&&Q("get")),(fe||J)&&Q(U),N&&W.clear&&delete W.clear}return M[L]=K,s({global:!0,constructor:!0,forced:K!==G},M),w(K,L),N||B.setStrong(K,L,P),K}},77740:function(i,l,t){var s=t(39297),a=t(35031),u=t(77347),f=t(24913);i.exports=function(h,A,g){for(var p=a(A),m=f.f,y=u.f,E=0;E<p.length;E++){var C=p[E];s(h,C)||g&&s(g,C)||m(h,C,y(A,C))}}},41436:function(i,l,t){var s=t(78227)("match");i.exports=function(a){var u=/./;try{"/./"[a](u)}catch{try{return u[s]=!1,"/./"[a](u)}catch{}}return!1}},12211:function(i,l,t){var s=t(79039);i.exports=!s((function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype}))},77240:function(i,l,t){var s=t(79504),a=t(67750),u=t(655),f=/"/g,h=s("".replace);i.exports=function(A,g,p,m){var y=u(a(A)),E="<"+g;return p!==""&&(E+=" "+p+'="'+h(u(m),f,"&quot;")+'"'),E+">"+y+"</"+g+">"}},62529:function(i){i.exports=function(l,t){return{value:l,done:t}}},66699:function(i,l,t){var s=t(43724),a=t(24913),u=t(6980);i.exports=s?function(f,h,A){return a.f(f,h,u(1,A))}:function(f,h,A){return f[h]=A,f}},6980:function(i){i.exports=function(l,t){return{enumerable:!(1&l),configurable:!(2&l),writable:!(4&l),value:t}}},97040:function(i,l,t){var s=t(43724),a=t(24913),u=t(6980);i.exports=function(f,h,A){s?a.f(f,h,u(0,A)):f[h]=A}},70380:function(i,l,t){var s=t(79504),a=t(79039),u=t(60533).start,f=RangeError,h=isFinite,A=Math.abs,g=Date.prototype,p=g.toISOString,m=s(g.getTime),y=s(g.getUTCDate),E=s(g.getUTCFullYear),C=s(g.getUTCHours),T=s(g.getUTCMilliseconds),w=s(g.getUTCMinutes),I=s(g.getUTCMonth),L=s(g.getUTCSeconds);i.exports=a((function(){return p.call(new Date(-50000000000001))!=="0385-07-25T07:06:39.999Z"}))||!a((function(){p.call(new Date(NaN))}))?function(){if(!h(m(this)))throw new f("Invalid time value");var R=this,B=E(R),P=T(R),N=B<0?"-":B>9999?"+":"";return N+u(A(B),N?6:4,0)+"-"+u(I(R)+1,2,0)+"-"+u(y(R),2,0)+"T"+u(C(R),2,0)+":"+u(w(R),2,0)+":"+u(L(R),2,0)+"."+u(P,3,0)+"Z"}:p},53640:function(i,l,t){var s=t(28551),a=t(84270),u=TypeError;i.exports=function(f){if(s(this),f==="string"||f==="default")f="string";else if(f!=="number")throw new u("Incorrect hint");return a(this,f)}},62106:function(i,l,t){var s=t(50283),a=t(24913);i.exports=function(u,f,h){return h.get&&s(h.get,f,{getter:!0}),h.set&&s(h.set,f,{setter:!0}),a.f(u,f,h)}},36840:function(i,l,t){var s=t(94901),a=t(24913),u=t(50283),f=t(39433);i.exports=function(h,A,g,p){p||(p={});var m=p.enumerable,y=p.name!==void 0?p.name:A;if(s(g)&&u(g,y,p),p.global)m?h[A]=g:f(A,g);else{try{p.unsafe?h[A]&&(m=!0):delete h[A]}catch{}m?h[A]=g:a.f(h,A,{value:g,enumerable:!1,configurable:!p.nonConfigurable,writable:!p.nonWritable})}return h}},56279:function(i,l,t){var s=t(36840);i.exports=function(a,u,f){for(var h in u)s(a,h,u[h],f);return a}},39433:function(i,l,t){var s=t(44576),a=Object.defineProperty;i.exports=function(u,f){try{a(s,u,{value:f,configurable:!0,writable:!0})}catch{s[u]=f}return f}},84606:function(i,l,t){var s=t(16823),a=TypeError;i.exports=function(u,f){if(!delete u[f])throw new a("Cannot delete property "+s(f)+" of "+s(u))}},43724:function(i,l,t){var s=t(79039);i.exports=!s((function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}))},94483:function(i,l,t){var s,a,u,f,h=t(44576),A=t(89429),g=t(1548),p=h.structuredClone,m=h.ArrayBuffer,y=h.MessageChannel,E=!1;if(g)E=function(C){p(C,{transfer:[C]})};else if(m)try{y||(s=A("worker_threads"))&&(y=s.MessageChannel),y&&(a=new y,u=new m(2),f=function(C){a.port1.postMessage(null,[C])},u.byteLength===2&&(f(u),u.byteLength===0&&(E=f)))}catch{}i.exports=E},4055:function(i,l,t){var s=t(44576),a=t(20034),u=s.document,f=a(u)&&a(u.createElement);i.exports=function(h){return f?u.createElement(h):{}}},96837:function(i){var l=TypeError;i.exports=function(t){if(t>9007199254740991)throw l("Maximum allowed index exceeded");return t}},55002:function(i){i.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},67400:function(i){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},79296:function(i,l,t){var s=t(4055)("span").classList,a=s&&s.constructor&&s.constructor.prototype;i.exports=a===Object.prototype?void 0:a},88727:function(i){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},13709:function(i,l,t){var s=t(82839).match(/firefox\/(\d+)/i);i.exports=!!s&&+s[1]},13763:function(i,l,t){var s=t(82839);i.exports=/MSIE|Trident/.test(s)},44265:function(i,l,t){var s=t(82839);i.exports=/ipad|iphone|ipod/i.test(s)&&typeof Pebble<"u"},89544:function(i,l,t){var s=t(82839);i.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(s)},38574:function(i,l,t){var s=t(84215);i.exports=s==="NODE"},7860:function(i,l,t){var s=t(82839);i.exports=/web0s(?!.*chrome)/i.test(s)},82839:function(i,l,t){var s=t(44576).navigator,a=s&&s.userAgent;i.exports=a?String(a):""},39519:function(i,l,t){var s,a,u=t(44576),f=t(82839),h=u.process,A=u.Deno,g=h&&h.versions||A&&A.version,p=g&&g.v8;p&&(a=(s=p.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!a&&f&&(!(s=f.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=f.match(/Chrome\/(\d+)/))&&(a=+s[1]),i.exports=a},3607:function(i,l,t){var s=t(82839).match(/AppleWebKit\/(\d+)\./);i.exports=!!s&&+s[1]},84215:function(i,l,t){var s=t(44576),a=t(82839),u=t(22195),f=function(h){return a.slice(0,h.length)===h};i.exports=f("Bun/")?"BUN":f("Cloudflare-Workers")?"CLOUDFLARE":f("Deno/")?"DENO":f("Node.js/")?"NODE":s.Bun&&typeof Bun.version=="string"?"BUN":s.Deno&&typeof Deno.version=="object"?"DENO":u(s.process)==="process"?"NODE":s.window&&s.document?"BROWSER":"REST"},16193:function(i,l,t){var s=t(79504),a=Error,u=s("".replace),f=String(new a("zxcasd").stack),h=/\n\s*at [^:]*:[^\n]*/,A=h.test(f);i.exports=function(g,p){if(A&&typeof g=="string"&&!a.prepareStackTrace)for(;p--;)g=u(g,h,"");return g}},80747:function(i,l,t){var s=t(66699),a=t(16193),u=t(24659),f=Error.captureStackTrace;i.exports=function(h,A,g,p){u&&(f?f(h,A):s(h,"stack",a(g,p)))}},24659:function(i,l,t){var s=t(79039),a=t(6980);i.exports=!s((function(){var u=new Error("a");return!("stack"in u)||(Object.defineProperty(u,"stack",a(1,7)),u.stack!==7)}))},77536:function(i,l,t){var s=t(43724),a=t(79039),u=t(28551),f=t(32603),h=Error.prototype.toString,A=a((function(){if(s){var g=Object.create(Object.defineProperty({},"name",{get:function(){return this===g}}));if(h.call(g)!=="true")return!0}return h.call({message:1,name:2})!=="2: 1"||h.call({})!=="Error"}));i.exports=A?function(){var g=u(this),p=f(g.name,"Error"),m=f(g.message);return p?m?p+": "+m:p:m}:h},46518:function(i,l,t){var s=t(44576),a=t(77347).f,u=t(66699),f=t(36840),h=t(39433),A=t(77740),g=t(92796);i.exports=function(p,m){var y,E,C,T,w,I=p.target,L=p.global,R=p.stat;if(y=L?s:R?s[I]||h(I,{}):s[I]&&s[I].prototype)for(E in m){if(T=m[E],C=p.dontCallGetSet?(w=a(y,E))&&w.value:y[E],!g(L?E:I+(R?".":"#")+E,p.forced)&&C!==void 0){if(typeof T==typeof C)continue;A(T,C)}(p.sham||C&&C.sham)&&u(T,"sham",!0),f(y,E,T,p)}}},79039:function(i){i.exports=function(l){try{return!!l()}catch{return!0}}},89228:function(i,l,t){t(27495);var s=t(69565),a=t(36840),u=t(57323),f=t(79039),h=t(78227),A=t(66699),g=h("species"),p=RegExp.prototype;i.exports=function(m,y,E,C){var T=h(m),w=!f((function(){var B={};return B[T]=function(){return 7},""[m](B)!==7})),I=w&&!f((function(){var B=!1,P=/a/;return m==="split"&&((P={}).constructor={},P.constructor[g]=function(){return P},P.flags="",P[T]=/./[T]),P.exec=function(){return B=!0,null},P[T](""),!B}));if(!w||!I||E){var L=/./[T],R=y(T,""[m],(function(B,P,N,U,G){var W=P.exec;return W===u||W===p.exec?w&&!G?{done:!0,value:s(L,P,N,U)}:{done:!0,value:s(B,N,P,U)}:{done:!1}}));a(String.prototype,m,R[0]),a(p,T,R[1])}C&&A(p[T],"sham",!0)}},70259:function(i,l,t){var s=t(34376),a=t(26198),u=t(96837),f=t(76080),h=function(A,g,p,m,y,E,C,T){for(var w,I,L=y,R=0,B=!!C&&f(C,T);R<m;)R in p&&(w=B?B(p[R],R,g):p[R],E>0&&s(w)?(I=a(w),L=h(A,g,w,I,L,E-1)-1):(u(L+1),A[L]=w),L++),R++;return L};i.exports=h},92744:function(i,l,t){var s=t(79039);i.exports=!s((function(){return Object.isExtensible(Object.preventExtensions({}))}))},18745:function(i,l,t){var s=t(40616),a=Function.prototype,u=a.apply,f=a.call;i.exports=typeof Reflect=="object"&&Reflect.apply||(s?f.bind(u):function(){return f.apply(u,arguments)})},76080:function(i,l,t){var s=t(27476),a=t(79306),u=t(40616),f=s(s.bind);i.exports=function(h,A){return a(h),A===void 0?h:u?f(h,A):function(){return h.apply(A,arguments)}}},40616:function(i,l,t){var s=t(79039);i.exports=!s((function(){var a=(function(){}).bind();return typeof a!="function"||a.hasOwnProperty("prototype")}))},30566:function(i,l,t){var s=t(79504),a=t(79306),u=t(20034),f=t(39297),h=t(67680),A=t(40616),g=Function,p=s([].concat),m=s([].join),y={};i.exports=A?g.bind:function(E){var C=a(this),T=C.prototype,w=h(arguments,1),I=function(){var L=p(w,h(arguments));return this instanceof I?(function(R,B,P){if(!f(y,B)){for(var N=[],U=0;U<B;U++)N[U]="a["+U+"]";y[B]=g("C,a","return new C("+m(N,",")+")")}return y[B](R,P)})(C,L.length,L):C.apply(E,L)};return u(T)&&(I.prototype=T),I}},69565:function(i,l,t){var s=t(40616),a=Function.prototype.call;i.exports=s?a.bind(a):function(){return a.apply(a,arguments)}},10350:function(i,l,t){var s=t(43724),a=t(39297),u=Function.prototype,f=s&&Object.getOwnPropertyDescriptor,h=a(u,"name"),A=h&&(function(){}).name==="something",g=h&&(!s||s&&f(u,"name").configurable);i.exports={EXISTS:h,PROPER:A,CONFIGURABLE:g}},46706:function(i,l,t){var s=t(79504),a=t(79306);i.exports=function(u,f,h){try{return s(a(Object.getOwnPropertyDescriptor(u,f)[h]))}catch{}}},27476:function(i,l,t){var s=t(22195),a=t(79504);i.exports=function(u){if(s(u)==="Function")return a(u)}},79504:function(i,l,t){var s=t(40616),a=Function.prototype,u=a.call,f=s&&a.bind.bind(u,u);i.exports=s?f:function(h){return function(){return u.apply(h,arguments)}}},89429:function(i,l,t){var s=t(44576),a=t(38574);i.exports=function(u){if(a){try{return s.process.getBuiltinModule(u)}catch{}try{return Function('return require("'+u+'")')()}catch{}}}},44124:function(i,l,t){var s=t(44576);i.exports=function(a,u){var f=s[a],h=f&&f.prototype;return h&&h[u]}},97751:function(i,l,t){var s=t(44576),a=t(94901);i.exports=function(u,f){return arguments.length<2?(h=s[u],a(h)?h:void 0):s[u]&&s[u][f];var h}},1767:function(i){i.exports=function(l){return{iterator:l,next:l.next,done:!1}}},48646:function(i,l,t){var s=t(69565),a=t(28551),u=t(1767),f=t(50851);i.exports=function(h,A){A&&typeof h=="string"||a(h);var g=f(h);return u(a(g!==void 0?s(g,h):h))}},50851:function(i,l,t){var s=t(36955),a=t(55966),u=t(64117),f=t(26269),h=t(78227)("iterator");i.exports=function(A){if(!u(A))return a(A,h)||a(A,"@@iterator")||f[s(A)]}},70081:function(i,l,t){var s=t(69565),a=t(79306),u=t(28551),f=t(16823),h=t(50851),A=TypeError;i.exports=function(g,p){var m=arguments.length<2?h(g):p;if(a(m))return u(s(m,g));throw new A(f(g)+" is not iterable")}},66933:function(i,l,t){var s=t(79504),a=t(34376),u=t(94901),f=t(22195),h=t(655),A=s([].push);i.exports=function(g){if(u(g))return g;if(a(g)){for(var p=g.length,m=[],y=0;y<p;y++){var E=g[y];typeof E=="string"?A(m,E):typeof E!="number"&&f(E)!=="Number"&&f(E)!=="String"||A(m,h(E))}var C=m.length,T=!0;return function(w,I){if(T)return T=!1,I;if(a(this))return I;for(var L=0;L<C;L++)if(m[L]===w)return I}}}},55966:function(i,l,t){var s=t(79306),a=t(64117);i.exports=function(u,f){var h=u[f];return a(h)?void 0:s(h)}},83789:function(i,l,t){var s=t(79306),a=t(28551),u=t(69565),f=t(91291),h=t(1767),A="Invalid size",g=RangeError,p=TypeError,m=Math.max,y=function(E,C){this.set=E,this.size=m(C,0),this.has=s(E.has),this.keys=s(E.keys)};y.prototype={getIterator:function(){return h(a(u(this.keys,this.set)))},includes:function(E){return u(this.has,this.set,E)}},i.exports=function(E){a(E);var C=+E.size;if(C!=C)throw new p(A);var T=f(C);if(T<0)throw new g(A);return new y(E,T)}},2478:function(i,l,t){var s=t(79504),a=t(48981),u=Math.floor,f=s("".charAt),h=s("".replace),A=s("".slice),g=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,p=/\$([$&'`]|\d{1,2})/g;i.exports=function(m,y,E,C,T,w){var I=E+m.length,L=C.length,R=p;return T!==void 0&&(T=a(T),R=g),h(w,R,(function(B,P){var N;switch(f(P,0)){case"$":return"$";case"&":return m;case"`":return A(y,0,E);case"'":return A(y,I);case"<":N=T[A(P,1,-1)];break;default:var U=+P;if(U===0)return B;if(U>L){var G=u(U/10);return G===0?B:G<=L?C[G-1]===void 0?f(P,1):C[G-1]+f(P,1):B}N=C[U-1]}return N===void 0?"":N}))}},44576:function(i,l,t){var s=function(a){return a&&a.Math===Math&&a};i.exports=s(typeof globalThis=="object"&&globalThis)||s(typeof window=="object"&&window)||s(typeof self=="object"&&self)||s(typeof t.g=="object"&&t.g)||s(typeof this=="object"&&this)||(function(){return this})()||Function("return this")()},39297:function(i,l,t){var s=t(79504),a=t(48981),u=s({}.hasOwnProperty);i.exports=Object.hasOwn||function(f,h){return u(a(f),h)}},30421:function(i){i.exports={}},90757:function(i){i.exports=function(l,t){try{arguments.length===1?console.error(l):console.error(l,t)}catch{}}},20397:function(i,l,t){var s=t(97751);i.exports=s("document","documentElement")},35917:function(i,l,t){var s=t(43724),a=t(79039),u=t(4055);i.exports=!s&&!a((function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!==7}))},88490:function(i){var l=Array,t=Math.abs,s=Math.pow,a=Math.floor,u=Math.log,f=Math.LN2;i.exports={pack:function(h,A,g){var p,m,y,E=l(g),C=8*g-A-1,T=(1<<C)-1,w=T>>1,I=A===23?s(2,-24)-s(2,-77):0,L=h<0||h===0&&1/h<0?1:0,R=0;for((h=t(h))!=h||h===1/0?(m=h!=h?1:0,p=T):(p=a(u(h)/f),h*(y=s(2,-p))<1&&(p--,y*=2),(h+=p+w>=1?I/y:I*s(2,1-w))*y>=2&&(p++,y/=2),p+w>=T?(m=0,p=T):p+w>=1?(m=(h*y-1)*s(2,A),p+=w):(m=h*s(2,w-1)*s(2,A),p=0));A>=8;)E[R++]=255&m,m/=256,A-=8;for(p=p<<A|m,C+=A;C>0;)E[R++]=255&p,p/=256,C-=8;return E[R-1]|=128*L,E},unpack:function(h,A){var g,p=h.length,m=8*p-A-1,y=(1<<m)-1,E=y>>1,C=m-7,T=p-1,w=h[T--],I=127&w;for(w>>=7;C>0;)I=256*I+h[T--],C-=8;for(g=I&(1<<-C)-1,I>>=-C,C+=A;C>0;)g=256*g+h[T--],C-=8;if(I===0)I=1-E;else{if(I===y)return g?NaN:w?-1/0:1/0;g+=s(2,A),I-=E}return(w?-1:1)*g*s(2,I-A)}}},47055:function(i,l,t){var s=t(79504),a=t(79039),u=t(22195),f=Object,h=s("".split);i.exports=a((function(){return!f("z").propertyIsEnumerable(0)}))?function(A){return u(A)==="String"?h(A,""):f(A)}:f},23167:function(i,l,t){var s=t(94901),a=t(20034),u=t(52967);i.exports=function(f,h,A){var g,p;return u&&s(g=h.constructor)&&g!==A&&a(p=g.prototype)&&p!==A.prototype&&u(f,p),f}},33706:function(i,l,t){var s=t(79504),a=t(94901),u=t(77629),f=s(Function.toString);a(u.inspectSource)||(u.inspectSource=function(h){return f(h)}),i.exports=u.inspectSource},77584:function(i,l,t){var s=t(20034),a=t(66699);i.exports=function(u,f){s(f)&&"cause"in f&&a(u,"cause",f.cause)}},3451:function(i,l,t){var s=t(46518),a=t(79504),u=t(30421),f=t(20034),h=t(39297),A=t(24913).f,g=t(38480),p=t(10298),m=t(34124),y=t(33392),E=t(92744),C=!1,T=y("meta"),w=0,I=function(R){A(R,T,{value:{objectID:"O"+w++,weakData:{}}})},L=i.exports={enable:function(){L.enable=function(){},C=!0;var R=g.f,B=a([].splice),P={};P[T]=1,R(P).length&&(g.f=function(N){for(var U=R(N),G=0,W=U.length;G<W;G++)if(U[G]===T){B(U,G,1);break}return U},s({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:p.f}))},fastKey:function(R,B){if(!f(R))return typeof R=="symbol"?R:(typeof R=="string"?"S":"P")+R;if(!h(R,T)){if(!m(R))return"F";if(!B)return"E";I(R)}return R[T].objectID},getWeakData:function(R,B){if(!h(R,T)){if(!m(R))return!0;if(!B)return!1;I(R)}return R[T].weakData},onFreeze:function(R){return E&&C&&m(R)&&!h(R,T)&&I(R),R}};u[T]=!0},91181:function(i,l,t){var s,a,u,f=t(58622),h=t(44576),A=t(20034),g=t(66699),p=t(39297),m=t(77629),y=t(66119),E=t(30421),C="Object already initialized",T=h.TypeError,w=h.WeakMap;if(f||m.state){var I=m.state||(m.state=new w);I.get=I.get,I.has=I.has,I.set=I.set,s=function(R,B){if(I.has(R))throw new T(C);return B.facade=R,I.set(R,B),B},a=function(R){return I.get(R)||{}},u=function(R){return I.has(R)}}else{var L=y("state");E[L]=!0,s=function(R,B){if(p(R,L))throw new T(C);return B.facade=R,g(R,L,B),B},a=function(R){return p(R,L)?R[L]:{}},u=function(R){return p(R,L)}}i.exports={set:s,get:a,has:u,enforce:function(R){return u(R)?a(R):s(R,{})},getterFor:function(R){return function(B){var P;if(!A(B)||(P=a(B)).type!==R)throw new T("Incompatible receiver, "+R+" required");return P}}}},44209:function(i,l,t){var s=t(78227),a=t(26269),u=s("iterator"),f=Array.prototype;i.exports=function(h){return h!==void 0&&(a.Array===h||f[u]===h)}},34376:function(i,l,t){var s=t(22195);i.exports=Array.isArray||function(a){return s(a)==="Array"}},18727:function(i,l,t){var s=t(36955);i.exports=function(a){var u=s(a);return u==="BigInt64Array"||u==="BigUint64Array"}},94901:function(i){var l=typeof document=="object"&&document.all;i.exports=l===void 0&&l!==void 0?function(t){return typeof t=="function"||t===l}:function(t){return typeof t=="function"}},33517:function(i,l,t){var s=t(79504),a=t(79039),u=t(94901),f=t(36955),h=t(97751),A=t(33706),g=function(){},p=h("Reflect","construct"),m=/^\s*(?:class|function)\b/,y=s(m.exec),E=!m.test(g),C=function(w){if(!u(w))return!1;try{return p(g,[],w),!0}catch{return!1}},T=function(w){if(!u(w))return!1;switch(f(w)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return E||!!y(m,A(w))}catch{return!0}};T.sham=!0,i.exports=!p||a((function(){var w;return C(C.call)||!C(Object)||!C((function(){w=!0}))||w}))?T:C},16575:function(i,l,t){var s=t(39297);i.exports=function(a){return a!==void 0&&(s(a,"value")||s(a,"writable"))}},92796:function(i,l,t){var s=t(79039),a=t(94901),u=/#|\.prototype\./,f=function(m,y){var E=A[h(m)];return E===p||E!==g&&(a(y)?s(y):!!y)},h=f.normalize=function(m){return String(m).replace(u,".").toLowerCase()},A=f.data={},g=f.NATIVE="N",p=f.POLYFILL="P";i.exports=f},2087:function(i,l,t){var s=t(20034),a=Math.floor;i.exports=Number.isInteger||function(u){return!s(u)&&isFinite(u)&&a(u)===u}},64117:function(i){i.exports=function(l){return l==null}},20034:function(i,l,t){var s=t(94901);i.exports=function(a){return typeof a=="object"?a!==null:s(a)}},13925:function(i,l,t){var s=t(20034);i.exports=function(a){return s(a)||a===null}},96395:function(i){i.exports=!1},60788:function(i,l,t){var s=t(20034),a=t(22195),u=t(78227)("match");i.exports=function(f){var h;return s(f)&&((h=f[u])!==void 0?!!h:a(f)==="RegExp")}},10757:function(i,l,t){var s=t(97751),a=t(94901),u=t(1625),f=t(7040),h=Object;i.exports=f?function(A){return typeof A=="symbol"}:function(A){var g=s("Symbol");return a(g)&&u(g.prototype,h(A))}},40507:function(i,l,t){var s=t(69565);i.exports=function(a,u,f){for(var h,A,g=f?a:a.iterator,p=a.next;!(h=s(p,g)).done;)if((A=u(h.value))!==void 0)return A}},72652:function(i,l,t){var s=t(76080),a=t(69565),u=t(28551),f=t(16823),h=t(44209),A=t(26198),g=t(1625),p=t(70081),m=t(50851),y=t(9539),E=TypeError,C=function(w,I){this.stopped=w,this.result=I},T=C.prototype;i.exports=function(w,I,L){var R,B,P,N,U,G,W,K=L&&L.that,M=!(!L||!L.AS_ENTRIES),Q=!(!L||!L.IS_RECORD),Z=!(!L||!L.IS_ITERATOR),J=!(!L||!L.INTERRUPTED),q=s(I,K),te=function(Ee){return R&&y(R,"normal",Ee),new C(!0,Ee)},fe=function(Ee){return M?(u(Ee),J?q(Ee[0],Ee[1],te):q(Ee[0],Ee[1])):J?q(Ee,te):q(Ee)};if(Q)R=w.iterator;else if(Z)R=w;else{if(!(B=m(w)))throw new E(f(w)+" is not iterable");if(h(B)){for(P=0,N=A(w);N>P;P++)if((U=fe(w[P]))&&g(T,U))return U;return new C(!1)}R=p(w,B)}for(G=Q?w.next:R.next;!(W=a(G,R)).done;){try{U=fe(W.value)}catch(Ee){y(R,"throw",Ee)}if(typeof U=="object"&&U&&g(T,U))return U}return new C(!1)}},9539:function(i,l,t){var s=t(69565),a=t(28551),u=t(55966);i.exports=function(f,h,A){var g,p;a(f);try{if(!(g=u(f,"return"))){if(h==="throw")throw A;return A}g=s(g,f)}catch(m){p=!0,g=m}if(h==="throw")throw A;if(p)throw g;return a(g),A}},33994:function(i,l,t){var s=t(57657).IteratorPrototype,a=t(2360),u=t(6980),f=t(10687),h=t(26269),A=function(){return this};i.exports=function(g,p,m,y){var E=p+" Iterator";return g.prototype=a(s,{next:u(+!y,m)}),f(g,E,!1,!0),h[E]=A,g}},19462:function(i,l,t){var s=t(69565),a=t(2360),u=t(66699),f=t(56279),h=t(78227),A=t(91181),g=t(55966),p=t(57657).IteratorPrototype,m=t(62529),y=t(9539),E=h("toStringTag"),C="IteratorHelper",T="WrapForValidIterator",w=A.set,I=function(B){var P=A.getterFor(B?T:C);return f(a(p),{next:function(){var N=P(this);if(B)return N.nextHandler();if(N.done)return m(void 0,!0);try{var U=N.nextHandler();return N.returnHandlerResult?U:m(U,N.done)}catch(G){throw N.done=!0,G}},return:function(){var N=P(this),U=N.iterator;if(N.done=!0,B){var G=g(U,"return");return G?s(G,U):m(void 0,!0)}if(N.inner)try{y(N.inner.iterator,"normal")}catch(W){return y(U,"throw",W)}return U&&y(U,"normal"),m(void 0,!0)}})},L=I(!0),R=I(!1);u(R,E,"Iterator Helper"),i.exports=function(B,P,N){var U=function(G,W){W?(W.iterator=G.iterator,W.next=G.next):W=G,W.type=P?T:C,W.returnHandlerResult=!!N,W.nextHandler=B,W.counter=0,W.done=!1,w(this,W)};return U.prototype=P?L:R,U}},51088:function(i,l,t){var s=t(46518),a=t(69565),u=t(96395),f=t(10350),h=t(94901),A=t(33994),g=t(42787),p=t(52967),m=t(10687),y=t(66699),E=t(36840),C=t(78227),T=t(26269),w=t(57657),I=f.PROPER,L=f.CONFIGURABLE,R=w.IteratorPrototype,B=w.BUGGY_SAFARI_ITERATORS,P=C("iterator"),N="keys",U="values",G="entries",W=function(){return this};i.exports=function(K,M,Q,Z,J,q,te){A(Q,M,Z);var fe,Ee,Ae,Ce=function(it){if(it===J&&Ve)return Ve;if(!B&&it&&it in Be)return Be[it];switch(it){case N:case U:case G:return function(){return new Q(this,it)}}return function(){return new Q(this)}},Oe=M+" Iterator",Ne=!1,Be=K.prototype,Ge=Be[P]||Be["@@iterator"]||J&&Be[J],Ve=!B&&Ge||Ce(J),$e=M==="Array"&&Be.entries||Ge;if($e&&(fe=g($e.call(new K)))!==Object.prototype&&fe.next&&(u||g(fe)===R||(p?p(fe,R):h(fe[P])||E(fe,P,W)),m(fe,Oe,!0,!0),u&&(T[Oe]=W)),I&&J===U&&Ge&&Ge.name!==U&&(!u&&L?y(Be,"name",U):(Ne=!0,Ve=function(){return a(Ge,this)})),J)if(Ee={values:Ce(U),keys:q?Ve:Ce(N),entries:Ce(G)},te)for(Ae in Ee)(B||Ne||!(Ae in Be))&&E(Be,Ae,Ee[Ae]);else s({target:M,proto:!0,forced:B||Ne},Ee);return u&&!te||Be[P]===Ve||E(Be,P,Ve,{name:J}),T[M]=Ve,Ee}},20713:function(i,l,t){var s=t(69565),a=t(79306),u=t(28551),f=t(1767),h=t(19462),A=t(96319),g=h((function(){var p=this.iterator,m=u(s(this.next,p));if(!(this.done=!!m.done))return A(p,this.mapper,[m.value,this.counter++],!0)}));i.exports=function(p){return u(this),a(p),new g(f(this),{mapper:p})}},57657:function(i,l,t){var s,a,u,f=t(79039),h=t(94901),A=t(20034),g=t(2360),p=t(42787),m=t(36840),y=t(78227),E=t(96395),C=y("iterator"),T=!1;[].keys&&("next"in(u=[].keys())?(a=p(p(u)))!==Object.prototype&&(s=a):T=!0),!A(s)||f((function(){var w={};return s[C].call(w)!==w}))?s={}:E&&(s=g(s)),h(s[C])||m(s,C,(function(){return this})),i.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:T}},26269:function(i){i.exports={}},26198:function(i,l,t){var s=t(18014);i.exports=function(a){return s(a.length)}},50283:function(i,l,t){var s=t(79504),a=t(79039),u=t(94901),f=t(39297),h=t(43724),A=t(10350).CONFIGURABLE,g=t(33706),p=t(91181),m=p.enforce,y=p.get,E=String,C=Object.defineProperty,T=s("".slice),w=s("".replace),I=s([].join),L=h&&!a((function(){return C((function(){}),"length",{value:8}).length!==8})),R=String(String).split("String"),B=i.exports=function(P,N,U){T(E(N),0,7)==="Symbol("&&(N="["+w(E(N),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),U&&U.getter&&(N="get "+N),U&&U.setter&&(N="set "+N),(!f(P,"name")||A&&P.name!==N)&&(h?C(P,"name",{value:N,configurable:!0}):P.name=N),L&&U&&f(U,"arity")&&P.length!==U.arity&&C(P,"length",{value:U.arity});try{U&&f(U,"constructor")&&U.constructor?h&&C(P,"prototype",{writable:!1}):P.prototype&&(P.prototype=void 0)}catch{}var G=m(P);return f(G,"source")||(G.source=I(R,typeof N=="string"?N:"")),P};Function.prototype.toString=B((function(){return u(this)&&y(this).source||g(this)}),"toString")},72248:function(i,l,t){var s=t(79504),a=Map.prototype;i.exports={Map,set:s(a.set),get:s(a.get),has:s(a.has),remove:s(a.delete),proto:a}},53250:function(i){var l=Math.expm1,t=Math.exp;i.exports=!l||l(10)>22025.465794806718||l(10)<22025.465794806718||l(-2e-17)!==-2e-17?function(s){var a=+s;return a===0?a:a>-1e-6&&a<1e-6?a+a*a/2:t(a)-1}:l},33164:function(i,l,t){var s=t(77782),a=t(53602),u=Math.abs;i.exports=function(f,h,A,g){var p=+f,m=u(p),y=s(p);if(m<g)return y*a(m/g/h)*g*h;var E=(1+h/2220446049250313e-31)*m,C=E-(E-m);return C>A||C!=C?y*(1/0):y*C}},15617:function(i,l,t){var s=t(33164);i.exports=Math.fround||function(a){return s(a,11920928955078125e-23,34028234663852886e22,11754943508222875e-54)}},49340:function(i){var l=Math.log,t=Math.LOG10E;i.exports=Math.log10||function(s){return l(s)*t}},7740:function(i){var l=Math.log;i.exports=Math.log1p||function(t){var s=+t;return s>-1e-8&&s<1e-8?s-s*s/2:l(1+s)}},67787:function(i){var l=Math.log,t=Math.LN2;i.exports=Math.log2||function(s){return l(s)/t}},53602:function(i){var l=4503599627370496;i.exports=function(t){return t+l-l}},77782:function(i){i.exports=Math.sign||function(l){var t=+l;return t===0||t!=t?t:t<0?-1:1}},80741:function(i){var l=Math.ceil,t=Math.floor;i.exports=Math.trunc||function(s){var a=+s;return(a>0?t:l)(a)}},91955:function(i,l,t){var s,a,u,f,h,A=t(44576),g=t(93389),p=t(76080),m=t(59225).set,y=t(18265),E=t(89544),C=t(44265),T=t(7860),w=t(38574),I=A.MutationObserver||A.WebKitMutationObserver,L=A.document,R=A.process,B=A.Promise,P=g("queueMicrotask");if(!P){var N=new y,U=function(){var G,W;for(w&&(G=R.domain)&&G.exit();W=N.get();)try{W()}catch(K){throw N.head&&s(),K}G&&G.enter()};E||w||T||!I||!L?!C&&B&&B.resolve?((f=B.resolve(void 0)).constructor=B,h=p(f.then,f),s=function(){h(U)}):w?s=function(){R.nextTick(U)}:(m=p(m,A),s=function(){m(U)}):(a=!0,u=L.createTextNode(""),new I(U).observe(u,{characterData:!0}),s=function(){u.data=a=!a}),P=function(G){N.head||s(),N.add(G)}}i.exports=P},36043:function(i,l,t){var s=t(79306),a=TypeError,u=function(f){var h,A;this.promise=new f((function(g,p){if(h!==void 0||A!==void 0)throw new a("Bad Promise constructor");h=g,A=p})),this.resolve=s(h),this.reject=s(A)};i.exports.f=function(f){return new u(f)}},32603:function(i,l,t){var s=t(655);i.exports=function(a,u){return a===void 0?arguments.length<2?"":u:s(a)}},24149:function(i){var l=RangeError;i.exports=function(t){if(t==t)return t;throw new l("NaN is not allowed")}},60511:function(i,l,t){var s=t(60788),a=TypeError;i.exports=function(u){if(s(u))throw new a("The method doesn't accept regular expressions");return u}},50360:function(i,l,t){var s=t(44576).isFinite;i.exports=Number.isFinite||function(a){return typeof a=="number"&&s(a)}},33904:function(i,l,t){var s=t(44576),a=t(79039),u=t(79504),f=t(655),h=t(43802).trim,A=t(47452),g=u("".charAt),p=s.parseFloat,m=s.Symbol,y=m&&m.iterator,E=1/p(A+"-0")!=-1/0||y&&!a((function(){p(Object(y))}));i.exports=E?function(C){var T=h(f(C)),w=p(T);return w===0&&g(T,0)==="-"?-0:w}:p},52703:function(i,l,t){var s=t(44576),a=t(79039),u=t(79504),f=t(655),h=t(43802).trim,A=t(47452),g=s.parseInt,p=s.Symbol,m=p&&p.iterator,y=/^[+-]?0x/i,E=u(y.exec),C=g(A+"08")!==8||g(A+"0x16")!==22||m&&!a((function(){g(Object(m))}));i.exports=C?function(T,w){var I=h(f(T));return g(I,w>>>0||(E(y,I)?16:10))}:g},44213:function(i,l,t){var s=t(43724),a=t(79504),u=t(69565),f=t(79039),h=t(71072),A=t(33717),g=t(48773),p=t(48981),m=t(47055),y=Object.assign,E=Object.defineProperty,C=a([].concat);i.exports=!y||f((function(){if(s&&y({b:1},y(E({},"a",{enumerable:!0,get:function(){E(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var T={},w={},I=Symbol("assign detection"),L="abcdefghijklmnopqrst";return T[I]=7,L.split("").forEach((function(R){w[R]=R})),y({},T)[I]!==7||h(y({},w)).join("")!==L}))?function(T,w){for(var I=p(T),L=arguments.length,R=1,B=A.f,P=g.f;L>R;)for(var N,U=m(arguments[R++]),G=B?C(h(U),B(U)):h(U),W=G.length,K=0;W>K;)N=G[K++],s&&!u(P,U,N)||(I[N]=U[N]);return I}:y},2360:function(i,l,t){var s,a=t(28551),u=t(96801),f=t(88727),h=t(30421),A=t(20397),g=t(4055),p=t(66119),m="prototype",y="script",E=p("IE_PROTO"),C=function(){},T=function(L){return"<"+y+">"+L+"</"+y+">"},w=function(L){L.write(T("")),L.close();var R=L.parentWindow.Object;return L=null,R},I=function(){try{s=new ActiveXObject("htmlfile")}catch{}var L,R,B;I=typeof document<"u"?document.domain&&s?w(s):(R=g("iframe"),B="java"+y+":",R.style.display="none",A.appendChild(R),R.src=String(B),(L=R.contentWindow.document).open(),L.write(T("document.F=Object")),L.close(),L.F):w(s);for(var P=f.length;P--;)delete I[m][f[P]];return I()};h[E]=!0,i.exports=Object.create||function(L,R){var B;return L!==null?(C[m]=a(L),B=new C,C[m]=null,B[E]=L):B=I(),R===void 0?B:u.f(B,R)}},96801:function(i,l,t){var s=t(43724),a=t(48686),u=t(24913),f=t(28551),h=t(25397),A=t(71072);l.f=s&&!a?Object.defineProperties:function(g,p){f(g);for(var m,y=h(p),E=A(p),C=E.length,T=0;C>T;)u.f(g,m=E[T++],y[m]);return g}},24913:function(i,l,t){var s=t(43724),a=t(35917),u=t(48686),f=t(28551),h=t(56969),A=TypeError,g=Object.defineProperty,p=Object.getOwnPropertyDescriptor,m="enumerable",y="configurable",E="writable";l.f=s?u?function(C,T,w){if(f(C),T=h(T),f(w),typeof C=="function"&&T==="prototype"&&"value"in w&&E in w&&!w[E]){var I=p(C,T);I&&I[E]&&(C[T]=w.value,w={configurable:y in w?w[y]:I[y],enumerable:m in w?w[m]:I[m],writable:!1})}return g(C,T,w)}:g:function(C,T,w){if(f(C),T=h(T),f(w),a)try{return g(C,T,w)}catch{}if("get"in w||"set"in w)throw new A("Accessors not supported");return"value"in w&&(C[T]=w.value),C}},77347:function(i,l,t){var s=t(43724),a=t(69565),u=t(48773),f=t(6980),h=t(25397),A=t(56969),g=t(39297),p=t(35917),m=Object.getOwnPropertyDescriptor;l.f=s?m:function(y,E){if(y=h(y),E=A(E),p)try{return m(y,E)}catch{}if(g(y,E))return f(!a(u.f,y,E),y[E])}},10298:function(i,l,t){var s=t(22195),a=t(25397),u=t(38480).f,f=t(67680),h=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];i.exports.f=function(A){return h&&s(A)==="Window"?(function(g){try{return u(g)}catch{return f(h)}})(A):u(a(A))}},38480:function(i,l,t){var s=t(61828),a=t(88727).concat("length","prototype");l.f=Object.getOwnPropertyNames||function(u){return s(u,a)}},33717:function(i,l){l.f=Object.getOwnPropertySymbols},42787:function(i,l,t){var s=t(39297),a=t(94901),u=t(48981),f=t(66119),h=t(12211),A=f("IE_PROTO"),g=Object,p=g.prototype;i.exports=h?g.getPrototypeOf:function(m){var y=u(m);if(s(y,A))return y[A];var E=y.constructor;return a(E)&&y instanceof E?E.prototype:y instanceof g?p:null}},34124:function(i,l,t){var s=t(79039),a=t(20034),u=t(22195),f=t(15652),h=Object.isExtensible,A=s((function(){}));i.exports=A||f?function(g){return!!a(g)&&(!f||u(g)!=="ArrayBuffer")&&(!h||h(g))}:h},1625:function(i,l,t){var s=t(79504);i.exports=s({}.isPrototypeOf)},61828:function(i,l,t){var s=t(79504),a=t(39297),u=t(25397),f=t(19617).indexOf,h=t(30421),A=s([].push);i.exports=function(g,p){var m,y=u(g),E=0,C=[];for(m in y)!a(h,m)&&a(y,m)&&A(C,m);for(;p.length>E;)a(y,m=p[E++])&&(~f(C,m)||A(C,m));return C}},71072:function(i,l,t){var s=t(61828),a=t(88727);i.exports=Object.keys||function(u){return s(u,a)}},48773:function(i,l){var t={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,a=s&&!t.call({1:2},1);l.f=a?function(u){var f=s(this,u);return!!f&&f.enumerable}:t},42551:function(i,l,t){var s=t(96395),a=t(44576),u=t(79039),f=t(3607);i.exports=s||!u((function(){if(!(f&&f<535)){var h=Math.random();__defineSetter__.call(null,h,(function(){})),delete a[h]}}))},52967:function(i,l,t){var s=t(46706),a=t(20034),u=t(67750),f=t(73506);i.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var h,A=!1,g={};try{(h=s(Object.prototype,"__proto__","set"))(g,[]),A=g instanceof Array}catch{}return function(p,m){return u(p),f(m),a(p)&&(A?h(p,m):p.__proto__=m),p}})():void 0)},32357:function(i,l,t){var s=t(43724),a=t(79039),u=t(79504),f=t(42787),h=t(71072),A=t(25397),g=u(t(48773).f),p=u([].push),m=s&&a((function(){var E=Object.create(null);return E[2]=2,!g(E,2)})),y=function(E){return function(C){for(var T,w=A(C),I=h(w),L=m&&f(w)===null,R=I.length,B=0,P=[];R>B;)T=I[B++],s&&!(L?T in w:g(w,T))||p(P,E?[T,w[T]]:w[T]);return P}};i.exports={entries:y(!0),values:y(!1)}},53179:function(i,l,t){var s=t(92140),a=t(36955);i.exports=s?{}.toString:function(){return"[object "+a(this)+"]"}},84270:function(i,l,t){var s=t(69565),a=t(94901),u=t(20034),f=TypeError;i.exports=function(h,A){var g,p;if(A==="string"&&a(g=h.toString)&&!u(p=s(g,h))||a(g=h.valueOf)&&!u(p=s(g,h))||A!=="string"&&a(g=h.toString)&&!u(p=s(g,h)))return p;throw new f("Can't convert object to primitive value")}},35031:function(i,l,t){var s=t(97751),a=t(79504),u=t(38480),f=t(33717),h=t(28551),A=a([].concat);i.exports=s("Reflect","ownKeys")||function(g){var p=u.f(h(g)),m=f.f;return m?A(p,m(g)):p}},19167:function(i,l,t){var s=t(44576);i.exports=s},1103:function(i){i.exports=function(l){try{return{error:!1,value:l()}}catch(t){return{error:!0,value:t}}}},10916:function(i,l,t){var s=t(44576),a=t(80550),u=t(94901),f=t(92796),h=t(33706),A=t(78227),g=t(84215),p=t(96395),m=t(39519),y=a&&a.prototype,E=A("species"),C=!1,T=u(s.PromiseRejectionEvent),w=f("Promise",(function(){var I=h(a),L=I!==String(a);if(!L&&m===66||p&&(!y.catch||!y.finally))return!0;if(!m||m<51||!/native code/.test(I)){var R=new a((function(P){P(1)})),B=function(P){P((function(){}),(function(){}))};if((R.constructor={})[E]=B,!(C=R.then((function(){}))instanceof B))return!0}return!(L||g!=="BROWSER"&&g!=="DENO"||T)}));i.exports={CONSTRUCTOR:w,REJECTION_EVENT:T,SUBCLASSING:C}},80550:function(i,l,t){var s=t(44576);i.exports=s.Promise},93438:function(i,l,t){var s=t(28551),a=t(20034),u=t(36043);i.exports=function(f,h){if(s(f),a(h)&&h.constructor===f)return h;var A=u.f(f);return(0,A.resolve)(h),A.promise}},90537:function(i,l,t){var s=t(80550),a=t(84428),u=t(10916).CONSTRUCTOR;i.exports=u||!a((function(f){s.all(f).then(void 0,(function(){}))}))},11056:function(i,l,t){var s=t(24913).f;i.exports=function(a,u,f){f in a||s(a,f,{configurable:!0,get:function(){return u[f]},set:function(h){u[f]=h}})}},18265:function(i){var l=function(){this.head=null,this.tail=null};l.prototype={add:function(t){var s={item:t,next:null},a=this.tail;a?a.next=s:this.head=s,this.tail=s},get:function(){var t=this.head;if(t)return(this.head=t.next)===null&&(this.tail=null),t.item}},i.exports=l},56682:function(i,l,t){var s=t(69565),a=t(28551),u=t(94901),f=t(22195),h=t(57323),A=TypeError;i.exports=function(g,p){var m=g.exec;if(u(m)){var y=s(m,g,p);return y!==null&&a(y),y}if(f(g)==="RegExp")return s(h,g,p);throw new A("RegExp#exec called on incompatible receiver")}},57323:function(i,l,t){var s,a,u=t(69565),f=t(79504),h=t(655),A=t(67979),g=t(58429),p=t(25745),m=t(2360),y=t(91181).get,E=t(83635),C=t(18814),T=p("native-string-replace",String.prototype.replace),w=RegExp.prototype.exec,I=w,L=f("".charAt),R=f("".indexOf),B=f("".replace),P=f("".slice),N=(a=/b*/g,u(w,s=/a/,"a"),u(w,a,"a"),s.lastIndex!==0||a.lastIndex!==0),U=g.BROKEN_CARET,G=/()??/.exec("")[1]!==void 0;(N||G||U||E||C)&&(I=function(W){var K,M,Q,Z,J,q,te,fe=this,Ee=y(fe),Ae=h(W),Ce=Ee.raw;if(Ce)return Ce.lastIndex=fe.lastIndex,K=u(I,Ce,Ae),fe.lastIndex=Ce.lastIndex,K;var Oe=Ee.groups,Ne=U&&fe.sticky,Be=u(A,fe),Ge=fe.source,Ve=0,$e=Ae;if(Ne&&(Be=B(Be,"y",""),R(Be,"g")===-1&&(Be+="g"),$e=P(Ae,fe.lastIndex),fe.lastIndex>0&&(!fe.multiline||fe.multiline&&L(Ae,fe.lastIndex-1)!==`
`)&&(Ge="(?: "+Ge+")",$e=" "+$e,Ve++),M=new RegExp("^(?:"+Ge+")",Be)),G&&(M=new RegExp("^"+Ge+"$(?!\\s)",Be)),N&&(Q=fe.lastIndex),Z=u(w,Ne?M:fe,$e),Ne?Z?(Z.input=P(Z.input,Ve),Z[0]=P(Z[0],Ve),Z.index=fe.lastIndex,fe.lastIndex+=Z[0].length):fe.lastIndex=0:N&&Z&&(fe.lastIndex=fe.global?Z.index+Z[0].length:Q),G&&Z&&Z.length>1&&u(T,Z[0],M,(function(){for(J=1;J<arguments.length-2;J++)arguments[J]===void 0&&(Z[J]=void 0)})),Z&&Oe)for(Z.groups=q=m(null),J=0;J<Oe.length;J++)q[(te=Oe[J])[0]]=Z[te[1]];return Z}),i.exports=I},67979:function(i,l,t){var s=t(28551);i.exports=function(){var a=s(this),u="";return a.hasIndices&&(u+="d"),a.global&&(u+="g"),a.ignoreCase&&(u+="i"),a.multiline&&(u+="m"),a.dotAll&&(u+="s"),a.unicode&&(u+="u"),a.unicodeSets&&(u+="v"),a.sticky&&(u+="y"),u}},61034:function(i,l,t){var s=t(69565),a=t(39297),u=t(1625),f=t(67979),h=RegExp.prototype;i.exports=function(A){var g=A.flags;return g!==void 0||"flags"in h||a(A,"flags")||!u(h,A)?g:s(f,A)}},58429:function(i,l,t){var s=t(79039),a=t(44576).RegExp,u=s((function(){var A=a("a","y");return A.lastIndex=2,A.exec("abcd")!==null})),f=u||s((function(){return!a("a","y").sticky})),h=u||s((function(){var A=a("^r","gy");return A.lastIndex=2,A.exec("str")!==null}));i.exports={BROKEN_CARET:h,MISSED_STICKY:f,UNSUPPORTED_Y:u}},83635:function(i,l,t){var s=t(79039),a=t(44576).RegExp;i.exports=s((function(){var u=a(".","s");return!(u.dotAll&&u.test(`
`)&&u.flags==="s")}))},18814:function(i,l,t){var s=t(79039),a=t(44576).RegExp;i.exports=s((function(){var u=a("(?<a>b)","g");return u.exec("b").groups.a!=="b"||"b".replace(u,"$<a>c")!=="bc"}))},67750:function(i,l,t){var s=t(64117),a=TypeError;i.exports=function(u){if(s(u))throw new a("Can't call method on "+u);return u}},93389:function(i,l,t){var s=t(44576),a=t(43724),u=Object.getOwnPropertyDescriptor;i.exports=function(f){if(!a)return s[f];var h=u(s,f);return h&&h.value}},3470:function(i){i.exports=Object.is||function(l,t){return l===t?l!==0||1/l==1/t:l!=l&&t!=t}},79472:function(i,l,t){var s,a=t(44576),u=t(18745),f=t(94901),h=t(84215),A=t(82839),g=t(67680),p=t(22812),m=a.Function,y=/MSIE .\./.test(A)||h==="BUN"&&((s=a.Bun.version.split(".")).length<3||s[0]==="0"&&(s[1]<3||s[1]==="3"&&s[2]==="0"));i.exports=function(E,C){var T=C?2:1;return y?function(w,I){var L=p(arguments.length,1)>T,R=f(w)?w:m(w),B=L?g(arguments,T):[],P=L?function(){u(R,this,B)}:R;return C?E(P,I):E(P)}:E}},89286:function(i,l,t){var s=t(94402),a=t(38469),u=s.Set,f=s.add;i.exports=function(h){var A=new u;return a(h,(function(g){f(A,g)})),A}},83440:function(i,l,t){var s=t(97080),a=t(94402),u=t(89286),f=t(25170),h=t(83789),A=t(38469),g=t(40507),p=a.has,m=a.remove;i.exports=function(y){var E=s(this),C=h(y),T=u(E);return f(E)<=C.size?A(E,(function(w){C.includes(w)&&m(T,w)})):g(C.getIterator(),(function(w){p(E,w)&&m(T,w)})),T}},94402:function(i,l,t){var s=t(79504),a=Set.prototype;i.exports={Set,add:s(a.add),has:s(a.has),remove:s(a.delete),proto:a}},68750:function(i,l,t){var s=t(97080),a=t(94402),u=t(25170),f=t(83789),h=t(38469),A=t(40507),g=a.Set,p=a.add,m=a.has;i.exports=function(y){var E=s(this),C=f(y),T=new g;return u(E)>C.size?A(C.getIterator(),(function(w){m(E,w)&&p(T,w)})):h(E,(function(w){C.includes(w)&&p(T,w)})),T}},64449:function(i,l,t){var s=t(97080),a=t(94402).has,u=t(25170),f=t(83789),h=t(38469),A=t(40507),g=t(9539);i.exports=function(p){var m=s(this),y=f(p);if(u(m)<=y.size)return h(m,(function(C){if(y.includes(C))return!1}),!0)!==!1;var E=y.getIterator();return A(E,(function(C){if(a(m,C))return g(E,"normal",!1)}))!==!1}},53838:function(i,l,t){var s=t(97080),a=t(25170),u=t(38469),f=t(83789);i.exports=function(h){var A=s(this),g=f(h);return!(a(A)>g.size)&&u(A,(function(p){if(!g.includes(p))return!1}),!0)!==!1}},28527:function(i,l,t){var s=t(97080),a=t(94402).has,u=t(25170),f=t(83789),h=t(40507),A=t(9539);i.exports=function(g){var p=s(this),m=f(g);if(u(p)<m.size)return!1;var y=m.getIterator();return h(y,(function(E){if(!a(p,E))return A(y,"normal",!1)}))!==!1}},38469:function(i,l,t){var s=t(79504),a=t(40507),u=t(94402),f=u.Set,h=u.proto,A=s(h.forEach),g=s(h.keys),p=g(new f).next;i.exports=function(m,y,E){return E?a({iterator:g(m),next:p},y):A(m,y)}},84916:function(i,l,t){var s=t(97751),a=function(f){return{size:f,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},u=function(f){return{size:f,has:function(){return!0},keys:function(){throw new Error("e")}}};i.exports=function(f,h){var A=s("Set");try{new A()[f](a(0));try{return new A()[f](a(-1)),!1}catch{if(!h)return!0;try{return new A()[f](u(-1/0)),!1}catch{var g=new A;return g.add(1),g.add(2),h(g[f](u(1/0)))}}}catch{return!1}}},25170:function(i,l,t){var s=t(46706),a=t(94402);i.exports=s(a.proto,"size","get")||function(u){return u.size}},87633:function(i,l,t){var s=t(97751),a=t(62106),u=t(78227),f=t(43724),h=u("species");i.exports=function(A){var g=s(A);f&&g&&!g[h]&&a(g,h,{configurable:!0,get:function(){return this}})}},83650:function(i,l,t){var s=t(97080),a=t(94402),u=t(89286),f=t(83789),h=t(40507),A=a.add,g=a.has,p=a.remove;i.exports=function(m){var y=s(this),E=f(m).getIterator(),C=u(y);return h(E,(function(T){g(y,T)?p(C,T):A(C,T)})),C}},10687:function(i,l,t){var s=t(24913).f,a=t(39297),u=t(78227)("toStringTag");i.exports=function(f,h,A){f&&!A&&(f=f.prototype),f&&!a(f,u)&&s(f,u,{configurable:!0,value:h})}},44204:function(i,l,t){var s=t(97080),a=t(94402).add,u=t(89286),f=t(83789),h=t(40507);i.exports=function(A){var g=s(this),p=f(A).getIterator(),m=u(g);return h(p,(function(y){a(m,y)})),m}},66119:function(i,l,t){var s=t(25745),a=t(33392),u=s("keys");i.exports=function(f){return u[f]||(u[f]=a(f))}},77629:function(i,l,t){var s=t(96395),a=t(44576),u=t(39433),f="__core-js_shared__",h=i.exports=a[f]||u(f,{});(h.versions||(h.versions=[])).push({version:"3.40.0",mode:s?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.40.0/LICENSE",source:"https://github.com/zloirock/core-js"})},25745:function(i,l,t){var s=t(77629);i.exports=function(a,u){return s[a]||(s[a]=u||{})}},2293:function(i,l,t){var s=t(28551),a=t(35548),u=t(64117),f=t(78227)("species");i.exports=function(h,A){var g,p=s(h).constructor;return p===void 0||u(g=s(p)[f])?A:a(g)}},23061:function(i,l,t){var s=t(79039);i.exports=function(a){return s((function(){var u=""[a]('"');return u!==u.toLowerCase()||u.split('"').length>3}))}},68183:function(i,l,t){var s=t(79504),a=t(91291),u=t(655),f=t(67750),h=s("".charAt),A=s("".charCodeAt),g=s("".slice),p=function(m){return function(y,E){var C,T,w=u(f(y)),I=a(E),L=w.length;return I<0||I>=L?m?"":void 0:(C=A(w,I))<55296||C>56319||I+1===L||(T=A(w,I+1))<56320||T>57343?m?h(w,I):C:m?g(w,I,I+2):T-56320+(C-55296<<10)+65536}};i.exports={codeAt:p(!1),charAt:p(!0)}},83063:function(i,l,t){var s=t(82839);i.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(s)},60533:function(i,l,t){var s=t(79504),a=t(18014),u=t(655),f=t(72333),h=t(67750),A=s(f),g=s("".slice),p=Math.ceil,m=function(y){return function(E,C,T){var w,I,L=u(h(E)),R=a(C),B=L.length,P=T===void 0?" ":u(T);return R<=B||P===""?L:((I=A(P,p((w=R-B)/P.length))).length>w&&(I=g(I,0,w)),y?L+I:I+L)}};i.exports={start:m(!1),end:m(!0)}},3717:function(i,l,t){var s=t(79504),a=2147483647,u=/[^\0-\u007E]/,f=/[.\u3002\uFF0E\uFF61]/g,h="Overflow: input needs wider integers to process",A=RangeError,g=s(f.exec),p=Math.floor,m=String.fromCharCode,y=s("".charCodeAt),E=s([].join),C=s([].push),T=s("".replace),w=s("".split),I=s("".toLowerCase),L=function(P){return P+22+75*(P<26)},R=function(P,N,U){var G=0;for(P=U?p(P/700):P>>1,P+=p(P/N);P>455;)P=p(P/35),G+=36;return p(G+36*P/(P+38))},B=function(P){var N=[];P=(function(Ne){for(var Be=[],Ge=0,Ve=Ne.length;Ge<Ve;){var $e=y(Ne,Ge++);if($e>=55296&&$e<=56319&&Ge<Ve){var it=y(Ne,Ge++);(64512&it)==56320?C(Be,((1023&$e)<<10)+(1023&it)+65536):(C(Be,$e),Ge--)}else C(Be,$e)}return Be})(P);var U,G,W=P.length,K=128,M=0,Q=72;for(U=0;U<P.length;U++)(G=P[U])<128&&C(N,m(G));var Z=N.length,J=Z;for(Z&&C(N,"-");J<W;){var q=a;for(U=0;U<P.length;U++)(G=P[U])>=K&&G<q&&(q=G);var te=J+1;if(q-K>p((a-M)/te))throw new A(h);for(M+=(q-K)*te,K=q,U=0;U<P.length;U++){if((G=P[U])<K&&++M>a)throw new A(h);if(G===K){for(var fe=M,Ee=36;;){var Ae=Ee<=Q?1:Ee>=Q+26?26:Ee-Q;if(fe<Ae)break;var Ce=fe-Ae,Oe=36-Ae;C(N,m(L(Ae+Ce%Oe))),fe=p(Ce/Oe),Ee+=36}C(N,m(L(fe))),Q=R(M,te,J===Z),M=0,J++}}M++,K++}return E(N,"")};i.exports=function(P){var N,U,G=[],W=w(T(I(P),f,"."),".");for(N=0;N<W.length;N++)U=W[N],C(G,g(u,U)?"xn--"+B(U):U);return E(G,".")}},72333:function(i,l,t){var s=t(91291),a=t(655),u=t(67750),f=RangeError;i.exports=function(h){var A=a(u(this)),g="",p=s(h);if(p<0||p===1/0)throw new f("Wrong number of repetitions");for(;p>0;(p>>>=1)&&(A+=A))1&p&&(g+=A);return g}},18866:function(i,l,t){var s=t(43802).end,a=t(60706);i.exports=a("trimEnd")?function(){return s(this)}:"".trimEnd},60706:function(i,l,t){var s=t(10350).PROPER,a=t(79039),u=t(47452);i.exports=function(f){return a((function(){return!!u[f]()||"​᠎"[f]()!=="​᠎"||s&&u[f].name!==f}))}},53487:function(i,l,t){var s=t(43802).start,a=t(60706);i.exports=a("trimStart")?function(){return s(this)}:"".trimStart},43802:function(i,l,t){var s=t(79504),a=t(67750),u=t(655),f=t(47452),h=s("".replace),A=RegExp("^["+f+"]+"),g=RegExp("(^|[^"+f+"])["+f+"]+$"),p=function(m){return function(y){var E=u(a(y));return 1&m&&(E=h(E,A,"")),2&m&&(E=h(E,g,"$1")),E}};i.exports={start:p(1),end:p(2),trim:p(3)}},1548:function(i,l,t){var s=t(44576),a=t(79039),u=t(39519),f=t(84215),h=s.structuredClone;i.exports=!!h&&!a((function(){if(f==="DENO"&&u>92||f==="NODE"&&u>94||f==="BROWSER"&&u>97)return!1;var A=new ArrayBuffer(8),g=h(A,{transfer:[A]});return A.byteLength!==0||g.byteLength!==8}))},4495:function(i,l,t){var s=t(39519),a=t(79039),u=t(44576).String;i.exports=!!Object.getOwnPropertySymbols&&!a((function(){var f=Symbol("symbol detection");return!u(f)||!(Object(f)instanceof Symbol)||!Symbol.sham&&s&&s<41}))},58242:function(i,l,t){var s=t(69565),a=t(97751),u=t(78227),f=t(36840);i.exports=function(){var h=a("Symbol"),A=h&&h.prototype,g=A&&A.valueOf,p=u("toPrimitive");A&&!A[p]&&f(A,p,(function(m){return s(g,this)}),{arity:1})}},91296:function(i,l,t){var s=t(4495);i.exports=s&&!!Symbol.for&&!!Symbol.keyFor},59225:function(i,l,t){var s,a,u,f,h=t(44576),A=t(18745),g=t(76080),p=t(94901),m=t(39297),y=t(79039),E=t(20397),C=t(67680),T=t(4055),w=t(22812),I=t(89544),L=t(38574),R=h.setImmediate,B=h.clearImmediate,P=h.process,N=h.Dispatch,U=h.Function,G=h.MessageChannel,W=h.String,K=0,M={},Q="onreadystatechange";y((function(){s=h.location}));var Z=function(fe){if(m(M,fe)){var Ee=M[fe];delete M[fe],Ee()}},J=function(fe){return function(){Z(fe)}},q=function(fe){Z(fe.data)},te=function(fe){h.postMessage(W(fe),s.protocol+"//"+s.host)};R&&B||(R=function(fe){w(arguments.length,1);var Ee=p(fe)?fe:U(fe),Ae=C(arguments,1);return M[++K]=function(){A(Ee,void 0,Ae)},a(K),K},B=function(fe){delete M[fe]},L?a=function(fe){P.nextTick(J(fe))}:N&&N.now?a=function(fe){N.now(J(fe))}:G&&!I?(f=(u=new G).port2,u.port1.onmessage=q,a=g(f.postMessage,f)):h.addEventListener&&p(h.postMessage)&&!h.importScripts&&s&&s.protocol!=="file:"&&!y(te)?(a=te,h.addEventListener("message",q,!1)):a=Q in T("script")?function(fe){E.appendChild(T("script"))[Q]=function(){E.removeChild(this),Z(fe)}}:function(fe){setTimeout(J(fe),0)}),i.exports={set:R,clear:B}},31240:function(i,l,t){var s=t(79504);i.exports=s(1 .valueOf)},35610:function(i,l,t){var s=t(91291),a=Math.max,u=Math.min;i.exports=function(f,h){var A=s(f);return A<0?a(A+h,0):u(A,h)}},75854:function(i,l,t){var s=t(72777),a=TypeError;i.exports=function(u){var f=s(u,"number");if(typeof f=="number")throw new a("Can't convert number to bigint");return BigInt(f)}},57696:function(i,l,t){var s=t(91291),a=t(18014),u=RangeError;i.exports=function(f){if(f===void 0)return 0;var h=s(f),A=a(h);if(h!==A)throw new u("Wrong length or index");return A}},25397:function(i,l,t){var s=t(47055),a=t(67750);i.exports=function(u){return s(a(u))}},91291:function(i,l,t){var s=t(80741);i.exports=function(a){var u=+a;return u!=u||u===0?0:s(u)}},18014:function(i,l,t){var s=t(91291),a=Math.min;i.exports=function(u){var f=s(u);return f>0?a(f,9007199254740991):0}},48981:function(i,l,t){var s=t(67750),a=Object;i.exports=function(u){return a(s(u))}},58229:function(i,l,t){var s=t(99590),a=RangeError;i.exports=function(u,f){var h=s(u);if(h%f)throw new a("Wrong offset");return h}},99590:function(i,l,t){var s=t(91291),a=RangeError;i.exports=function(u){var f=s(u);if(f<0)throw new a("The argument can't be less than 0");return f}},72777:function(i,l,t){var s=t(69565),a=t(20034),u=t(10757),f=t(55966),h=t(84270),A=t(78227),g=TypeError,p=A("toPrimitive");i.exports=function(m,y){if(!a(m)||u(m))return m;var E,C=f(m,p);if(C){if(y===void 0&&(y="default"),E=s(C,m,y),!a(E)||u(E))return E;throw new g("Can't convert object to primitive value")}return y===void 0&&(y="number"),h(m,y)}},56969:function(i,l,t){var s=t(72777),a=t(10757);i.exports=function(u){var f=s(u,"string");return a(f)?f:f+""}},92140:function(i,l,t){var s={};s[t(78227)("toStringTag")]="z",i.exports=String(s)==="[object z]"},655:function(i,l,t){var s=t(36955),a=String;i.exports=function(u){if(s(u)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return a(u)}},58319:function(i){var l=Math.round;i.exports=function(t){var s=l(t);return s<0?0:s>255?255:255&s}},16823:function(i){var l=String;i.exports=function(t){try{return l(t)}catch{return"Object"}}},15823:function(i,l,t){var s=t(46518),a=t(44576),u=t(69565),f=t(43724),h=t(72805),A=t(94644),g=t(66346),p=t(90679),m=t(6980),y=t(66699),E=t(2087),C=t(18014),T=t(57696),w=t(58229),I=t(58319),L=t(56969),R=t(39297),B=t(36955),P=t(20034),N=t(10757),U=t(2360),G=t(1625),W=t(52967),K=t(38480).f,M=t(43251),Q=t(59213).forEach,Z=t(87633),J=t(62106),q=t(24913),te=t(77347),fe=t(35370),Ee=t(91181),Ae=t(23167),Ce=Ee.get,Oe=Ee.set,Ne=Ee.enforce,Be=q.f,Ge=te.f,Ve=a.RangeError,$e=g.ArrayBuffer,it=$e.prototype,yt=g.DataView,Tt=A.NATIVE_ARRAY_BUFFER_VIEWS,st=A.TYPED_ARRAY_TAG,ht=A.TypedArray,_t=A.TypedArrayPrototype,Ht=A.isTypedArray,Gt="BYTES_PER_ELEMENT",Pt="Wrong length",It=function(qe,ft){J(qe,ft,{configurable:!0,get:function(){return Ce(this)[ft]}})},Zt=function(qe){var ft;return G(it,qe)||(ft=B(qe))==="ArrayBuffer"||ft==="SharedArrayBuffer"},Mt=function(qe,ft){return Ht(qe)&&!N(ft)&&ft in qe&&E(+ft)&&ft>=0},Fe=function(qe,ft){return ft=L(ft),Mt(qe,ft)?m(2,qe[ft]):Ge(qe,ft)},Ze=function(qe,ft,be){return ft=L(ft),!(Mt(qe,ft)&&P(be)&&R(be,"value"))||R(be,"get")||R(be,"set")||be.configurable||R(be,"writable")&&!be.writable||R(be,"enumerable")&&!be.enumerable?Be(qe,ft,be):(qe[ft]=be.value,qe)};f?(Tt||(te.f=Fe,q.f=Ze,It(_t,"buffer"),It(_t,"byteOffset"),It(_t,"byteLength"),It(_t,"length")),s({target:"Object",stat:!0,forced:!Tt},{getOwnPropertyDescriptor:Fe,defineProperty:Ze}),i.exports=function(qe,ft,be){var Xe=qe.match(/\d+/)[0]/8,at=qe+(be?"Clamped":"")+"Array",fr="get"+qe,bt="set"+qe,Lt=a[at],me=Lt,ot=me&&me.prototype,$t={},Qt=function(dt,et){Be(dt,et,{get:function(){return(function(xt,kt){var Wt=Ce(xt);return Wt.view[fr](kt*Xe+Wt.byteOffset,!0)})(this,et)},set:function(xt){return(function(kt,Wt,Ft){var ke=Ce(kt);ke.view[bt](Wt*Xe+ke.byteOffset,be?I(Ft):Ft,!0)})(this,et,xt)},enumerable:!0})};Tt?h&&(me=ft((function(dt,et,xt,kt){return p(dt,ot),Ae(P(et)?Zt(et)?kt!==void 0?new Lt(et,w(xt,Xe),kt):xt!==void 0?new Lt(et,w(xt,Xe)):new Lt(et):Ht(et)?fe(me,et):u(M,me,et):new Lt(T(et)),dt,me)})),W&&W(me,ht),Q(K(Lt),(function(dt){dt in me||y(me,dt,Lt[dt])})),me.prototype=ot):(me=ft((function(dt,et,xt,kt){p(dt,ot);var Wt,Ft,ke,ut=0,Et=0;if(P(et)){if(!Zt(et))return Ht(et)?fe(me,et):u(M,me,et);Wt=et,Et=w(xt,Xe);var At=et.byteLength;if(kt===void 0){if(At%Xe)throw new Ve(Pt);if((Ft=At-Et)<0)throw new Ve(Pt)}else if((Ft=C(kt)*Xe)+Et>At)throw new Ve(Pt);ke=Ft/Xe}else ke=T(et),Wt=new $e(Ft=ke*Xe);for(Oe(dt,{buffer:Wt,byteOffset:Et,byteLength:Ft,length:ke,view:new yt(Wt)});ut<ke;)Qt(dt,ut++)})),W&&W(me,ht),ot=me.prototype=U(_t)),ot.constructor!==me&&y(ot,"constructor",me),Ne(ot).TypedArrayConstructor=me,st&&y(ot,st,at);var Qe=me!==Lt;$t[at]=me,s({global:!0,constructor:!0,forced:Qe,sham:!Tt},$t),Gt in me||y(me,Gt,Xe),Gt in ot||y(ot,Gt,Xe),Z(at)}):i.exports=function(){}},72805:function(i,l,t){var s=t(44576),a=t(79039),u=t(84428),f=t(94644).NATIVE_ARRAY_BUFFER_VIEWS,h=s.ArrayBuffer,A=s.Int8Array;i.exports=!f||!a((function(){A(1)}))||!a((function(){new A(-1)}))||!u((function(g){new A,new A(null),new A(1.5),new A(g)}),!0)||a((function(){return new A(new h(2),1,void 0).length!==1}))},29948:function(i,l,t){var s=t(35370),a=t(94644).getTypedArrayConstructor;i.exports=function(u,f){return s(a(u),f)}},43251:function(i,l,t){var s=t(76080),a=t(69565),u=t(35548),f=t(48981),h=t(26198),A=t(70081),g=t(50851),p=t(44209),m=t(18727),y=t(94644).aTypedArrayConstructor,E=t(75854);i.exports=function(C){var T,w,I,L,R,B,P,N,U=u(this),G=f(C),W=arguments.length,K=W>1?arguments[1]:void 0,M=K!==void 0,Q=g(G);if(Q&&!p(Q))for(N=(P=A(G,Q)).next,G=[];!(B=a(N,P)).done;)G.push(B.value);for(M&&W>2&&(K=s(K,arguments[2])),w=h(G),I=new(y(U))(w),L=m(I),T=0;w>T;T++)R=M?K(G[T],T):G[T],I[T]=L?E(R):+R;return I}},33392:function(i,l,t){var s=t(79504),a=0,u=Math.random(),f=s(1 .toString);i.exports=function(h){return"Symbol("+(h===void 0?"":h)+")_"+f(++a+u,36)}},67416:function(i,l,t){var s=t(79039),a=t(78227),u=t(43724),f=t(96395),h=a("iterator");i.exports=!s((function(){var A=new URL("b?a=1&b=2&c=3","https://a"),g=A.searchParams,p=new URLSearchParams("a=1&a=2&b=3"),m="";return A.pathname="c%20d",g.forEach((function(y,E){g.delete("b"),m+=E+y})),p.delete("a",2),p.delete("b",void 0),f&&(!A.toJSON||!p.has("a",1)||p.has("a",2)||!p.has("a",void 0)||p.has("b"))||!g.size&&(f||!u)||!g.sort||A.href!=="https://a/c%20d?a=1&c=3"||g.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!g[h]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://тест").host!=="xn--e1aybc"||new URL("https://a#б").hash!=="#%D0%B1"||m!=="a1c3"||new URL("https://x",void 0).host!=="x"}))},7040:function(i,l,t){var s=t(4495);i.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},48686:function(i,l,t){var s=t(43724),a=t(79039);i.exports=s&&a((function(){return Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype!==42}))},22812:function(i){var l=TypeError;i.exports=function(t,s){if(t<s)throw new l("Not enough arguments");return t}},58622:function(i,l,t){var s=t(44576),a=t(94901),u=s.WeakMap;i.exports=a(u)&&/native code/.test(String(u))},70511:function(i,l,t){var s=t(19167),a=t(39297),u=t(1951),f=t(24913).f;i.exports=function(h){var A=s.Symbol||(s.Symbol={});a(A,h)||f(A,h,{value:u.f(h)})}},1951:function(i,l,t){var s=t(78227);l.f=s},78227:function(i,l,t){var s=t(44576),a=t(25745),u=t(39297),f=t(33392),h=t(4495),A=t(7040),g=s.Symbol,p=a("wks"),m=A?g.for||g:g&&g.withoutSetter||f;i.exports=function(y){return u(p,y)||(p[y]=h&&u(g,y)?g[y]:m("Symbol."+y)),p[y]}},47452:function(i){i.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},14601:function(i,l,t){var s=t(97751),a=t(39297),u=t(66699),f=t(1625),h=t(52967),A=t(77740),g=t(11056),p=t(23167),m=t(32603),y=t(77584),E=t(80747),C=t(43724),T=t(96395);i.exports=function(w,I,L,R){var B="stackTraceLimit",P=R?2:1,N=w.split("."),U=N[N.length-1],G=s.apply(null,N);if(G){var W=G.prototype;if(!T&&a(W,"cause")&&delete W.cause,!L)return G;var K=s("Error"),M=I((function(Q,Z){var J=m(R?Z:Q,void 0),q=R?new G(Q):new G;return J!==void 0&&u(q,"message",J),E(q,M,q.stack,2),this&&f(W,this)&&p(q,this,M),arguments.length>P&&y(q,arguments[P]),q}));if(M.prototype=W,U!=="Error"?h?h(M,K):A(M,K,{name:!0}):C&&B in G&&(g(M,G,B),g(M,G,"prepareStackTrace")),A(M,G),!T)try{W.name!==U&&u(W,"name",U),W.constructor=M}catch{}return M}}},4294:function(i,l,t){var s=t(46518),a=t(97751),u=t(18745),f=t(79039),h=t(14601),A="AggregateError",g=a(A),p=!f((function(){return g([1]).errors[0]!==1}))&&f((function(){return g([1],A,{cause:7}).cause!==7}));s({global:!0,constructor:!0,arity:2,forced:p},{AggregateError:h(A,(function(m){return function(y,E){return u(m,this,arguments)}}),p,!0)})},17145:function(i,l,t){var s=t(46518),a=t(1625),u=t(42787),f=t(52967),h=t(77740),A=t(2360),g=t(66699),p=t(6980),m=t(77584),y=t(80747),E=t(72652),C=t(32603),T=t(78227)("toStringTag"),w=Error,I=[].push,L=function(B,P){var N,U=a(R,this);f?N=f(new w,U?u(this):R):(N=U?this:A(R),g(N,T,"Error")),P!==void 0&&g(N,"message",C(P)),y(N,L,N.stack,1),arguments.length>2&&m(N,arguments[2]);var G=[];return E(B,I,{that:G}),g(N,"errors",G),N};f?f(L,w):h(L,w,{name:!0});var R=L.prototype=A(w.prototype,{constructor:p(1,L),message:p(1,""),name:p(1,"AggregateError")});s({global:!0,constructor:!0,arity:2},{AggregateError:L})},30067:function(i,l,t){t(17145)},54743:function(i,l,t){var s=t(46518),a=t(44576),u=t(66346),f=t(87633),h="ArrayBuffer",A=u[h];s({global:!0,constructor:!0,forced:a[h]!==A},{ArrayBuffer:A}),f(h)},16573:function(i,l,t){var s=t(43724),a=t(62106),u=t(3238),f=ArrayBuffer.prototype;s&&!("detached"in f)&&a(f,"detached",{configurable:!0,get:function(){return u(this)}})},46761:function(i,l,t){var s=t(46518),a=t(94644);s({target:"ArrayBuffer",stat:!0,forced:!a.NATIVE_ARRAY_BUFFER_VIEWS},{isView:a.isView})},11745:function(i,l,t){var s=t(46518),a=t(27476),u=t(79039),f=t(66346),h=t(28551),A=t(35610),g=t(18014),p=f.ArrayBuffer,m=f.DataView,y=m.prototype,E=a(p.prototype.slice),C=a(y.getUint8),T=a(y.setUint8);s({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:u((function(){return!new p(2).slice(1,void 0).byteLength}))},{slice:function(w,I){if(E&&I===void 0)return E(h(this),w);for(var L=h(this).byteLength,R=A(w,L),B=A(I===void 0?L:I,L),P=new p(g(B-R)),N=new m(this),U=new m(P),G=0;R<B;)T(U,G++,C(N,R++));return P}})},77936:function(i,l,t){var s=t(46518),a=t(95636);a&&s({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return a(this,arguments.length?arguments[0]:void 0,!1)}})},78100:function(i,l,t){var s=t(46518),a=t(95636);a&&s({target:"ArrayBuffer",proto:!0},{transfer:function(){return a(this,arguments.length?arguments[0]:void 0,!0)}})},18107:function(i,l,t){var s=t(46518),a=t(48981),u=t(26198),f=t(91291),h=t(6469);s({target:"Array",proto:!0},{at:function(A){var g=a(this),p=u(g),m=f(A),y=m>=0?m:p+m;return y<0||y>=p?void 0:g[y]}}),h("at")},28706:function(i,l,t){var s=t(46518),a=t(79039),u=t(34376),f=t(20034),h=t(48981),A=t(26198),g=t(96837),p=t(97040),m=t(1469),y=t(70597),E=t(78227),C=t(39519),T=E("isConcatSpreadable"),w=C>=51||!a((function(){var L=[];return L[T]=!1,L.concat()[0]!==L})),I=function(L){if(!f(L))return!1;var R=L[T];return R!==void 0?!!R:u(L)};s({target:"Array",proto:!0,arity:1,forced:!w||!y("concat")},{concat:function(L){var R,B,P,N,U,G=h(this),W=m(G,0),K=0;for(R=-1,P=arguments.length;R<P;R++)if(I(U=R===-1?G:arguments[R]))for(N=A(U),g(K+N),B=0;B<N;B++,K++)B in U&&p(W,K,U[B]);else g(K+1),p(W,K++,U);return W.length=K,W}})},26835:function(i,l,t){var s=t(46518),a=t(57029),u=t(6469);s({target:"Array",proto:!0},{copyWithin:a}),u("copyWithin")},88431:function(i,l,t){var s=t(46518),a=t(59213).every;s({target:"Array",proto:!0,forced:!t(34598)("every")},{every:function(u){return a(this,u,arguments.length>1?arguments[1]:void 0)}})},33771:function(i,l,t){var s=t(46518),a=t(84373),u=t(6469);s({target:"Array",proto:!0},{fill:a}),u("fill")},2008:function(i,l,t){var s=t(46518),a=t(59213).filter;s({target:"Array",proto:!0,forced:!t(70597)("filter")},{filter:function(u){return a(this,u,arguments.length>1?arguments[1]:void 0)}})},48980:function(i,l,t){var s=t(46518),a=t(59213).findIndex,u=t(6469),f="findIndex",h=!0;f in[]&&Array(1)[f]((function(){h=!1})),s({target:"Array",proto:!0,forced:h},{findIndex:function(A){return a(this,A,arguments.length>1?arguments[1]:void 0)}}),u(f)},13451:function(i,l,t){var s=t(46518),a=t(43839).findLastIndex,u=t(6469);s({target:"Array",proto:!0},{findLastIndex:function(f){return a(this,f,arguments.length>1?arguments[1]:void 0)}}),u("findLastIndex")},10838:function(i,l,t){var s=t(46518),a=t(43839).findLast,u=t(6469);s({target:"Array",proto:!0},{findLast:function(f){return a(this,f,arguments.length>1?arguments[1]:void 0)}}),u("findLast")},50113:function(i,l,t){var s=t(46518),a=t(59213).find,u=t(6469),f="find",h=!0;f in[]&&Array(1)[f]((function(){h=!1})),s({target:"Array",proto:!0,forced:h},{find:function(A){return a(this,A,arguments.length>1?arguments[1]:void 0)}}),u(f)},78350:function(i,l,t){var s=t(46518),a=t(70259),u=t(79306),f=t(48981),h=t(26198),A=t(1469);s({target:"Array",proto:!0},{flatMap:function(g){var p,m=f(this),y=h(m);return u(g),(p=A(m,0)).length=a(p,m,m,y,0,1,g,arguments.length>1?arguments[1]:void 0),p}})},46449:function(i,l,t){var s=t(46518),a=t(70259),u=t(48981),f=t(26198),h=t(91291),A=t(1469);s({target:"Array",proto:!0},{flat:function(){var g=arguments.length?arguments[0]:void 0,p=u(this),m=f(p),y=A(p,0);return y.length=a(y,p,p,m,0,g===void 0?1:h(g)),y}})},51629:function(i,l,t){var s=t(46518),a=t(90235);s({target:"Array",proto:!0,forced:[].forEach!==a},{forEach:a})},23418:function(i,l,t){var s=t(46518),a=t(97916);s({target:"Array",stat:!0,forced:!t(84428)((function(u){Array.from(u)}))},{from:a})},74423:function(i,l,t){var s=t(46518),a=t(19617).includes,u=t(79039),f=t(6469);s({target:"Array",proto:!0,forced:u((function(){return!Array(1).includes()}))},{includes:function(h){return a(this,h,arguments.length>1?arguments[1]:void 0)}}),f("includes")},25276:function(i,l,t){var s=t(46518),a=t(27476),u=t(19617).indexOf,f=t(34598),h=a([].indexOf),A=!!h&&1/h([1],1,-0)<0;s({target:"Array",proto:!0,forced:A||!f("indexOf")},{indexOf:function(g){var p=arguments.length>1?arguments[1]:void 0;return A?h(this,g,p)||0:u(this,g,p)}})},64346:function(i,l,t){t(46518)({target:"Array",stat:!0},{isArray:t(34376)})},23792:function(i,l,t){var s=t(25397),a=t(6469),u=t(26269),f=t(91181),h=t(24913).f,A=t(51088),g=t(62529),p=t(96395),m=t(43724),y="Array Iterator",E=f.set,C=f.getterFor(y);i.exports=A(Array,"Array",(function(w,I){E(this,{type:y,target:s(w),index:0,kind:I})}),(function(){var w=C(this),I=w.target,L=w.index++;if(!I||L>=I.length)return w.target=null,g(void 0,!0);switch(w.kind){case"keys":return g(L,!1);case"values":return g(I[L],!1)}return g([L,I[L]],!1)}),"values");var T=u.Arguments=u.Array;if(a("keys"),a("values"),a("entries"),!p&&m&&T.name!=="values")try{h(T,"name",{value:"values"})}catch{}},48598:function(i,l,t){var s=t(46518),a=t(79504),u=t(47055),f=t(25397),h=t(34598),A=a([].join);s({target:"Array",proto:!0,forced:u!==Object||!h("join",",")},{join:function(g){return A(f(this),g===void 0?",":g)}})},8921:function(i,l,t){var s=t(46518),a=t(8379);s({target:"Array",proto:!0,forced:a!==[].lastIndexOf},{lastIndexOf:a})},62062:function(i,l,t){var s=t(46518),a=t(59213).map;s({target:"Array",proto:!0,forced:!t(70597)("map")},{map:function(u){return a(this,u,arguments.length>1?arguments[1]:void 0)}})},31051:function(i,l,t){var s=t(46518),a=t(79039),u=t(33517),f=t(97040),h=Array;s({target:"Array",stat:!0,forced:a((function(){function A(){}return!(h.of.call(A)instanceof A)}))},{of:function(){for(var A=0,g=arguments.length,p=new(u(this)?this:h)(g);g>A;)f(p,A,arguments[A++]);return p.length=g,p}})},44114:function(i,l,t){var s=t(46518),a=t(48981),u=t(26198),f=t(34527),h=t(96837);s({target:"Array",proto:!0,arity:1,forced:t(79039)((function(){return[].push.call({length:4294967296},1)!==4294967297}))||!(function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(A){return A instanceof TypeError}})()},{push:function(A){var g=a(this),p=u(g),m=arguments.length;h(p+m);for(var y=0;y<m;y++)g[p]=arguments[y],p++;return f(g,p),p}})},18863:function(i,l,t){var s=t(46518),a=t(80926).right,u=t(34598),f=t(39519);s({target:"Array",proto:!0,forced:!t(38574)&&f>79&&f<83||!u("reduceRight")},{reduceRight:function(h){return a(this,h,arguments.length,arguments.length>1?arguments[1]:void 0)}})},72712:function(i,l,t){var s=t(46518),a=t(80926).left,u=t(34598),f=t(39519);s({target:"Array",proto:!0,forced:!t(38574)&&f>79&&f<83||!u("reduce")},{reduce:function(h){var A=arguments.length;return a(this,h,A,A>1?arguments[1]:void 0)}})},94490:function(i,l,t){var s=t(46518),a=t(79504),u=t(34376),f=a([].reverse),h=[1,2];s({target:"Array",proto:!0,forced:String(h)===String(h.reverse())},{reverse:function(){return u(this)&&(this.length=this.length),f(this)}})},34782:function(i,l,t){var s=t(46518),a=t(34376),u=t(33517),f=t(20034),h=t(35610),A=t(26198),g=t(25397),p=t(97040),m=t(78227),y=t(70597),E=t(67680),C=y("slice"),T=m("species"),w=Array,I=Math.max;s({target:"Array",proto:!0,forced:!C},{slice:function(L,R){var B,P,N,U=g(this),G=A(U),W=h(L,G),K=h(R===void 0?G:R,G);if(a(U)&&(B=U.constructor,(u(B)&&(B===w||a(B.prototype))||f(B)&&(B=B[T])===null)&&(B=void 0),B===w||B===void 0))return E(U,W,K);for(P=new(B===void 0?w:B)(I(K-W,0)),N=0;W<K;W++,N++)W in U&&p(P,N,U[W]);return P.length=N,P}})},15086:function(i,l,t){var s=t(46518),a=t(59213).some;s({target:"Array",proto:!0,forced:!t(34598)("some")},{some:function(u){return a(this,u,arguments.length>1?arguments[1]:void 0)}})},26910:function(i,l,t){var s=t(46518),a=t(79504),u=t(79306),f=t(48981),h=t(26198),A=t(84606),g=t(655),p=t(79039),m=t(74488),y=t(34598),E=t(13709),C=t(13763),T=t(39519),w=t(3607),I=[],L=a(I.sort),R=a(I.push),B=p((function(){I.sort(void 0)})),P=p((function(){I.sort(null)})),N=y("sort"),U=!p((function(){if(T)return T<70;if(!(E&&E>3)){if(C)return!0;if(w)return w<603;var G,W,K,M,Q="";for(G=65;G<76;G++){switch(W=String.fromCharCode(G),G){case 66:case 69:case 70:case 72:K=3;break;case 68:case 71:K=4;break;default:K=2}for(M=0;M<47;M++)I.push({k:W+M,v:K})}for(I.sort((function(Z,J){return J.v-Z.v})),M=0;M<I.length;M++)W=I[M].k.charAt(0),Q.charAt(Q.length-1)!==W&&(Q+=W);return Q!=="DGBEFHACIJK"}}));s({target:"Array",proto:!0,forced:B||!P||!N||!U},{sort:function(G){G!==void 0&&u(G);var W=f(this);if(U)return G===void 0?L(W):L(W,G);var K,M,Q=[],Z=h(W);for(M=0;M<Z;M++)M in W&&R(Q,W[M]);for(m(Q,(function(J){return function(q,te){return te===void 0?-1:q===void 0?1:J!==void 0?+J(q,te)||0:g(q)>g(te)?1:-1}})(G)),K=h(Q),M=0;M<K;)W[M]=Q[M++];for(;M<Z;)A(W,M++);return W}})},87478:function(i,l,t){t(87633)("Array")},54554:function(i,l,t){var s=t(46518),a=t(48981),u=t(35610),f=t(91291),h=t(26198),A=t(34527),g=t(96837),p=t(1469),m=t(97040),y=t(84606),E=t(70597)("splice"),C=Math.max,T=Math.min;s({target:"Array",proto:!0,forced:!E},{splice:function(w,I){var L,R,B,P,N,U,G=a(this),W=h(G),K=u(w,W),M=arguments.length;for(M===0?L=R=0:M===1?(L=0,R=W-K):(L=M-2,R=T(C(f(I),0),W-K)),g(W+L-R),B=p(G,R),P=0;P<R;P++)(N=K+P)in G&&m(B,P,G[N]);if(B.length=R,L<R){for(P=K;P<W-R;P++)U=P+L,(N=P+R)in G?G[U]=G[N]:y(G,U);for(P=W;P>W-R+L;P--)y(G,P-1)}else if(L>R)for(P=W-R;P>K;P--)U=P+L-1,(N=P+R-1)in G?G[U]=G[N]:y(G,U);for(P=0;P<L;P++)G[P+K]=arguments[P+2];return A(G,W-R+L),B}})},9678:function(i,l,t){var s=t(46518),a=t(37628),u=t(25397),f=t(6469),h=Array;s({target:"Array",proto:!0},{toReversed:function(){return a(u(this),h)}}),f("toReversed")},57145:function(i,l,t){var s=t(46518),a=t(79504),u=t(79306),f=t(25397),h=t(35370),A=t(44124),g=t(6469),p=Array,m=a(A("Array","sort"));s({target:"Array",proto:!0},{toSorted:function(y){y!==void 0&&u(y);var E=f(this),C=h(p,E);return m(C,y)}}),g("toSorted")},71658:function(i,l,t){var s=t(46518),a=t(6469),u=t(96837),f=t(26198),h=t(35610),A=t(25397),g=t(91291),p=Array,m=Math.max,y=Math.min;s({target:"Array",proto:!0},{toSpliced:function(E,C){var T,w,I,L,R=A(this),B=f(R),P=h(E,B),N=arguments.length,U=0;for(N===0?T=w=0:N===1?(T=0,w=B-P):(T=N-2,w=y(m(g(C),0),B-P)),I=u(B+T-w),L=p(I);U<P;U++)L[U]=R[U];for(;U<P+T;U++)L[U]=arguments[U-P+2];for(;U<I;U++)L[U]=R[U+w-T];return L}}),a("toSpliced")},30237:function(i,l,t){t(6469)("flatMap")},93514:function(i,l,t){t(6469)("flat")},13609:function(i,l,t){var s=t(46518),a=t(48981),u=t(26198),f=t(34527),h=t(84606),A=t(96837);s({target:"Array",proto:!0,arity:1,forced:[].unshift(0)!==1||!(function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(g){return g instanceof TypeError}})()},{unshift:function(g){var p=a(this),m=u(p),y=arguments.length;if(y){A(m+y);for(var E=m;E--;){var C=E+y;E in p?p[C]=p[E]:h(p,C)}for(var T=0;T<y;T++)p[T]=arguments[T]}return f(p,m+y)}})},11558:function(i,l,t){var s=t(46518),a=t(39928),u=t(25397),f=Array;s({target:"Array",proto:!0},{with:function(h,A){return a(u(this),f,h,A)}})},24359:function(i,l,t){var s=t(46518),a=t(66346);s({global:!0,constructor:!0,forced:!t(77811)},{DataView:a.DataView})},38309:function(i,l,t){t(24359)},61699:function(i,l,t){var s=t(46518),a=t(79504),u=t(79039)((function(){return new Date(16e11).getYear()!==120})),f=a(Date.prototype.getFullYear);s({target:"Date",proto:!0,forced:u},{getYear:function(){return f(this)-1900}})},59089:function(i,l,t){var s=t(46518),a=t(79504),u=Date,f=a(u.prototype.getTime);s({target:"Date",stat:!0},{now:function(){return f(new u)}})},91191:function(i,l,t){var s=t(46518),a=t(79504),u=t(91291),f=Date.prototype,h=a(f.getTime),A=a(f.setFullYear);s({target:"Date",proto:!0},{setYear:function(g){h(this);var p=u(g);return A(this,p>=0&&p<=99?p+1900:p)}})},93515:function(i,l,t){t(46518)({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})},1688:function(i,l,t){var s=t(46518),a=t(70380);s({target:"Date",proto:!0,forced:Date.prototype.toISOString!==a},{toISOString:a})},60739:function(i,l,t){var s=t(46518),a=t(79039),u=t(48981),f=t(72777);s({target:"Date",proto:!0,arity:1,forced:a((function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1}))},{toJSON:function(h){var A=u(this),g=f(A,"number");return typeof g!="number"||isFinite(g)?A.toISOString():null}})},89572:function(i,l,t){var s=t(39297),a=t(36840),u=t(53640),f=t(78227)("toPrimitive"),h=Date.prototype;s(h,f)||a(h,f,u)},23288:function(i,l,t){var s=t(79504),a=t(36840),u=Date.prototype,f="Invalid Date",h="toString",A=s(u[h]),g=s(u.getTime);String(new Date(NaN))!==f&&a(u,h,(function(){var p=g(this);return p==p?A(this):f}))},16280:function(i,l,t){var s=t(46518),a=t(44576),u=t(18745),f=t(14601),h="WebAssembly",A=a[h],g=new Error("e",{cause:7}).cause!==7,p=function(y,E){var C={};C[y]=f(y,E,g),s({global:!0,constructor:!0,arity:1,forced:g},C)},m=function(y,E){if(A&&A[y]){var C={};C[y]=f(h+"."+y,E,g),s({target:h,stat:!0,constructor:!0,arity:1,forced:g},C)}};p("Error",(function(y){return function(E){return u(y,this,arguments)}})),p("EvalError",(function(y){return function(E){return u(y,this,arguments)}})),p("RangeError",(function(y){return function(E){return u(y,this,arguments)}})),p("ReferenceError",(function(y){return function(E){return u(y,this,arguments)}})),p("SyntaxError",(function(y){return function(E){return u(y,this,arguments)}})),p("TypeError",(function(y){return function(E){return u(y,this,arguments)}})),p("URIError",(function(y){return function(E){return u(y,this,arguments)}})),m("CompileError",(function(y){return function(E){return u(y,this,arguments)}})),m("LinkError",(function(y){return function(E){return u(y,this,arguments)}})),m("RuntimeError",(function(y){return function(E){return u(y,this,arguments)}}))},76918:function(i,l,t){var s=t(36840),a=t(77536),u=Error.prototype;u.toString!==a&&s(u,"toString",a)},36456:function(i,l,t){var s=t(46518),a=t(79504),u=t(655),f=a("".charAt),h=a("".charCodeAt),A=a(/./.exec),g=a(1 .toString),p=a("".toUpperCase),m=/[\w*+\-./@]/,y=function(E,C){for(var T=g(E,16);T.length<C;)T="0"+T;return T};s({global:!0},{escape:function(E){for(var C,T,w=u(E),I="",L=w.length,R=0;R<L;)C=f(w,R++),A(m,C)?I+=C:I+=(T=h(C,0))<256?"%"+y(T,2):"%u"+p(y(T,4));return I}})},94170:function(i,l,t){var s=t(46518),a=t(30566);s({target:"Function",proto:!0,forced:Function.bind!==a},{bind:a})},48957:function(i,l,t){var s=t(94901),a=t(20034),u=t(24913),f=t(1625),h=t(78227),A=t(50283),g=h("hasInstance"),p=Function.prototype;g in p||u.f(p,g,{value:A((function(m){if(!s(this)||!a(m))return!1;var y=this.prototype;return a(y)?f(y,m):m instanceof this}),g)})},62010:function(i,l,t){var s=t(43724),a=t(10350).EXISTS,u=t(79504),f=t(62106),h=Function.prototype,A=u(h.toString),g=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,p=u(g.exec);s&&!a&&f(h,"name",{configurable:!0,get:function(){try{return p(g,A(this))[1]}catch{return""}}})},55081:function(i,l,t){var s=t(46518),a=t(44576);s({global:!0,forced:a.globalThis!==a},{globalThis:a})},18111:function(i,l,t){var s=t(46518),a=t(44576),u=t(90679),f=t(28551),h=t(94901),A=t(42787),g=t(62106),p=t(97040),m=t(79039),y=t(39297),E=t(78227),C=t(57657).IteratorPrototype,T=t(43724),w=t(96395),I="constructor",L="Iterator",R=E("toStringTag"),B=TypeError,P=a[L],N=w||!h(P)||P.prototype!==C||!m((function(){P({})})),U=function(){if(u(this,C),A(this)===C)throw new B("Abstract class Iterator not directly constructable")},G=function(W,K){T?g(C,W,{configurable:!0,get:function(){return K},set:function(M){if(f(this),this===C)throw new B("You can't redefine this property");y(this,W)?this[W]=M:p(this,W,M)}}):C[W]=K};y(C,R)||G(R,L),!N&&y(C,I)&&C[I]!==Object||G(I,U),U.prototype=C,s({global:!0,constructor:!0,forced:N},{Iterator:U})},29314:function(i,l,t){var s=t(46518),a=t(69565),u=t(28551),f=t(1767),h=t(24149),A=t(99590),g=t(19462),p=t(96395),m=g((function(){for(var y,E=this.iterator,C=this.next;this.remaining;)if(this.remaining--,y=u(a(C,E)),this.done=!!y.done)return;if(y=u(a(C,E)),!(this.done=!!y.done))return y.value}));s({target:"Iterator",proto:!0,real:!0,forced:p},{drop:function(y){u(this);var E=A(h(+y));return new m(f(this),{remaining:E})}})},81148:function(i,l,t){var s=t(46518),a=t(72652),u=t(79306),f=t(28551),h=t(1767);s({target:"Iterator",proto:!0,real:!0},{every:function(A){f(this),u(A);var g=h(this),p=0;return!a(g,(function(m,y){if(!A(m,p++))return y()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},22489:function(i,l,t){var s=t(46518),a=t(69565),u=t(79306),f=t(28551),h=t(1767),A=t(19462),g=t(96319),p=t(96395),m=A((function(){for(var y,E,C=this.iterator,T=this.predicate,w=this.next;;){if(y=f(a(w,C)),this.done=!!y.done)return;if(E=y.value,g(C,T,[E,this.counter++],!0))return E}}));s({target:"Iterator",proto:!0,real:!0,forced:p},{filter:function(y){return f(this),u(y),new m(h(this),{predicate:y})}})},20116:function(i,l,t){var s=t(46518),a=t(72652),u=t(79306),f=t(28551),h=t(1767);s({target:"Iterator",proto:!0,real:!0},{find:function(A){f(this),u(A);var g=h(this),p=0;return a(g,(function(m,y){if(A(m,p++))return y(m)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},30531:function(i,l,t){var s=t(46518),a=t(69565),u=t(79306),f=t(28551),h=t(1767),A=t(48646),g=t(19462),p=t(9539),m=t(96395),y=g((function(){for(var E,C,T=this.iterator,w=this.mapper;;){if(C=this.inner)try{if(!(E=f(a(C.next,C.iterator))).done)return E.value;this.inner=null}catch(I){p(T,"throw",I)}if(E=f(a(this.next,T)),this.done=!!E.done)return;try{this.inner=A(w(E.value,this.counter++),!1)}catch(I){p(T,"throw",I)}}}));s({target:"Iterator",proto:!0,real:!0,forced:m},{flatMap:function(E){return f(this),u(E),new y(h(this),{mapper:E,inner:null})}})},7588:function(i,l,t){var s=t(46518),a=t(72652),u=t(79306),f=t(28551),h=t(1767);s({target:"Iterator",proto:!0,real:!0},{forEach:function(A){f(this),u(A);var g=h(this),p=0;a(g,(function(m){A(m,p++)}),{IS_RECORD:!0})}})},49603:function(i,l,t){var s=t(46518),a=t(69565),u=t(48981),f=t(1625),h=t(57657).IteratorPrototype,A=t(19462),g=t(48646),p=t(96395),m=A((function(){return a(this.next,this.iterator)}),!0);s({target:"Iterator",stat:!0,forced:p},{from:function(y){var E=g(typeof y=="string"?u(y):y,!0);return f(h,E.iterator)?E.iterator:new m(E)}})},61701:function(i,l,t){var s=t(46518),a=t(20713);s({target:"Iterator",proto:!0,real:!0,forced:t(96395)},{map:a})},18237:function(i,l,t){var s=t(46518),a=t(72652),u=t(79306),f=t(28551),h=t(1767),A=TypeError;s({target:"Iterator",proto:!0,real:!0},{reduce:function(g){f(this),u(g);var p=h(this),m=arguments.length<2,y=m?void 0:arguments[1],E=0;if(a(p,(function(C){m?(m=!1,y=C):y=g(y,C,E),E++}),{IS_RECORD:!0}),m)throw new A("Reduce of empty iterator with no initial value");return y}})},13579:function(i,l,t){var s=t(46518),a=t(72652),u=t(79306),f=t(28551),h=t(1767);s({target:"Iterator",proto:!0,real:!0},{some:function(A){f(this),u(A);var g=h(this),p=0;return a(g,(function(m,y){if(A(m,p++))return y()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},54972:function(i,l,t){var s=t(46518),a=t(69565),u=t(28551),f=t(1767),h=t(24149),A=t(99590),g=t(19462),p=t(9539),m=t(96395),y=g((function(){var E=this.iterator;if(!this.remaining--)return this.done=!0,p(E,"normal",void 0);var C=u(a(this.next,E));return(this.done=!!C.done)?void 0:C.value}));s({target:"Iterator",proto:!0,real:!0,forced:m},{take:function(E){u(this);var C=A(h(+E));return new y(f(this),{remaining:C})}})},61806:function(i,l,t){var s=t(46518),a=t(28551),u=t(72652),f=t(1767),h=[].push;s({target:"Iterator",proto:!0,real:!0},{toArray:function(){var A=[];return u(f(a(this)),h,{that:A,IS_RECORD:!0}),A}})},33110:function(i,l,t){var s=t(46518),a=t(97751),u=t(18745),f=t(69565),h=t(79504),A=t(79039),g=t(94901),p=t(10757),m=t(67680),y=t(66933),E=t(4495),C=String,T=a("JSON","stringify"),w=h(/./.exec),I=h("".charAt),L=h("".charCodeAt),R=h("".replace),B=h(1 .toString),P=/[\uD800-\uDFFF]/g,N=/^[\uD800-\uDBFF]$/,U=/^[\uDC00-\uDFFF]$/,G=!E||A((function(){var Q=a("Symbol")("stringify detection");return T([Q])!=="[null]"||T({a:Q})!=="{}"||T(Object(Q))!=="{}"})),W=A((function(){return T("\uDF06\uD834")!=='"\\udf06\\ud834"'||T("\uDEAD")!=='"\\udead"'})),K=function(Q,Z){var J=m(arguments),q=y(Z);if(g(q)||Q!==void 0&&!p(Q))return J[1]=function(te,fe){if(g(q)&&(fe=f(q,this,C(te),fe)),!p(fe))return fe},u(T,null,J)},M=function(Q,Z,J){var q=I(J,Z-1),te=I(J,Z+1);return w(N,Q)&&!w(U,te)||w(U,Q)&&!w(N,q)?"\\u"+B(L(Q,0),16):Q};T&&s({target:"JSON",stat:!0,arity:3,forced:G||W},{stringify:function(Q,Z,J){var q=m(arguments),te=u(G?K:T,null,q);return W&&typeof te=="string"?R(te,P,M):te}})},4731:function(i,l,t){var s=t(44576);t(10687)(s.JSON,"JSON",!0)},48523:function(i,l,t){t(16468)("Map",(function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}}),t(86938))},47072:function(i,l,t){var s=t(46518),a=t(79504),u=t(79306),f=t(67750),h=t(72652),A=t(72248),g=t(96395),p=t(79039),m=A.Map,y=A.has,E=A.get,C=A.set,T=a([].push),w=g||p((function(){return m.groupBy("ab",(function(I){return I})).get("a").length!==1}));s({target:"Map",stat:!0,forced:g||w},{groupBy:function(I,L){f(I),u(L);var R=new m,B=0;return h(I,(function(P){var N=L(P,B++);y(R,N)?T(E(R,N),P):C(R,N,[P])})),R}})},36033:function(i,l,t){t(48523)},93153:function(i,l,t){var s=t(46518),a=t(7740),u=Math.acosh,f=Math.log,h=Math.sqrt,A=Math.LN2;s({target:"Math",stat:!0,forced:!u||Math.floor(u(Number.MAX_VALUE))!==710||u(1/0)!==1/0},{acosh:function(g){var p=+g;return p<1?NaN:p>9490626562425156e-8?f(p)+A:a(p-1+h(p-1)*h(p+1))}})},82326:function(i,l,t){var s=t(46518),a=Math.asinh,u=Math.log,f=Math.sqrt;s({target:"Math",stat:!0,forced:!(a&&1/a(0)>0)},{asinh:function h(A){var g=+A;return isFinite(g)&&g!==0?g<0?-h(-g):u(g+f(g*g+1)):g}})},36389:function(i,l,t){var s=t(46518),a=Math.atanh,u=Math.log;s({target:"Math",stat:!0,forced:!(a&&1/a(-0)<0)},{atanh:function(f){var h=+f;return h===0?h:u((1+h)/(1-h))/2}})},64444:function(i,l,t){var s=t(46518),a=t(77782),u=Math.abs,f=Math.pow;s({target:"Math",stat:!0},{cbrt:function(h){var A=+h;return a(A)*f(u(A),.3333333333333333)}})},8085:function(i,l,t){var s=t(46518),a=Math.floor,u=Math.log,f=Math.LOG2E;s({target:"Math",stat:!0},{clz32:function(h){var A=h>>>0;return A?31-a(u(A+.5)*f):32}})},77762:function(i,l,t){var s=t(46518),a=t(53250),u=Math.cosh,f=Math.abs,h=Math.E;s({target:"Math",stat:!0,forced:!u||u(710)===1/0},{cosh:function(A){var g=a(f(A)-1)+1;return(g+1/(g*h*h))*(h/2)}})},65070:function(i,l,t){var s=t(46518),a=t(53250);s({target:"Math",stat:!0,forced:a!==Math.expm1},{expm1:a})},60605:function(i,l,t){t(46518)({target:"Math",stat:!0},{fround:t(15617)})},39469:function(i,l,t){var s=t(46518),a=Math.hypot,u=Math.abs,f=Math.sqrt;s({target:"Math",stat:!0,arity:2,forced:!!a&&a(1/0,NaN)!==1/0},{hypot:function(h,A){for(var g,p,m=0,y=0,E=arguments.length,C=0;y<E;)C<(g=u(arguments[y++]))?(m=m*(p=C/g)*p+1,C=g):m+=g>0?(p=g/C)*p:g;return C===1/0?1/0:C*f(m)}})},72152:function(i,l,t){var s=t(46518),a=t(79039),u=Math.imul;s({target:"Math",stat:!0,forced:a((function(){return u(4294967295,5)!==-5||u.length!==2}))},{imul:function(f,h){var A=65535,g=+f,p=+h,m=A&g,y=A&p;return 0|m*y+((A&g>>>16)*y+m*(A&p>>>16)<<16>>>0)}})},75376:function(i,l,t){t(46518)({target:"Math",stat:!0},{log10:t(49340)})},56624:function(i,l,t){t(46518)({target:"Math",stat:!0},{log1p:t(7740)})},11367:function(i,l,t){t(46518)({target:"Math",stat:!0},{log2:t(67787)})},5914:function(i,l,t){t(46518)({target:"Math",stat:!0},{sign:t(77782)})},78553:function(i,l,t){var s=t(46518),a=t(79039),u=t(53250),f=Math.abs,h=Math.exp,A=Math.E;s({target:"Math",stat:!0,forced:a((function(){return Math.sinh(-2e-17)!==-2e-17}))},{sinh:function(g){var p=+g;return f(p)<1?(u(p)-u(-p))/2:(h(p-1)-h(-p-1))*(A/2)}})},98690:function(i,l,t){var s=t(46518),a=t(53250),u=Math.exp;s({target:"Math",stat:!0},{tanh:function(f){var h=+f,A=a(h),g=a(-h);return A===1/0?1:g===1/0?-1:(A-g)/(u(h)+u(-h))}})},60479:function(i,l,t){t(10687)(Math,"Math",!0)},70761:function(i,l,t){t(46518)({target:"Math",stat:!0},{trunc:t(80741)})},2892:function(i,l,t){var s=t(46518),a=t(96395),u=t(43724),f=t(44576),h=t(19167),A=t(79504),g=t(92796),p=t(39297),m=t(23167),y=t(1625),E=t(10757),C=t(72777),T=t(79039),w=t(38480).f,I=t(77347).f,L=t(24913).f,R=t(31240),B=t(43802).trim,P="Number",N=f[P],U=h[P],G=N.prototype,W=f.TypeError,K=A("".slice),M=A("".charCodeAt),Q=g(P,!N(" 0o1")||!N("0b1")||N("+0x1")),Z=function(q){var te,fe=arguments.length<1?0:N((function(Ee){var Ae=C(Ee,"number");return typeof Ae=="bigint"?Ae:(function(Ce){var Oe,Ne,Be,Ge,Ve,$e,it,yt,Tt=C(Ce,"number");if(E(Tt))throw new W("Cannot convert a Symbol value to a number");if(typeof Tt=="string"&&Tt.length>2){if(Tt=B(Tt),(Oe=M(Tt,0))===43||Oe===45){if((Ne=M(Tt,2))===88||Ne===120)return NaN}else if(Oe===48){switch(M(Tt,1)){case 66:case 98:Be=2,Ge=49;break;case 79:case 111:Be=8,Ge=55;break;default:return+Tt}for($e=(Ve=K(Tt,2)).length,it=0;it<$e;it++)if((yt=M(Ve,it))<48||yt>Ge)return NaN;return parseInt(Ve,Be)}}return+Tt})(Ae)})(q));return y(G,te=this)&&T((function(){R(te)}))?m(Object(fe),this,Z):fe};Z.prototype=G,Q&&!a&&(G.constructor=Z),s({global:!0,constructor:!0,wrap:!0,forced:Q},{Number:Z});var J=function(q,te){for(var fe,Ee=u?w(te):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Ae=0;Ee.length>Ae;Ae++)p(te,fe=Ee[Ae])&&!p(q,fe)&&L(q,fe,I(te,fe))};a&&U&&J(h[P],U),(Q||a)&&J(h[P],N)},45374:function(i,l,t){t(46518)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})},25428:function(i,l,t){t(46518)({target:"Number",stat:!0},{isFinite:t(50360)})},32637:function(i,l,t){t(46518)({target:"Number",stat:!0},{isInteger:t(2087)})},40150:function(i,l,t){t(46518)({target:"Number",stat:!0},{isNaN:function(s){return s!=s}})},59149:function(i,l,t){var s=t(46518),a=t(2087),u=Math.abs;s({target:"Number",stat:!0},{isSafeInteger:function(f){return a(f)&&u(f)<=9007199254740991}})},64601:function(i,l,t){t(46518)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},44435:function(i,l,t){t(46518)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})},87220:function(i,l,t){var s=t(46518),a=t(33904);s({target:"Number",stat:!0,forced:Number.parseFloat!==a},{parseFloat:a})},25843:function(i,l,t){var s=t(46518),a=t(52703);s({target:"Number",stat:!0,forced:Number.parseInt!==a},{parseInt:a})},62337:function(i,l,t){var s=t(46518),a=t(79504),u=t(91291),f=t(31240),h=t(72333),A=t(49340),g=t(79039),p=RangeError,m=String,y=isFinite,E=Math.abs,C=Math.floor,T=Math.pow,w=Math.round,I=a(1 .toExponential),L=a(h),R=a("".slice),B=I(-69e-12,4)==="-6.9000e-11"&&I(1.255,2)==="1.25e+0"&&I(12345,3)==="1.235e+4"&&I(25,0)==="3e+1";s({target:"Number",proto:!0,forced:!B||!(g((function(){I(1,1/0)}))&&g((function(){I(1,-1/0)})))||!!g((function(){I(1/0,1/0),I(NaN,1/0)}))},{toExponential:function(P){var N=f(this);if(P===void 0)return I(N);var U=u(P);if(!y(N))return String(N);if(U<0||U>20)throw new p("Incorrect fraction digits");if(B)return I(N,U);var G,W,K,M,Q="";if(N<0&&(Q="-",N=-N),N===0)W=0,G=L("0",U+1);else{var Z=A(N);W=C(Z);var J=T(10,W-U),q=w(N/J);2*N>=(2*q+1)*J&&(q+=1),q>=T(10,U+1)&&(q/=10,W+=1),G=m(q)}return U!==0&&(G=R(G,0,1)+"."+R(G,1)),W===0?(K="+",M="0"):(K=W>0?"+":"-",M=m(E(W))),Q+(G+"e")+K+M}})},9868:function(i,l,t){var s=t(46518),a=t(79504),u=t(91291),f=t(31240),h=t(72333),A=t(79039),g=RangeError,p=String,m=Math.floor,y=a(h),E=a("".slice),C=a(1 .toFixed),T=function(R,B,P){return B===0?P:B%2==1?T(R,B-1,P*R):T(R*R,B/2,P)},w=function(R,B,P){for(var N=-1,U=P;++N<6;)U+=B*R[N],R[N]=U%1e7,U=m(U/1e7)},I=function(R,B){for(var P=6,N=0;--P>=0;)N+=R[P],R[P]=m(N/B),N=N%B*1e7},L=function(R){for(var B=6,P="";--B>=0;)if(P!==""||B===0||R[B]!==0){var N=p(R[B]);P=P===""?N:P+y("0",7-N.length)+N}return P};s({target:"Number",proto:!0,forced:A((function(){return C(8e-5,3)!=="0.000"||C(.9,0)!=="1"||C(1.255,2)!=="1.25"||C(0xde0b6b3a7640080,0)!=="1000000000000000128"}))||!A((function(){C({})}))},{toFixed:function(R){var B,P,N,U,G=f(this),W=u(R),K=[0,0,0,0,0,0],M="",Q="0";if(W<0||W>20)throw new g("Incorrect fraction digits");if(G!=G)return"NaN";if(G<=-1e21||G>=1e21)return p(G);if(G<0&&(M="-",G=-G),G>1e-21)if(P=(B=(function(Z){for(var J=0,q=Z;q>=4096;)J+=12,q/=4096;for(;q>=2;)J+=1,q/=2;return J})(G*T(2,69,1))-69)<0?G*T(2,-B,1):G/T(2,B,1),P*=4503599627370496,(B=52-B)>0){for(w(K,0,P),N=W;N>=7;)w(K,1e7,0),N-=7;for(w(K,T(10,N,1),0),N=B-1;N>=23;)I(K,8388608),N-=23;I(K,1<<N),w(K,1,1),I(K,2),Q=L(K)}else w(K,0,P),w(K,1<<-B,0),Q=L(K)+y("0",W);return W>0?M+((U=Q.length)<=W?"0."+y("0",W-U)+Q:E(Q,0,U-W)+"."+E(Q,U-W)):M+Q}})},80630:function(i,l,t){var s=t(46518),a=t(79504),u=t(79039),f=t(31240),h=a(1 .toPrecision);s({target:"Number",proto:!0,forced:u((function(){return h(1,void 0)!=="1"}))||!u((function(){h({})}))},{toPrecision:function(A){return A===void 0?h(f(this)):h(f(this),A)}})},69085:function(i,l,t){var s=t(46518),a=t(44213);s({target:"Object",stat:!0,arity:2,forced:Object.assign!==a},{assign:a})},59904:function(i,l,t){t(46518)({target:"Object",stat:!0,sham:!t(43724)},{create:t(2360)})},17427:function(i,l,t){var s=t(46518),a=t(43724),u=t(42551),f=t(79306),h=t(48981),A=t(24913);a&&s({target:"Object",proto:!0,forced:u},{__defineGetter__:function(g,p){A.f(h(this),g,{get:f(p),enumerable:!0,configurable:!0})}})},67945:function(i,l,t){var s=t(46518),a=t(43724),u=t(96801).f;s({target:"Object",stat:!0,forced:Object.defineProperties!==u,sham:!a},{defineProperties:u})},84185:function(i,l,t){var s=t(46518),a=t(43724),u=t(24913).f;s({target:"Object",stat:!0,forced:Object.defineProperty!==u,sham:!a},{defineProperty:u})},87607:function(i,l,t){var s=t(46518),a=t(43724),u=t(42551),f=t(79306),h=t(48981),A=t(24913);a&&s({target:"Object",proto:!0,forced:u},{__defineSetter__:function(g,p){A.f(h(this),g,{set:f(p),enumerable:!0,configurable:!0})}})},5506:function(i,l,t){var s=t(46518),a=t(32357).entries;s({target:"Object",stat:!0},{entries:function(u){return a(u)}})},52811:function(i,l,t){var s=t(46518),a=t(92744),u=t(79039),f=t(20034),h=t(3451).onFreeze,A=Object.freeze;s({target:"Object",stat:!0,forced:u((function(){A(1)})),sham:!a},{freeze:function(g){return A&&f(g)?A(h(g)):g}})},53921:function(i,l,t){var s=t(46518),a=t(72652),u=t(97040);s({target:"Object",stat:!0},{fromEntries:function(f){var h={};return a(f,(function(A,g){u(h,A,g)}),{AS_ENTRIES:!0}),h}})},83851:function(i,l,t){var s=t(46518),a=t(79039),u=t(25397),f=t(77347).f,h=t(43724);s({target:"Object",stat:!0,forced:!h||a((function(){f(1)})),sham:!h},{getOwnPropertyDescriptor:function(A,g){return f(u(A),g)}})},81278:function(i,l,t){var s=t(46518),a=t(43724),u=t(35031),f=t(25397),h=t(77347),A=t(97040);s({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(g){for(var p,m,y=f(g),E=h.f,C=u(y),T={},w=0;C.length>w;)(m=E(y,p=C[w++]))!==void 0&&A(T,p,m);return T}})},1480:function(i,l,t){var s=t(46518),a=t(79039),u=t(10298).f;s({target:"Object",stat:!0,forced:a((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:u})},49773:function(i,l,t){var s=t(46518),a=t(4495),u=t(79039),f=t(33717),h=t(48981);s({target:"Object",stat:!0,forced:!a||u((function(){f.f(1)}))},{getOwnPropertySymbols:function(A){var g=f.f;return g?g(h(A)):[]}})},40875:function(i,l,t){var s=t(46518),a=t(79039),u=t(48981),f=t(42787),h=t(12211);s({target:"Object",stat:!0,forced:a((function(){f(1)})),sham:!h},{getPrototypeOf:function(A){return f(u(A))}})},77691:function(i,l,t){var s=t(46518),a=t(97751),u=t(79504),f=t(79306),h=t(67750),A=t(56969),g=t(72652),p=t(79039),m=Object.groupBy,y=a("Object","create"),E=u([].push);s({target:"Object",stat:!0,forced:!m||p((function(){return m("ab",(function(C){return C})).a.length!==1}))},{groupBy:function(C,T){h(C),f(T);var w=y(null),I=0;return g(C,(function(L){var R=A(T(L,I++));R in w?E(w[R],L):w[R]=[L]})),w}})},78347:function(i,l,t){t(46518)({target:"Object",stat:!0},{hasOwn:t(39297)})},94052:function(i,l,t){var s=t(46518),a=t(34124);s({target:"Object",stat:!0,forced:Object.isExtensible!==a},{isExtensible:a})},94003:function(i,l,t){var s=t(46518),a=t(79039),u=t(20034),f=t(22195),h=t(15652),A=Object.isFrozen;s({target:"Object",stat:!0,forced:h||a((function(){}))},{isFrozen:function(g){return!u(g)||!(!h||f(g)!=="ArrayBuffer")||!!A&&A(g)}})},221:function(i,l,t){var s=t(46518),a=t(79039),u=t(20034),f=t(22195),h=t(15652),A=Object.isSealed;s({target:"Object",stat:!0,forced:h||a((function(){}))},{isSealed:function(g){return!u(g)||!(!h||f(g)!=="ArrayBuffer")||!!A&&A(g)}})},29908:function(i,l,t){t(46518)({target:"Object",stat:!0},{is:t(3470)})},79432:function(i,l,t){var s=t(46518),a=t(48981),u=t(71072);s({target:"Object",stat:!0,forced:t(79039)((function(){u(1)}))},{keys:function(f){return u(a(f))}})},9220:function(i,l,t){var s=t(46518),a=t(43724),u=t(42551),f=t(48981),h=t(56969),A=t(42787),g=t(77347).f;a&&s({target:"Object",proto:!0,forced:u},{__lookupGetter__:function(p){var m,y=f(this),E=h(p);do if(m=g(y,E))return m.get;while(y=A(y))}})},7904:function(i,l,t){var s=t(46518),a=t(43724),u=t(42551),f=t(48981),h=t(56969),A=t(42787),g=t(77347).f;a&&s({target:"Object",proto:!0,forced:u},{__lookupSetter__:function(p){var m,y=f(this),E=h(p);do if(m=g(y,E))return m.set;while(y=A(y))}})},93967:function(i,l,t){var s=t(46518),a=t(20034),u=t(3451).onFreeze,f=t(92744),h=t(79039),A=Object.preventExtensions;s({target:"Object",stat:!0,forced:h((function(){A(1)})),sham:!f},{preventExtensions:function(g){return A&&a(g)?A(u(g)):g}})},63548:function(i,l,t){var s=t(43724),a=t(62106),u=t(20034),f=t(13925),h=t(48981),A=t(67750),g=Object.getPrototypeOf,p=Object.setPrototypeOf,m=Object.prototype,y="__proto__";if(s&&g&&p&&!(y in m))try{a(m,y,{configurable:!0,get:function(){return g(h(this))},set:function(E){var C=A(this);f(E)&&u(C)&&p(C,E)}})}catch{}},93941:function(i,l,t){var s=t(46518),a=t(20034),u=t(3451).onFreeze,f=t(92744),h=t(79039),A=Object.seal;s({target:"Object",stat:!0,forced:h((function(){A(1)})),sham:!f},{seal:function(g){return A&&a(g)?A(u(g)):g}})},10287:function(i,l,t){t(46518)({target:"Object",stat:!0},{setPrototypeOf:t(52967)})},26099:function(i,l,t){var s=t(92140),a=t(36840),u=t(53179);s||a(Object.prototype,"toString",u,{unsafe:!0})},16034:function(i,l,t){var s=t(46518),a=t(32357).values;s({target:"Object",stat:!0},{values:function(u){return a(u)}})},78459:function(i,l,t){var s=t(46518),a=t(33904);s({global:!0,forced:parseFloat!==a},{parseFloat:a})},58940:function(i,l,t){var s=t(46518),a=t(52703);s({global:!0,forced:parseInt!==a},{parseInt:a})},96167:function(i,l,t){var s=t(46518),a=t(69565),u=t(79306),f=t(36043),h=t(1103),A=t(72652);s({target:"Promise",stat:!0,forced:t(90537)},{allSettled:function(g){var p=this,m=f.f(p),y=m.resolve,E=m.reject,C=h((function(){var T=u(p.resolve),w=[],I=0,L=1;A(g,(function(R){var B=I++,P=!1;L++,a(T,p,R).then((function(N){P||(P=!0,w[B]={status:"fulfilled",value:N},--L||y(w))}),(function(N){P||(P=!0,w[B]={status:"rejected",reason:N},--L||y(w))}))})),--L||y(w)}));return C.error&&E(C.value),m.promise}})},16499:function(i,l,t){var s=t(46518),a=t(69565),u=t(79306),f=t(36043),h=t(1103),A=t(72652);s({target:"Promise",stat:!0,forced:t(90537)},{all:function(g){var p=this,m=f.f(p),y=m.resolve,E=m.reject,C=h((function(){var T=u(p.resolve),w=[],I=0,L=1;A(g,(function(R){var B=I++,P=!1;L++,a(T,p,R).then((function(N){P||(P=!0,w[B]=N,--L||y(w))}),E)})),--L||y(w)}));return C.error&&E(C.value),m.promise}})},93518:function(i,l,t){var s=t(46518),a=t(69565),u=t(79306),f=t(97751),h=t(36043),A=t(1103),g=t(72652),p=t(90537),m="No one promise resolved";s({target:"Promise",stat:!0,forced:p},{any:function(y){var E=this,C=f("AggregateError"),T=h.f(E),w=T.resolve,I=T.reject,L=A((function(){var R=u(E.resolve),B=[],P=0,N=1,U=!1;g(y,(function(G){var W=P++,K=!1;N++,a(R,E,G).then((function(M){K||U||(U=!0,w(M))}),(function(M){K||U||(K=!0,B[W]=M,--N||I(new C(B,m)))}))})),--N||I(new C(B,m))}));return L.error&&I(L.value),T.promise}})},82003:function(i,l,t){var s=t(46518),a=t(96395),u=t(10916).CONSTRUCTOR,f=t(80550),h=t(97751),A=t(94901),g=t(36840),p=f&&f.prototype;if(s({target:"Promise",proto:!0,forced:u,real:!0},{catch:function(y){return this.then(void 0,y)}}),!a&&A(f)){var m=h("Promise").prototype.catch;p.catch!==m&&g(p,"catch",m,{unsafe:!0})}},10436:function(i,l,t){var s,a,u,f=t(46518),h=t(96395),A=t(38574),g=t(44576),p=t(69565),m=t(36840),y=t(52967),E=t(10687),C=t(87633),T=t(79306),w=t(94901),I=t(20034),L=t(90679),R=t(2293),B=t(59225).set,P=t(91955),N=t(90757),U=t(1103),G=t(18265),W=t(91181),K=t(80550),M=t(10916),Q=t(36043),Z="Promise",J=M.CONSTRUCTOR,q=M.REJECTION_EVENT,te=M.SUBCLASSING,fe=W.getterFor(Z),Ee=W.set,Ae=K&&K.prototype,Ce=K,Oe=Ae,Ne=g.TypeError,Be=g.document,Ge=g.process,Ve=Q.f,$e=Ve,it=!!(Be&&Be.createEvent&&g.dispatchEvent),yt="unhandledrejection",Tt=function(Fe){var Ze;return!(!I(Fe)||!w(Ze=Fe.then))&&Ze},st=function(Fe,Ze){var qe,ft,be,Xe=Ze.value,at=Ze.state===1,fr=at?Fe.ok:Fe.fail,bt=Fe.resolve,Lt=Fe.reject,me=Fe.domain;try{fr?(at||(Ze.rejection===2&&Pt(Ze),Ze.rejection=1),fr===!0?qe=Xe:(me&&me.enter(),qe=fr(Xe),me&&(me.exit(),be=!0)),qe===Fe.promise?Lt(new Ne("Promise-chain cycle")):(ft=Tt(qe))?p(ft,qe,bt,Lt):bt(qe)):Lt(Xe)}catch(ot){me&&!be&&me.exit(),Lt(ot)}},ht=function(Fe,Ze){Fe.notified||(Fe.notified=!0,P((function(){for(var qe,ft=Fe.reactions;qe=ft.get();)st(qe,Fe);Fe.notified=!1,Ze&&!Fe.rejection&&Ht(Fe)})))},_t=function(Fe,Ze,qe){var ft,be;it?((ft=Be.createEvent("Event")).promise=Ze,ft.reason=qe,ft.initEvent(Fe,!1,!0),g.dispatchEvent(ft)):ft={promise:Ze,reason:qe},!q&&(be=g["on"+Fe])?be(ft):Fe===yt&&N("Unhandled promise rejection",qe)},Ht=function(Fe){p(B,g,(function(){var Ze,qe=Fe.facade,ft=Fe.value;if(Gt(Fe)&&(Ze=U((function(){A?Ge.emit("unhandledRejection",ft,qe):_t(yt,qe,ft)})),Fe.rejection=A||Gt(Fe)?2:1,Ze.error))throw Ze.value}))},Gt=function(Fe){return Fe.rejection!==1&&!Fe.parent},Pt=function(Fe){p(B,g,(function(){var Ze=Fe.facade;A?Ge.emit("rejectionHandled",Ze):_t("rejectionhandled",Ze,Fe.value)}))},It=function(Fe,Ze,qe){return function(ft){Fe(Ze,ft,qe)}},Zt=function(Fe,Ze,qe){Fe.done||(Fe.done=!0,qe&&(Fe=qe),Fe.value=Ze,Fe.state=2,ht(Fe,!0))},Mt=function(Fe,Ze,qe){if(!Fe.done){Fe.done=!0,qe&&(Fe=qe);try{if(Fe.facade===Ze)throw new Ne("Promise can't be resolved itself");var ft=Tt(Ze);ft?P((function(){var be={done:!1};try{p(ft,Ze,It(Mt,be,Fe),It(Zt,be,Fe))}catch(Xe){Zt(be,Xe,Fe)}})):(Fe.value=Ze,Fe.state=1,ht(Fe,!1))}catch(be){Zt({done:!1},be,Fe)}}};if(J&&(Oe=(Ce=function(Fe){L(this,Oe),T(Fe),p(s,this);var Ze=fe(this);try{Fe(It(Mt,Ze),It(Zt,Ze))}catch(qe){Zt(Ze,qe)}}).prototype,(s=function(Fe){Ee(this,{type:Z,done:!1,notified:!1,parent:!1,reactions:new G,rejection:!1,state:0,value:null})}).prototype=m(Oe,"then",(function(Fe,Ze){var qe=fe(this),ft=Ve(R(this,Ce));return qe.parent=!0,ft.ok=!w(Fe)||Fe,ft.fail=w(Ze)&&Ze,ft.domain=A?Ge.domain:void 0,qe.state===0?qe.reactions.add(ft):P((function(){st(ft,qe)})),ft.promise})),a=function(){var Fe=new s,Ze=fe(Fe);this.promise=Fe,this.resolve=It(Mt,Ze),this.reject=It(Zt,Ze)},Q.f=Ve=function(Fe){return Fe===Ce||Fe===void 0?new a(Fe):$e(Fe)},!h&&w(K)&&Ae!==Object.prototype)){u=Ae.then,te||m(Ae,"then",(function(Fe,Ze){var qe=this;return new Ce((function(ft,be){p(u,qe,ft,be)})).then(Fe,Ze)}),{unsafe:!0});try{delete Ae.constructor}catch{}y&&y(Ae,Oe)}f({global:!0,constructor:!0,wrap:!0,forced:J},{Promise:Ce}),E(Ce,Z,!1,!0),C(Z)},9391:function(i,l,t){var s=t(46518),a=t(96395),u=t(80550),f=t(79039),h=t(97751),A=t(94901),g=t(2293),p=t(93438),m=t(36840),y=u&&u.prototype;if(s({target:"Promise",proto:!0,real:!0,forced:!!u&&f((function(){y.finally.call({then:function(){}},(function(){}))}))},{finally:function(C){var T=g(this,h("Promise")),w=A(C);return this.then(w?function(I){return p(T,C()).then((function(){return I}))}:C,w?function(I){return p(T,C()).then((function(){throw I}))}:C)}}),!a&&A(u)){var E=h("Promise").prototype.finally;y.finally!==E&&m(y,"finally",E,{unsafe:!0})}},3362:function(i,l,t){t(10436),t(16499),t(82003),t(7743),t(51481),t(40280)},7743:function(i,l,t){var s=t(46518),a=t(69565),u=t(79306),f=t(36043),h=t(1103),A=t(72652);s({target:"Promise",stat:!0,forced:t(90537)},{race:function(g){var p=this,m=f.f(p),y=m.reject,E=h((function(){var C=u(p.resolve);A(g,(function(T){a(C,p,T).then(m.resolve,y)}))}));return E.error&&y(E.value),m.promise}})},51481:function(i,l,t){var s=t(46518),a=t(36043);s({target:"Promise",stat:!0,forced:t(10916).CONSTRUCTOR},{reject:function(u){var f=a.f(this);return(0,f.reject)(u),f.promise}})},40280:function(i,l,t){var s=t(46518),a=t(97751),u=t(96395),f=t(80550),h=t(10916).CONSTRUCTOR,A=t(93438),g=a("Promise"),p=u&&!h;s({target:"Promise",stat:!0,forced:u||h},{resolve:function(m){return A(p&&this===g?f:this,m)}})},31689:function(i,l,t){var s=t(46518),a=t(44576),u=t(18745),f=t(67680),h=t(36043),A=t(79306),g=t(1103),p=a.Promise,m=!1;s({target:"Promise",stat:!0,forced:!p||!p.try||g((function(){p.try((function(y){m=y===8}),8)})).error||!m},{try:function(y){var E=arguments.length>1?f(arguments,1):[],C=h.f(this),T=g((function(){return u(A(y),void 0,E)}));return(T.error?C.reject:C.resolve)(T.value),C.promise}})},14628:function(i,l,t){var s=t(46518),a=t(36043);s({target:"Promise",stat:!0},{withResolvers:function(){var u=a.f(this);return{promise:u.promise,resolve:u.resolve,reject:u.reject}}})},39796:function(i,l,t){var s=t(46518),a=t(18745),u=t(79306),f=t(28551);s({target:"Reflect",stat:!0,forced:!t(79039)((function(){Reflect.apply((function(){}))}))},{apply:function(h,A,g){return a(u(h),A,f(g))}})},60825:function(i,l,t){var s=t(46518),a=t(97751),u=t(18745),f=t(30566),h=t(35548),A=t(28551),g=t(20034),p=t(2360),m=t(79039),y=a("Reflect","construct"),E=Object.prototype,C=[].push,T=m((function(){function L(){}return!(y((function(){}),[],L)instanceof L)})),w=!m((function(){y((function(){}))})),I=T||w;s({target:"Reflect",stat:!0,forced:I,sham:I},{construct:function(L,R){h(L),A(R);var B=arguments.length<3?L:h(arguments[2]);if(w&&!T)return y(L,R,B);if(L===B){switch(R.length){case 0:return new L;case 1:return new L(R[0]);case 2:return new L(R[0],R[1]);case 3:return new L(R[0],R[1],R[2]);case 4:return new L(R[0],R[1],R[2],R[3])}var P=[null];return u(C,P,R),new(u(f,L,P))}var N=B.prototype,U=p(g(N)?N:E),G=u(L,U,R);return g(G)?G:U}})},87411:function(i,l,t){var s=t(46518),a=t(43724),u=t(28551),f=t(56969),h=t(24913);s({target:"Reflect",stat:!0,forced:t(79039)((function(){Reflect.defineProperty(h.f({},1,{value:1}),1,{value:2})})),sham:!a},{defineProperty:function(A,g,p){u(A);var m=f(g);u(p);try{return h.f(A,m,p),!0}catch{return!1}}})},21211:function(i,l,t){var s=t(46518),a=t(28551),u=t(77347).f;s({target:"Reflect",stat:!0},{deleteProperty:function(f,h){var A=u(a(f),h);return!(A&&!A.configurable)&&delete f[h]}})},9065:function(i,l,t){var s=t(46518),a=t(43724),u=t(28551),f=t(77347);s({target:"Reflect",stat:!0,sham:!a},{getOwnPropertyDescriptor:function(h,A){return f.f(u(h),A)}})},86565:function(i,l,t){var s=t(46518),a=t(28551),u=t(42787);s({target:"Reflect",stat:!0,sham:!t(12211)},{getPrototypeOf:function(f){return u(a(f))}})},40888:function(i,l,t){var s=t(46518),a=t(69565),u=t(20034),f=t(28551),h=t(16575),A=t(77347),g=t(42787);s({target:"Reflect",stat:!0},{get:function p(m,y){var E,C,T=arguments.length<3?m:arguments[2];return f(m)===T?m[y]:(E=A.f(m,y))?h(E)?E.value:E.get===void 0?void 0:a(E.get,T):u(C=g(m))?p(C,y,T):void 0}})},32812:function(i,l,t){t(46518)({target:"Reflect",stat:!0},{has:function(s,a){return a in s}})},84634:function(i,l,t){var s=t(46518),a=t(28551),u=t(34124);s({target:"Reflect",stat:!0},{isExtensible:function(f){return a(f),u(f)}})},71137:function(i,l,t){t(46518)({target:"Reflect",stat:!0},{ownKeys:t(35031)})},30985:function(i,l,t){var s=t(46518),a=t(97751),u=t(28551);s({target:"Reflect",stat:!0,sham:!t(92744)},{preventExtensions:function(f){u(f);try{var h=a("Object","preventExtensions");return h&&h(f),!0}catch{return!1}}})},34873:function(i,l,t){var s=t(46518),a=t(28551),u=t(73506),f=t(52967);f&&s({target:"Reflect",stat:!0},{setPrototypeOf:function(h,A){a(h),u(A);try{return f(h,A),!0}catch{return!1}}})},34268:function(i,l,t){var s=t(46518),a=t(69565),u=t(28551),f=t(20034),h=t(16575),A=t(79039),g=t(24913),p=t(77347),m=t(42787),y=t(6980);s({target:"Reflect",stat:!0,forced:A((function(){var E=function(){},C=g.f(new E,"a",{configurable:!0});return Reflect.set(E.prototype,"a",1,C)!==!1}))},{set:function E(C,T,w){var I,L,R,B=arguments.length<4?C:arguments[3],P=p.f(u(C),T);if(!P){if(f(L=m(C)))return E(L,T,w,B);P=y(0)}if(h(P)){if(P.writable===!1||!f(B))return!1;if(I=p.f(B,T)){if(I.get||I.set||I.writable===!1)return!1;I.value=w,g.f(B,T,I)}else g.f(B,T,y(0,w))}else{if((R=P.set)===void 0)return!1;a(R,B,w)}return!0}})},15472:function(i,l,t){var s=t(46518),a=t(44576),u=t(10687);s({global:!0},{Reflect:{}}),u(a.Reflect,"Reflect",!0)},84864:function(i,l,t){var s=t(43724),a=t(44576),u=t(79504),f=t(92796),h=t(23167),A=t(66699),g=t(2360),p=t(38480).f,m=t(1625),y=t(60788),E=t(655),C=t(61034),T=t(58429),w=t(11056),I=t(36840),L=t(79039),R=t(39297),B=t(91181).enforce,P=t(87633),N=t(78227),U=t(83635),G=t(18814),W=N("match"),K=a.RegExp,M=K.prototype,Q=a.SyntaxError,Z=u(M.exec),J=u("".charAt),q=u("".replace),te=u("".indexOf),fe=u("".slice),Ee=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Ae=/a/g,Ce=/a/g,Oe=new K(Ae)!==Ae,Ne=T.MISSED_STICKY,Be=T.UNSUPPORTED_Y;if(f("RegExp",s&&(!Oe||Ne||U||G||L((function(){return Ce[W]=!1,K(Ae)!==Ae||K(Ce)===Ce||String(K(Ae,"i"))!=="/a/i"}))))){for(var Ge=function(it,yt){var Tt,st,ht,_t,Ht,Gt,Pt=m(M,this),It=y(it),Zt=yt===void 0,Mt=[],Fe=it;if(!Pt&&It&&Zt&&it.constructor===Ge)return it;if((It||m(M,it))&&(it=it.source,Zt&&(yt=C(Fe))),it=it===void 0?"":E(it),yt=yt===void 0?"":E(yt),Fe=it,U&&"dotAll"in Ae&&(st=!!yt&&te(yt,"s")>-1)&&(yt=q(yt,/s/g,"")),Tt=yt,Ne&&"sticky"in Ae&&(ht=!!yt&&te(yt,"y")>-1)&&Be&&(yt=q(yt,/y/g,"")),G&&(_t=(function(Ze){for(var qe,ft=Ze.length,be=0,Xe="",at=[],fr=g(null),bt=!1,Lt=!1,me=0,ot="";be<=ft;be++){if((qe=J(Ze,be))==="\\")qe+=J(Ze,++be);else if(qe==="]")bt=!1;else if(!bt)switch(!0){case qe==="[":bt=!0;break;case qe==="(":if(Xe+=qe,fe(Ze,be+1,be+3)==="?:")continue;Z(Ee,fe(Ze,be+1))&&(be+=2,Lt=!0),me++;continue;case(qe===">"&&Lt):if(ot===""||R(fr,ot))throw new Q("Invalid capture group name");fr[ot]=!0,at[at.length]=[ot,me],Lt=!1,ot="";continue}Lt?ot+=qe:Xe+=qe}return[Xe,at]})(it),it=_t[0],Mt=_t[1]),Ht=h(K(it,yt),Pt?this:M,Ge),(st||ht||Mt.length)&&(Gt=B(Ht),st&&(Gt.dotAll=!0,Gt.raw=Ge((function(Ze){for(var qe,ft=Ze.length,be=0,Xe="",at=!1;be<=ft;be++)(qe=J(Ze,be))!=="\\"?at||qe!=="."?(qe==="["?at=!0:qe==="]"&&(at=!1),Xe+=qe):Xe+="[\\s\\S]":Xe+=qe+J(Ze,++be);return Xe})(it),Tt)),ht&&(Gt.sticky=!0),Mt.length&&(Gt.groups=Mt)),it!==Fe)try{A(Ht,"source",Fe===""?"(?:)":Fe)}catch{}return Ht},Ve=p(K),$e=0;Ve.length>$e;)w(Ge,K,Ve[$e++]);M.constructor=Ge,Ge.prototype=M,I(a,"RegExp",Ge,{constructor:!0})}P("RegExp")},57465:function(i,l,t){var s=t(43724),a=t(83635),u=t(22195),f=t(62106),h=t(91181).get,A=RegExp.prototype,g=TypeError;s&&a&&f(A,"dotAll",{configurable:!0,get:function(){if(this!==A){if(u(this)==="RegExp")return!!h(this).dotAll;throw new g("Incompatible receiver, RegExp required")}}})},27495:function(i,l,t){var s=t(46518),a=t(57323);s({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},69479:function(i,l,t){var s=t(44576),a=t(43724),u=t(62106),f=t(67979),h=t(79039),A=s.RegExp,g=A.prototype;a&&h((function(){var p=!0;try{A(".","d")}catch{p=!1}var m={},y="",E=p?"dgimsy":"gimsy",C=function(I,L){Object.defineProperty(m,I,{get:function(){return y+=L,!0}})},T={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var w in p&&(T.hasIndices="d"),T)C(w,T[w]);return Object.getOwnPropertyDescriptor(g,"flags").get.call(m)!==E||y!==E}))&&u(g,"flags",{configurable:!0,get:f})},87745:function(i,l,t){var s=t(43724),a=t(58429).MISSED_STICKY,u=t(22195),f=t(62106),h=t(91181).get,A=RegExp.prototype,g=TypeError;s&&a&&f(A,"sticky",{configurable:!0,get:function(){if(this!==A){if(u(this)==="RegExp")return!!h(this).sticky;throw new g("Incompatible receiver, RegExp required")}}})},90906:function(i,l,t){t(27495);var s,a,u=t(46518),f=t(69565),h=t(94901),A=t(28551),g=t(655),p=(s=!1,(a=/[ac]/).exec=function(){return s=!0,/./.exec.apply(this,arguments)},a.test("abc")===!0&&s),m=/./.test;u({target:"RegExp",proto:!0,forced:!p},{test:function(y){var E=A(this),C=g(y),T=E.exec;if(!h(T))return f(m,E,C);var w=f(T,E,C);return w!==null&&(A(w),!0)}})},38781:function(i,l,t){var s=t(10350).PROPER,a=t(36840),u=t(28551),f=t(655),h=t(79039),A=t(61034),g="toString",p=RegExp.prototype,m=p[g],y=h((function(){return m.call({source:"a",flags:"b"})!=="/a/b"})),E=s&&m.name!==g;(y||E)&&a(p,g,(function(){var C=u(this);return"/"+f(C.source)+"/"+f(A(C))}),{unsafe:!0})},92405:function(i,l,t){t(16468)("Set",(function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}}),t(86938))},17642:function(i,l,t){var s=t(46518),a=t(83440);s({target:"Set",proto:!0,real:!0,forced:!t(84916)("difference",(function(u){return u.size===0}))},{difference:a})},58004:function(i,l,t){var s=t(46518),a=t(79039),u=t(68750);s({target:"Set",proto:!0,real:!0,forced:!t(84916)("intersection",(function(f){return f.size===2&&f.has(1)&&f.has(2)}))||a((function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"}))},{intersection:u})},33853:function(i,l,t){var s=t(46518),a=t(64449);s({target:"Set",proto:!0,real:!0,forced:!t(84916)("isDisjointFrom",(function(u){return!u}))},{isDisjointFrom:a})},45876:function(i,l,t){var s=t(46518),a=t(53838);s({target:"Set",proto:!0,real:!0,forced:!t(84916)("isSubsetOf",(function(u){return u}))},{isSubsetOf:a})},32475:function(i,l,t){var s=t(46518),a=t(28527);s({target:"Set",proto:!0,real:!0,forced:!t(84916)("isSupersetOf",(function(u){return!u}))},{isSupersetOf:a})},31415:function(i,l,t){t(92405)},15024:function(i,l,t){var s=t(46518),a=t(83650);s({target:"Set",proto:!0,real:!0,forced:!t(84916)("symmetricDifference")},{symmetricDifference:a})},31698:function(i,l,t){var s=t(46518),a=t(44204);s({target:"Set",proto:!0,real:!0,forced:!t(84916)("union")},{union:a})},89907:function(i,l,t){var s=t(46518),a=t(77240);s({target:"String",proto:!0,forced:t(23061)("anchor")},{anchor:function(u){return a(this,"a","name",u)}})},67357:function(i,l,t){var s=t(46518),a=t(79504),u=t(67750),f=t(91291),h=t(655),A=t(79039),g=a("".charAt);s({target:"String",proto:!0,forced:A((function(){return"𠮷".at(-2)!=="\uD842"}))},{at:function(p){var m=h(u(this)),y=m.length,E=f(p),C=E>=0?E:y+E;return C<0||C>=y?void 0:g(m,C)}})},11898:function(i,l,t){var s=t(46518),a=t(77240);s({target:"String",proto:!0,forced:t(23061)("big")},{big:function(){return a(this,"big","","")}})},35490:function(i,l,t){var s=t(46518),a=t(77240);s({target:"String",proto:!0,forced:t(23061)("blink")},{blink:function(){return a(this,"blink","","")}})},5745:function(i,l,t){var s=t(46518),a=t(77240);s({target:"String",proto:!0,forced:t(23061)("bold")},{bold:function(){return a(this,"b","","")}})},23860:function(i,l,t){var s=t(46518),a=t(68183).codeAt;s({target:"String",proto:!0},{codePointAt:function(u){return a(this,u)}})},99449:function(i,l,t){var s,a=t(46518),u=t(27476),f=t(77347).f,h=t(18014),A=t(655),g=t(60511),p=t(67750),m=t(41436),y=t(96395),E=u("".slice),C=Math.min,T=m("endsWith");a({target:"String",proto:!0,forced:!(!y&&!T&&(s=f(String.prototype,"endsWith"),s&&!s.writable)||T)},{endsWith:function(w){var I=A(p(this));g(w);var L=arguments.length>1?arguments[1]:void 0,R=I.length,B=L===void 0?R:C(h(L),R),P=A(w);return E(I,B-P.length,B)===P}})},94298:function(i,l,t){var s=t(46518),a=t(77240);s({target:"String",proto:!0,forced:t(23061)("fixed")},{fixed:function(){return a(this,"tt","","")}})},60268:function(i,l,t){var s=t(46518),a=t(77240);s({target:"String",proto:!0,forced:t(23061)("fontcolor")},{fontcolor:function(u){return a(this,"font","color",u)}})},69546:function(i,l,t){var s=t(46518),a=t(77240);s({target:"String",proto:!0,forced:t(23061)("fontsize")},{fontsize:function(u){return a(this,"font","size",u)}})},27337:function(i,l,t){var s=t(46518),a=t(79504),u=t(35610),f=RangeError,h=String.fromCharCode,A=String.fromCodePoint,g=a([].join);s({target:"String",stat:!0,arity:1,forced:!!A&&A.length!==1},{fromCodePoint:function(p){for(var m,y=[],E=arguments.length,C=0;E>C;){if(m=+arguments[C++],u(m,1114111)!==m)throw new f(m+" is not a valid code point");y[C]=m<65536?h(m):h(55296+((m-=65536)>>10),m%1024+56320)}return g(y,"")}})},21699:function(i,l,t){var s=t(46518),a=t(79504),u=t(60511),f=t(67750),h=t(655),A=t(41436),g=a("".indexOf);s({target:"String",proto:!0,forced:!A("includes")},{includes:function(p){return!!~g(h(f(this)),h(u(p)),arguments.length>1?arguments[1]:void 0)}})},42043:function(i,l,t){var s=t(46518),a=t(79504),u=t(67750),f=t(655),h=a("".charCodeAt);s({target:"String",proto:!0},{isWellFormed:function(){for(var A=f(u(this)),g=A.length,p=0;p<g;p++){var m=h(A,p);if((63488&m)==55296&&(m>=56320||++p>=g||(64512&h(A,p))!=56320))return!1}return!0}})},20781:function(i,l,t){var s=t(46518),a=t(77240);s({target:"String",proto:!0,forced:t(23061)("italics")},{italics:function(){return a(this,"i","","")}})},47764:function(i,l,t){var s=t(68183).charAt,a=t(655),u=t(91181),f=t(51088),h=t(62529),A="String Iterator",g=u.set,p=u.getterFor(A);f(String,"String",(function(m){g(this,{type:A,string:a(m),index:0})}),(function(){var m,y=p(this),E=y.string,C=y.index;return C>=E.length?h(void 0,!0):(m=s(E,C),y.index+=m.length,h(m,!1))}))},50778:function(i,l,t){var s=t(46518),a=t(77240);s({target:"String",proto:!0,forced:t(23061)("link")},{link:function(u){return a(this,"a","href",u)}})},28543:function(i,l,t){var s=t(46518),a=t(69565),u=t(27476),f=t(33994),h=t(62529),A=t(67750),g=t(18014),p=t(655),m=t(28551),y=t(64117),E=t(22195),C=t(60788),T=t(61034),w=t(55966),I=t(36840),L=t(79039),R=t(78227),B=t(2293),P=t(57829),N=t(56682),U=t(91181),G=t(96395),W=R("matchAll"),K="RegExp String",M=K+" Iterator",Q=U.set,Z=U.getterFor(M),J=RegExp.prototype,q=TypeError,te=u("".indexOf),fe=u("".matchAll),Ee=!!fe&&!L((function(){fe("a",/./)})),Ae=f((function(Oe,Ne,Be,Ge){Q(this,{type:M,regexp:Oe,string:Ne,global:Be,unicode:Ge,done:!1})}),K,(function(){var Oe=Z(this);if(Oe.done)return h(void 0,!0);var Ne=Oe.regexp,Be=Oe.string,Ge=N(Ne,Be);return Ge===null?(Oe.done=!0,h(void 0,!0)):Oe.global?(p(Ge[0])===""&&(Ne.lastIndex=P(Be,g(Ne.lastIndex),Oe.unicode)),h(Ge,!1)):(Oe.done=!0,h(Ge,!1))})),Ce=function(Oe){var Ne,Be,Ge,Ve=m(this),$e=p(Oe),it=B(Ve,RegExp),yt=p(T(Ve));return Ne=new it(it===RegExp?Ve.source:Ve,yt),Be=!!~te(yt,"g"),Ge=!!~te(yt,"u"),Ne.lastIndex=g(Ve.lastIndex),new Ae(Ne,$e,Be,Ge)};s({target:"String",proto:!0,forced:Ee},{matchAll:function(Oe){var Ne,Be,Ge,Ve,$e=A(this);if(y(Oe)){if(Ee)return fe($e,Oe)}else{if(C(Oe)&&(Ne=p(A(T(Oe))),!~te(Ne,"g")))throw new q("`.matchAll` does not allow non-global regexes");if(Ee)return fe($e,Oe);if((Ge=w(Oe,W))===void 0&&G&&E(Oe)==="RegExp"&&(Ge=Ce),Ge)return a(Ge,Oe,$e)}return Be=p($e),Ve=new RegExp(Oe,"g"),G?a(Ce,Ve,Be):Ve[W](Be)}}),G||W in J||I(J,W,Ce)},71761:function(i,l,t){var s=t(69565),a=t(89228),u=t(28551),f=t(64117),h=t(18014),A=t(655),g=t(67750),p=t(55966),m=t(57829),y=t(56682);a("match",(function(E,C,T){return[function(w){var I=g(this),L=f(w)?void 0:p(w,E);return L?s(L,w,I):new RegExp(w)[E](A(I))},function(w){var I=u(this),L=A(w),R=T(C,I,L);if(R.done)return R.value;if(!I.global)return y(I,L);var B=I.unicode;I.lastIndex=0;for(var P,N=[],U=0;(P=y(I,L))!==null;){var G=A(P[0]);N[U]=G,G===""&&(I.lastIndex=m(L,h(I.lastIndex),B)),U++}return U===0?null:N}]}))},35701:function(i,l,t){var s=t(46518),a=t(60533).end;s({target:"String",proto:!0,forced:t(83063)},{padEnd:function(u){return a(this,u,arguments.length>1?arguments[1]:void 0)}})},68156:function(i,l,t){var s=t(46518),a=t(60533).start;s({target:"String",proto:!0,forced:t(83063)},{padStart:function(u){return a(this,u,arguments.length>1?arguments[1]:void 0)}})},85906:function(i,l,t){var s=t(46518),a=t(79504),u=t(25397),f=t(48981),h=t(655),A=t(26198),g=a([].push),p=a([].join);s({target:"String",stat:!0},{raw:function(m){var y=u(f(m).raw),E=A(y);if(!E)return"";for(var C=arguments.length,T=[],w=0;;){if(g(T,h(y[w++])),w===E)return p(T,"");w<C&&g(T,h(arguments[w]))}}})},42781:function(i,l,t){t(46518)({target:"String",proto:!0},{repeat:t(72333)})},79978:function(i,l,t){var s=t(46518),a=t(69565),u=t(79504),f=t(67750),h=t(94901),A=t(64117),g=t(60788),p=t(655),m=t(55966),y=t(61034),E=t(2478),C=t(78227),T=t(96395),w=C("replace"),I=TypeError,L=u("".indexOf),R=u("".replace),B=u("".slice),P=Math.max;s({target:"String",proto:!0},{replaceAll:function(N,U){var G,W,K,M,Q,Z,J,q,te,fe,Ee=f(this),Ae=0,Ce="";if(!A(N)){if((G=g(N))&&(W=p(f(y(N))),!~L(W,"g")))throw new I("`.replaceAll` does not allow non-global regexes");if(K=m(N,w))return a(K,N,Ee,U);if(T&&G)return R(p(Ee),N,U)}for(M=p(Ee),Q=p(N),(Z=h(U))||(U=p(U)),J=Q.length,q=P(1,J),te=L(M,Q);te!==-1;)fe=Z?p(U(Q,te,M)):E(Q,M,te,[],void 0,U),Ce+=B(M,Ae,te)+fe,Ae=te+J,te=te+q>M.length?-1:L(M,Q,te+q);return Ae<M.length&&(Ce+=B(M,Ae)),Ce}})},25440:function(i,l,t){var s=t(18745),a=t(69565),u=t(79504),f=t(89228),h=t(79039),A=t(28551),g=t(94901),p=t(64117),m=t(91291),y=t(18014),E=t(655),C=t(67750),T=t(57829),w=t(55966),I=t(2478),L=t(56682),R=t(78227)("replace"),B=Math.max,P=Math.min,N=u([].concat),U=u([].push),G=u("".indexOf),W=u("".slice),K="a".replace(/./,"$0")==="$0",M=!!/./[R]&&/./[R]("a","$0")==="";f("replace",(function(Q,Z,J){var q=M?"$":"$0";return[function(te,fe){var Ee=C(this),Ae=p(te)?void 0:w(te,R);return Ae?a(Ae,te,Ee,fe):a(Z,E(Ee),te,fe)},function(te,fe){var Ee=A(this),Ae=E(te);if(typeof fe=="string"&&G(fe,q)===-1&&G(fe,"$<")===-1){var Ce=J(Z,Ee,Ae,fe);if(Ce.done)return Ce.value}var Oe=g(fe);Oe||(fe=E(fe));var Ne,Be=Ee.global;Be&&(Ne=Ee.unicode,Ee.lastIndex=0);for(var Ge,Ve=[];(Ge=L(Ee,Ae))!==null&&(U(Ve,Ge),Be);)E(Ge[0])===""&&(Ee.lastIndex=T(Ae,y(Ee.lastIndex),Ne));for(var $e,it="",yt=0,Tt=0;Tt<Ve.length;Tt++){for(var st,ht=E((Ge=Ve[Tt])[0]),_t=B(P(m(Ge.index),Ae.length),0),Ht=[],Gt=1;Gt<Ge.length;Gt++)U(Ht,($e=Ge[Gt])===void 0?$e:String($e));var Pt=Ge.groups;if(Oe){var It=N([ht],Ht,_t,Ae);Pt!==void 0&&U(It,Pt),st=E(s(fe,void 0,It))}else st=I(ht,Ae,_t,Ht,Pt,fe);_t>=yt&&(it+=W(Ae,yt,_t)+st,yt=_t+ht.length)}return it+W(Ae,yt)}]}),!!h((function(){var Q=/./;return Q.exec=function(){var Z=[];return Z.groups={a:"7"},Z},"".replace(Q,"$<a>")!=="7"}))||!K||M)},5746:function(i,l,t){var s=t(69565),a=t(89228),u=t(28551),f=t(64117),h=t(67750),A=t(3470),g=t(655),p=t(55966),m=t(56682);a("search",(function(y,E,C){return[function(T){var w=h(this),I=f(T)?void 0:p(T,y);return I?s(I,T,w):new RegExp(T)[y](g(w))},function(T){var w=u(this),I=g(T),L=C(E,w,I);if(L.done)return L.value;var R=w.lastIndex;A(R,0)||(w.lastIndex=0);var B=m(w,I);return A(w.lastIndex,R)||(w.lastIndex=R),B===null?-1:B.index}]}))},89195:function(i,l,t){var s=t(46518),a=t(77240);s({target:"String",proto:!0,forced:t(23061)("small")},{small:function(){return a(this,"small","","")}})},90744:function(i,l,t){var s=t(69565),a=t(79504),u=t(89228),f=t(28551),h=t(64117),A=t(67750),g=t(2293),p=t(57829),m=t(18014),y=t(655),E=t(55966),C=t(56682),T=t(58429),w=t(79039),I=T.UNSUPPORTED_Y,L=Math.min,R=a([].push),B=a("".slice),P=!w((function(){var U=/(?:)/,G=U.exec;U.exec=function(){return G.apply(this,arguments)};var W="ab".split(U);return W.length!==2||W[0]!=="a"||W[1]!=="b"})),N="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;u("split",(function(U,G,W){var K="0".split(void 0,0).length?function(M,Q){return M===void 0&&Q===0?[]:s(G,this,M,Q)}:G;return[function(M,Q){var Z=A(this),J=h(M)?void 0:E(M,U);return J?s(J,M,Z,Q):s(K,y(Z),M,Q)},function(M,Q){var Z=f(this),J=y(M);if(!N){var q=W(K,Z,J,Q,K!==G);if(q.done)return q.value}var te=g(Z,RegExp),fe=Z.unicode,Ee=(Z.ignoreCase?"i":"")+(Z.multiline?"m":"")+(Z.unicode?"u":"")+(I?"g":"y"),Ae=new te(I?"^(?:"+Z.source+")":Z,Ee),Ce=Q===void 0?4294967295:Q>>>0;if(Ce===0)return[];if(J.length===0)return C(Ae,J)===null?[J]:[];for(var Oe=0,Ne=0,Be=[];Ne<J.length;){Ae.lastIndex=I?0:Ne;var Ge,Ve=C(Ae,I?B(J,Ne):J);if(Ve===null||(Ge=L(m(Ae.lastIndex+(I?Ne:0)),J.length))===Oe)Ne=p(J,Ne,fe);else{if(R(Be,B(J,Oe,Ne)),Be.length===Ce)return Be;for(var $e=1;$e<=Ve.length-1;$e++)if(R(Be,Ve[$e]),Be.length===Ce)return Be;Ne=Oe=Ge}}return R(Be,B(J,Oe)),Be}]}),N||!P,I)},11392:function(i,l,t){var s,a=t(46518),u=t(27476),f=t(77347).f,h=t(18014),A=t(655),g=t(60511),p=t(67750),m=t(41436),y=t(96395),E=u("".slice),C=Math.min,T=m("startsWith");a({target:"String",proto:!0,forced:!(!y&&!T&&(s=f(String.prototype,"startsWith"),s&&!s.writable)||T)},{startsWith:function(w){var I=A(p(this));g(w);var L=h(C(arguments.length>1?arguments[1]:void 0,I.length)),R=A(w);return E(I,L,L+R.length)===R}})},46276:function(i,l,t){var s=t(46518),a=t(77240);s({target:"String",proto:!0,forced:t(23061)("strike")},{strike:function(){return a(this,"strike","","")}})},48718:function(i,l,t){var s=t(46518),a=t(77240);s({target:"String",proto:!0,forced:t(23061)("sub")},{sub:function(){return a(this,"sub","","")}})},50375:function(i,l,t){var s=t(46518),a=t(79504),u=t(67750),f=t(91291),h=t(655),A=a("".slice),g=Math.max,p=Math.min;s({target:"String",proto:!0,forced:!"".substr||"ab".substr(-1)!=="b"},{substr:function(m,y){var E,C,T=h(u(this)),w=T.length,I=f(m);return I===1/0&&(I=0),I<0&&(I=g(w+I,0)),(E=y===void 0?w:f(y))<=0||E===1/0||I>=(C=p(I+E,w))?"":A(T,I,C)}})},16308:function(i,l,t){var s=t(46518),a=t(77240);s({target:"String",proto:!0,forced:t(23061)("sup")},{sup:function(){return a(this,"sup","","")}})},67438:function(i,l,t){var s=t(46518),a=t(69565),u=t(79504),f=t(67750),h=t(655),A=t(79039),g=Array,p=u("".charAt),m=u("".charCodeAt),y=u([].join),E="".toWellFormed,C=E&&A((function(){return a(E,1)!=="1"}));s({target:"String",proto:!0,forced:C},{toWellFormed:function(){var T=h(f(this));if(C)return a(E,T);for(var w=T.length,I=g(w),L=0;L<w;L++){var R=m(T,L);(63488&R)!=55296?I[L]=p(T,L):R>=56320||L+1>=w||(64512&m(T,L+1))!=56320?I[L]="�":(I[L]=p(T,L),I[++L]=p(T,L))}return y(I,"")}})},39202:function(i,l,t){t(33313);var s=t(46518),a=t(18866);s({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==a},{trimEnd:a})},58934:function(i,l,t){var s=t(46518),a=t(53487);s({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==a},{trimLeft:a})},33313:function(i,l,t){var s=t(46518),a=t(18866);s({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==a},{trimRight:a})},43359:function(i,l,t){t(58934);var s=t(46518),a=t(53487);s({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==a},{trimStart:a})},42762:function(i,l,t){var s=t(46518),a=t(43802).trim;s({target:"String",proto:!0,forced:t(60706)("trim")},{trim:function(){return a(this)}})},66412:function(i,l,t){t(70511)("asyncIterator")},6761:function(i,l,t){var s=t(46518),a=t(44576),u=t(69565),f=t(79504),h=t(96395),A=t(43724),g=t(4495),p=t(79039),m=t(39297),y=t(1625),E=t(28551),C=t(25397),T=t(56969),w=t(655),I=t(6980),L=t(2360),R=t(71072),B=t(38480),P=t(10298),N=t(33717),U=t(77347),G=t(24913),W=t(96801),K=t(48773),M=t(36840),Q=t(62106),Z=t(25745),J=t(66119),q=t(30421),te=t(33392),fe=t(78227),Ee=t(1951),Ae=t(70511),Ce=t(58242),Oe=t(10687),Ne=t(91181),Be=t(59213).forEach,Ge=J("hidden"),Ve="Symbol",$e="prototype",it=Ne.set,yt=Ne.getterFor(Ve),Tt=Object[$e],st=a.Symbol,ht=st&&st[$e],_t=a.RangeError,Ht=a.TypeError,Gt=a.QObject,Pt=U.f,It=G.f,Zt=P.f,Mt=K.f,Fe=f([].push),Ze=Z("symbols"),qe=Z("op-symbols"),ft=Z("wks"),be=!Gt||!Gt[$e]||!Gt[$e].findChild,Xe=function(Qe,dt,et){var xt=Pt(Tt,dt);xt&&delete Tt[dt],It(Qe,dt,et),xt&&Qe!==Tt&&It(Tt,dt,xt)},at=A&&p((function(){return L(It({},"a",{get:function(){return It(this,"a",{value:7}).a}})).a!==7}))?Xe:It,fr=function(Qe,dt){var et=Ze[Qe]=L(ht);return it(et,{type:Ve,tag:Qe,description:dt}),A||(et.description=dt),et},bt=function(Qe,dt,et){Qe===Tt&&bt(qe,dt,et),E(Qe);var xt=T(dt);return E(et),m(Ze,xt)?(et.enumerable?(m(Qe,Ge)&&Qe[Ge][xt]&&(Qe[Ge][xt]=!1),et=L(et,{enumerable:I(0,!1)})):(m(Qe,Ge)||It(Qe,Ge,I(1,L(null))),Qe[Ge][xt]=!0),at(Qe,xt,et)):It(Qe,xt,et)},Lt=function(Qe,dt){E(Qe);var et=C(dt),xt=R(et).concat(Qt(et));return Be(xt,(function(kt){A&&!u(me,et,kt)||bt(Qe,kt,et[kt])})),Qe},me=function(Qe){var dt=T(Qe),et=u(Mt,this,dt);return!(this===Tt&&m(Ze,dt)&&!m(qe,dt))&&(!(et||!m(this,dt)||!m(Ze,dt)||m(this,Ge)&&this[Ge][dt])||et)},ot=function(Qe,dt){var et=C(Qe),xt=T(dt);if(et!==Tt||!m(Ze,xt)||m(qe,xt)){var kt=Pt(et,xt);return!kt||!m(Ze,xt)||m(et,Ge)&&et[Ge][xt]||(kt.enumerable=!0),kt}},$t=function(Qe){var dt=Zt(C(Qe)),et=[];return Be(dt,(function(xt){m(Ze,xt)||m(q,xt)||Fe(et,xt)})),et},Qt=function(Qe){var dt=Qe===Tt,et=Zt(dt?qe:C(Qe)),xt=[];return Be(et,(function(kt){!m(Ze,kt)||dt&&!m(Tt,kt)||Fe(xt,Ze[kt])})),xt};g||(st=function(){if(y(ht,this))throw new Ht("Symbol is not a constructor");var Qe=arguments.length&&arguments[0]!==void 0?w(arguments[0]):void 0,dt=te(Qe),et=function(xt){var kt=this===void 0?a:this;kt===Tt&&u(et,qe,xt),m(kt,Ge)&&m(kt[Ge],dt)&&(kt[Ge][dt]=!1);var Wt=I(1,xt);try{at(kt,dt,Wt)}catch(Ft){if(!(Ft instanceof _t))throw Ft;Xe(kt,dt,Wt)}};return A&&be&&at(Tt,dt,{configurable:!0,set:et}),fr(dt,Qe)},M(ht=st[$e],"toString",(function(){return yt(this).tag})),M(st,"withoutSetter",(function(Qe){return fr(te(Qe),Qe)})),K.f=me,G.f=bt,W.f=Lt,U.f=ot,B.f=P.f=$t,N.f=Qt,Ee.f=function(Qe){return fr(fe(Qe),Qe)},A&&(Q(ht,"description",{configurable:!0,get:function(){return yt(this).description}}),h||M(Tt,"propertyIsEnumerable",me,{unsafe:!0}))),s({global:!0,constructor:!0,wrap:!0,forced:!g,sham:!g},{Symbol:st}),Be(R(ft),(function(Qe){Ae(Qe)})),s({target:Ve,stat:!0,forced:!g},{useSetter:function(){be=!0},useSimple:function(){be=!1}}),s({target:"Object",stat:!0,forced:!g,sham:!A},{create:function(Qe,dt){return dt===void 0?L(Qe):Lt(L(Qe),dt)},defineProperty:bt,defineProperties:Lt,getOwnPropertyDescriptor:ot}),s({target:"Object",stat:!0,forced:!g},{getOwnPropertyNames:$t}),Ce(),Oe(st,Ve),q[Ge]=!0},89463:function(i,l,t){var s=t(46518),a=t(43724),u=t(44576),f=t(79504),h=t(39297),A=t(94901),g=t(1625),p=t(655),m=t(62106),y=t(77740),E=u.Symbol,C=E&&E.prototype;if(a&&A(E)&&(!("description"in C)||E().description!==void 0)){var T={},w=function(){var U=arguments.length<1||arguments[0]===void 0?void 0:p(arguments[0]),G=g(C,this)?new E(U):U===void 0?E():E(U);return U===""&&(T[G]=!0),G};y(w,E),w.prototype=C,C.constructor=w;var I=String(E("description detection"))==="Symbol(description detection)",L=f(C.valueOf),R=f(C.toString),B=/^Symbol\((.*)\)[^)]+$/,P=f("".replace),N=f("".slice);m(C,"description",{configurable:!0,get:function(){var U=L(this);if(h(T,U))return"";var G=R(U),W=I?N(G,7,-1):P(G,B,"$1");return W===""?void 0:W}}),s({global:!0,constructor:!0,forced:!0},{Symbol:w})}},81510:function(i,l,t){var s=t(46518),a=t(97751),u=t(39297),f=t(655),h=t(25745),A=t(91296),g=h("string-to-symbol-registry"),p=h("symbol-to-string-registry");s({target:"Symbol",stat:!0,forced:!A},{for:function(m){var y=f(m);if(u(g,y))return g[y];var E=a("Symbol")(y);return g[y]=E,p[E]=y,E}})},60193:function(i,l,t){t(70511)("hasInstance")},92168:function(i,l,t){t(70511)("isConcatSpreadable")},2259:function(i,l,t){t(70511)("iterator")},52675:function(i,l,t){t(6761),t(81510),t(97812),t(33110),t(49773)},97812:function(i,l,t){var s=t(46518),a=t(39297),u=t(10757),f=t(16823),h=t(25745),A=t(91296),g=h("symbol-to-string-registry");s({target:"Symbol",stat:!0,forced:!A},{keyFor:function(p){if(!u(p))throw new TypeError(f(p)+" is not a symbol");if(a(g,p))return g[p]}})},83142:function(i,l,t){t(70511)("matchAll")},86964:function(i,l,t){t(70511)("match")},83237:function(i,l,t){t(70511)("replace")},61833:function(i,l,t){t(70511)("search")},67947:function(i,l,t){t(70511)("species")},31073:function(i,l,t){t(70511)("split")},45700:function(i,l,t){var s=t(70511),a=t(58242);s("toPrimitive"),a()},78125:function(i,l,t){var s=t(97751),a=t(70511),u=t(10687);a("toStringTag"),u(s("Symbol"),"Symbol")},20326:function(i,l,t){t(70511)("unscopables")},48140:function(i,l,t){var s=t(94644),a=t(26198),u=t(91291),f=s.aTypedArray;(0,s.exportTypedArrayMethod)("at",(function(h){var A=f(this),g=a(A),p=u(h),m=p>=0?p:g+p;return m<0||m>=g?void 0:A[m]}))},81630:function(i,l,t){var s=t(79504),a=t(94644),u=s(t(57029)),f=a.aTypedArray;(0,a.exportTypedArrayMethod)("copyWithin",(function(h,A){return u(f(this),h,A,arguments.length>2?arguments[2]:void 0)}))},72170:function(i,l,t){var s=t(94644),a=t(59213).every,u=s.aTypedArray;(0,s.exportTypedArrayMethod)("every",(function(f){return a(u(this),f,arguments.length>1?arguments[1]:void 0)}))},75044:function(i,l,t){var s=t(94644),a=t(84373),u=t(75854),f=t(36955),h=t(69565),A=t(79504),g=t(79039),p=s.aTypedArray,m=s.exportTypedArrayMethod,y=A("".slice);m("fill",(function(E){var C=arguments.length;p(this);var T=y(f(this),0,3)==="Big"?u(E):+E;return h(a,this,T,C>1?arguments[1]:void 0,C>2?arguments[2]:void 0)}),g((function(){var E=0;return new Int8Array(2).fill({valueOf:function(){return E++}}),E!==1})))},69539:function(i,l,t){var s=t(94644),a=t(59213).filter,u=t(29948),f=s.aTypedArray;(0,s.exportTypedArrayMethod)("filter",(function(h){var A=a(f(this),h,arguments.length>1?arguments[1]:void 0);return u(this,A)}))},89955:function(i,l,t){var s=t(94644),a=t(59213).findIndex,u=s.aTypedArray;(0,s.exportTypedArrayMethod)("findIndex",(function(f){return a(u(this),f,arguments.length>1?arguments[1]:void 0)}))},91134:function(i,l,t){var s=t(94644),a=t(43839).findLastIndex,u=s.aTypedArray;(0,s.exportTypedArrayMethod)("findLastIndex",(function(f){return a(u(this),f,arguments.length>1?arguments[1]:void 0)}))},21903:function(i,l,t){var s=t(94644),a=t(43839).findLast,u=s.aTypedArray;(0,s.exportTypedArrayMethod)("findLast",(function(f){return a(u(this),f,arguments.length>1?arguments[1]:void 0)}))},31694:function(i,l,t){var s=t(94644),a=t(59213).find,u=s.aTypedArray;(0,s.exportTypedArrayMethod)("find",(function(f){return a(u(this),f,arguments.length>1?arguments[1]:void 0)}))},34594:function(i,l,t){t(15823)("Float32",(function(s){return function(a,u,f){return s(this,a,u,f)}}))},29833:function(i,l,t){t(15823)("Float64",(function(s){return function(a,u,f){return s(this,a,u,f)}}))},33206:function(i,l,t){var s=t(94644),a=t(59213).forEach,u=s.aTypedArray;(0,s.exportTypedArrayMethod)("forEach",(function(f){a(u(this),f,arguments.length>1?arguments[1]:void 0)}))},48345:function(i,l,t){var s=t(72805);(0,t(94644).exportTypedArrayStaticMethod)("from",t(43251),s)},44496:function(i,l,t){var s=t(94644),a=t(19617).includes,u=s.aTypedArray;(0,s.exportTypedArrayMethod)("includes",(function(f){return a(u(this),f,arguments.length>1?arguments[1]:void 0)}))},66651:function(i,l,t){var s=t(94644),a=t(19617).indexOf,u=s.aTypedArray;(0,s.exportTypedArrayMethod)("indexOf",(function(f){return a(u(this),f,arguments.length>1?arguments[1]:void 0)}))},72107:function(i,l,t){t(15823)("Int16",(function(s){return function(a,u,f){return s(this,a,u,f)}}))},95477:function(i,l,t){t(15823)("Int32",(function(s){return function(a,u,f){return s(this,a,u,f)}}))},46594:function(i,l,t){t(15823)("Int8",(function(s){return function(a,u,f){return s(this,a,u,f)}}))},12887:function(i,l,t){var s=t(44576),a=t(79039),u=t(79504),f=t(94644),h=t(23792),A=t(78227)("iterator"),g=s.Uint8Array,p=u(h.values),m=u(h.keys),y=u(h.entries),E=f.aTypedArray,C=f.exportTypedArrayMethod,T=g&&g.prototype,w=!a((function(){T[A].call([1])})),I=!!T&&T.values&&T[A]===T.values&&T.values.name==="values",L=function(){return p(E(this))};C("entries",(function(){return y(E(this))}),w),C("keys",(function(){return m(E(this))}),w),C("values",L,w||!I,{name:"values"}),C(A,L,w||!I,{name:"values"})},19369:function(i,l,t){var s=t(94644),a=t(79504),u=s.aTypedArray,f=s.exportTypedArrayMethod,h=a([].join);f("join",(function(A){return h(u(this),A)}))},66812:function(i,l,t){var s=t(94644),a=t(18745),u=t(8379),f=s.aTypedArray;(0,s.exportTypedArrayMethod)("lastIndexOf",(function(h){var A=arguments.length;return a(u,f(this),A>1?[h,arguments[1]]:[h])}))},8995:function(i,l,t){var s=t(94644),a=t(59213).map,u=s.aTypedArray,f=s.getTypedArrayConstructor;(0,s.exportTypedArrayMethod)("map",(function(h){return a(u(this),h,arguments.length>1?arguments[1]:void 0,(function(A,g){return new(f(A))(g)}))}))},52568:function(i,l,t){var s=t(94644),a=t(72805),u=s.aTypedArrayConstructor;(0,s.exportTypedArrayStaticMethod)("of",(function(){for(var f=0,h=arguments.length,A=new(u(this))(h);h>f;)A[f]=arguments[f++];return A}),a)},36072:function(i,l,t){var s=t(94644),a=t(80926).right,u=s.aTypedArray;(0,s.exportTypedArrayMethod)("reduceRight",(function(f){var h=arguments.length;return a(u(this),f,h,h>1?arguments[1]:void 0)}))},31575:function(i,l,t){var s=t(94644),a=t(80926).left,u=s.aTypedArray;(0,s.exportTypedArrayMethod)("reduce",(function(f){var h=arguments.length;return a(u(this),f,h,h>1?arguments[1]:void 0)}))},88747:function(i,l,t){var s=t(94644),a=s.aTypedArray,u=s.exportTypedArrayMethod,f=Math.floor;u("reverse",(function(){for(var h,A=this,g=a(A).length,p=f(g/2),m=0;m<p;)h=A[m],A[m++]=A[--g],A[g]=h;return A}))},28845:function(i,l,t){var s=t(44576),a=t(69565),u=t(94644),f=t(26198),h=t(58229),A=t(48981),g=t(79039),p=s.RangeError,m=s.Int8Array,y=m&&m.prototype,E=y&&y.set,C=u.aTypedArray,T=u.exportTypedArrayMethod,w=!g((function(){var L=new Uint8ClampedArray(2);return a(E,L,{length:1,0:3},1),L[1]!==3})),I=w&&u.NATIVE_ARRAY_BUFFER_VIEWS&&g((function(){var L=new m(2);return L.set(1),L.set("2",1),L[0]!==0||L[1]!==2}));T("set",(function(L){C(this);var R=h(arguments.length>1?arguments[1]:void 0,1),B=A(L);if(w)return a(E,this,B,R);var P=this.length,N=f(B),U=0;if(N+R>P)throw new p("Wrong length");for(;U<N;)this[R+U]=B[U++]}),!w||I)},29423:function(i,l,t){var s=t(94644),a=t(79039),u=t(67680),f=s.aTypedArray,h=s.getTypedArrayConstructor;(0,s.exportTypedArrayMethod)("slice",(function(A,g){for(var p=u(f(this),A,g),m=h(this),y=0,E=p.length,C=new m(E);E>y;)C[y]=p[y++];return C}),a((function(){new Int8Array(1).slice()})))},57301:function(i,l,t){var s=t(94644),a=t(59213).some,u=s.aTypedArray;(0,s.exportTypedArrayMethod)("some",(function(f){return a(u(this),f,arguments.length>1?arguments[1]:void 0)}))},373:function(i,l,t){var s=t(44576),a=t(27476),u=t(79039),f=t(79306),h=t(74488),A=t(94644),g=t(13709),p=t(13763),m=t(39519),y=t(3607),E=A.aTypedArray,C=A.exportTypedArrayMethod,T=s.Uint16Array,w=T&&a(T.prototype.sort),I=!(!w||u((function(){w(new T(2),null)}))&&u((function(){w(new T(2),{})}))),L=!!w&&!u((function(){if(m)return m<74;if(g)return g<67;if(p)return!0;if(y)return y<602;var R,B,P=new T(516),N=Array(516);for(R=0;R<516;R++)B=R%4,P[R]=515-R,N[R]=R-2*B+3;for(w(P,(function(U,G){return(U/4|0)-(G/4|0)})),R=0;R<516;R++)if(P[R]!==N[R])return!0}));C("sort",(function(R){return R!==void 0&&f(R),L?w(this,R):h(E(this),(function(B){return function(P,N){return B!==void 0?+B(P,N)||0:N!=N?-1:P!=P?1:P===0&&N===0?1/P>0&&1/N<0?1:-1:P>N}})(R))}),!L||I)},86614:function(i,l,t){var s=t(94644),a=t(18014),u=t(35610),f=s.aTypedArray,h=s.getTypedArrayConstructor;(0,s.exportTypedArrayMethod)("subarray",(function(A,g){var p=f(this),m=p.length,y=u(A,m);return new(h(p))(p.buffer,p.byteOffset+y*p.BYTES_PER_ELEMENT,a((g===void 0?m:u(g,m))-y))}))},41405:function(i,l,t){var s=t(44576),a=t(18745),u=t(94644),f=t(79039),h=t(67680),A=s.Int8Array,g=u.aTypedArray,p=u.exportTypedArrayMethod,m=[].toLocaleString,y=!!A&&f((function(){m.call(new A(1))}));p("toLocaleString",(function(){return a(m,y?h(g(this)):g(this),h(arguments))}),f((function(){return[1,2].toLocaleString()!==new A([1,2]).toLocaleString()}))||!f((function(){A.prototype.toLocaleString.call([1,2])})))},37467:function(i,l,t){var s=t(37628),a=t(94644),u=a.aTypedArray,f=a.exportTypedArrayMethod,h=a.getTypedArrayConstructor;f("toReversed",(function(){return s(u(this),h(this))}))},44732:function(i,l,t){var s=t(94644),a=t(79504),u=t(79306),f=t(35370),h=s.aTypedArray,A=s.getTypedArrayConstructor,g=s.exportTypedArrayMethod,p=a(s.TypedArrayPrototype.sort);g("toSorted",(function(m){m!==void 0&&u(m);var y=h(this),E=f(A(y),y);return p(E,m)}))},33684:function(i,l,t){var s=t(94644).exportTypedArrayMethod,a=t(79039),u=t(44576),f=t(79504),h=u.Uint8Array,A=h&&h.prototype||{},g=[].toString,p=f([].join);a((function(){g.call({})}))&&(g=function(){return p(this)});var m=A.toString!==g;s("toString",g,m)},3690:function(i,l,t){t(15823)("Uint16",(function(s){return function(a,u,f){return s(this,a,u,f)}}))},61740:function(i,l,t){t(15823)("Uint32",(function(s){return function(a,u,f){return s(this,a,u,f)}}))},21489:function(i,l,t){t(15823)("Uint8",(function(s){return function(a,u,f){return s(this,a,u,f)}}))},22134:function(i,l,t){t(15823)("Uint8",(function(s){return function(a,u,f){return s(this,a,u,f)}}),!0)},79577:function(i,l,t){var s=t(39928),a=t(94644),u=t(18727),f=t(91291),h=t(75854),A=a.aTypedArray,g=a.getTypedArrayConstructor,p=a.exportTypedArrayMethod,m=!!(function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(y){return y===8}})();p("with",function(y,E){var C=A(this),T=f(y),w=u(C)?h(E):+E;return s(C,g(C),T,w)},!m)},88267:function(i,l,t){var s=t(46518),a=t(79504),u=t(655),f=String.fromCharCode,h=a("".charAt),A=a(/./.exec),g=a("".slice),p=/^[\da-f]{2}$/i,m=/^[\da-f]{4}$/i;s({global:!0},{unescape:function(y){for(var E,C,T=u(y),w="",I=T.length,L=0;L<I;){if((E=h(T,L++))==="%"){if(h(T,L)==="u"){if(C=g(T,L+1,L+5),A(m,C)){w+=f(parseInt(C,16)),L+=5;continue}}else if(C=g(T,L,L+2),A(p,C)){w+=f(parseInt(C,16)),L+=2;continue}}w+=E}return w}})},65746:function(i,l,t){var s,a=t(92744),u=t(44576),f=t(79504),h=t(56279),A=t(3451),g=t(16468),p=t(91625),m=t(20034),y=t(91181).enforce,E=t(79039),C=t(58622),T=Object,w=Array.isArray,I=T.isExtensible,L=T.isFrozen,R=T.isSealed,B=T.freeze,P=T.seal,N=!u.ActiveXObject&&"ActiveXObject"in u,U=function(J){return function(){return J(this,arguments.length?arguments[0]:void 0)}},G=g("WeakMap",U,p),W=G.prototype,K=f(W.set);if(C)if(N){s=p.getConstructor(U,"WeakMap",!0),A.enable();var M=f(W.delete),Q=f(W.has),Z=f(W.get);h(W,{delete:function(J){if(m(J)&&!I(J)){var q=y(this);return q.frozen||(q.frozen=new s),M(this,J)||q.frozen.delete(J)}return M(this,J)},has:function(J){if(m(J)&&!I(J)){var q=y(this);return q.frozen||(q.frozen=new s),Q(this,J)||q.frozen.has(J)}return Q(this,J)},get:function(J){if(m(J)&&!I(J)){var q=y(this);return q.frozen||(q.frozen=new s),Q(this,J)?Z(this,J):q.frozen.get(J)}return Z(this,J)},set:function(J,q){if(m(J)&&!I(J)){var te=y(this);te.frozen||(te.frozen=new s),Q(this,J)?K(this,J,q):te.frozen.set(J,q)}else K(this,J,q);return this}})}else a&&E((function(){var J=B([]);return K(new G,J,1),!L(J)}))&&h(W,{set:function(J,q){var te;return w(J)&&(L(J)?te=B:R(J)&&(te=P)),K(this,J,q),te&&te(J),this}})},73772:function(i,l,t){t(65746)},5240:function(i,l,t){t(16468)("WeakSet",(function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}}),t(91625))},30958:function(i,l,t){t(5240)},2945:function(i,l,t){var s=t(46518),a=t(44576),u=t(97751),f=t(79504),h=t(69565),A=t(79039),g=t(655),p=t(22812),m=t(92804).c2i,y=/[^\d+/a-z]/i,E=/[\t\n\f\r ]+/g,C=/[=]{1,2}$/,T=u("atob"),w=String.fromCharCode,I=f("".charAt),L=f("".replace),R=f(y.exec),B=!!T&&!A((function(){return T("aGk=")!=="hi"})),P=B&&A((function(){return T(" ")!==""})),N=B&&!A((function(){T("a")})),U=B&&!A((function(){T()})),G=B&&T.length!==1;s({global:!0,bind:!0,enumerable:!0,forced:!B||P||N||U||G},{atob:function(W){if(p(arguments.length,1),B&&!P&&!N)return h(T,a,W);var K,M,Q,Z=L(g(W),E,""),J="",q=0,te=0;if(Z.length%4==0&&(Z=L(Z,C,"")),(K=Z.length)%4==1||R(y,Z))throw new(u("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;q<K;)M=I(Z,q++),Q=te%4?64*Q+m[M]:m[M],te++%4&&(J+=w(255&Q>>(-2*te&6)));return J}})},42207:function(i,l,t){var s=t(46518),a=t(44576),u=t(97751),f=t(79504),h=t(69565),A=t(79039),g=t(655),p=t(22812),m=t(92804).i2c,y=u("btoa"),E=f("".charAt),C=f("".charCodeAt),T=!!y&&!A((function(){return y("hi")!=="aGk="})),w=T&&!A((function(){y()})),I=T&&A((function(){return y(null)!=="bnVsbA=="})),L=T&&y.length!==1;s({global:!0,bind:!0,enumerable:!0,forced:!T||w||I||L},{btoa:function(R){if(p(arguments.length,1),T)return h(y,a,g(R));for(var B,P,N=g(R),U="",G=0,W=m;E(N,G)||(W="=",G%1);){if((P=C(N,G+=.75))>255)throw new(u("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");U+=E(W,63&(B=B<<8|P)>>8-G%1*8)}return U}})},86368:function(i,l,t){var s=t(46518),a=t(44576),u=t(59225).clear;s({global:!0,bind:!0,enumerable:!0,forced:a.clearImmediate!==u},{clearImmediate:u})},23500:function(i,l,t){var s=t(44576),a=t(67400),u=t(79296),f=t(90235),h=t(66699),A=function(p){if(p&&p.forEach!==f)try{h(p,"forEach",f)}catch{p.forEach=f}};for(var g in a)a[g]&&A(s[g]&&s[g].prototype);A(u)},62953:function(i,l,t){var s=t(44576),a=t(67400),u=t(79296),f=t(23792),h=t(66699),A=t(10687),g=t(78227)("iterator"),p=f.values,m=function(E,C){if(E){if(E[g]!==p)try{h(E,g,p)}catch{E[g]=p}if(A(E,C,!0),a[C]){for(var T in f)if(E[T]!==f[T])try{h(E,T,f[T])}catch{E[T]=f[T]}}}};for(var y in a)m(s[y]&&s[y].prototype,y);m(u,"DOMTokenList")},55815:function(i,l,t){var s=t(46518),a=t(97751),u=t(89429),f=t(79039),h=t(2360),A=t(6980),g=t(24913).f,p=t(36840),m=t(62106),y=t(39297),E=t(90679),C=t(28551),T=t(77536),w=t(32603),I=t(55002),L=t(16193),R=t(91181),B=t(43724),P=t(96395),N="DOMException",U="DATA_CLONE_ERR",G=a("Error"),W=a(N)||(function(){try{new(a("MessageChannel")||u("worker_threads").MessageChannel)().port1.postMessage(new WeakMap)}catch(ht){if(ht.name===U&&ht.code===25)return ht.constructor}})(),K=W&&W.prototype,M=G.prototype,Q=R.set,Z=R.getterFor(N),J="stack"in new G(N),q=function(ht){return y(I,ht)&&I[ht].m?I[ht].c:0},te=function(){E(this,fe);var ht=arguments.length,_t=w(ht<1?void 0:arguments[0]),Ht=w(ht<2?void 0:arguments[1],"Error"),Gt=q(Ht);if(Q(this,{type:N,name:Ht,message:_t,code:Gt}),B||(this.name=Ht,this.message=_t,this.code=Gt),J){var Pt=new G(_t);Pt.name=N,g(this,"stack",A(1,L(Pt.stack,1)))}},fe=te.prototype=h(M),Ee=function(ht){return{enumerable:!0,configurable:!0,get:ht}},Ae=function(ht){return Ee((function(){return Z(this)[ht]}))};B&&(m(fe,"code",Ae("code")),m(fe,"message",Ae("message")),m(fe,"name",Ae("name"))),g(fe,"constructor",A(1,te));var Ce=f((function(){return!(new W instanceof G)})),Oe=Ce||f((function(){return M.toString!==T||String(new W(1,2))!=="2: 1"})),Ne=Ce||f((function(){return new W(1,"DataCloneError").code!==25})),Be=Ce||W[U]!==25||K[U]!==25,Ge=P?Oe||Ne||Be:Ce;s({global:!0,constructor:!0,forced:Ge},{DOMException:Ge?te:W});var Ve=a(N),$e=Ve.prototype;for(var it in Oe&&(P||W===Ve)&&p($e,"toString",T),Ne&&B&&W===Ve&&m($e,"code",Ee((function(){return q(C(this).name)}))),I)if(y(I,it)){var yt=I[it],Tt=yt.s,st=A(6,yt.c);y(Ve,Tt)||g(Ve,Tt,st),y($e,Tt)||g($e,Tt,st)}},64979:function(i,l,t){var s=t(46518),a=t(44576),u=t(97751),f=t(6980),h=t(24913).f,A=t(39297),g=t(90679),p=t(23167),m=t(32603),y=t(55002),E=t(16193),C=t(43724),T=t(96395),w="DOMException",I=u("Error"),L=u(w),R=function(){g(this,B);var q=arguments.length,te=m(q<1?void 0:arguments[0]),fe=m(q<2?void 0:arguments[1],"Error"),Ee=new L(te,fe),Ae=new I(te);return Ae.name=w,h(Ee,"stack",f(1,E(Ae.stack,1))),p(Ee,this,R),Ee},B=R.prototype=L.prototype,P="stack"in new I(w),N="stack"in new L(1,2),U=L&&C&&Object.getOwnPropertyDescriptor(a,w),G=!(!U||U.writable&&U.configurable),W=P&&!G&&!N;s({global:!0,constructor:!0,forced:T||W},{DOMException:W?R:L});var K=u(w),M=K.prototype;if(M.constructor!==K){for(var Q in T||h(M,"constructor",f(1,K)),y)if(A(y,Q)){var Z=y[Q],J=Z.s;A(K,J)||h(K,J,f(6,Z.c))}}},79739:function(i,l,t){var s=t(97751),a="DOMException";t(10687)(s(a),a)},59848:function(i,l,t){t(86368),t(29309)},122:function(i,l,t){var s=t(46518),a=t(44576),u=t(91955),f=t(79306),h=t(22812),A=t(79039),g=t(43724);s({global:!0,enumerable:!0,dontCallGetSet:!0,forced:A((function(){return g&&Object.getOwnPropertyDescriptor(a,"queueMicrotask").value.length!==1}))},{queueMicrotask:function(p){h(arguments.length,1),u(f(p))}})},13611:function(i,l,t){var s=t(46518),a=t(44576),u=t(62106),f=t(43724),h=TypeError,A=Object.defineProperty,g=a.self!==a;try{if(f){var p=Object.getOwnPropertyDescriptor(a,"self");!g&&p&&p.get&&p.enumerable||u(a,"self",{get:function(){return a},set:function(m){if(this!==a)throw new h("Illegal invocation");A(a,"self",{value:m,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else s({global:!0,simple:!0,forced:g},{self:a})}catch{}},29309:function(i,l,t){var s=t(46518),a=t(44576),u=t(59225).set,f=t(79472),h=a.setImmediate?f(u,!1):u;s({global:!0,bind:!0,enumerable:!0,forced:a.setImmediate!==h},{setImmediate:h})},15575:function(i,l,t){var s=t(46518),a=t(44576),u=t(79472)(a.setInterval,!0);s({global:!0,bind:!0,forced:a.setInterval!==u},{setInterval:u})},24599:function(i,l,t){var s=t(46518),a=t(44576),u=t(79472)(a.setTimeout,!0);s({global:!0,bind:!0,forced:a.setTimeout!==u},{setTimeout:u})},71678:function(i,l,t){var s,a=t(96395),u=t(46518),f=t(44576),h=t(97751),A=t(79504),g=t(79039),p=t(33392),m=t(94901),y=t(33517),E=t(64117),C=t(20034),T=t(10757),w=t(72652),I=t(28551),L=t(36955),R=t(39297),B=t(97040),P=t(66699),N=t(26198),U=t(22812),G=t(61034),W=t(72248),K=t(94402),M=t(38469),Q=t(94483),Z=t(24659),J=t(1548),q=f.Object,te=f.Array,fe=f.Date,Ee=f.Error,Ae=f.TypeError,Ce=f.PerformanceMark,Oe=h("DOMException"),Ne=W.Map,Be=W.has,Ge=W.get,Ve=W.set,$e=K.Set,it=K.add,yt=K.has,Tt=h("Object","keys"),st=A([].push),ht=A((!0).valueOf),_t=A(1 .valueOf),Ht=A("".valueOf),Gt=A(fe.prototype.getTime),Pt=p("structuredClone"),It="DataCloneError",Zt="Transferring",Mt=function(me){return!g((function(){var ot=new f.Set([7]),$t=me(ot),Qt=me(q(7));return $t===ot||!$t.has(7)||!C(Qt)||+Qt!=7}))&&me},Fe=function(me,ot){return!g((function(){var $t=new ot,Qt=me({a:$t,b:$t});return!(Qt&&Qt.a===Qt.b&&Qt.a instanceof ot&&Qt.a.stack===$t.stack)}))},Ze=f.structuredClone,qe=a||!Fe(Ze,Ee)||!Fe(Ze,Oe)||(s=Ze,!!g((function(){var me=s(new f.AggregateError([1],Pt,{cause:3}));return me.name!=="AggregateError"||me.errors[0]!==1||me.message!==Pt||me.cause!==3}))),ft=!Ze&&Mt((function(me){return new Ce(Pt,{detail:me}).detail})),be=Mt(Ze)||ft,Xe=function(me){throw new Oe("Uncloneable type: "+me,It)},at=function(me,ot){throw new Oe((ot||"Cloning")+" of "+me+" cannot be properly polyfilled in this engine",It)},fr=function(me,ot){return be||at(ot),be(me)},bt=function(me,ot,$t){if(Be(ot,me))return Ge(ot,me);var Qt,Qe,dt,et,xt,kt;if(($t||L(me))==="SharedArrayBuffer")Qt=be?be(me):me;else{var Wt=f.DataView;Wt||m(me.slice)||at("ArrayBuffer");try{if(m(me.slice)&&!me.resizable)Qt=me.slice(0);else for(Qe=me.byteLength,dt=("maxByteLength"in me)?{maxByteLength:me.maxByteLength}:void 0,Qt=new ArrayBuffer(Qe,dt),et=new Wt(me),xt=new Wt(Qt),kt=0;kt<Qe;kt++)xt.setUint8(kt,et.getUint8(kt))}catch{throw new Oe("ArrayBuffer is detached",It)}}return Ve(ot,me,Qt),Qt},Lt=function(me,ot){if(T(me)&&Xe("Symbol"),!C(me))return me;if(ot){if(Be(ot,me))return Ge(ot,me)}else ot=new Ne;var $t,Qt,Qe,dt,et,xt,kt,Wt,Ft=L(me);switch(Ft){case"Array":Qe=te(N(me));break;case"Object":Qe={};break;case"Map":Qe=new Ne;break;case"Set":Qe=new $e;break;case"RegExp":Qe=new RegExp(me.source,G(me));break;case"Error":switch(Qt=me.name){case"AggregateError":Qe=new(h(Qt))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":Qe=new(h(Qt));break;case"CompileError":case"LinkError":case"RuntimeError":Qe=new(h("WebAssembly",Qt));break;default:Qe=new Ee}break;case"DOMException":Qe=new Oe(me.message,me.name);break;case"ArrayBuffer":case"SharedArrayBuffer":Qe=bt(me,ot,Ft);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":xt=Ft==="DataView"?me.byteLength:me.length,Qe=(function(ke,ut,Et,At,Kt){var er=f[ut];return C(er)||at(ut),new er(bt(ke.buffer,Kt),Et,At)})(me,Ft,me.byteOffset,xt,ot);break;case"DOMQuad":try{Qe=new DOMQuad(Lt(me.p1,ot),Lt(me.p2,ot),Lt(me.p3,ot),Lt(me.p4,ot))}catch{Qe=fr(me,Ft)}break;case"File":if(be)try{Qe=be(me),L(Qe)!==Ft&&(Qe=void 0)}catch{}if(!Qe)try{Qe=new File([me],me.name,me)}catch{}Qe||at(Ft);break;case"FileList":if(dt=(function(){var ke;try{ke=new f.DataTransfer}catch{try{ke=new f.ClipboardEvent("").clipboardData}catch{}}return ke&&ke.items&&ke.files?ke:null})()){for(et=0,xt=N(me);et<xt;et++)dt.items.add(Lt(me[et],ot));Qe=dt.files}else Qe=fr(me,Ft);break;case"ImageData":try{Qe=new ImageData(Lt(me.data,ot),me.width,me.height,{colorSpace:me.colorSpace})}catch{Qe=fr(me,Ft)}break;default:if(be)Qe=be(me);else switch(Ft){case"BigInt":Qe=q(me.valueOf());break;case"Boolean":Qe=q(ht(me));break;case"Number":Qe=q(_t(me));break;case"String":Qe=q(Ht(me));break;case"Date":Qe=new fe(Gt(me));break;case"Blob":try{Qe=me.slice(0,me.size,me.type)}catch{at(Ft)}break;case"DOMPoint":case"DOMPointReadOnly":$t=f[Ft];try{Qe=$t.fromPoint?$t.fromPoint(me):new $t(me.x,me.y,me.z,me.w)}catch{at(Ft)}break;case"DOMRect":case"DOMRectReadOnly":$t=f[Ft];try{Qe=$t.fromRect?$t.fromRect(me):new $t(me.x,me.y,me.width,me.height)}catch{at(Ft)}break;case"DOMMatrix":case"DOMMatrixReadOnly":$t=f[Ft];try{Qe=$t.fromMatrix?$t.fromMatrix(me):new $t(me)}catch{at(Ft)}break;case"AudioData":case"VideoFrame":m(me.clone)||at(Ft);try{Qe=me.clone()}catch{Xe(Ft)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":at(Ft);default:Xe(Ft)}}switch(Ve(ot,me,Qe),Ft){case"Array":case"Object":for(kt=Tt(me),et=0,xt=N(kt);et<xt;et++)Wt=kt[et],B(Qe,Wt,Lt(me[Wt],ot));break;case"Map":me.forEach((function(ke,ut){Ve(Qe,Lt(ut,ot),Lt(ke,ot))}));break;case"Set":me.forEach((function(ke){it(Qe,Lt(ke,ot))}));break;case"Error":P(Qe,"message",Lt(me.message,ot)),R(me,"cause")&&P(Qe,"cause",Lt(me.cause,ot)),Qt==="AggregateError"?Qe.errors=Lt(me.errors,ot):Qt==="SuppressedError"&&(Qe.error=Lt(me.error,ot),Qe.suppressed=Lt(me.suppressed,ot));case"DOMException":Z&&P(Qe,"stack",Lt(me.stack,ot))}return Qe};u({global:!0,enumerable:!0,sham:!J,forced:qe},{structuredClone:function(me){var ot,$t,Qt=U(arguments.length,1)>1&&!E(arguments[1])?I(arguments[1]):void 0,Qe=Qt?Qt.transfer:void 0;Qe!==void 0&&($t=(function(et,xt){if(!C(et))throw new Ae("Transfer option cannot be converted to a sequence");var kt=[];w(et,(function(Ar){st(kt,I(Ar))}));for(var Wt,Ft,ke,ut,Et,At=0,Kt=N(kt),er=new $e;At<Kt;){if(Wt=kt[At++],(Ft=L(Wt))==="ArrayBuffer"?yt(er,Wt):Be(xt,Wt))throw new Oe("Duplicate transferable",It);if(Ft!=="ArrayBuffer"){if(J)ut=Ze(Wt,{transfer:[Wt]});else switch(Ft){case"ImageBitmap":ke=f.OffscreenCanvas,y(ke)||at(Ft,Zt);try{(Et=new ke(Wt.width,Wt.height)).getContext("bitmaprenderer").transferFromImageBitmap(Wt),ut=Et.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":m(Wt.clone)&&m(Wt.close)||at(Ft,Zt);try{ut=Wt.clone(),Wt.close()}catch{}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":at(Ft,Zt)}if(ut===void 0)throw new Oe("This object cannot be transferred: "+Ft,It);Ve(xt,Wt,ut)}else it(er,Wt)}return er})(Qe,ot=new Ne));var dt=Lt(me,ot);return $t&&(function(et){M(et,(function(xt){J?be(xt,{transfer:[xt]}):m(xt.transfer)?xt.transfer():Q?Q(xt):at("ArrayBuffer",Zt)}))})($t),dt}})},76031:function(i,l,t){t(15575),t(24599)},98406:function(i,l,t){t(23792),t(27337);var s=t(46518),a=t(44576),u=t(93389),f=t(97751),h=t(69565),A=t(79504),g=t(43724),p=t(67416),m=t(36840),y=t(62106),E=t(56279),C=t(10687),T=t(33994),w=t(91181),I=t(90679),L=t(94901),R=t(39297),B=t(76080),P=t(36955),N=t(28551),U=t(20034),G=t(655),W=t(2360),K=t(6980),M=t(70081),Q=t(50851),Z=t(62529),J=t(22812),q=t(78227),te=t(74488),fe=q("iterator"),Ee="URLSearchParams",Ae=Ee+"Iterator",Ce=w.set,Oe=w.getterFor(Ee),Ne=w.getterFor(Ae),Be=u("fetch"),Ge=u("Request"),Ve=u("Headers"),$e=Ge&&Ge.prototype,it=Ve&&Ve.prototype,yt=a.TypeError,Tt=a.encodeURIComponent,st=String.fromCharCode,ht=f("String","fromCodePoint"),_t=parseInt,Ht=A("".charAt),Gt=A([].join),Pt=A([].push),It=A("".replace),Zt=A([].shift),Mt=A([].splice),Fe=A("".split),Ze=A("".slice),qe=A(/./.exec),ft=/\+/g,be=/^[0-9a-f]+$/i,Xe=function(ke,ut){var Et=Ze(ke,ut,ut+2);return qe(be,Et)?_t(Et,16):NaN},at=function(ke){for(var ut=0,Et=128;Et>0&&ke&Et;Et>>=1)ut++;return ut},fr=function(ke){var ut=null;switch(ke.length){case 1:ut=ke[0];break;case 2:ut=(31&ke[0])<<6|63&ke[1];break;case 3:ut=(15&ke[0])<<12|(63&ke[1])<<6|63&ke[2];break;case 4:ut=(7&ke[0])<<18|(63&ke[1])<<12|(63&ke[2])<<6|63&ke[3]}return ut>1114111?null:ut},bt=function(ke){for(var ut=(ke=It(ke,ft," ")).length,Et="",At=0;At<ut;){var Kt=Ht(ke,At);if(Kt==="%"){if(Ht(ke,At+1)==="%"||At+3>ut){Et+="%",At++;continue}var er=Xe(ke,At+1);if(er!=er){Et+=Kt,At++;continue}At+=2;var Ar=at(er);if(Ar===0)Kt=st(er);else{if(Ar===1||Ar>4){Et+="�",At++;continue}for(var vr=[er],Rr=1;Rr<Ar&&!(3+ ++At>ut||Ht(ke,At)!=="%");){var jr=Xe(ke,At+1);if(jr!=jr){At+=3;break}if(jr>191||jr<128)break;Pt(vr,jr),At+=2,Rr++}if(vr.length!==Ar){Et+="�";continue}var Ir=fr(vr);Ir===null?Et+="�":Kt=ht(Ir)}}Et+=Kt,At++}return Et},Lt=/[!'()~]|%20/g,me={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ot=function(ke){return me[ke]},$t=function(ke){return It(Tt(ke),Lt,ot)},Qt=T((function(ke,ut){Ce(this,{type:Ae,target:Oe(ke).entries,index:0,kind:ut})}),Ee,(function(){var ke=Ne(this),ut=ke.target,Et=ke.index++;if(!ut||Et>=ut.length)return ke.target=null,Z(void 0,!0);var At=ut[Et];switch(ke.kind){case"keys":return Z(At.key,!1);case"values":return Z(At.value,!1)}return Z([At.key,At.value],!1)}),!0),Qe=function(ke){this.entries=[],this.url=null,ke!==void 0&&(U(ke)?this.parseObject(ke):this.parseQuery(typeof ke=="string"?Ht(ke,0)==="?"?Ze(ke,1):ke:G(ke)))};Qe.prototype={type:Ee,bindURL:function(ke){this.url=ke,this.update()},parseObject:function(ke){var ut,Et,At,Kt,er,Ar,vr,Rr=this.entries,jr=Q(ke);if(jr)for(Et=(ut=M(ke,jr)).next;!(At=h(Et,ut)).done;){if(er=(Kt=M(N(At.value))).next,(Ar=h(er,Kt)).done||(vr=h(er,Kt)).done||!h(er,Kt).done)throw new yt("Expected sequence with length 2");Pt(Rr,{key:G(Ar.value),value:G(vr.value)})}else for(var Ir in ke)R(ke,Ir)&&Pt(Rr,{key:Ir,value:G(ke[Ir])})},parseQuery:function(ke){if(ke)for(var ut,Et,At=this.entries,Kt=Fe(ke,"&"),er=0;er<Kt.length;)(ut=Kt[er++]).length&&(Et=Fe(ut,"="),Pt(At,{key:bt(Zt(Et)),value:bt(Gt(Et,"="))}))},serialize:function(){for(var ke,ut=this.entries,Et=[],At=0;At<ut.length;)ke=ut[At++],Pt(Et,$t(ke.key)+"="+$t(ke.value));return Gt(Et,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var dt=function(){I(this,et);var ke=Ce(this,new Qe(arguments.length>0?arguments[0]:void 0));g||(this.size=ke.entries.length)},et=dt.prototype;if(E(et,{append:function(ke,ut){var Et=Oe(this);J(arguments.length,2),Pt(Et.entries,{key:G(ke),value:G(ut)}),g||this.length++,Et.updateURL()},delete:function(ke){for(var ut=Oe(this),Et=J(arguments.length,1),At=ut.entries,Kt=G(ke),er=Et<2?void 0:arguments[1],Ar=er===void 0?er:G(er),vr=0;vr<At.length;){var Rr=At[vr];if(Rr.key!==Kt||Ar!==void 0&&Rr.value!==Ar)vr++;else if(Mt(At,vr,1),Ar!==void 0)break}g||(this.size=At.length),ut.updateURL()},get:function(ke){var ut=Oe(this).entries;J(arguments.length,1);for(var Et=G(ke),At=0;At<ut.length;At++)if(ut[At].key===Et)return ut[At].value;return null},getAll:function(ke){var ut=Oe(this).entries;J(arguments.length,1);for(var Et=G(ke),At=[],Kt=0;Kt<ut.length;Kt++)ut[Kt].key===Et&&Pt(At,ut[Kt].value);return At},has:function(ke){for(var ut=Oe(this).entries,Et=J(arguments.length,1),At=G(ke),Kt=Et<2?void 0:arguments[1],er=Kt===void 0?Kt:G(Kt),Ar=0;Ar<ut.length;){var vr=ut[Ar++];if(vr.key===At&&(er===void 0||vr.value===er))return!0}return!1},set:function(ke,ut){var Et=Oe(this);J(arguments.length,1);for(var At,Kt=Et.entries,er=!1,Ar=G(ke),vr=G(ut),Rr=0;Rr<Kt.length;Rr++)(At=Kt[Rr]).key===Ar&&(er?Mt(Kt,Rr--,1):(er=!0,At.value=vr));er||Pt(Kt,{key:Ar,value:vr}),g||(this.size=Kt.length),Et.updateURL()},sort:function(){var ke=Oe(this);te(ke.entries,(function(ut,Et){return ut.key>Et.key?1:-1})),ke.updateURL()},forEach:function(ke){for(var ut,Et=Oe(this).entries,At=B(ke,arguments.length>1?arguments[1]:void 0),Kt=0;Kt<Et.length;)At((ut=Et[Kt++]).value,ut.key,this)},keys:function(){return new Qt(this,"keys")},values:function(){return new Qt(this,"values")},entries:function(){return new Qt(this,"entries")}},{enumerable:!0}),m(et,fe,et.entries,{name:"entries"}),m(et,"toString",(function(){return Oe(this).serialize()}),{enumerable:!0}),g&&y(et,"size",{get:function(){return Oe(this).entries.length},configurable:!0,enumerable:!0}),C(dt,Ee),s({global:!0,constructor:!0,forced:!p},{URLSearchParams:dt}),!p&&L(Ve)){var xt=A(it.has),kt=A(it.set),Wt=function(ke){if(U(ke)){var ut,Et=ke.body;if(P(Et)===Ee)return ut=ke.headers?new Ve(ke.headers):new Ve,xt(ut,"content-type")||kt(ut,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),W(ke,{body:K(0,G(Et)),headers:K(0,ut)})}return ke};if(L(Be)&&s({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(ke){return Be(ke,arguments.length>1?Wt(arguments[1]):{})}}),L(Ge)){var Ft=function(ke){return I(this,$e),new Ge(ke,arguments.length>1?Wt(arguments[1]):{})};$e.constructor=Ft,Ft.prototype=$e,s({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Ft})}}i.exports={URLSearchParams:dt,getState:Oe}},14603:function(i,l,t){var s=t(36840),a=t(79504),u=t(655),f=t(22812),h=URLSearchParams,A=h.prototype,g=a(A.append),p=a(A.delete),m=a(A.forEach),y=a([].push),E=new h("a=1&a=2&b=3");E.delete("a",1),E.delete("b",void 0),E+""!="a=2"&&s(A,"delete",(function(C){var T=arguments.length,w=T<2?void 0:arguments[1];if(T&&w===void 0)return p(this,C);var I=[];m(this,(function(W,K){y(I,{key:K,value:W})})),f(T,1);for(var L,R=u(C),B=u(w),P=0,N=0,U=!1,G=I.length;P<G;)L=I[P++],U||L.key===R?(U=!0,p(this,L.key)):N++;for(;N<G;)(L=I[N++]).key===R&&L.value===B||g(this,L.key,L.value)}),{enumerable:!0,unsafe:!0})},47566:function(i,l,t){var s=t(36840),a=t(79504),u=t(655),f=t(22812),h=URLSearchParams,A=h.prototype,g=a(A.getAll),p=a(A.has),m=new h("a=1");!m.has("a",2)&&m.has("a",void 0)||s(A,"has",(function(y){var E=arguments.length,C=E<2?void 0:arguments[1];if(E&&C===void 0)return p(this,y);var T=g(this,y);f(E,1);for(var w=u(C),I=0;I<T.length;)if(T[I++]===w)return!0;return!1}),{enumerable:!0,unsafe:!0})},48408:function(i,l,t){t(98406)},98721:function(i,l,t){var s=t(43724),a=t(79504),u=t(62106),f=URLSearchParams.prototype,h=a(f.forEach);s&&!("size"in f)&&u(f,"size",{get:function(){var A=0;return h(this,(function(){A++})),A},configurable:!0,enumerable:!0})},2222:function(i,l,t){var s=t(46518),a=t(97751),u=t(79039),f=t(22812),h=t(655),A=t(67416),g=a("URL"),p=A&&u((function(){g.canParse()})),m=u((function(){return g.canParse.length!==1}));s({target:"URL",stat:!0,forced:!p||m},{canParse:function(y){var E=f(arguments.length,1),C=h(y),T=E<2||arguments[1]===void 0?void 0:h(arguments[1]);try{return!!new g(C,T)}catch{return!1}}})},45806:function(i,l,t){t(47764);var s,a=t(46518),u=t(43724),f=t(67416),h=t(44576),A=t(76080),g=t(79504),p=t(36840),m=t(62106),y=t(90679),E=t(39297),C=t(44213),T=t(97916),w=t(67680),I=t(68183).codeAt,L=t(3717),R=t(655),B=t(10687),P=t(22812),N=t(98406),U=t(91181),G=U.set,W=U.getterFor("URL"),K=N.URLSearchParams,M=N.getState,Q=h.URL,Z=h.TypeError,J=h.parseInt,q=Math.floor,te=Math.pow,fe=g("".charAt),Ee=g(/./.exec),Ae=g([].join),Ce=g(1 .toString),Oe=g([].pop),Ne=g([].push),Be=g("".replace),Ge=g([].shift),Ve=g("".split),$e=g("".slice),it=g("".toLowerCase),yt=g([].unshift),Tt="Invalid scheme",st="Invalid host",ht="Invalid port",_t=/[a-z]/i,Ht=/[\d+-.a-z]/i,Gt=/\d/,Pt=/^0x/i,It=/^[0-7]+$/,Zt=/^\d+$/,Mt=/^[\da-f]+$/i,Fe=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Ze=/[\0\t\n\r #/:<>?@[\\\]^|]/,qe=/^[\u0000-\u0020]+/,ft=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,be=/[\t\n\r]/g,Xe=function(Re){var Le,Ke,rr,Pe;if(typeof Re=="number"){for(Le=[],Ke=0;Ke<4;Ke++)yt(Le,Re%256),Re=q(Re/256);return Ae(Le,".")}if(typeof Re=="object"){for(Le="",rr=(function(Er){for(var hr=null,sr=1,de=null,ct=0,or=0;or<8;or++)Er[or]!==0?(ct>sr&&(hr=de,sr=ct),de=null,ct=0):(de===null&&(de=or),++ct);return ct>sr?de:hr})(Re),Ke=0;Ke<8;Ke++)Pe&&Re[Ke]===0||(Pe&&(Pe=!1),rr===Ke?(Le+=Ke?":":"::",Pe=!0):(Le+=Ce(Re[Ke],16),Ke<7&&(Le+=":")));return"["+Le+"]"}return Re},at={},fr=C({},at,{" ":1,'"':1,"<":1,">":1,"`":1}),bt=C({},fr,{"#":1,"?":1,"{":1,"}":1}),Lt=C({},bt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),me=function(Re,Le){var Ke=I(Re,0);return Ke>32&&Ke<127&&!E(Le,Re)?Re:encodeURIComponent(Re)},ot={ftp:21,file:null,http:80,https:443,ws:80,wss:443},$t=function(Re,Le){var Ke;return Re.length===2&&Ee(_t,fe(Re,0))&&((Ke=fe(Re,1))===":"||!Le&&Ke==="|")},Qt=function(Re){var Le;return Re.length>1&&$t($e(Re,0,2))&&(Re.length===2||(Le=fe(Re,2))==="/"||Le==="\\"||Le==="?"||Le==="#")},Qe=function(Re){return Re==="."||it(Re)==="%2e"},dt={},et={},xt={},kt={},Wt={},Ft={},ke={},ut={},Et={},At={},Kt={},er={},Ar={},vr={},Rr={},jr={},Ir={},Qr={},In={},$r={},Zr={},rn=function(Re,Le,Ke){var rr,Pe,Er,hr=R(Re);if(Le){if(Pe=this.parse(hr))throw new Z(Pe);this.searchParams=null}else{if(Ke!==void 0&&(rr=new rn(Ke,!0)),Pe=this.parse(hr,null,rr))throw new Z(Pe);(Er=M(new K)).bindURL(this),this.searchParams=Er}};rn.prototype={type:"URL",parse:function(Re,Le,Ke){var rr,Pe,Er,hr,sr,de=this,ct=Le||dt,or=0,Nt="",Or=!1,Mr=!1,nn=!1;for(Re=R(Re),Le||(de.scheme="",de.username="",de.password="",de.host=null,de.port=null,de.path=[],de.query=null,de.fragment=null,de.cannotBeABaseURL=!1,Re=Be(Re,qe,""),Re=Be(Re,ft,"$1")),Re=Be(Re,be,""),rr=T(Re);or<=rr.length;){switch(Pe=rr[or],ct){case dt:if(!Pe||!Ee(_t,Pe)){if(Le)return Tt;ct=xt;continue}Nt+=it(Pe),ct=et;break;case et:if(Pe&&(Ee(Ht,Pe)||Pe==="+"||Pe==="-"||Pe==="."))Nt+=it(Pe);else{if(Pe!==":"){if(Le)return Tt;Nt="",ct=xt,or=0;continue}if(Le&&(de.isSpecial()!==E(ot,Nt)||Nt==="file"&&(de.includesCredentials()||de.port!==null)||de.scheme==="file"&&!de.host))return;if(de.scheme=Nt,Le)return void(de.isSpecial()&&ot[de.scheme]===de.port&&(de.port=null));Nt="",de.scheme==="file"?ct=vr:de.isSpecial()&&Ke&&Ke.scheme===de.scheme?ct=kt:de.isSpecial()?ct=ut:rr[or+1]==="/"?(ct=Wt,or++):(de.cannotBeABaseURL=!0,Ne(de.path,""),ct=In)}break;case xt:if(!Ke||Ke.cannotBeABaseURL&&Pe!=="#")return Tt;if(Ke.cannotBeABaseURL&&Pe==="#"){de.scheme=Ke.scheme,de.path=w(Ke.path),de.query=Ke.query,de.fragment="",de.cannotBeABaseURL=!0,ct=Zr;break}ct=Ke.scheme==="file"?vr:Ft;continue;case kt:if(Pe!=="/"||rr[or+1]!=="/"){ct=Ft;continue}ct=Et,or++;break;case Wt:if(Pe==="/"){ct=At;break}ct=Qr;continue;case Ft:if(de.scheme=Ke.scheme,Pe===s)de.username=Ke.username,de.password=Ke.password,de.host=Ke.host,de.port=Ke.port,de.path=w(Ke.path),de.query=Ke.query;else if(Pe==="/"||Pe==="\\"&&de.isSpecial())ct=ke;else if(Pe==="?")de.username=Ke.username,de.password=Ke.password,de.host=Ke.host,de.port=Ke.port,de.path=w(Ke.path),de.query="",ct=$r;else{if(Pe!=="#"){de.username=Ke.username,de.password=Ke.password,de.host=Ke.host,de.port=Ke.port,de.path=w(Ke.path),de.path.length--,ct=Qr;continue}de.username=Ke.username,de.password=Ke.password,de.host=Ke.host,de.port=Ke.port,de.path=w(Ke.path),de.query=Ke.query,de.fragment="",ct=Zr}break;case ke:if(!de.isSpecial()||Pe!=="/"&&Pe!=="\\"){if(Pe!=="/"){de.username=Ke.username,de.password=Ke.password,de.host=Ke.host,de.port=Ke.port,ct=Qr;continue}ct=At}else ct=Et;break;case ut:if(ct=Et,Pe!=="/"||fe(Nt,or+1)!=="/")continue;or++;break;case Et:if(Pe!=="/"&&Pe!=="\\"){ct=At;continue}break;case At:if(Pe==="@"){Or&&(Nt="%40"+Nt),Or=!0,Er=T(Nt);for(var en=0;en<Er.length;en++){var xr=Er[en];if(xr!==":"||nn){var hn=me(xr,Lt);nn?de.password+=hn:de.username+=hn}else nn=!0}Nt=""}else if(Pe===s||Pe==="/"||Pe==="?"||Pe==="#"||Pe==="\\"&&de.isSpecial()){if(Or&&Nt==="")return"Invalid authority";or-=T(Nt).length+1,Nt="",ct=Kt}else Nt+=Pe;break;case Kt:case er:if(Le&&de.scheme==="file"){ct=jr;continue}if(Pe!==":"||Mr){if(Pe===s||Pe==="/"||Pe==="?"||Pe==="#"||Pe==="\\"&&de.isSpecial()){if(de.isSpecial()&&Nt==="")return st;if(Le&&Nt===""&&(de.includesCredentials()||de.port!==null))return;if(hr=de.parseHost(Nt))return hr;if(Nt="",ct=Ir,Le)return;continue}Pe==="["?Mr=!0:Pe==="]"&&(Mr=!1),Nt+=Pe}else{if(Nt==="")return st;if(hr=de.parseHost(Nt))return hr;if(Nt="",ct=Ar,Le===er)return}break;case Ar:if(!Ee(Gt,Pe)){if(Pe===s||Pe==="/"||Pe==="?"||Pe==="#"||Pe==="\\"&&de.isSpecial()||Le){if(Nt!==""){var Rn=J(Nt,10);if(Rn>65535)return ht;de.port=de.isSpecial()&&Rn===ot[de.scheme]?null:Rn,Nt=""}if(Le)return;ct=Ir;continue}return ht}Nt+=Pe;break;case vr:if(de.scheme="file",Pe==="/"||Pe==="\\")ct=Rr;else{if(!Ke||Ke.scheme!=="file"){ct=Qr;continue}switch(Pe){case s:de.host=Ke.host,de.path=w(Ke.path),de.query=Ke.query;break;case"?":de.host=Ke.host,de.path=w(Ke.path),de.query="",ct=$r;break;case"#":de.host=Ke.host,de.path=w(Ke.path),de.query=Ke.query,de.fragment="",ct=Zr;break;default:Qt(Ae(w(rr,or),""))||(de.host=Ke.host,de.path=w(Ke.path),de.shortenPath()),ct=Qr;continue}}break;case Rr:if(Pe==="/"||Pe==="\\"){ct=jr;break}Ke&&Ke.scheme==="file"&&!Qt(Ae(w(rr,or),""))&&($t(Ke.path[0],!0)?Ne(de.path,Ke.path[0]):de.host=Ke.host),ct=Qr;continue;case jr:if(Pe===s||Pe==="/"||Pe==="\\"||Pe==="?"||Pe==="#"){if(!Le&&$t(Nt))ct=Qr;else if(Nt===""){if(de.host="",Le)return;ct=Ir}else{if(hr=de.parseHost(Nt))return hr;if(de.host==="localhost"&&(de.host=""),Le)return;Nt="",ct=Ir}continue}Nt+=Pe;break;case Ir:if(de.isSpecial()){if(ct=Qr,Pe!=="/"&&Pe!=="\\")continue}else if(Le||Pe!=="?")if(Le||Pe!=="#"){if(Pe!==s&&(ct=Qr,Pe!=="/"))continue}else de.fragment="",ct=Zr;else de.query="",ct=$r;break;case Qr:if(Pe===s||Pe==="/"||Pe==="\\"&&de.isSpecial()||!Le&&(Pe==="?"||Pe==="#")){if((sr=it(sr=Nt))===".."||sr==="%2e."||sr===".%2e"||sr==="%2e%2e"?(de.shortenPath(),Pe==="/"||Pe==="\\"&&de.isSpecial()||Ne(de.path,"")):Qe(Nt)?Pe==="/"||Pe==="\\"&&de.isSpecial()||Ne(de.path,""):(de.scheme==="file"&&!de.path.length&&$t(Nt)&&(de.host&&(de.host=""),Nt=fe(Nt,0)+":"),Ne(de.path,Nt)),Nt="",de.scheme==="file"&&(Pe===s||Pe==="?"||Pe==="#"))for(;de.path.length>1&&de.path[0]==="";)Ge(de.path);Pe==="?"?(de.query="",ct=$r):Pe==="#"&&(de.fragment="",ct=Zr)}else Nt+=me(Pe,bt);break;case In:Pe==="?"?(de.query="",ct=$r):Pe==="#"?(de.fragment="",ct=Zr):Pe!==s&&(de.path[0]+=me(Pe,at));break;case $r:Le||Pe!=="#"?Pe!==s&&(Pe==="'"&&de.isSpecial()?de.query+="%27":de.query+=Pe==="#"?"%23":me(Pe,at)):(de.fragment="",ct=Zr);break;case Zr:Pe!==s&&(de.fragment+=me(Pe,fr))}or++}},parseHost:function(Re){var Le,Ke,rr;if(fe(Re,0)==="["){if(fe(Re,Re.length-1)!=="]"||(Le=(function(Pe){var Er,hr,sr,de,ct,or,Nt,Or=[0,0,0,0,0,0,0,0],Mr=0,nn=null,en=0,xr=function(){return fe(Pe,en)};if(xr()===":"){if(fe(Pe,1)!==":")return;en+=2,nn=++Mr}for(;xr();){if(Mr===8)return;if(xr()!==":"){for(Er=hr=0;hr<4&&Ee(Mt,xr());)Er=16*Er+J(xr(),16),en++,hr++;if(xr()==="."){if(hr===0||(en-=hr,Mr>6))return;for(sr=0;xr();){if(de=null,sr>0){if(!(xr()==="."&&sr<4))return;en++}if(!Ee(Gt,xr()))return;for(;Ee(Gt,xr());){if(ct=J(xr(),10),de===null)de=ct;else{if(de===0)return;de=10*de+ct}if(de>255)return;en++}Or[Mr]=256*Or[Mr]+de,++sr!=2&&sr!==4||Mr++}if(sr!==4)return;break}if(xr()===":"){if(en++,!xr())return}else if(xr())return;Or[Mr++]=Er}else{if(nn!==null)return;en++,nn=++Mr}}if(nn!==null)for(or=Mr-nn,Mr=7;Mr!==0&&or>0;)Nt=Or[Mr],Or[Mr--]=Or[nn+or-1],Or[nn+--or]=Nt;else if(Mr!==8)return;return Or})($e(Re,1,-1)),!Le))return st;this.host=Le}else if(this.isSpecial()){if(Re=L(Re),Ee(Fe,Re)||(Le=(function(Pe){var Er,hr,sr,de,ct,or,Nt,Or=Ve(Pe,".");if(Or.length&&Or[Or.length-1]===""&&Or.length--,(Er=Or.length)>4)return Pe;for(hr=[],sr=0;sr<Er;sr++){if((de=Or[sr])==="")return Pe;if(ct=10,de.length>1&&fe(de,0)==="0"&&(ct=Ee(Pt,de)?16:8,de=$e(de,ct===8?1:2)),de==="")or=0;else{if(!Ee(ct===10?Zt:ct===8?It:Mt,de))return Pe;or=J(de,ct)}Ne(hr,or)}for(sr=0;sr<Er;sr++)if(or=hr[sr],sr===Er-1){if(or>=te(256,5-Er))return null}else if(or>255)return null;for(Nt=Oe(hr),sr=0;sr<hr.length;sr++)Nt+=hr[sr]*te(256,3-sr);return Nt})(Re),Le===null))return st;this.host=Le}else{if(Ee(Ze,Re))return st;for(Le="",Ke=T(Re),rr=0;rr<Ke.length;rr++)Le+=me(Ke[rr],at);this.host=Le}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return E(ot,this.scheme)},shortenPath:function(){var Re=this.path,Le=Re.length;!Le||this.scheme==="file"&&Le===1&&$t(Re[0],!0)||Re.length--},serialize:function(){var Re=this,Le=Re.scheme,Ke=Re.username,rr=Re.password,Pe=Re.host,Er=Re.port,hr=Re.path,sr=Re.query,de=Re.fragment,ct=Le+":";return Pe!==null?(ct+="//",Re.includesCredentials()&&(ct+=Ke+(rr?":"+rr:"")+"@"),ct+=Xe(Pe),Er!==null&&(ct+=":"+Er)):Le==="file"&&(ct+="//"),ct+=Re.cannotBeABaseURL?hr[0]:hr.length?"/"+Ae(hr,"/"):"",sr!==null&&(ct+="?"+sr),de!==null&&(ct+="#"+de),ct},setHref:function(Re){var Le=this.parse(Re);if(Le)throw new Z(Le);this.searchParams.update()},getOrigin:function(){var Re=this.scheme,Le=this.port;if(Re==="blob")try{return new an(Re.path[0]).origin}catch{return"null"}return Re!=="file"&&this.isSpecial()?Re+"://"+Xe(this.host)+(Le!==null?":"+Le:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(Re){this.parse(R(Re)+":",dt)},getUsername:function(){return this.username},setUsername:function(Re){var Le=T(R(Re));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var Ke=0;Ke<Le.length;Ke++)this.username+=me(Le[Ke],Lt)}},getPassword:function(){return this.password},setPassword:function(Re){var Le=T(R(Re));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var Ke=0;Ke<Le.length;Ke++)this.password+=me(Le[Ke],Lt)}},getHost:function(){var Re=this.host,Le=this.port;return Re===null?"":Le===null?Xe(Re):Xe(Re)+":"+Le},setHost:function(Re){this.cannotBeABaseURL||this.parse(Re,Kt)},getHostname:function(){var Re=this.host;return Re===null?"":Xe(Re)},setHostname:function(Re){this.cannotBeABaseURL||this.parse(Re,er)},getPort:function(){var Re=this.port;return Re===null?"":R(Re)},setPort:function(Re){this.cannotHaveUsernamePasswordPort()||((Re=R(Re))===""?this.port=null:this.parse(Re,Ar))},getPathname:function(){var Re=this.path;return this.cannotBeABaseURL?Re[0]:Re.length?"/"+Ae(Re,"/"):""},setPathname:function(Re){this.cannotBeABaseURL||(this.path=[],this.parse(Re,Ir))},getSearch:function(){var Re=this.query;return Re?"?"+Re:""},setSearch:function(Re){(Re=R(Re))===""?this.query=null:(fe(Re,0)==="?"&&(Re=$e(Re,1)),this.query="",this.parse(Re,$r)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var Re=this.fragment;return Re?"#"+Re:""},setHash:function(Re){(Re=R(Re))!==""?(fe(Re,0)==="#"&&(Re=$e(Re,1)),this.fragment="",this.parse(Re,Zr)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var an=function(Re){var Le=y(this,Br),Ke=P(arguments.length,1)>1?arguments[1]:void 0,rr=G(Le,new rn(Re,!1,Ke));u||(Le.href=rr.serialize(),Le.origin=rr.getOrigin(),Le.protocol=rr.getProtocol(),Le.username=rr.getUsername(),Le.password=rr.getPassword(),Le.host=rr.getHost(),Le.hostname=rr.getHostname(),Le.port=rr.getPort(),Le.pathname=rr.getPathname(),Le.search=rr.getSearch(),Le.searchParams=rr.getSearchParams(),Le.hash=rr.getHash())},Br=an.prototype,Wr=function(Re,Le){return{get:function(){return W(this)[Re]()},set:Le&&function(Ke){return W(this)[Le](Ke)},configurable:!0,enumerable:!0}};if(u&&(m(Br,"href",Wr("serialize","setHref")),m(Br,"origin",Wr("getOrigin")),m(Br,"protocol",Wr("getProtocol","setProtocol")),m(Br,"username",Wr("getUsername","setUsername")),m(Br,"password",Wr("getPassword","setPassword")),m(Br,"host",Wr("getHost","setHost")),m(Br,"hostname",Wr("getHostname","setHostname")),m(Br,"port",Wr("getPort","setPort")),m(Br,"pathname",Wr("getPathname","setPathname")),m(Br,"search",Wr("getSearch","setSearch")),m(Br,"searchParams",Wr("getSearchParams")),m(Br,"hash",Wr("getHash","setHash"))),p(Br,"toJSON",(function(){return W(this).serialize()}),{enumerable:!0}),p(Br,"toString",(function(){return W(this).serialize()}),{enumerable:!0}),Q){var dn=Q.createObjectURL,Ln=Q.revokeObjectURL;dn&&p(an,"createObjectURL",A(dn,Q)),Ln&&p(an,"revokeObjectURL",A(Ln,Q))}B(an,"URL"),a({global:!0,constructor:!0,forced:!f,sham:!u},{URL:an})},3296:function(i,l,t){t(45806)},45781:function(i,l,t){var s=t(46518),a=t(97751),u=t(22812),f=t(655),h=t(67416),A=a("URL");s({target:"URL",stat:!0,forced:!h},{parse:function(g){var p=u(arguments.length,1),m=f(g),y=p<2||arguments[1]===void 0?void 0:f(arguments[1]);try{return new A(m,y)}catch{return null}}})},27208:function(i,l,t){var s=t(46518),a=t(69565);s({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return a(URL.prototype.toString,this)}})},84315:function(i,l,t){t(52675),t(89463),t(66412),t(60193),t(92168),t(2259),t(86964),t(83142),t(83237),t(61833),t(67947),t(31073),t(45700),t(78125),t(20326),t(16280),t(76918),t(30067),t(4294),t(18107),t(28706),t(26835),t(88431),t(33771),t(2008),t(50113),t(48980),t(10838),t(13451),t(46449),t(78350),t(51629),t(23418),t(74423),t(25276),t(64346),t(23792),t(48598),t(8921),t(62062),t(31051),t(44114),t(72712),t(18863),t(94490),t(34782),t(15086),t(26910),t(87478),t(54554),t(9678),t(57145),t(71658),t(93514),t(30237),t(13609),t(11558),t(54743),t(46761),t(11745),t(38309),t(16573),t(78100),t(77936),t(61699),t(59089),t(91191),t(93515),t(1688),t(60739),t(89572),t(23288),t(36456),t(94170),t(48957),t(62010),t(55081),t(18111),t(29314),t(81148),t(22489),t(20116),t(30531),t(7588),t(49603),t(61701),t(18237),t(13579),t(54972),t(61806),t(33110),t(4731),t(36033),t(47072),t(93153),t(82326),t(36389),t(64444),t(8085),t(77762),t(65070),t(60605),t(39469),t(72152),t(75376),t(56624),t(11367),t(5914),t(78553),t(98690),t(60479),t(70761),t(2892),t(45374),t(25428),t(32637),t(40150),t(59149),t(64601),t(44435),t(87220),t(25843),t(62337),t(9868),t(80630),t(69085),t(59904),t(17427),t(67945),t(84185),t(87607),t(5506),t(52811),t(53921),t(83851),t(81278),t(1480),t(40875),t(77691),t(78347),t(29908),t(94052),t(94003),t(221),t(79432),t(9220),t(7904),t(93967),t(63548),t(93941),t(10287),t(26099),t(16034),t(78459),t(58940),t(3362),t(96167),t(93518),t(9391),t(31689),t(14628),t(39796),t(60825),t(87411),t(21211),t(40888),t(9065),t(86565),t(32812),t(84634),t(71137),t(30985),t(34268),t(34873),t(15472),t(84864),t(57465),t(27495),t(69479),t(87745),t(90906),t(38781),t(31415),t(17642),t(58004),t(33853),t(45876),t(32475),t(15024),t(31698),t(67357),t(23860),t(99449),t(27337),t(21699),t(42043),t(47764),t(71761),t(28543),t(35701),t(68156),t(85906),t(42781),t(25440),t(79978),t(5746),t(90744),t(11392),t(50375),t(67438),t(42762),t(39202),t(43359),t(89907),t(11898),t(35490),t(5745),t(94298),t(60268),t(69546),t(20781),t(50778),t(89195),t(46276),t(48718),t(16308),t(34594),t(29833),t(46594),t(72107),t(95477),t(21489),t(22134),t(3690),t(61740),t(48140),t(81630),t(72170),t(75044),t(69539),t(31694),t(89955),t(21903),t(91134),t(33206),t(48345),t(44496),t(66651),t(12887),t(19369),t(66812),t(8995),t(52568),t(31575),t(36072),t(88747),t(28845),t(29423),t(57301),t(373),t(86614),t(41405),t(37467),t(44732),t(33684),t(79577),t(88267),t(73772),t(30958),t(2945),t(42207),t(23500),t(62953),t(55815),t(64979),t(79739),t(59848),t(122),t(13611),t(71678),t(76031),t(3296),t(2222),t(45781),t(27208),t(48408),t(14603),t(47566),t(98721),t(19167)}},n={};function o(i){var l=n[i];if(l!==void 0)return l.exports;var t=n[i]={id:i,exports:{}};return r[i].call(t.exports,t,t.exports,o),t.exports}o.m=r,o.n=function(i){var l=i&&i.__esModule?function(){return i.default}:function(){return i};return o.d(l,{a:l}),l},o.d=function(i,l){for(var t in l)o.o(l,t)&&!o.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:l[t]})},o.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),o.o=function(i,l){return Object.prototype.hasOwnProperty.call(i,l)},o.b=document.baseURI||self.location.href,o.nc=void 0,o(84315),o(78624);var c=o(63166);return c.default})()}))})(Io)),Io.exports}const vt=Number.isFinite||function(d){return typeof d=="number"&&isFinite(d)},bf=Number.isSafeInteger||function(d){return typeof d=="number"&&Math.abs(d)<=Cf},Cf=Number.MAX_SAFE_INTEGER||9007199254740991;let Ot=(function(d){return d.NETWORK_ERROR="networkError",d.MEDIA_ERROR="mediaError",d.KEY_SYSTEM_ERROR="keySystemError",d.MUX_ERROR="muxError",d.OTHER_ERROR="otherError",d})({}),ve=(function(d){return d.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",d.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",d.KEY_SYSTEM_NO_SESSION="keySystemNoSession",d.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",d.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",d.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",d.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",d.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",d.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",d.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",d.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",d.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",d.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",d.MANIFEST_LOAD_ERROR="manifestLoadError",d.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",d.MANIFEST_PARSING_ERROR="manifestParsingError",d.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",d.LEVEL_EMPTY_ERROR="levelEmptyError",d.LEVEL_LOAD_ERROR="levelLoadError",d.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",d.LEVEL_PARSING_ERROR="levelParsingError",d.LEVEL_SWITCH_ERROR="levelSwitchError",d.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",d.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",d.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",d.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",d.FRAG_LOAD_ERROR="fragLoadError",d.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",d.FRAG_DECRYPT_ERROR="fragDecryptError",d.FRAG_PARSING_ERROR="fragParsingError",d.FRAG_GAP="fragGap",d.REMUX_ALLOC_ERROR="remuxAllocError",d.KEY_LOAD_ERROR="keyLoadError",d.KEY_LOAD_TIMEOUT="keyLoadTimeOut",d.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",d.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",d.BUFFER_APPEND_ERROR="bufferAppendError",d.BUFFER_APPENDING_ERROR="bufferAppendingError",d.BUFFER_STALLED_ERROR="bufferStalledError",d.BUFFER_FULL_ERROR="bufferFullError",d.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",d.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",d.ASSET_LIST_LOAD_ERROR="assetListLoadError",d.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",d.ASSET_LIST_PARSING_ERROR="assetListParsingError",d.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",d.INTERNAL_EXCEPTION="internalException",d.INTERNAL_ABORTED="aborted",d.ATTACH_MEDIA_ERROR="attachMediaError",d.UNKNOWN="unknown",d})({}),D=(function(d){return d.MEDIA_ATTACHING="hlsMediaAttaching",d.MEDIA_ATTACHED="hlsMediaAttached",d.MEDIA_DETACHING="hlsMediaDetaching",d.MEDIA_DETACHED="hlsMediaDetached",d.MEDIA_ENDED="hlsMediaEnded",d.STALL_RESOLVED="hlsStallResolved",d.BUFFER_RESET="hlsBufferReset",d.BUFFER_CODECS="hlsBufferCodecs",d.BUFFER_CREATED="hlsBufferCreated",d.BUFFER_APPENDING="hlsBufferAppending",d.BUFFER_APPENDED="hlsBufferAppended",d.BUFFER_EOS="hlsBufferEos",d.BUFFERED_TO_END="hlsBufferedToEnd",d.BUFFER_FLUSHING="hlsBufferFlushing",d.BUFFER_FLUSHED="hlsBufferFlushed",d.MANIFEST_LOADING="hlsManifestLoading",d.MANIFEST_LOADED="hlsManifestLoaded",d.MANIFEST_PARSED="hlsManifestParsed",d.LEVEL_SWITCHING="hlsLevelSwitching",d.LEVEL_SWITCHED="hlsLevelSwitched",d.LEVEL_LOADING="hlsLevelLoading",d.LEVEL_LOADED="hlsLevelLoaded",d.LEVEL_UPDATED="hlsLevelUpdated",d.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",d.LEVELS_UPDATED="hlsLevelsUpdated",d.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",d.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",d.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",d.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",d.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",d.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",d.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",d.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",d.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",d.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",d.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",d.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",d.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",d.CUES_PARSED="hlsCuesParsed",d.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",d.INIT_PTS_FOUND="hlsInitPtsFound",d.FRAG_LOADING="hlsFragLoading",d.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",d.FRAG_LOADED="hlsFragLoaded",d.FRAG_DECRYPTED="hlsFragDecrypted",d.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",d.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",d.FRAG_PARSING_METADATA="hlsFragParsingMetadata",d.FRAG_PARSED="hlsFragParsed",d.FRAG_BUFFERED="hlsFragBuffered",d.FRAG_CHANGED="hlsFragChanged",d.FPS_DROP="hlsFpsDrop",d.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",d.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",d.ERROR="hlsError",d.DESTROYING="hlsDestroying",d.KEY_LOADING="hlsKeyLoading",d.KEY_LOADED="hlsKeyLoaded",d.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",d.BACK_BUFFER_REACHED="hlsBackBufferReached",d.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",d.ASSET_LIST_LOADING="hlsAssetListLoading",d.ASSET_LIST_LOADED="hlsAssetListLoaded",d.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",d.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",d.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",d.INTERSTITIAL_STARTED="hlsInterstitialStarted",d.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",d.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",d.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",d.INTERSTITIAL_ENDED="hlsInterstitialEnded",d.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",d.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",d.EVENT_CUE_ENTER="hlsEventCueEnter",d})({});var cr={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Rt={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class Li{constructor(e,r=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=r,this.totalWeight_=n}sample(e,r){const n=Math.pow(this.alpha_,e);this.estimate_=r*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class xf{constructor(e,r,n,o=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Li(e),this.fast_=new Li(r),this.defaultTTFB_=o,this.ttfb_=new Li(e)}update(e,r){const{slow_:n,fast_:o,ttfb_:c}=this;n.halfLife!==e&&(this.slow_=new Li(e,n.getEstimate(),n.getTotalWeight())),o.halfLife!==r&&(this.fast_=new Li(r,o.getEstimate(),o.getTotalWeight())),c.halfLife!==e&&(this.ttfb_=new Li(e,c.getEstimate(),c.getTotalWeight()))}sample(e,r){e=Math.max(e,this.minDelayMs_);const n=8*r,o=e/1e3,c=n/o;this.fast_.sample(o,c),this.slow_.sample(o,c)}sampleTTFB(e){const r=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(r,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function Tf(d,e,r){return(e=wf(e))in d?Object.defineProperty(d,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):d[e]=r,d}function wr(){return wr=Object.assign?Object.assign.bind():function(d){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(d[n]=r[n])}return d},wr.apply(null,arguments)}function Ja(d,e){var r=Object.keys(d);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(d);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(d,o).enumerable})),r.push.apply(r,n)}return r}function Sr(d){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ja(Object(r),!0).forEach(function(n){Tf(d,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(r)):Ja(Object(r)).forEach(function(n){Object.defineProperty(d,n,Object.getOwnPropertyDescriptor(r,n))})}return d}function Sf(d,e){if(typeof d!="object"||!d)return d;var r=d[Symbol.toPrimitive];if(r!==void 0){var n=r.call(d,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(d)}function wf(d){var e=Sf(d,"string");return typeof e=="symbol"?e:e+""}class wn{constructor(e,r){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=si,this.debug=r.debug.bind(null,n),this.log=r.log.bind(null,n),this.warn=r.warn.bind(null,n),this.info=r.info.bind(null,n),this.error=r.error.bind(null,n)}}const si=function(){},If={trace:si,debug:si,log:si,warn:si,info:si,error:si};function Zo(){return wr({},If)}function Lf(d,e){const r=self.console[d];return r?r.bind(self.console,`${e?"["+e+"] ":""}[${d}] >`):si}function el(d,e,r){return e[d]?e[d].bind(e):Lf(d,r)}const Jo=Zo();function Rf(d,e,r){const n=Zo();if(typeof console=="object"&&d===!0||typeof d=="object"){const o=["debug","log","info","warn","error"];o.forEach(c=>{n[c]=el(c,d,r)});try{n.log(`Debug logs enabled for "${e}" in hls.js version 1.6.11`)}catch{return Zo()}o.forEach(c=>{Jo[c]=el(c,d)})}else wr(Jo,n);return n}const Cr=Jo;function ai(d=!0){return typeof self>"u"?void 0:(d||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function kf(d){return typeof self<"u"&&d===self.ManagedMediaSource}function Au(d,e){const r=Object.keys(d),n=Object.keys(e),o=r.length,c=n.length;return!o||!c||o===c&&!r.some(i=>n.indexOf(i)===-1)}function vn(d,e=!1){if(typeof TextDecoder<"u"){const s=new TextDecoder("utf-8").decode(d);if(e){const a=s.indexOf("\0");return a!==-1?s.substring(0,a):s}return s.replace(/\0/g,"")}const r=d.length;let n,o,c,i="",l=0;for(;l<r;){if(n=d[l++],n===0&&e)return i;if(n===0||n===3)continue;switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:i+=String.fromCharCode(n);break;case 12:case 13:o=d[l++],i+=String.fromCharCode((n&31)<<6|o&63);break;case 14:o=d[l++],c=d[l++],i+=String.fromCharCode((n&15)<<12|(o&63)<<6|(c&63)<<0);break}}return i}function pn(d){let e="";for(let r=0;r<d.length;r++){let n=d[r].toString(16);n.length<2&&(n="0"+n),e+=n}return e}function gu(d){return Uint8Array.from(d.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function Df(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var Lo={exports:{}},tl;function Bf(){return tl||(tl=1,(function(d,e){(function(r){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,o=/^(?=([^\/?#]*))\1([^]*)$/,c=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,l={buildAbsoluteURL:function(t,s,a){if(a=a||{},t=t.trim(),s=s.trim(),!s){if(!a.alwaysNormalize)return t;var u=l.parseURL(t);if(!u)throw new Error("Error trying to parse base URL.");return u.path=l.normalizePath(u.path),l.buildURLFromParts(u)}var f=l.parseURL(s);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return a.alwaysNormalize?(f.path=l.normalizePath(f.path),l.buildURLFromParts(f)):s;var h=l.parseURL(t);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&h.path[0]!=="/"){var A=o.exec(h.path);h.netLoc=A[1],h.path=A[2]}h.netLoc&&!h.path&&(h.path="/");var g={scheme:h.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(g.netLoc=h.netLoc,f.path[0]!=="/"))if(!f.path)g.path=h.path,f.params||(g.params=h.params,f.query||(g.query=h.query));else{var p=h.path,m=p.substring(0,p.lastIndexOf("/")+1)+f.path;g.path=l.normalizePath(m)}return g.path===null&&(g.path=a.alwaysNormalize?l.normalizePath(f.path):f.path),l.buildURLFromParts(g)},parseURL:function(t){var s=n.exec(t);return s?{scheme:s[1]||"",netLoc:s[2]||"",path:s[3]||"",params:s[4]||"",query:s[5]||"",fragment:s[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(c,"");t.length!==(t=t.replace(i,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};d.exports=l})()})(Lo)),Lo.exports}var va=Bf();class ya{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Lr={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class pu{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,Of(this,"stats")}setByteRange(e,r){const n=e.split("@",2);let o;n.length===1?o=r?.byteRangeEndOffset||0:o=parseInt(n[1]),this._byteRange=[o,parseInt(n[0])+o]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[Lr.AUDIO]:null,[Lr.VIDEO]:null,[Lr.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new ya),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=va.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Lr.AUDIO]=null,e[Lr.VIDEO]=null,e[Lr.AUDIOVIDEO]=null}}function Hr(d){return d.sn!=="initSegment"}class Ro extends pu{constructor(e,r){super(r),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],r=this.byteRange[1];if(vt(e)&&vt(r))return r-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const r=this.levelkeys.identity;if(r)this._decryptdata=r.getDecryptData(this.sn);else{const n=Object.keys(this.levelkeys);if(n.length===1){const o=this._decryptdata=this.levelkeys[n[0]]||null;if(o)return o.getDecryptData(this.sn)}}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=vt(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var r;const n=Object.keys(this.levelkeys),o=n.length;if(o>1||o===1&&(r=this.levelkeys[n[0]])!=null&&r.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!vt(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return Hr(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const r=this.levelkeys[e];r&&!this._decryptdata&&(this._decryptdata=r.getDecryptData(this.sn))}}abortRequests(){var e,r;(e=this.loader)==null||e.abort(),(r=this.keyLoader)==null||r.abort()}setElementaryStreamInfo(e,r,n,o,c,i=!1){const{elementaryStreams:l}=this,t=l[e];if(!t){l[e]={startPTS:r,endPTS:n,startDTS:o,endDTS:c,partial:i};return}t.startPTS=Math.min(t.startPTS,r),t.endPTS=Math.max(t.endPTS,n),t.startDTS=Math.min(t.startDTS,o),t.endDTS=Math.max(t.endDTS,c)}}class Pf extends pu{constructor(e,r,n,o,c){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=r,this.index=o;const i=e.enumeratedString("BYTERANGE");i&&this.setByteRange(i,c),c&&(this.fragOffset=c.fragOffset+c.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function mu(d,e){const r=Object.getPrototypeOf(d);if(r){const n=Object.getOwnPropertyDescriptor(r,e);return n||mu(r,e)}}function Of(d,e){const r=mu(d,e);r&&(r.enumerable=!0,Object.defineProperty(d,e,r))}const rl=Math.pow(2,32)-1,_f=[].push,vu={video:1,audio:2,id3:3,text:4};function qr(d){return String.fromCharCode.apply(null,d)}function yu(d,e){const r=d[e]<<8|d[e+1];return r<0?65536+r:r}function zt(d,e){const r=Eu(d,e);return r<0?4294967296+r:r}function nl(d,e){let r=zt(d,e);return r*=Math.pow(2,32),r+=zt(d,e+4),r}function Eu(d,e){return d[e]<<24|d[e+1]<<16|d[e+2]<<8|d[e+3]}function Mf(d){const e=d.byteLength;for(let r=0;r<e;){const n=zt(d,r);if(n>8&&d[r+4]===109&&d[r+5]===111&&d[r+6]===111&&d[r+7]===102)return!0;r=n>1?r+n:e}return!1}function ur(d,e){const r=[];if(!e.length)return r;const n=d.byteLength;for(let o=0;o<n;){const c=zt(d,o),i=qr(d.subarray(o+4,o+8)),l=c>1?o+c:n;if(i===e[0])if(e.length===1)r.push(d.subarray(o+8,l));else{const t=ur(d.subarray(o+8,l),e.slice(1));t.length&&_f.apply(r,t)}o=l}return r}function Ff(d){const e=[],r=d[0];let n=8;const o=zt(d,n);n+=4;let c=0,i=0;r===0?(c=zt(d,n),i=zt(d,n+4),n+=8):(c=nl(d,n),i=nl(d,n+8),n+=16),n+=2;let l=d.length+i;const t=yu(d,n);n+=2;for(let s=0;s<t;s++){let a=n;const u=zt(d,a);a+=4;const f=u&2147483647;if((u&2147483648)>>>31===1)return Cr.warn("SIDX has hierarchical references (not supported)"),null;const A=zt(d,a);a+=4,e.push({referenceSize:f,subsegmentDuration:A,info:{duration:A/o,start:l,end:l+f-1}}),l+=f,a+=4,n=a}return{earliestPresentationTime:c,timescale:o,version:r,referencesCount:t,references:e}}function bu(d){const e=[],r=ur(d,["moov","trak"]);for(let o=0;o<r.length;o++){const c=r[o],i=ur(c,["tkhd"])[0];if(i){let l=i[0];const t=zt(i,l===0?12:20),s=ur(c,["mdia","mdhd"])[0];if(s){l=s[0];const a=zt(s,l===0?12:20),u=ur(c,["mdia","hdlr"])[0];if(u){const f=qr(u.subarray(8,12)),h={soun:Lr.AUDIO,vide:Lr.VIDEO}[f],A=ur(c,["mdia","minf","stbl","stsd"])[0],g=Nf(A);h?(e[t]={timescale:a,type:h,stsd:g},e[h]=Sr({timescale:a,id:t},g)):e[t]={timescale:a,type:f,stsd:g}}}}}return ur(d,["moov","mvex","trex"]).forEach(o=>{const c=zt(o,4),i=e[c];i&&(i.default={duration:zt(o,12),flags:zt(o,20)})}),e}function Nf(d){const e=d.subarray(8),r=e.subarray(86),n=qr(e.subarray(4,8));let o=n,c;const i=n==="enca"||n==="encv";if(i){const s=ur(e,[n])[0].subarray(n==="enca"?28:78);ur(s,["sinf"]).forEach(u=>{const f=ur(u,["schm"])[0];if(f){const h=qr(f.subarray(4,8));if(h==="cbcs"||h==="cenc"){const A=ur(u,["frma"])[0];A&&(o=qr(A))}}})}const l=o;switch(o){case"avc1":case"avc2":case"avc3":case"avc4":{const t=ur(r,["avcC"])[0];t&&t.length>3&&(o+="."+Bs(t[1])+Bs(t[2])+Bs(t[3]),c=Ds(l==="avc1"?"dva1":"dvav",r));break}case"mp4a":{const t=ur(e,[n])[0],s=ur(t.subarray(28),["esds"])[0];if(s&&s.length>7){let a=4;if(s[a++]!==3)break;a=ko(s,a),a+=2;const u=s[a++];if(u&128&&(a+=2),u&64&&(a+=s[a++]),s[a++]!==4)break;a=ko(s,a);const f=s[a++];if(f===64)o+="."+Bs(f);else break;if(a+=12,s[a++]!==5)break;a=ko(s,a);const h=s[a++];let A=(h&248)>>3;A===31&&(A+=1+((h&7)<<3)+((s[a]&224)>>5)),o+="."+A}break}case"hvc1":case"hev1":{const t=ur(r,["hvcC"])[0];if(t&&t.length>12){const s=t[1],a=["","A","B","C"][s>>6],u=s&31,f=zt(t,2),h=(s&32)>>5?"H":"L",A=t[12],g=t.subarray(6,12);o+="."+a+u,o+="."+Uf(f).toString(16).toUpperCase(),o+="."+h+A;let p="";for(let m=g.length;m--;){const y=g[m];(y||p)&&(p="."+y.toString(16).toUpperCase()+p)}o+=p}c=Ds(l=="hev1"?"dvhe":"dvh1",r);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{o=Ds(o,r)||o;break}case"vp09":{const t=ur(r,["vpcC"])[0];if(t&&t.length>6){const s=t[4],a=t[5],u=t[6]>>4&15;o+="."+Un(s)+"."+Un(a)+"."+Un(u)}break}case"av01":{const t=ur(r,["av1C"])[0];if(t&&t.length>2){const s=t[1]>>>5,a=t[1]&31,u=t[2]>>>7?"H":"M",f=(t[2]&64)>>6,h=(t[2]&32)>>5,A=s===2&&f?h?12:10:f?10:8,g=(t[2]&16)>>4,p=(t[2]&8)>>3,m=(t[2]&4)>>2,y=t[2]&3;o+="."+s+"."+Un(a)+u+"."+Un(A)+"."+g+"."+p+m+y+"."+Un(1)+"."+Un(1)+"."+Un(1)+"."+0,c=Ds("dav1",r)}break}}return{codec:o,encrypted:i,supplemental:c}}function Ds(d,e){const r=ur(e,["dvvC"]),n=r.length?r[0]:ur(e,["dvcC"])[0];if(n){const o=n[2]>>1&127,c=n[2]<<5&32|n[3]>>3&31;return d+"."+Un(o)+"."+Un(c)}}function Uf(d){let e=0;for(let r=0;r<32;r++)e|=(d>>r&1)<<31-r;return e>>>0}function ko(d,e){const r=e+5;for(;d[e++]&128&&e<r;);return e}function Bs(d){return("0"+d.toString(16).toUpperCase()).slice(-2)}function Un(d){return(d<10?"0":"")+d}function Gf(d,e){if(!d||!e)return;const r=e.keyId;r&&e.isCommonEncryption&&ur(d,["moov","trak"]).forEach(o=>{const i=ur(o,["mdia","minf","stbl","stsd"])[0].subarray(8);let l=ur(i,["enca"]);const t=l.length>0;t||(l=ur(i,["encv"])),l.forEach(s=>{const a=t?s.subarray(28):s.subarray(78);ur(a,["sinf"]).forEach(f=>{const h=Cu(f);if(h){const A=h.subarray(8,24);A.some(g=>g!==0)||(Cr.log(`[eme] Patching keyId in 'enc${t?"a":"v"}>sinf>>tenc' box: ${pn(A)} -> ${pn(r)}`),h.set(r,8))}})})})}function Cu(d){const e=ur(d,["schm"])[0];if(e){const r=qr(e.subarray(4,8));if(r==="cbcs"||r==="cenc")return ur(d,["schi","tenc"])[0]}return null}function Qf(d,e,r){const n={},o=ur(d,["moof","traf"]);for(let c=0;c<o.length;c++){const i=o[c],l=ur(i,["tfhd"])[0],t=zt(l,4),s=e[t];if(!s)continue;n[t]||(n[t]={start:NaN,duration:0,sampleCount:0,timescale:s.timescale,type:s.type});const a=n[t],u=ur(i,["tfdt"])[0];if(u){const E=u[0];let C=zt(u,4);E===1&&(C===rl?r.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(C*=rl+1,C+=zt(u,8))),vt(C)&&(!vt(a.start)||C<a.start)&&(a.start=C)}const f=s.default,h=zt(l,0)|f?.flags;let A=f?.duration||0;h&8&&(h&2?A=zt(l,12):A=zt(l,8));const g=ur(i,["trun"]);let p=a.start||0,m=0,y=A;for(let E=0;E<g.length;E++){const C=g[E],T=zt(C,4),w=a.sampleCount;a.sampleCount+=T;const I=C[3]&1,L=C[3]&4,R=C[2]&1,B=C[2]&2,P=C[2]&4,N=C[2]&8;let U=8,G=T;for(I&&(U+=4),L&&T&&(!(C[U+1]&1)&&a.keyFrameIndex===void 0&&(a.keyFrameIndex=w),U+=4,R?(y=zt(C,U),U+=4):y=A,B&&(U+=4),N&&(U+=4),p+=y,m+=y,G--);G--;)R?(y=zt(C,U),U+=4):y=A,B&&(U+=4),P&&(C[U+1]&1||a.keyFrameIndex===void 0&&(a.keyFrameIndex=a.sampleCount-(G+1),a.keyFrameStart=p),U+=4),N&&(U+=4),p+=y,m+=y;!m&&A&&(m+=A*T)}a.duration+=m}if(!Object.keys(n).some(c=>n[c].duration)){let c=1/0,i=0;const l=ur(d,["sidx"]);for(let t=0;t<l.length;t++){const s=Ff(l[t]);if(s!=null&&s.references){c=Math.min(c,s.earliestPresentationTime/s.timescale);const a=s.references.reduce((u,f)=>u+f.info.duration||0,0);i=Math.max(i,a+s.earliestPresentationTime/s.timescale)}}i&&vt(i)&&Object.keys(n).forEach(t=>{n[t].duration||(n[t].duration=i*n[t].timescale-n[t].start)})}return n}function $f(d){const e={valid:null,remainder:null},r=ur(d,["moof"]);if(r.length<2)return e.remainder=d,e;const n=r[r.length-1];return e.valid=d.slice(0,n.byteOffset-8),e.remainder=d.slice(n.byteOffset-8),e}function Sn(d,e){const r=new Uint8Array(d.length+e.length);return r.set(d),r.set(e,d.length),r}function il(d,e){const r=[],n=e.samples,o=e.timescale,c=e.id;let i=!1;return ur(n,["moof"]).map(t=>{const s=t.byteOffset-8;ur(t,["traf"]).map(u=>{const f=ur(u,["tfdt"]).map(h=>{const A=h[0];let g=zt(h,4);return A===1&&(g*=Math.pow(2,32),g+=zt(h,8)),g/o})[0];return f!==void 0&&(d=f),ur(u,["tfhd"]).map(h=>{const A=zt(h,4),g=zt(h,0)&16777215,p=(g&1)!==0,m=(g&2)!==0,y=(g&8)!==0;let E=0;const C=(g&16)!==0;let T=0;const w=(g&32)!==0;let I=8;A===c&&(p&&(I+=8),m&&(I+=4),y&&(E=zt(h,I),I+=4),C&&(T=zt(h,I),I+=4),w&&(I+=4),e.type==="video"&&(i=co(e.codec)),ur(u,["trun"]).map(L=>{const R=L[0],B=zt(L,0)&16777215,P=(B&1)!==0;let N=0;const U=(B&4)!==0,G=(B&256)!==0;let W=0;const K=(B&512)!==0;let M=0;const Q=(B&1024)!==0,Z=(B&2048)!==0;let J=0;const q=zt(L,4);let te=8;P&&(N=zt(L,te),te+=4),U&&(te+=4);let fe=N+s;for(let Ee=0;Ee<q;Ee++){if(G?(W=zt(L,te),te+=4):W=E,K?(M=zt(L,te),te+=4):M=T,Q&&(te+=4),Z&&(R===0?J=zt(L,te):J=Eu(L,te),te+=4),e.type===Lr.VIDEO){let Ae=0;for(;Ae<M;){const Ce=zt(n,fe);if(fe+=4,Wf(i,n[fe])){const Oe=n.subarray(fe,fe+Ce);Ea(Oe,i?2:1,d+J/o,r)}fe+=Ce,Ae+=Ce+4}}d+=W/o}}))})})}),r}function co(d){if(!d)return!1;const e=d.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function Wf(d,e){if(d){const r=e>>1&63;return r===39||r===40}else return(e&31)===6}function Ea(d,e,r,n){const o=xu(d);let c=0;c+=e;let i=0,l=0,t=0;for(;c<o.length;){i=0;do{if(c>=o.length)break;t=o[c++],i+=t}while(t===255);l=0;do{if(c>=o.length)break;t=o[c++],l+=t}while(t===255);const s=o.length-c;let a=c;if(l<s)c+=l;else if(l>s){Cr.error(`Malformed SEI payload. ${l} is too small, only ${s} bytes left to parse.`);break}if(i===4){if(o[a++]===181){const f=yu(o,a);if(a+=2,f===49){const h=zt(o,a);if(a+=4,h===1195456820){const A=o[a++];if(A===3){const g=o[a++],p=31&g,m=64&g,y=m?2+p*3:0,E=new Uint8Array(y);if(m){E[0]=g;for(let C=1;C<y;C++)E[C]=o[a++]}n.push({type:A,payloadType:i,pts:r,bytes:E})}}}}}else if(i===5&&l>16){const u=[];for(let A=0;A<16;A++){const g=o[a++].toString(16);u.push(g.length==1?"0"+g:g),(A===3||A===5||A===7||A===9)&&u.push("-")}const f=l-16,h=new Uint8Array(f);for(let A=0;A<f;A++)h[A]=o[a++];n.push({payloadType:i,pts:r,uuid:u.join(""),userData:vn(h),userDataBytes:h})}}}function xu(d){const e=d.byteLength,r=[];let n=1;for(;n<e-2;)d[n]===0&&d[n+1]===0&&d[n+2]===3?(r.push(n+2),n+=2):n++;if(r.length===0)return d;const o=e-r.length,c=new Uint8Array(o);let i=0;for(n=0;n<o;i++,n++)i===r[0]&&(i++,r.shift()),c[n]=d[i];return c}function Vf(d){const e=d[0];let r="",n="",o=0,c=0,i=0,l=0,t=0,s=0;if(e===0){for(;qr(d.subarray(s,s+1))!=="\0";)r+=qr(d.subarray(s,s+1)),s+=1;for(r+=qr(d.subarray(s,s+1)),s+=1;qr(d.subarray(s,s+1))!=="\0";)n+=qr(d.subarray(s,s+1)),s+=1;n+=qr(d.subarray(s,s+1)),s+=1,o=zt(d,12),c=zt(d,16),l=zt(d,20),t=zt(d,24),s=28}else if(e===1){s+=4,o=zt(d,s),s+=4;const u=zt(d,s);s+=4;const f=zt(d,s);for(s+=4,i=2**32*u+f,bf(i)||(i=Number.MAX_SAFE_INTEGER,Cr.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),l=zt(d,s),s+=4,t=zt(d,s),s+=4;qr(d.subarray(s,s+1))!=="\0";)r+=qr(d.subarray(s,s+1)),s+=1;for(r+=qr(d.subarray(s,s+1)),s+=1;qr(d.subarray(s,s+1))!=="\0";)n+=qr(d.subarray(s,s+1)),s+=1;n+=qr(d.subarray(s,s+1)),s+=1}const a=d.subarray(s,d.byteLength);return{schemeIdUri:r,value:n,timeScale:o,presentationTime:i,presentationTimeDelta:c,eventDuration:l,id:t,payload:a}}function Yf(d,...e){const r=e.length;let n=8,o=r;for(;o--;)n+=e[o].byteLength;const c=new Uint8Array(n);for(c[0]=n>>24&255,c[1]=n>>16&255,c[2]=n>>8&255,c[3]=n&255,c.set(d,4),o=0,n=8;o<r;o++)c.set(e[o],n),n+=e[o].byteLength;return c}function Hf(d,e,r){if(d.byteLength!==16)throw new RangeError("Invalid system id");let n,o;n=0,o=new Uint8Array;let c;n>0?(c=new Uint8Array(4),e.length>0&&new DataView(c.buffer).setUint32(0,e.length,!1)):c=new Uint8Array;const i=new Uint8Array(4);return r.byteLength>0&&new DataView(i.buffer).setUint32(0,r.byteLength,!1),Yf([112,115,115,104],new Uint8Array([n,0,0,0]),d,c,o,i,r)}const Tu=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Ui={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function ba(d,e){const r=Ui[e];return!!r&&!!r[d.slice(0,4)]}function ea(d,e,r=!0){return!d.split(",").some(n=>!Ca(n,e,r))}function Ca(d,e,r=!0){var n;const o=ai(r);return(n=o?.isTypeSupported(is(d,e)))!=null?n:!1}function is(d,e){return`${e}/mp4;codecs=${d}`}function sl(d){if(d){const e=d.substring(0,4);return Ui.video[e]}return 2}function eo(d){const e=Tu();return d.split(",").reduce((r,n)=>{const c=e&&co(n)?9:Ui.video[n];return c?(c*2+r)/(r?3:2):(Ui.audio[n]+r)/(r?2:1)},0)}const Do={};function jf(d,e=!0){if(Do[d])return Do[d];const r={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[d];for(let o=0;o<r.length;o++){var n;if(Ca(r[o],"audio",e))return Do[d]=r[o],r[o];if(r[o]==="mp3"&&(n=ai(e))!=null&&n.isTypeSupported("audio/mpeg"))return""}return d}const Kf=/flac|opus|mp4a\.40\.34/i;function to(d,e=!0){return d.replace(Kf,r=>jf(r.toLowerCase(),e))}function zf(d,e){const r=[];if(d){const n=d.split(",");for(let o=0;o<n.length;o++)ba(n[o],"video")||r.push(n[o])}return e&&r.push(e),r.join(",")}function Hs(d,e){if(d&&(d.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(d)!==-1)&&(ol(d,"audio")||ol(d,"video")))return d;if(e){const r=e.split(",");if(r.length>1){if(d){for(let n=r.length;n--;)if(r[n].substring(0,4)===d.substring(0,4))return r[n]}return r[0]}}return e||d}function ol(d,e){return ba(d,e)&&Ca(d,e)}function qf(d){const e=d.split(",");for(let r=0;r<e.length;r++){const n=e[r].split(".");n.length>2&&n[0]==="avc1"&&(e[r]=`avc1.${parseInt(n[1]).toString(16)}${("000"+parseInt(n[2]).toString(16)).slice(-4)}`)}return e.join(",")}function Xf(d){if(d.startsWith("av01.")){const e=d.split("."),r=["0","111","01","01","01","0"];for(let n=e.length;n>4&&n<10;n++)e[n]=r[n-4];return e.join(".")}return d}function al(d){const e=ai(d)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function ta(d){return d.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const Zf={supported:!0,powerEfficient:!0,smooth:!0},Jf={supported:!1,smooth:!1,powerEfficient:!1},Su={supported:!0,configurations:[],decodingInfoResults:[Zf]};function wu(d,e){return{supported:!1,configurations:e,decodingInfoResults:[Jf],error:d}}function ed(d,e,r,n,o,c){const i=d.videoCodec,l=d.audioCodec?d.audioGroups:null,t=c?.audioCodec,s=c?.channels,a=s?parseInt(s):t?1/0:2;let u=null;if(l!=null&&l.length)try{l.length===1&&l[0]?u=e.groups[l[0]].channels:u=l.reduce((f,h)=>{if(h){const A=e.groups[h];if(!A)throw new Error(`Audio track group ${h} not found`);Object.keys(A.channels).forEach(g=>{f[g]=(f[g]||0)+A.channels[g]})}return f},{2:0})}catch{return!0}return i!==void 0&&(i.split(",").some(f=>co(f))||d.width>1920&&d.height>1088||d.height>1920&&d.width>1088||d.frameRate>Math.max(n,30)||d.videoRange!=="SDR"&&d.videoRange!==r||d.bitrate>Math.max(o,8e6))||!!u&&vt(a)&&Object.keys(u).some(f=>parseInt(f)>a)}function Iu(d,e,r,n={}){const o=d.videoCodec;if(!o&&!d.audioCodec||!r)return Promise.resolve(Su);const c=[],i=td(d),l=i.length,t=rd(d,e,l>0),s=t.length;for(let a=l||1*s||1;a--;){const u={type:"media-source"};if(l&&(u.video=i[a%l]),s){u.audio=t[a%s];const f=u.audio.bitrate;u.video&&f&&(u.video.bitrate-=f)}c.push(u)}if(o){const a=navigator.userAgent;if(o.split(",").some(u=>co(u))&&Tu())return Promise.resolve(wu(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${a})`),c))}return Promise.all(c.map(a=>{const u=id(a);return n[u]||(n[u]=r.decodingInfo(a))})).then(a=>({supported:!a.some(u=>!u.supported),configurations:c,decodingInfoResults:a})).catch(a=>({supported:!1,configurations:c,decodingInfoResults:[],error:a}))}function td(d){var e;const r=(e=d.videoCodec)==null?void 0:e.split(","),n=Lu(d),o=d.width||640,c=d.height||480,i=d.frameRate||30,l=d.videoRange.toLowerCase();return r?r.map(t=>{const s={contentType:is(Xf(t),"video"),width:o,height:c,bitrate:n,framerate:i};return l!=="sdr"&&(s.transferFunction=l),s}):[]}function rd(d,e,r){var n;const o=(n=d.audioCodec)==null?void 0:n.split(","),c=Lu(d);return o&&d.audioGroups?d.audioGroups.reduce((i,l)=>{var t;const s=l?(t=e.groups[l])==null?void 0:t.tracks:null;return s?s.reduce((a,u)=>{if(u.groupId===l){const f=parseFloat(u.channels||"");o.forEach(h=>{const A={contentType:is(h,"audio"),bitrate:r?nd(h,c):c};f&&(A.channels=""+f),a.push(A)})}return a},i):i},[]):[]}function nd(d,e){if(e<=1)return 1;let r=128e3;return d==="ec-3"?r=768e3:d==="ac-3"&&(r=64e4),Math.min(e/2,r)}function Lu(d){return Math.ceil(Math.max(d.bitrate*.9,d.averageBitrate)/1e3)*1e3||1}function id(d){let e="";const{audio:r,video:n}=d;if(n){const o=ta(n.contentType);e+=`${o}_r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${Math.ceil(n.bitrate/1e5)}`}if(r){const o=ta(r.contentType);e+=`${n?"_":""}${o}_c${r.channels}`}return e}const ra=["NONE","TYPE-0","TYPE-1",null];function sd(d){return ra.indexOf(d)>-1}const ro=["SDR","PQ","HLG"];function od(d){return!!d&&ro.indexOf(d)>-1}var js={No:"",Yes:"YES",v2:"v2"};function ll(d){const{canSkipUntil:e,canSkipDateRanges:r,age:n}=d,o=n<e/2;return e&&o?r?js.v2:js.Yes:js.No}class ul{constructor(e,r,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=r,this.skip=n}addDirectives(e){const r=new self.URL(e);return this.msn!==void 0&&r.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&r.searchParams.set("_HLS_part",this.part.toString()),this.skip&&r.searchParams.set("_HLS_skip",this.skip),r.href}}class ss{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),"supplemental"in e){var r;this.supplemental=e.supplemental;const n=(r=e.supplemental)==null?void 0:r.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return cl(this._audioGroups,e)}hasSubtitleGroup(e){return cl(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,r){if(r){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(r)===-1&&n.push(r)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(r)===-1&&n.push(r)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function cl(d,e){return!e||!d?!1:d.indexOf(e)!==-1}function ad(){if(typeof matchMedia=="function"){const d=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(d.media!==e.media)return d.matches===!0}return!1}function ld(d,e){let r=!1,n=[];if(d&&(r=d!=="SDR",n=[d]),e){n=e.allowedVideoRanges||ro.slice(0);const o=n.join("")!=="SDR"&&!e.videoCodec;r=e.preferHDR!==void 0?e.preferHDR:o&&ad(),r||(n=["SDR"])}return{preferHDR:r,allowedVideoRanges:n}}const ud=d=>{const e=new WeakSet;return(r,n)=>{if(d&&(n=d(r,n)),typeof n=="object"&&n!==null){if(e.has(n))return;e.add(n)}return n}},Pr=(d,e)=>JSON.stringify(d,ud(e));function cd(d,e,r,n,o){const c=Object.keys(d),i=n?.channels,l=n?.audioCodec,t=o?.videoCodec,s=i&&parseInt(i)===2;let a=!1,u=!1,f=1/0,h=1/0,A=1/0,g=1/0,p=0,m=[];const{preferHDR:y,allowedVideoRanges:E}=ld(e,o);for(let L=c.length;L--;){const R=d[c[L]];a||(a=R.channels[2]>0),f=Math.min(f,R.minHeight),h=Math.min(h,R.minFramerate),A=Math.min(A,R.minBitrate),E.filter(P=>R.videoRanges[P]>0).length>0&&(u=!0)}f=vt(f)?f:0,h=vt(h)?h:0;const C=Math.max(1080,f),T=Math.max(30,h);A=vt(A)?A:r,r=Math.max(A,r),u||(e=void 0);const w=c.length>1;return{codecSet:c.reduce((L,R)=>{const B=d[R];if(R===L)return L;if(m=u?E.filter(P=>B.videoRanges[P]>0):[],w){if(B.minBitrate>r)return Fn(R,`min bitrate of ${B.minBitrate} > current estimate of ${r}`),L;if(!B.hasDefaultAudio)return Fn(R,"no renditions with default or auto-select sound found"),L;if(l&&R.indexOf(l.substring(0,4))%5!==0)return Fn(R,`audio codec preference "${l}" not found`),L;if(i&&!s){if(!B.channels[i])return Fn(R,`no renditions with ${i} channel sound found (channels options: ${Object.keys(B.channels)})`),L}else if((!l||s)&&a&&B.channels[2]===0)return Fn(R,"no renditions with stereo sound found"),L;if(B.minHeight>C)return Fn(R,`min resolution of ${B.minHeight} > maximum of ${C}`),L;if(B.minFramerate>T)return Fn(R,`min framerate of ${B.minFramerate} > maximum of ${T}`),L;if(!m.some(P=>B.videoRanges[P]>0))return Fn(R,`no variants with VIDEO-RANGE of ${Pr(m)} found`),L;if(t&&R.indexOf(t.substring(0,4))%5!==0)return Fn(R,`video codec preference "${t}" not found`),L;if(B.maxScore<p)return Fn(R,`max score of ${B.maxScore} < selected max of ${p}`),L}return L&&(eo(R)>=eo(L)||B.fragmentError>d[L].fragmentError)?L:(g=B.minIndex,p=B.maxScore,R)},void 0),videoRanges:m,preferHDR:y,minFramerate:h,minBitrate:A,minIndex:g}}function Fn(d,e){Cr.log(`[abr] start candidates with "${d}" ignored because ${e}`)}function Ru(d){return d.reduce((e,r)=>{let n=e.groups[r.groupId];n||(n=e.groups[r.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(r);const o=r.channels||"2";return n.channels[o]=(n.channels[o]||0)+1,n.hasDefault=n.hasDefault||r.default,n.hasAutoSelect=n.hasAutoSelect||r.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function fd(d,e,r,n){return d.slice(r,n+1).reduce((o,c,i)=>{if(!c.codecSet)return o;const l=c.audioGroups;let t=o[c.codecSet];t||(o[c.codecSet]=t={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:i,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!l,fragmentError:0}),t.minBitrate=Math.min(t.minBitrate,c.bitrate);const s=Math.min(c.height,c.width);return t.minHeight=Math.min(t.minHeight,s),t.minFramerate=Math.min(t.minFramerate,c.frameRate),t.minIndex=Math.min(t.minIndex,i),t.maxScore=Math.max(t.maxScore,c.score),t.fragmentError+=c.fragmentError,t.videoRanges[c.videoRange]=(t.videoRanges[c.videoRange]||0)+1,l&&l.forEach(a=>{if(!a)return;const u=e.groups[a];u&&(t.hasDefaultAudio=t.hasDefaultAudio||e.hasDefaultAudio?u.hasDefault:u.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(u.channels).forEach(f=>{t.channels[f]=(t.channels[f]||0)+u.channels[f]}))}),o},{})}function fl(d){if(!d)return d;const{lang:e,assocLang:r,characteristics:n,channels:o,audioCodec:c}=d;return{lang:e,assocLang:r,characteristics:n,channels:o,audioCodec:c}}function Qn(d,e,r){if("attrs"in d){const n=e.indexOf(d);if(n!==-1)return n}for(let n=0;n<e.length;n++){const o=e[n];if(pi(d,o,r))return n}return-1}function pi(d,e,r){const{groupId:n,name:o,lang:c,assocLang:i,default:l}=d,t=d.forced;return(n===void 0||e.groupId===n)&&(o===void 0||e.name===o)&&(c===void 0||dd(c,e.lang))&&(c===void 0||e.assocLang===i)&&(l===void 0||e.default===l)&&(t===void 0||e.forced===t)&&(!("characteristics"in d)||hd(d.characteristics||"",e.characteristics))&&(r===void 0||r(d,e))}function dd(d,e="--"){return d.length===e.length?d===e:d.startsWith(e)||e.startsWith(d)}function hd(d,e=""){const r=d.split(","),n=e.split(",");return r.length===n.length&&!r.some(o=>n.indexOf(o)===-1)}function gi(d,e){const{audioCodec:r,channels:n}=d;return(r===void 0||(e.audioCodec||"").substring(0,4)===r.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function Ad(d,e,r,n,o){const c=e[n],l=e.reduce((f,h,A)=>{const g=h.uri;return(f[g]||(f[g]=[])).push(A),f},{})[c.uri];l.length>1&&(n=Math.max.apply(Math,l));const t=c.videoRange,s=c.frameRate,a=c.codecSet.substring(0,4),u=dl(e,n,f=>{if(f.videoRange!==t||f.frameRate!==s||f.codecSet.substring(0,4)!==a)return!1;const h=f.audioGroups,A=r.filter(g=>!h||h.indexOf(g.groupId)!==-1);return Qn(d,A,o)>-1});return u>-1?u:dl(e,n,f=>{const h=f.audioGroups,A=r.filter(g=>!h||h.indexOf(g.groupId)!==-1);return Qn(d,A,o)>-1})}function dl(d,e,r){for(let n=e;n>-1;n--)if(r(d[n]))return n;for(let n=e+1;n<d.length;n++)if(r(d[n]))return n;return-1}function no(d,e){var r;return!!d&&d!==((r=e.loadLevelObj)==null?void 0:r.uri)}class gd extends wn{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=r=>{var n;const{fragCurrent:o,partCurrent:c,hls:i}=this,{autoLevelEnabled:l,media:t}=i;if(!o||!t)return;const s=performance.now(),a=c?c.stats:o.stats,u=c?c.duration:o.duration,f=s-a.loading.start,h=i.minAutoLevel,A=o.level,g=this._nextAutoLevel;if(a.aborted||a.loaded&&a.loaded===a.total||A<=h){this.clearTimer(),this._nextAutoLevel=-1;return}if(!l)return;const p=g>-1&&g!==A,m=!!r||p;if(!m&&(t.paused||!t.playbackRate||!t.readyState))return;const y=i.mainForwardBufferInfo;if(!m&&y===null)return;const E=this.bwEstimator.getEstimateTTFB(),C=Math.abs(t.playbackRate);if(f<=Math.max(E,1e3*(u/(C*2))))return;const T=y?y.len/C:0,w=a.loading.first?a.loading.first-a.loading.start:-1,I=a.loaded&&w>-1,L=this.getBwEstimate(),R=i.levels,B=R[A],P=Math.max(a.loaded,Math.round(u*(o.bitrate||B.averageBitrate)/8));let N=I?f-w:f;N<1&&I&&(N=Math.min(f,a.loaded*8/L));const U=I?a.loaded*1e3/N:0,G=E/1e3,W=U?(P-a.loaded)/U:P*8/L+G;if(W<=T)return;const K=U?U*8:L,M=((n=r?.details||this.hls.latestLevelDetails)==null?void 0:n.live)===!0,Q=this.hls.config.abrBandWidthUpFactor;let Z=Number.POSITIVE_INFINITY,J;for(J=A-1;J>h;J--){const Ee=R[J].maxBitrate,Ae=!R[J].details||M;if(Z=this.getTimeToLoadFrag(G,K,u*Ee,Ae),Z<Math.min(T,u+G))break}if(Z>=W||Z>u*10)return;I?this.bwEstimator.sample(f-Math.min(E,w),a.loaded):this.bwEstimator.sampleTTFB(f);const q=R[J].maxBitrate;this.getBwEstimate()*Q>q&&this.resetEstimator(q);const te=this.findBestLevel(q,h,J,0,T,1,1);te>-1&&(J=te),this.warn(`Fragment ${o.sn}${c?" part "+c.index:""} of level ${A} is loading too slowly;
      Fragment duration: ${o.duration.toFixed(3)}
      Time to underbuffer: ${T.toFixed(3)} s
      Estimated load time for current fragment: ${W.toFixed(3)} s
      Estimated load time for down switch fragment: ${Z.toFixed(3)} s
      TTFB estimate: ${w|0} ms
      Current BW estimate: ${vt(L)?L|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${J} @ ${q|0} bps`),i.nextLoadLevel=i.nextAutoLevel=J,this.clearTimer();const fe=()=>{if(this.clearTimer(),this.fragCurrent===o&&this.hls.loadLevel===J&&J>0){const Ee=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${J>0?"and switching down":""}
      Fragment duration: ${o.duration.toFixed(3)} s
      Time to underbuffer: ${Ee.toFixed(3)} s`),o.abortRequests(),this.fragCurrent=this.partCurrent=null,J>h){let Ae=this.findBestLevel(this.hls.levels[h].bitrate,h,J,0,Ee,1,1);Ae===-1&&(Ae=h),this.hls.nextLoadLevel=this.hls.nextAutoLevel=Ae,this.resetEstimator(this.hls.levels[Ae].bitrate)}}};p||W>Z*2?fe():this.timer=self.setInterval(fe,Z*1e3),i.trigger(D.FRAG_LOAD_EMERGENCY_ABORTED,{frag:o,part:c,stats:a})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new xf(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.FRAG_LOADING,this.onFragLoading,this),e.on(D.FRAG_LOADED,this.onFragLoaded,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this),e.on(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(D.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.FRAG_LOADING,this.onFragLoading,this),e.off(D.FRAG_LOADED,this.onFragLoaded,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this),e.off(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(D.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(D.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,r){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,r){const n=r.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var o;this.fragCurrent=n,this.partCurrent=(o=r.part)!=null?o:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,r){this.clearTimer()}onError(e,r){if(!r.fatal)switch(r.details){case ve.BUFFER_ADD_CODEC_ERROR:case ve.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case ve.FRAG_LOAD_TIMEOUT:{const n=r.frag,{fragCurrent:o,partCurrent:c}=this;if(n&&o&&n.sn===o.sn&&n.level===o.level){const i=performance.now(),l=c?c.stats:n.stats,t=i-l.loading.start,s=l.loading.first?l.loading.first-l.loading.start:-1;if(l.loaded&&s>-1){const u=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(t-Math.min(u,s),l.loaded)}else this.bwEstimator.sampleTTFB(t)}break}}}getTimeToLoadFrag(e,r,n,o){const c=e+n/r,i=o?e+this.lastLevelLoadSec:0;return c+i}onLevelLoaded(e,r){const n=this.hls.config,{loading:o}=r.stats,c=o.end-o.first;vt(c)&&(this.lastLevelLoadSec=c/1e3),r.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(r.levelInfo)}onFragLoaded(e,{frag:r,part:n}){const o=n?n.stats:r.stats;if(r.type===Rt.MAIN&&this.bwEstimator.sampleTTFB(o.loading.first-o.loading.start),!this.ignoreFragment(r)){if(this.clearTimer(),r.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const c=n?n.duration:r.duration,i=this.hls.levels[r.level],l=(i.loaded?i.loaded.bytes:0)+o.loaded,t=(i.loaded?i.loaded.duration:0)+c;i.loaded={bytes:l,duration:t},i.realBitrate=Math.round(8*l/t)}if(r.bitrateTest){const c={stats:o,frag:r,part:n,id:r.type};this.onFragBuffered(D.FRAG_BUFFERED,c),r.bitrateTest=!1}else this.lastLoadedFragLevel=r.level}}onFragBuffered(e,r){const{frag:n,part:o}=r,c=o!=null&&o.stats.loaded?o.stats:n.stats;if(c.aborted||this.ignoreFragment(n))return;const i=c.parsing.end-c.loading.start-Math.min(c.loading.first-c.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(i,c.loaded),c.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Rt.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:r}=this.hls,n=this.getBwEstimate(),o=this.hls.config.maxStarvationDelay,c=this.findBestLevel(n,r,e,0,o,1,1);if(c>-1)return c;const i=this.hls.firstLevel,l=Math.min(Math.max(i,r),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${i} clamped to ${l}`),l}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),o=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!o||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const c=n&&o?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const i=this.hls.levels;if(i.length>Math.max(e,c)&&i[e].loadError<=i[c].loadError)return e}return this._nextAutoLevel=c,this.nextAutoLevelKey=this.getAutoLevelKey(),c}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:r,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:o,config:c,minAutoLevel:i}=n,l=r?r.duration:e?e.duration:0,t=this.getBwEstimate(),s=this.getStarvationDelay();let a=c.abrBandWidthFactor,u=c.abrBandWidthUpFactor;if(s){const p=this.findBestLevel(t,i,o,s,0,a,u);if(p>=0)return this.rebufferNotice=-1,p}let f=l?Math.min(l,c.maxStarvationDelay):c.maxStarvationDelay;if(!s){const p=this.bitrateTestDelay;p&&(f=(l?Math.min(l,c.maxLoadingDelay):c.maxLoadingDelay)-p,this.info(`bitrate test took ${Math.round(1e3*p)}ms, set first fragment max fetchDuration to ${Math.round(1e3*f)} ms`),a=u=1)}const h=this.findBestLevel(t,i,o,s,f,a,u);if(this.rebufferNotice!==h&&(this.rebufferNotice=h,this.info(`${s?"rebuffering expected":"buffer is empty"}, optimal quality level ${h}`)),h>-1)return h;const A=n.levels[i],g=n.loadLevelObj;return g&&A?.bitrate<g.bitrate?i:n.loadLevel}getStarvationDelay(){const e=this.hls,r=e.media;if(!r)return 1/0;const n=r&&r.playbackRate!==0?Math.abs(r.playbackRate):1,o=e.mainForwardBufferInfo;return(o?o.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,r,n,o,c,i,l){var t;const s=o+c,a=this.lastLoadedFragLevel,u=a===-1?this.hls.firstLevel:a,{fragCurrent:f,partCurrent:h}=this,{levels:A,allAudioTracks:g,loadLevel:p,config:m}=this.hls;if(A.length===1)return 0;const y=A[u],E=!!((t=this.hls.latestLevelDetails)!=null&&t.live),C=p===-1||a===-1;let T,w="SDR",I=y?.frameRate||0;const{audioPreference:L,videoPreference:R}=m,B=this.audioTracksByGroup||(this.audioTracksByGroup=Ru(g));let P=-1;if(C){if(this.firstSelection!==-1)return this.firstSelection;const K=this.codecTiers||(this.codecTiers=fd(A,B,r,n)),M=cd(K,w,e,L,R),{codecSet:Q,videoRanges:Z,minFramerate:J,minBitrate:q,minIndex:te,preferHDR:fe}=M;P=te,T=Q,w=fe?Z[Z.length-1]:Z[0],I=J,e=Math.max(e,q),this.log(`picked start tier ${Pr(M)}`)}else T=y?.codecSet,w=y?.videoRange;const N=h?h.duration:f?f.duration:0,U=this.bwEstimator.getEstimateTTFB()/1e3,G=[];for(let K=n;K>=r;K--){var W;const M=A[K],Q=K>u;if(!M)continue;if(m.useMediaCapabilities&&!M.supportedResult&&!M.supportedPromise){const Ae=navigator.mediaCapabilities;typeof Ae?.decodingInfo=="function"&&ed(M,B,w,I,e,L)?(M.supportedPromise=Iu(M,B,Ae,this.supportedCache),M.supportedPromise.then(Ce=>{if(!this.hls)return;M.supportedResult=Ce;const Oe=this.hls.levels,Ne=Oe.indexOf(M);Ce.error?this.warn(`MediaCapabilities decodingInfo error: "${Ce.error}" for level ${Ne} ${Pr(Ce)}`):Ce.supported?Ce.decodingInfoResults.some(Be=>Be.smooth===!1||Be.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${Ne} not smooth or powerEfficient: ${Pr(Ce)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${Ne} ${Pr(Ce)}`),Ne>-1&&Oe.length>1&&(this.log(`Removing unsupported level ${Ne}`),this.hls.removeLevel(Ne),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(Ce=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${Ce}`)})):M.supportedResult=Su}if((T&&M.codecSet!==T||w&&M.videoRange!==w||Q&&I>M.frameRate||!Q&&I>0&&I<M.frameRate||(W=M.supportedResult)!=null&&(W=W.decodingInfoResults)!=null&&W.some(Ae=>Ae.smooth===!1))&&(!C||K!==P)){G.push(K);continue}const Z=M.details,J=(h?Z?.partTarget:Z?.averagetargetduration)||N;let q;Q?q=l*e:q=i*e;const te=N&&o>=N*2&&c===0?M.averageBitrate:M.maxBitrate,fe=this.getTimeToLoadFrag(U,q,te*J,Z===void 0);if(q>=te&&(K===a||M.loadError===0&&M.fragmentError===0)&&(fe<=U||!vt(fe)||E&&!this.bitrateTestDelay||fe<s)){const Ae=this.forcedAutoLevel;return K!==p&&(Ae===-1||Ae!==p)&&(G.length&&this.trace(`Skipped level(s) ${G.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${A[G[0]].codecs}" ${A[G[0]].videoRange}; not compatible with "${T}" ${w}`),this.info(`switch candidate:${u}->${K} adjustedbw(${Math.round(q)})-bitrate=${Math.round(q-te)} ttfb:${U.toFixed(1)} avgDuration:${J.toFixed(1)} maxFetchDuration:${s.toFixed(1)} fetchDuration:${fe.toFixed(1)} firstSelection:${C} codecSet:${M.codecSet} videoRange:${M.videoRange} hls.loadLevel:${p}`)),C&&(this.firstSelection=K),K}}return-1}set nextAutoLevel(e){const r=this.deriveNextAutoLevel(e);this._nextAutoLevel!==r&&(this.nextAutoLevelKey="",this._nextAutoLevel=r)}deriveNextAutoLevel(e){const{maxAutoLevel:r,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),r)}}const ku={search:function(d,e){let r=0,n=d.length-1,o=null,c=null;for(;r<=n;){o=(r+n)/2|0,c=d[o];const i=e(c);if(i>0)r=o+1;else if(i<0)n=o-1;else return c}return null}};function pd(d,e,r){if(e===null||!Array.isArray(d)||!d.length||!vt(e))return null;const n=d[0].programDateTime;if(e<(n||0))return null;const o=d[d.length-1].endProgramDateTime;if(e>=(o||0))return null;for(let c=0;c<d.length;++c){const i=d[c];if(vd(e,r,i))return i}return null}function mi(d,e,r=0,n=0,o=.005){let c=null;if(d){c=e[1+d.sn-e[0].sn]||null;const l=d.endDTS-r;l>0&&l<15e-7&&(r+=15e-7),c&&d.level!==c.level&&c.end<=d.end&&(c=e[2+d.sn-e[0].sn]||null)}else r===0&&e[0].start===0&&(c=e[0]);if(c&&((!d||d.level===c.level)&&hl(r,n,c)===0||md(c,d,Math.min(o,n))))return c;const i=ku.search(e,hl.bind(null,r,n));return i&&(i!==d||!c)?i:c}function md(d,e,r){if(e&&e.start===0&&e.level<d.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((o,c)=>(c[0]==="INF"&&(o+=parseFloat(c[1])),o),r);return d.start<=n}return!1}function hl(d=0,e=0,r){if(r.start<=d&&r.start+r.duration>d)return 0;const n=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=d?1:r.start-n>d&&r.start?-1:0}function vd(d,e,r){const n=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0))*1e3;return(r.endProgramDateTime||0)-n>d}function Du(d,e,r){if(d&&d.startCC<=e&&d.endCC>=e){let n=d.fragments;const{fragmentHint:o}=d;o&&(n=n.concat(o));let c;return ku.search(n,i=>i.cc<e?1:i.cc>e?-1:(c=i,i.end<=r?1:i.start>r?-1:0)),c||null}return null}function io(d){switch(d.details){case ve.FRAG_LOAD_TIMEOUT:case ve.KEY_LOAD_TIMEOUT:case ve.LEVEL_LOAD_TIMEOUT:case ve.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Al(d,e){const r=io(e);return d.default[`${r?"timeout":"error"}Retry`]}function xa(d,e){const r=d.backoff==="linear"?1:Math.pow(2,e);return Math.min(r*d.retryDelayMs,d.maxRetryDelayMs)}function gl(d){return Sr(Sr({},d),{errorRetry:null,timeoutRetry:null})}function so(d,e,r,n){if(!d)return!1;const o=n?.code,c=e<d.maxNumRetry&&(yd(o)||!!r);return d.shouldRetry?d.shouldRetry(d,e,r,n,c):c}function yd(d){return na(d)||!!d&&(d<400||d>499)}function na(d){return d===0&&navigator.onLine===!1}var tn={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},gn={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4};class Ed extends wn{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(D.ERROR,this.onError,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(D.ERROR,this.onError,this),e.off(D.ERROR,this.onErrorOut,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return e?.type===Rt.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const r=this.hls,n=r.currentLevel;return(e=r.loadLevelObj)!=null&&e.details||n===-1?r.loadLevel:n}variantHasKey(e,r){if(e){var n;if((n=e.details)!=null&&n.hasKey(r))return!0;const o=e.audioGroups;if(o)return this.hls.allAudioTracks.filter(i=>o.indexOf(i.groupId)>=0).some(i=>{var l;return(l=i.details)==null?void 0:l.hasKey(r)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,r){var n;if(r.fatal)return;const o=this.hls,c=r.context;switch(r.details){case ve.FRAG_LOAD_ERROR:case ve.FRAG_LOAD_TIMEOUT:case ve.KEY_LOAD_ERROR:case ve.KEY_LOAD_TIMEOUT:r.errorAction=this.getFragRetryOrSwitchAction(r);return;case ve.FRAG_PARSING_ERROR:if((n=r.frag)!=null&&n.gap){r.errorAction=_i();return}case ve.FRAG_GAP:case ve.FRAG_DECRYPT_ERROR:{r.errorAction=this.getFragRetryOrSwitchAction(r),r.errorAction.action=tn.SendAlternateToPenaltyBox;return}case ve.LEVEL_EMPTY_ERROR:case ve.LEVEL_PARSING_ERROR:{var i;const t=r.parent===Rt.MAIN?r.level:o.loadLevel;r.details===ve.LEVEL_EMPTY_ERROR&&((i=r.context)!=null&&(i=i.levelDetails)!=null&&i.live)?r.errorAction=this.getPlaylistRetryOrSwitchAction(r,t):(r.levelRetry=!1,r.errorAction=this.getLevelSwitchAction(r,t))}return;case ve.LEVEL_LOAD_ERROR:case ve.LEVEL_LOAD_TIMEOUT:typeof c?.level=="number"&&(r.errorAction=this.getPlaylistRetryOrSwitchAction(r,c.level));return;case ve.AUDIO_TRACK_LOAD_ERROR:case ve.AUDIO_TRACK_LOAD_TIMEOUT:case ve.SUBTITLE_LOAD_ERROR:case ve.SUBTITLE_TRACK_LOAD_TIMEOUT:if(c){const t=o.loadLevelObj;if(t&&(c.type===cr.AUDIO_TRACK&&t.hasAudioGroup(c.groupId)||c.type===cr.SUBTITLE_TRACK&&t.hasSubtitleGroup(c.groupId))){r.errorAction=this.getPlaylistRetryOrSwitchAction(r,o.loadLevel),r.errorAction.action=tn.SendAlternateToPenaltyBox,r.errorAction.flags=gn.MoveAllAlternatesMatchingHost;return}}return;case ve.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:r.errorAction={action:tn.SendAlternateToPenaltyBox,flags:gn.MoveAllAlternatesMatchingHDCP};return;case ve.KEY_SYSTEM_SESSION_UPDATE_FAILED:case ve.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case ve.KEY_SYSTEM_NO_SESSION:r.errorAction={action:tn.SendAlternateToPenaltyBox,flags:gn.MoveAllAlternatesMatchingKey};return;case ve.BUFFER_ADD_CODEC_ERROR:case ve.REMUX_ALLOC_ERROR:case ve.BUFFER_APPEND_ERROR:if(!r.errorAction){var l;r.errorAction=this.getLevelSwitchAction(r,(l=r.level)!=null?l:o.loadLevel)}return;case ve.INTERNAL_EXCEPTION:case ve.BUFFER_APPENDING_ERROR:case ve.BUFFER_FULL_ERROR:case ve.LEVEL_SWITCH_ERROR:case ve.BUFFER_STALLED_ERROR:case ve.BUFFER_SEEK_OVER_HOLE:case ve.BUFFER_NUDGE_ON_STALL:r.errorAction=_i();return}r.type===Ot.KEY_SYSTEM_ERROR&&(r.levelRetry=!1,r.errorAction=_i())}getPlaylistRetryOrSwitchAction(e,r){const n=this.hls,o=Al(n.config.playlistLoadPolicy,e),c=this.playlistError++;if(so(o,c,io(e),e.response))return{action:tn.RetryRequest,flags:gn.None,retryConfig:o,retryCount:c};const l=this.getLevelSwitchAction(e,r);return o&&(l.retryConfig=o,l.retryCount=c),l}getFragRetryOrSwitchAction(e){const r=this.hls,n=this.getVariantLevelIndex(e.frag),o=r.levels[n],{fragLoadPolicy:c,keyLoadPolicy:i}=r.config,l=Al(e.details.startsWith("key")?i:c,e),t=r.levels.reduce((a,u)=>a+u.fragmentError,0);if(o&&(e.details!==ve.FRAG_GAP&&o.fragmentError++,so(l,t,io(e),e.response)))return{action:tn.RetryRequest,flags:gn.None,retryConfig:l,retryCount:t};const s=this.getLevelSwitchAction(e,n);return l&&(s.retryConfig=l,s.retryCount=t),s}getLevelSwitchAction(e,r){const n=this.hls;r==null&&(r=n.loadLevel);const o=this.hls.levels[r];if(o){var c,i;const s=e.details;o.loadError++,s===ve.BUFFER_APPEND_ERROR&&o.fragmentError++;let a=-1;const{levels:u,loadLevel:f,minAutoLevel:h,maxAutoLevel:A}=n;!n.autoLevelEnabled&&!n.config.preserveManualLevelOnError&&(n.loadLevel=-1);const g=(c=e.frag)==null?void 0:c.type,m=(g===Rt.AUDIO&&s===ve.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(s===ve.BUFFER_ADD_CODEC_ERROR||s===ve.BUFFER_APPEND_ERROR))&&u.some(({audioCodec:w})=>o.audioCodec!==w),E=e.sourceBufferName==="video"&&(s===ve.BUFFER_ADD_CODEC_ERROR||s===ve.BUFFER_APPEND_ERROR)&&u.some(({codecSet:w,audioCodec:I})=>o.codecSet!==w&&o.audioCodec===I),{type:C,groupId:T}=(i=e.context)!=null?i:{};for(let w=u.length;w--;){const I=(w+f)%u.length;if(I!==f&&I>=h&&I<=A&&u[I].loadError===0){var l,t;const L=u[I];if(s===ve.FRAG_GAP&&g===Rt.MAIN&&e.frag){const R=u[I].details;if(R){const B=mi(e.frag,R.fragments,e.frag.start);if(B!=null&&B.gap)continue}}else{if(C===cr.AUDIO_TRACK&&L.hasAudioGroup(T)||C===cr.SUBTITLE_TRACK&&L.hasSubtitleGroup(T))continue;if(g===Rt.AUDIO&&(l=o.audioGroups)!=null&&l.some(R=>L.hasAudioGroup(R))||g===Rt.SUBTITLE&&(t=o.subtitleGroups)!=null&&t.some(R=>L.hasSubtitleGroup(R))||m&&o.audioCodec===L.audioCodec||E&&o.codecSet===L.codecSet||!m&&o.codecSet!==L.codecSet)continue}a=I;break}}if(a>-1&&n.loadLevel!==a)return e.levelRetry=!0,this.playlistError=0,{action:tn.SendAlternateToPenaltyBox,flags:gn.None,nextAutoLevel:a}}return{action:tn.SendAlternateToPenaltyBox,flags:gn.MoveAllAlternatesMatchingHost}}onErrorOut(e,r){var n;switch((n=r.errorAction)==null?void 0:n.action){case tn.DoNothing:break;case tn.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(r),!r.errorAction.resolved&&r.details!==ve.FRAG_GAP?r.fatal=!0:/MediaSource readyState: ended/.test(r.error.message)&&(this.warn(`MediaSource ended after "${r.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(r.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const r=this.hls,n=e.errorAction;if(!n)return;const{flags:o}=n,c=n.nextAutoLevel;switch(o){case gn.None:this.switchLevel(e,c);break;case gn.MoveAllAlternatesMatchingHDCP:{const t=this.getVariantLevelIndex(e.frag),s=r.levels[t],a=s?.attrs["HDCP-LEVEL"];if(n.hdcpLevel=a,a){r.maxHdcpLevel=ra[ra.indexOf(a)-1],n.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${r.maxHdcpLevel}" or lower`);break}}case gn.MoveAllAlternatesMatchingKey:{const t=e.decryptdata;if(t){const s=this.hls.levels;for(let a=s.length;a--;)if(this.variantHasKey(s[a],t)){var i,l;this.log(`Banned key found in level ${a} (${s[a].bitrate}bps) or audio group "${(i=s[a].audioGroups)==null?void 0:i.join(",")}" (${(l=e.frag)==null?void 0:l.type} fragment) ${pn(t.keyId||[])}`),s[a].fragmentError++,s[a].loadError++,this.log(`Removing level ${a} with key error (${e.error})`),this.hls.removeLevel(a)}s.length&&(n.resolved=!0)}break}}n.resolved||this.switchLevel(e,c)}switchLevel(e,r){if(r!==void 0&&e.errorAction&&(this.warn(`switching to level ${r} after ${e.details}`),this.hls.nextAutoLevel=r,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===ve.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const n=ta(e.mimeType),o=this.hls.levels;for(let c=o.length;c--;)o[c][`${e.sourceBufferName}Codec`]===n&&(this.log(`Removing level ${c} for ${e.details} ("${n}" not supported)`),this.hls.removeLevel(c))}}}function _i(d){const e={action:tn.DoNothing,flags:gn.None};return d&&(e.resolved=!0),e}var Xr={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class bd{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.BUFFER_APPENDED,this.onBufferAppended,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this),e.on(D.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.BUFFER_APPENDED,this.onBufferAppended,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this),e.off(D.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,r){const n=this.activePartLists[r];if(n)for(let o=n.length;o--;){const c=n[o];if(!c)break;if(c.start<=e&&e<=c.end&&c.loaded)return c}return this.getBufferedFrag(e,r)}getBufferedFrag(e,r){return this.getFragAtPos(e,r,!0)}getFragAtPos(e,r,n){const{fragments:o}=this,c=Object.keys(o);for(let i=c.length;i--;){const l=o[c[i]];if(l?.body.type===r&&(!n||l.buffered)){const t=l.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,r,n,o,c){this.timeRanges&&(this.timeRanges[e]=r);const i=o?.fragment.sn||-1;Object.keys(this.fragments).forEach(l=>{const t=this.fragments[l];if(!t||i>=t.body.sn)return;if(!t.buffered&&(!t.loaded||c)){t.body.type===n&&this.removeFragment(t.body);return}const s=t.range[e];if(s){if(s.time.length===0){this.removeFragment(t.body);return}s.time.some(a=>{const u=!this.isTimeBuffered(a.startPTS,a.endPTS,r);return u&&this.removeFragment(t.body),u})}})}detectPartialFragments(e){const r=this.timeRanges;if(!r||e.frag.sn==="initSegment")return;const n=e.frag,o=Ri(n),c=this.fragments[o];if(!c||c.buffered&&n.gap)return;const i=!n.relurl;Object.keys(r).forEach(l=>{const t=n.elementaryStreams[l];if(!t)return;const s=r[l],a=i||t.partial===!0;c.range[l]=this.getBufferedTimes(n,e.part,a,s)}),c.loaded=null,Object.keys(c.range).length?(c.buffered=!0,(c.body.endList=n.endList||c.body.endList)&&(this.endListFragments[c.body.type]=c),Ps(c)||this.removeParts(n.sn-1,n.type)):this.removeFragment(c.body)}removeParts(e,r){const n=this.activePartLists[r];n&&(this.activePartLists[r]=pl(n,o=>o.fragment.sn>=e))}fragBuffered(e,r){const n=Ri(e);let o=this.fragments[n];!o&&r&&(o=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),o&&(o.loaded=null,o.buffered=!0)}getBufferedTimes(e,r,n,o){const c={time:[],partial:n},i=e.start,l=e.end,t=e.minEndPTS||l,s=e.maxStartPTS||i;for(let a=0;a<o.length;a++){const u=o.start(a)-this.bufferPadding,f=o.end(a)+this.bufferPadding;if(s>=u&&t<=f){c.time.push({startPTS:Math.max(i,o.start(a)),endPTS:Math.min(l,o.end(a))});break}else if(i<f&&l>u){const h=Math.max(i,o.start(a)),A=Math.min(l,o.end(a));A>h&&(c.partial=!0,c.time.push({startPTS:h,endPTS:A}))}else if(l<=u)break}return c}getPartialFragment(e){let r=null,n,o,c,i=0;const{bufferPadding:l,fragments:t}=this;return Object.keys(t).forEach(s=>{const a=t[s];a&&Ps(a)&&(o=a.body.start-l,c=a.body.end+l,e>=o&&e<=c&&(n=Math.min(e-o,c-e),i<=n&&(r=a.body,i=n)))}),r}isEndListAppended(e){const r=this.endListFragments[e];return r!==void 0&&(r.buffered||Ps(r))}getState(e){const r=Ri(e),n=this.fragments[r];return n?n.buffered?Ps(n)?Xr.PARTIAL:Xr.OK:Xr.APPENDING:Xr.NOT_LOADED}isTimeBuffered(e,r,n){let o,c;for(let i=0;i<n.length;i++){if(o=n.start(i)-this.bufferPadding,c=n.end(i)+this.bufferPadding,e>=o&&r<=c)return!0;if(r<=o)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,r){if(r.frag.sn==="initSegment"||r.frag.bitrateTest)return;const n=r.frag,o=r.part?null:r,c=Ri(n);this.fragments[c]={body:n,appendedPTS:null,loaded:o,buffered:!1,range:Object.create(null)}}onBufferAppended(e,r){const{frag:n,part:o,timeRanges:c,type:i}=r;if(n.sn==="initSegment")return;const l=n.type;if(o){let s=this.activePartLists[l];s||(this.activePartLists[l]=s=[]),s.push(o)}this.timeRanges=c;const t=c[i];this.detectEvictedFragments(i,t,l,o)}onFragBuffered(e,r){this.detectPartialFragments(r)}hasFragment(e){const r=Ri(e);return!!this.fragments[r]}hasFragments(e){const{fragments:r}=this,n=Object.keys(r);if(!e)return n.length>0;for(let o=n.length;o--;){const c=r[n[o]];if(c?.body.type===e)return!0}return!1}hasParts(e){var r;return!!((r=this.activePartLists[e])!=null&&r.length)}removeFragmentsInRange(e,r,n,o,c){o&&!this.hasGaps||Object.keys(this.fragments).forEach(i=>{const l=this.fragments[i];if(!l)return;const t=l.body;t.type!==n||o&&!t.gap||t.start<r&&t.end>e&&(l.buffered||c)&&this.removeFragment(t)})}removeFragment(e){const r=Ri(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const o=e.sn;this.activePartLists[e.type]=pl(n,c=>c.fragment.sn!==o)}delete this.fragments[r],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const r=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;r&&r.forEach(n=>n.clearElementaryStreamInfo())}}function Ps(d){var e,r,n;return d.buffered&&!!(d.body.gap||(e=d.range.video)!=null&&e.partial||(r=d.range.audio)!=null&&r.partial||(n=d.range.audiovideo)!=null&&n.partial)}function Ri(d){return`${d.type}_${d.level}_${d.sn}`}function pl(d,e){return d.filter(r=>{const n=e(r);return n||r.clearElementaryStreamInfo(),n})}var li={cbc:0,ctr:1};class Cd{constructor(e,r,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=r,this.aesMode=n}decrypt(e,r){switch(this.aesMode){case li.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},r,e);case li.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},r,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function xd(d){const e=d.byteLength,r=e&&new DataView(d.buffer).getUint8(e-1);return r?d.slice(0,e-r):d}class Td{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const r=new DataView(e),n=new Uint32Array(4);for(let o=0;o<4;o++)n[o]=r.getUint32(o*4);return n}initTable(){const e=this.sBox,r=this.invSBox,n=this.subMix,o=n[0],c=n[1],i=n[2],l=n[3],t=this.invSubMix,s=t[0],a=t[1],u=t[2],f=t[3],h=new Uint32Array(256);let A=0,g=0,p=0;for(p=0;p<256;p++)p<128?h[p]=p<<1:h[p]=p<<1^283;for(p=0;p<256;p++){let m=g^g<<1^g<<2^g<<3^g<<4;m=m>>>8^m&255^99,e[A]=m,r[m]=A;const y=h[A],E=h[y],C=h[E];let T=h[m]*257^m*16843008;o[A]=T<<24|T>>>8,c[A]=T<<16|T>>>16,i[A]=T<<8|T>>>24,l[A]=T,T=C*16843009^E*65537^y*257^A*16843008,s[m]=T<<24|T>>>8,a[m]=T<<16|T>>>16,u[m]=T<<8|T>>>24,f[m]=T,A?(A=y^h[h[h[C^y]]],g^=h[h[g]]):A=g=1}}expandKey(e){const r=this.uint8ArrayToUint32Array_(e);let n=!0,o=0;for(;o<r.length&&n;)n=r[o]===this.key[o],o++;if(n)return;this.key=r;const c=this.keySize=r.length;if(c!==4&&c!==6&&c!==8)throw new Error("Invalid aes key size="+c);const i=this.ksRows=(c+6+1)*4;let l,t;const s=this.keySchedule=new Uint32Array(i),a=this.invKeySchedule=new Uint32Array(i),u=this.sBox,f=this.rcon,h=this.invSubMix,A=h[0],g=h[1],p=h[2],m=h[3];let y,E;for(l=0;l<i;l++){if(l<c){y=s[l]=r[l];continue}E=y,l%c===0?(E=E<<8|E>>>24,E=u[E>>>24]<<24|u[E>>>16&255]<<16|u[E>>>8&255]<<8|u[E&255],E^=f[l/c|0]<<24):c>6&&l%c===4&&(E=u[E>>>24]<<24|u[E>>>16&255]<<16|u[E>>>8&255]<<8|u[E&255]),s[l]=y=(s[l-c]^E)>>>0}for(t=0;t<i;t++)l=i-t,t&3?E=s[l]:E=s[l-4],t<4||l<=4?a[t]=E:a[t]=A[u[E>>>24]]^g[u[E>>>16&255]]^p[u[E>>>8&255]]^m[u[E&255]],a[t]=a[t]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,r,n){const o=this.keySize+6,c=this.invKeySchedule,i=this.invSBox,l=this.invSubMix,t=l[0],s=l[1],a=l[2],u=l[3],f=this.uint8ArrayToUint32Array_(n);let h=f[0],A=f[1],g=f[2],p=f[3];const m=new Int32Array(e),y=new Int32Array(m.length);let E,C,T,w,I,L,R,B,P,N,U,G,W,K;const M=this.networkToHostOrderSwap;for(;r<m.length;){for(P=M(m[r]),N=M(m[r+1]),U=M(m[r+2]),G=M(m[r+3]),I=P^c[0],L=G^c[1],R=U^c[2],B=N^c[3],W=4,K=1;K<o;K++)E=t[I>>>24]^s[L>>16&255]^a[R>>8&255]^u[B&255]^c[W],C=t[L>>>24]^s[R>>16&255]^a[B>>8&255]^u[I&255]^c[W+1],T=t[R>>>24]^s[B>>16&255]^a[I>>8&255]^u[L&255]^c[W+2],w=t[B>>>24]^s[I>>16&255]^a[L>>8&255]^u[R&255]^c[W+3],I=E,L=C,R=T,B=w,W=W+4;E=i[I>>>24]<<24^i[L>>16&255]<<16^i[R>>8&255]<<8^i[B&255]^c[W],C=i[L>>>24]<<24^i[R>>16&255]<<16^i[B>>8&255]<<8^i[I&255]^c[W+1],T=i[R>>>24]<<24^i[B>>16&255]<<16^i[I>>8&255]<<8^i[L&255]^c[W+2],w=i[B>>>24]<<24^i[I>>16&255]<<16^i[L>>8&255]<<8^i[R&255]^c[W+3],y[r]=M(E^h),y[r+1]=M(w^A),y[r+2]=M(T^g),y[r+3]=M(C^p),h=P,A=N,g=U,p=G,r=r+4}return y.buffer}}class Sd{constructor(e,r,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=r,this.aesMode=n}expandKey(){const e=wd(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function wd(d){switch(d){case li.cbc:return"AES-CBC";case li.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${d}`)}}const Id=16;class Ta{constructor(e,{removePKCS7Padding:r=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=r,r)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:r}=this;if(!e||r)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?xd(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,r,n,o){return this.useSoftware?new Promise((c,i)=>{const l=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(l,r,n,o);const t=this.flush();t?c(t.buffer):i(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),r,n,o)}softwareDecrypt(e,r,n,o){const{currentIV:c,currentResult:i,remainderData:l}=this;if(o!==li.cbc||r.byteLength!==16)return Cr.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),l&&(e=Sn(l,e),this.remainderData=null);const t=this.getValidChunk(e);if(!t.length)return null;c&&(n=c);let s=this.softwareDecrypter;s||(s=this.softwareDecrypter=new Td),s.expandKey(r);const a=i;return this.currentResult=s.decrypt(t.buffer,0,n),this.currentIV=t.slice(-16).buffer,a||null}webCryptoDecrypt(e,r,n,o){if(this.key!==r||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,r,n,o));this.key=r,this.fastAesKey=new Sd(this.subtle,r,o)}return this.fastAesKey.expandKey().then(c=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new Cd(this.subtle,new Uint8Array(n),o).decrypt(e.buffer,c)):Promise.reject(new Error("web crypto not initialized"))).catch(c=>(Cr.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${c.name}: ${c.message}`),this.onWebCryptoError(e,r,n,o)))}onWebCryptoError(e,r,n,o){const c=this.enableSoftwareAES;if(c){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,r,n,o);const i=this.flush();if(i)return i.buffer}throw new Error("WebCrypto"+(c?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let r=e;const n=e.length-e.length%Id;return n!==e.length&&(r=e.slice(0,n),this.remainderData=e.slice(n)),r}logOnce(e){this.logEnabled&&(Cr.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const ml=Math.pow(2,17);class Ld{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,r){const n=e.url;if(!n)return Promise.reject(new ei({type:Ot.NETWORK_ERROR,details:ve.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const o=this.config,c=o.fLoader,i=o.loader;return new Promise((l,t)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(A=>A[0]==="GAP")){t(yl(e));return}else e.gap=!1;const s=this.loader=c?new c(o):new i(o),a=vl(e);e.loader=s;const u=gl(o.fragLoadPolicy.default),f={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:ml};e.stats=s.stats;const h={onSuccess:(A,g,p,m)=>{this.resetLoader(e,s);let y=A.data;p.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(y.slice(0,16)),y=y.slice(16)),l({frag:e,part:null,payload:y,networkDetails:m})},onError:(A,g,p,m)=>{this.resetLoader(e,s),t(new ei({type:Ot.NETWORK_ERROR,details:ve.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Sr({url:n,data:void 0},A),error:new Error(`HTTP Error ${A.code} ${A.text}`),networkDetails:p,stats:m}))},onAbort:(A,g,p)=>{this.resetLoader(e,s),t(new ei({type:Ot.NETWORK_ERROR,details:ve.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:p,stats:A}))},onTimeout:(A,g,p)=>{this.resetLoader(e,s),t(new ei({type:Ot.NETWORK_ERROR,details:ve.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:p,stats:A}))}};r&&(h.onProgress=(A,g,p,m)=>r({frag:e,part:null,payload:p,networkDetails:m})),s.load(a,f,h)})}loadPart(e,r,n){this.abort();const o=this.config,c=o.fLoader,i=o.loader;return new Promise((l,t)=>{if(this.loader&&this.loader.destroy(),e.gap||r.gap){t(yl(e,r));return}const s=this.loader=c?new c(o):new i(o),a=vl(e,r);e.loader=s;const u=gl(o.fragLoadPolicy.default),f={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:ml};r.stats=s.stats,s.load(a,f,{onSuccess:(h,A,g,p)=>{this.resetLoader(e,s),this.updateStatsFromPart(e,r);const m={frag:e,part:r,payload:h.data,networkDetails:p};n(m),l(m)},onError:(h,A,g,p)=>{this.resetLoader(e,s),t(new ei({type:Ot.NETWORK_ERROR,details:ve.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:r,response:Sr({url:a.url,data:void 0},h),error:new Error(`HTTP Error ${h.code} ${h.text}`),networkDetails:g,stats:p}))},onAbort:(h,A,g)=>{e.stats.aborted=r.stats.aborted,this.resetLoader(e,s),t(new ei({type:Ot.NETWORK_ERROR,details:ve.INTERNAL_ABORTED,fatal:!1,frag:e,part:r,error:new Error("Aborted"),networkDetails:g,stats:h}))},onTimeout:(h,A,g)=>{this.resetLoader(e,s),t(new ei({type:Ot.NETWORK_ERROR,details:ve.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:r,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:g,stats:h}))}})})}updateStatsFromPart(e,r){const n=e.stats,o=r.stats,c=o.total;if(n.loaded+=o.loaded,c){const t=Math.round(e.duration/r.duration),s=Math.min(Math.round(n.loaded/c),t),u=(t-s)*Math.round(n.loaded/s);n.total=n.loaded+u}else n.total=Math.max(n.loaded,n.total);const i=n.loading,l=o.loading;i.start?i.first+=l.first-l.start:(i.start=l.start,i.first=l.first),i.end=l.end}resetLoader(e,r){e.loader=null,this.loader===r&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),r.destroy()}}function vl(d,e=null){const r=e||d,n={frag:d,part:e,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},o=r.byteRangeStartOffset,c=r.byteRangeEndOffset;if(vt(o)&&vt(c)){var i;let l=o,t=c;if(d.sn==="initSegment"&&Rd((i=d.decryptdata)==null?void 0:i.method)){const s=c-o;s%16&&(t=c+(16-s%16)),o!==0&&(n.resetIV=!0,l=o-16)}n.rangeStart=l,n.rangeEnd=t}return n}function yl(d,e){const r=new Error(`GAP ${d.gap?"tag":"attribute"} found`),n={type:Ot.MEDIA_ERROR,details:ve.FRAG_GAP,fatal:!1,frag:d,error:r,networkDetails:null};return e&&(n.part=e),(e||d).stats.aborted=!0,new ei(n)}function Rd(d){return d==="AES-128"||d==="AES-256"}class ei extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class Bu extends wn{constructor(e,r){super(e,r),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class Sa{constructor(e,r,n,o=0,c=-1,i=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Os(),this.buffering={audio:Os(),video:Os(),audiovideo:Os()},this.level=e,this.sn=r,this.id=n,this.size=o,this.part=c,this.partial=i}}function Os(){return{start:0,executeStart:0,executeEnd:0,end:0}}const El={length:0,start:()=>0,end:()=>0};class Xt{static isBuffered(e,r){if(e){const n=Xt.getBuffered(e);for(let o=n.length;o--;)if(r>=n.start(o)&&r<=n.end(o))return!0}return!1}static bufferedRanges(e){if(e){const r=Xt.getBuffered(e);return Xt.timeRangesToArray(r)}return[]}static timeRangesToArray(e){const r=[];for(let n=0;n<e.length;n++)r.push({start:e.start(n),end:e.end(n)});return r}static bufferInfo(e,r,n){if(e){const o=Xt.bufferedRanges(e);if(o.length)return Xt.bufferedInfo(o,r,n)}return{len:0,start:r,end:r,bufferedIndex:-1}}static bufferedInfo(e,r,n){r=Math.max(0,r),e.length>1&&e.sort((a,u)=>a.start-u.start||u.end-a.end);let o=-1,c=[];if(n)for(let a=0;a<e.length;a++){r>=e[a].start&&r<=e[a].end&&(o=a);const u=c.length;if(u){const f=c[u-1].end;e[a].start-f<n?e[a].end>f&&(c[u-1].end=e[a].end):c.push(e[a])}else c.push(e[a])}else c=e;let i=0,l,t=r,s=r;for(let a=0;a<c.length;a++){const u=c[a].start,f=c[a].end;if(o===-1&&r>=u&&r<=f&&(o=a),r+n>=u&&r<f)t=u,s=f,i=s-r;else if(r+n<u){l=u;break}}return{len:i,start:t||0,end:s||0,nextStart:l,buffered:e,bufferedIndex:o}}static getBuffered(e){try{return e.buffered||El}catch(r){return Cr.log("failed to get media.buffered",r),El}}}const Pu=/\{\$([a-zA-Z0-9-_]+)\}/g;function bl(d){return Pu.test(d)}function ia(d,e){if(d.variableList!==null||d.hasVariableRefs){const r=d.variableList;return e.replace(Pu,n=>{const o=n.substring(2,n.length-1),c=r?.[o];return c===void 0?(d.playlistParsingError||(d.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${o}"`)),n):c})}return e}function Cl(d,e,r){let n=d.variableList;n||(d.variableList=n={});let o,c;if("QUERYPARAM"in e){o=e.QUERYPARAM;try{const i=new self.URL(r).searchParams;if(i.has(o))c=i.get(o);else throw new Error(`"${o}" does not match any query parameter in URI: "${r}"`)}catch(i){d.playlistParsingError||(d.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${i.message}`))}}else o=e.NAME,c=e.VALUE;o in n?d.playlistParsingError||(d.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${o}"`)):n[o]=c||""}function kd(d,e,r){const n=e.IMPORT;if(r&&n in r){let o=d.variableList;o||(d.variableList=o={}),o[n]=r[n]}else d.playlistParsingError||(d.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}const Dd=/^(\d+)x(\d+)$/,xl=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Fr{constructor(e,r){typeof e=="string"&&(e=Fr.parseAttrList(e,r)),wr(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const r=parseInt(this[e],10);return r>Number.MAX_SAFE_INTEGER?1/0:r}hexadecimalInteger(e){if(this[e]){let r=(this[e]||"0x").slice(2);r=(r.length&1?"0":"")+r;const n=new Uint8Array(r.length/2);for(let o=0;o<r.length/2;o++)n[o]=parseInt(r.slice(o*2,o*2+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const r=parseInt(this[e],16);return r>Number.MAX_SAFE_INTEGER?1/0:r}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,r){const n=this[e];return n?parseFloat(n):r}enumeratedString(e){return this[e]}enumeratedStringList(e,r){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((o,c)=>(o[c.toLowerCase()]=!0,o),r)}bool(e){return this[e]==="YES"}decimalResolution(e){const r=Dd.exec(this[e]);if(r!==null)return{width:parseInt(r[1],10),height:parseInt(r[2],10)}}static parseAttrList(e,r){let n;const o={};for(xl.lastIndex=0;(n=xl.exec(e))!==null;){const i=n[1].trim();let l=n[2];const t=l.indexOf('"')===0&&l.lastIndexOf('"')===l.length-1;let s=!1;if(t)l=l.slice(1,-1);else switch(i){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":s=!0}if(r&&(t||s))l=ia(r,l);else if(!s&&!t)switch(i){case"CLOSED-CAPTIONS":if(l==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Cr.warn(`${e}: attribute ${i} is missing quotes`)}o[i]=l}return o}}const Bd="com.apple.hls.interstitial";function Pd(d){return d!=="ID"&&d!=="CLASS"&&d!=="CUE"&&d!=="START-DATE"&&d!=="DURATION"&&d!=="END-DATE"&&d!=="END-ON-NEXT"}function Od(d){return d==="SCTE35-OUT"||d==="SCTE35-IN"||d==="SCTE35-CMD"}class Ou{constructor(e,r,n=0){var o;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=r?.tagAnchor||null,this.tagOrder=(o=r?.tagOrder)!=null?o:n,r){const c=r.attr;for(const i in c)if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]!==c[i]){Cr.warn(`DATERANGE tag attribute: "${i}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=i;break}e=wr(new Fr({}),c,e)}if(this.attr=e,r?(this._startDate=r._startDate,this._cue=r._cue,this._endDate=r._endDate,this._dateAtEnd=r._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const c=r?.endDate||new Date(this.attr["END-DATE"]);vt(c.getTime())&&(this._endDate=c)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(Cr.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const r=this.duration;return r!==null?this._dateAtEnd=new Date(this._startDate.getTime()+r*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(vt(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===Bd}get isValid(){return!!this.id&&!this._badValueForSameId&&vt(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const _d=10;class Md{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const r=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!r||!this.live,this.advanced=this.endSN>e.endSN||r>0||r===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(r=>{let n=r.decryptdata;return n||(r.setKeyFormat(e.keyFormat),n=r.decryptdata),!!n&&e.matches(n)})}get hasProgramDateTime(){return this.fragments.length?vt(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||_d}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const r=this.lastPartIndex;if(r!==-1){for(let n=e.length;n--;)if(e[n].index>r)return e[n].index;return r}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function _u(d,e){return d.length===e.length?!d.some((r,n)=>r!==e[n]):!1}function Tl(d,e){return!d&&!e?!0:!d||!e?!1:_u(d,e)}function Mi(d){return d==="AES-128"||d==="AES-256"||d==="AES-256-CTR"}function wa(d){switch(d){case"AES-128":case"AES-256":return li.cbc;case"AES-256-CTR":return li.ctr;default:throw new Error(`invalid full segment method ${d}`)}}function Ia(d){return Uint8Array.from(atob(d),e=>e.charCodeAt(0))}function sa(d){return Uint8Array.from(unescape(encodeURIComponent(d)),e=>e.charCodeAt(0))}function Fd(d){const e=sa(d).subarray(0,16),r=new Uint8Array(16);return r.set(e,16-e.length),r}function Nd(d){const e=function(n,o,c){const i=n[o];n[o]=n[c],n[c]=i};e(d,0,3),e(d,1,2),e(d,4,5),e(d,6,7)}function Ud(d){const e=d.split(":");let r=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),o=n[n.length-1].split(",");if(o.length===2){const c=o[0]==="base64",i=o[1];c?(n.splice(-1,1),r=Ia(i)):r=Fd(i)}}return r}const oo=typeof self<"u"?self:void 0;var Gr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},cn={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function Ks(d){switch(d){case cn.FAIRPLAY:return Gr.FAIRPLAY;case cn.PLAYREADY:return Gr.PLAYREADY;case cn.WIDEVINE:return Gr.WIDEVINE;case cn.CLEARKEY:return Gr.CLEARKEY}}function Bo(d){switch(d){case Gr.FAIRPLAY:return cn.FAIRPLAY;case Gr.PLAYREADY:return cn.PLAYREADY;case Gr.WIDEVINE:return cn.WIDEVINE;case Gr.CLEARKEY:return cn.CLEARKEY}}function es(d){const{drmSystems:e,widevineLicenseUrl:r}=d,n=e?[Gr.FAIRPLAY,Gr.WIDEVINE,Gr.PLAYREADY,Gr.CLEARKEY].filter(o=>!!e[o]):[];return!n[Gr.WIDEVINE]&&r&&n.push(Gr.WIDEVINE),n}const Mu=(function(d){return oo!=null&&(d=oo.navigator)!=null&&d.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null})();function Gd(d,e,r,n){let o;switch(d){case Gr.FAIRPLAY:o=["cenc","sinf"];break;case Gr.WIDEVINE:case Gr.PLAYREADY:o=["cenc"];break;case Gr.CLEARKEY:o=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${d}`)}return Qd(o,e,r,n)}function Qd(d,e,r,n){return[{initDataTypes:d,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(c=>({contentType:`audio/mp4; codecs=${c}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:r.map(c=>({contentType:`video/mp4; codecs=${c}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function $d(d){var e;return!!d&&(d.sessionType==="persistent-license"||!!((e=d.sessionTypes)!=null&&e.some(r=>r==="persistent-license")))}function Wd(d){const e=new Uint16Array(d.buffer,d.byteOffset,d.byteLength/2),r=String.fromCharCode.apply(null,Array.from(e)),n=r.substring(r.indexOf("<"),r.length),i=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(i){const l=i.childNodes[0]?i.childNodes[0].nodeValue:i.getAttribute("VALUE");if(l){const t=Ia(l).subarray(0,16);return Nd(t),t}}return null}let _s={};class fo{static clearKeyUriToKeyIdMap(){_s={}}constructor(e,r,n,o=[1],c=null,i){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=r,this.keyFormat=n,this.keyFormatVersions=o,this.iv=c,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!Mi(e),i!=null&&i.startsWith("0x")&&(this.keyId=new Uint8Array(gu(i)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&_u(e.keyFormatVersions,this.keyFormatVersions)&&Tl(e.iv,this.iv)&&Tl(e.keyId,this.keyId)}isSupported(){if(this.method){if(Mi(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case cn.FAIRPLAY:case cn.WIDEVINE:case cn.PLAYREADY:case cn.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(Mi(this.method)&&this.uri&&!this.iv){typeof e!="number"&&(Cr.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const n=Vd(e);return new fo(this.method,this.uri,"identity",this.keyFormatVersions,n)}if(this.pssh&&this.keyId)return this;const r=Ud(this.uri);if(r)switch(this.keyFormat){case cn.WIDEVINE:if(this.pssh=r,!this.keyId&&r.length>=22){const n=r.length-22;this.keyId=r.subarray(n,n+16)}break;case cn.PLAYREADY:{const n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Hf(n,null,r),this.keyId=Wd(r);break}default:{let n=r.subarray(0,16);if(n.length!==16){const o=new Uint8Array(16);o.set(n,16-n.length),n=o}this.keyId=n;break}}if(!this.keyId||this.keyId.byteLength!==16){let n=_s[this.uri];if(!n){const o=Object.keys(_s).length%Number.MAX_SAFE_INTEGER;n=new Uint8Array(16),new DataView(n.buffer,12,4).setUint32(0,o),_s[this.uri]=n}this.keyId=n}return this}}function Vd(d){const e=new Uint8Array(16);for(let r=12;r<16;r++)e[r]=d>>8*(15-r)&255;return e}const Sl=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,wl=/#EXT-X-MEDIA:(.*)/g,Yd=/^#EXT(?:INF|-X-TARGETDURATION):/m,Po=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),Hd=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class $n{static findGroup(e,r){for(let n=0;n<e.length;n++){const o=e[n];if(o.id===r)return o}}static resolve(e,r){return va.buildAbsoluteURL(r,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return Yd.test(e)}static parseMasterPlaylist(e,r){const n=bl(e),o={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},c=[];Sl.lastIndex=0;let i;for(;(i=Sl.exec(e))!=null;)if(i[1]){var l;const s=new Fr(i[1],o),a=ia(o,i[2]),u={attrs:s,bitrate:s.decimalInteger("BANDWIDTH")||s.decimalInteger("AVERAGE-BANDWIDTH"),name:s.NAME,url:$n.resolve(a,r)},f=s.decimalResolution("RESOLUTION");f&&(u.width=f.width,u.height=f.height),Rl(s.CODECS,u);const h=s["SUPPLEMENTAL-CODECS"];h&&(u.supplemental={},Rl(h,u.supplemental)),(l=u.unknownCodecs)!=null&&l.length||c.push(u),o.levels.push(u)}else if(i[3]){const s=i[3],a=i[4];switch(s){case"SESSION-DATA":{const u=new Fr(a,o),f=u["DATA-ID"];f&&(o.sessionData===null&&(o.sessionData={}),o.sessionData[f]=u);break}case"SESSION-KEY":{const u=Il(a,r,o);u.encrypted&&u.isSupported()?(o.sessionKeys===null&&(o.sessionKeys=[]),o.sessionKeys.push(u)):Cr.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${a}"`);break}case"DEFINE":{{const u=new Fr(a,o);Cl(o,u,r)}break}case"CONTENT-STEERING":{const u=new Fr(a,o);o.contentSteering={uri:$n.resolve(u["SERVER-URI"],r),pathwayId:u["PATHWAY-ID"]||"."};break}case"START":{o.startTimeOffset=Ll(a);break}}}const t=c.length>0&&c.length<o.levels.length;return o.levels=t?c:o.levels,o.levels.length===0&&(o.playlistParsingError=new Error("no levels found in manifest")),o}static parseMasterPlaylistMedia(e,r,n){let o;const c={},i=n.levels,l={AUDIO:i.map(s=>({id:s.attrs.AUDIO,audioCodec:s.audioCodec})),SUBTITLES:i.map(s=>({id:s.attrs.SUBTITLES,textCodec:s.textCodec})),"CLOSED-CAPTIONS":[]};let t=0;for(wl.lastIndex=0;(o=wl.exec(e))!==null;){const s=new Fr(o[1],n),a=s.TYPE;if(a){const u=l[a],f=c[a]||[];c[a]=f;const h=s.LANGUAGE,A=s["ASSOC-LANGUAGE"],g=s.CHANNELS,p=s.CHARACTERISTICS,m=s["INSTREAM-ID"],y={attrs:s,bitrate:0,id:t++,groupId:s["GROUP-ID"]||"",name:s.NAME||h||"",type:a,default:s.bool("DEFAULT"),autoselect:s.bool("AUTOSELECT"),forced:s.bool("FORCED"),lang:h,url:s.URI?$n.resolve(s.URI,r):""};if(A&&(y.assocLang=A),g&&(y.channels=g),p&&(y.characteristics=p),m&&(y.instreamId=m),u!=null&&u.length){const E=$n.findGroup(u,y.groupId)||u[0];kl(y,E,"audioCodec"),kl(y,E,"textCodec")}f.push(y)}}return c}static parseLevelPlaylist(e,r,n,o,c,i){var l;const t={url:r},s=new Md(r),a=s.fragments,u=[];let f=null,h=0,A=0,g=0,p=0,m=0,y=null,E=new Ro(o,t),C,T,w,I=-1,L=!1,R=null,B;if(Po.lastIndex=0,s.m3u8=e,s.hasVariableRefs=bl(e),((l=Po.exec(e))==null?void 0:l[0])!=="#EXTM3U")return s.playlistParsingError=new Error("Missing format identifier #EXTM3U"),s;for(;(C=Po.exec(e))!==null;){L&&(L=!1,E=new Ro(o,t),E.playlistOffset=g,E.setStart(g),E.sn=h,E.cc=p,m&&(E.bitrate=m),E.level=n,f&&(E.initSegment=f,f.rawProgramDateTime&&(E.rawProgramDateTime=f.rawProgramDateTime,f.rawProgramDateTime=null),R&&(E.setByteRange(R),R=null)));const G=C[1];if(G){E.duration=parseFloat(G);const W=(" "+C[2]).slice(1);E.title=W||null,E.tagList.push(W?["INF",G,W]:["INF",G])}else if(C[3]){if(vt(E.duration)){E.playlistOffset=g,E.setStart(g),w&&Bl(E,w,s),E.sn=h,E.level=n,E.cc=p,a.push(E);const W=(" "+C[3]).slice(1);E.relurl=ia(s,W),oa(E,y,u),y=E,g+=E.duration,h++,A=0,L=!0}}else{if(C=C[0].match(Hd),!C){Cr.warn("No matches on slow regex match for level playlist!");continue}for(T=1;T<C.length&&C[T]===void 0;T++);const W=(" "+C[T]).slice(1),K=(" "+C[T+1]).slice(1),M=C[T+2]?(" "+C[T+2]).slice(1):null;switch(W){case"BYTERANGE":y?E.setByteRange(K,y):E.setByteRange(K);break;case"PROGRAM-DATE-TIME":E.rawProgramDateTime=K,E.tagList.push(["PROGRAM-DATE-TIME",K]),I===-1&&(I=a.length);break;case"PLAYLIST-TYPE":s.type&&Zn(s,W,C),s.type=K.toUpperCase();break;case"MEDIA-SEQUENCE":s.startSN!==0?Zn(s,W,C):a.length>0&&Pl(s,W,C),h=s.startSN=parseInt(K);break;case"SKIP":{s.skippedSegments&&Zn(s,W,C);const Q=new Fr(K,s),Z=Q.decimalInteger("SKIPPED-SEGMENTS");if(vt(Z)){s.skippedSegments+=Z;for(let q=Z;q--;)a.push(null);h+=Z}const J=Q.enumeratedString("RECENTLY-REMOVED-DATERANGES");J&&(s.recentlyRemovedDateranges=(s.recentlyRemovedDateranges||[]).concat(J.split("	")));break}case"TARGETDURATION":s.targetduration!==0&&Zn(s,W,C),s.targetduration=Math.max(parseInt(K),1);break;case"VERSION":s.version!==null&&Zn(s,W,C),s.version=parseInt(K);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":s.live||Zn(s,W,C),s.live=!1;break;case"#":(K||M)&&E.tagList.push(M?[K,M]:[K]);break;case"DISCONTINUITY":p++,E.tagList.push(["DIS"]);break;case"GAP":E.gap=!0,E.tagList.push([W]);break;case"BITRATE":E.tagList.push([W,K]),m=parseInt(K)*1e3,vt(m)?E.bitrate=m:m=0;break;case"DATERANGE":{const Q=new Fr(K,s),Z=new Ou(Q,s.dateRanges[Q.ID],s.dateRangeTagCount);s.dateRangeTagCount++,Z.isValid||s.skippedSegments?s.dateRanges[Z.id]=Z:Cr.warn(`Ignoring invalid DATERANGE tag: "${K}"`),E.tagList.push(["EXT-X-DATERANGE",K]);break}case"DEFINE":{{const Q=new Fr(K,s);"IMPORT"in Q?kd(s,Q,i):Cl(s,Q,r)}break}case"DISCONTINUITY-SEQUENCE":s.startCC!==0?Zn(s,W,C):a.length>0&&Pl(s,W,C),s.startCC=p=parseInt(K);break;case"KEY":{const Q=Il(K,r,s);if(Q.isSupported()){if(Q.method==="NONE"){w=void 0;break}w||(w={});const Z=w[Q.keyFormat];Z!=null&&Z.matches(Q)||(Z&&(w=wr({},w)),w[Q.keyFormat]=Q)}else Cr.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${K}"`);break}case"START":s.startTimeOffset=Ll(K);break;case"MAP":{const Q=new Fr(K,s);if(E.duration){const Z=new Ro(o,t);Dl(Z,Q,n,w),f=Z,E.initSegment=f,f.rawProgramDateTime&&!E.rawProgramDateTime&&(E.rawProgramDateTime=f.rawProgramDateTime)}else{const Z=E.byteRangeEndOffset;if(Z){const J=E.byteRangeStartOffset;R=`${Z-J}@${J}`}else R=null;Dl(E,Q,n,w),f=E,L=!0}f.cc=p;break}case"SERVER-CONTROL":{B&&Zn(s,W,C),B=new Fr(K),s.canBlockReload=B.bool("CAN-BLOCK-RELOAD"),s.canSkipUntil=B.optionalFloat("CAN-SKIP-UNTIL",0),s.canSkipDateRanges=s.canSkipUntil>0&&B.bool("CAN-SKIP-DATERANGES"),s.partHoldBack=B.optionalFloat("PART-HOLD-BACK",0),s.holdBack=B.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{s.partTarget&&Zn(s,W,C);const Q=new Fr(K);s.partTarget=Q.decimalFloatingPoint("PART-TARGET");break}case"PART":{let Q=s.partList;Q||(Q=s.partList=[]);const Z=A>0?Q[Q.length-1]:void 0,J=A++,q=new Fr(K,s),te=new Pf(q,E,t,J,Z);Q.push(te),E.duration+=te.duration;break}case"PRELOAD-HINT":{const Q=new Fr(K,s);s.preloadHint=Q;break}case"RENDITION-REPORT":{const Q=new Fr(K,s);s.renditionReports=s.renditionReports||[],s.renditionReports.push(Q);break}default:Cr.warn(`line parsed but not handled: ${C}`);break}}}y&&!y.relurl?(a.pop(),g-=y.duration,s.partList&&(s.fragmentHint=y)):s.partList&&(oa(E,y,u),E.cc=p,s.fragmentHint=E,w&&Bl(E,w,s)),s.targetduration||(s.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const P=a.length,N=a[0],U=a[P-1];if(g+=s.skippedSegments*s.targetduration,g>0&&P&&U){s.averagetargetduration=g/P;const G=U.sn;s.endSN=G!=="initSegment"?G:0,s.live||(U.endList=!0),I>0&&(Kd(a,I),N&&u.unshift(N))}return s.fragmentHint&&(g+=s.fragmentHint.duration),s.totalduration=g,u.length&&s.dateRangeTagCount&&N&&Fu(u,s),s.endCC=p,s}}function Fu(d,e){let r=d.length;if(!r)if(e.hasProgramDateTime){const l=e.fragments[e.fragments.length-1];d.push(l),r++}else return;const n=d[r-1],o=e.live?1/0:e.totalduration,c=Object.keys(e.dateRanges);for(let l=c.length;l--;){const t=e.dateRanges[c[l]],s=t.startDate.getTime();t.tagAnchor=n.ref;for(let a=r;a--;){var i;if(((i=d[a])==null?void 0:i.sn)<e.startSN)break;const u=jd(e,s,d,a,o);if(u!==-1){t.tagAnchor=e.fragments[u].ref;break}}}}function jd(d,e,r,n,o){const c=r[n];if(c){const l=c.programDateTime;if(e>=l||n===0){var i;const t=(((i=r[n+1])==null?void 0:i.start)||o)-c.start;if(e<=l+t*1e3){const s=r[n].sn-d.startSN;if(s<0)return-1;const a=d.fragments;if(a.length>r.length){const f=(r[n+1]||a[a.length-1]).sn-d.startSN;for(let h=f;h>s;h--){const A=a[h].programDateTime;if(e>=A&&e<A+a[h].duration*1e3)return h}}return s}}}return-1}function Il(d,e,r){var n,o;const c=new Fr(d,r),i=(n=c.METHOD)!=null?n:"",l=c.URI,t=c.hexadecimalInteger("IV"),s=c.KEYFORMATVERSIONS,a=(o=c.KEYFORMAT)!=null?o:"identity";l&&c.IV&&!t&&Cr.error(`Invalid IV: ${c.IV}`);const u=l?$n.resolve(l,e):"",f=(s||"1").split("/").map(Number).filter(Number.isFinite);return new fo(i,u,a,f,t,c.KEYID)}function Ll(d){const r=new Fr(d).decimalFloatingPoint("TIME-OFFSET");return vt(r)?r:null}function Rl(d,e){let r=(d||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const o=r.filter(c=>ba(c,n));o.length&&(e[`${n}Codec`]=o.map(c=>c.split("/")[0]).join(","),r=r.filter(c=>o.indexOf(c)===-1))}),e.unknownCodecs=r}function kl(d,e,r){const n=e[r];n&&(d[r]=n)}function Kd(d,e){let r=d[e];for(let n=e;n--;){const o=d[n];if(!o)return;o.programDateTime=r.programDateTime-o.duration*1e3,r=o}}function oa(d,e,r){d.rawProgramDateTime?r.push(d):e!=null&&e.programDateTime&&(d.programDateTime=e.endProgramDateTime)}function Dl(d,e,r,n){d.relurl=e.URI,e.BYTERANGE&&d.setByteRange(e.BYTERANGE),d.level=r,d.sn="initSegment",n&&(d.levelkeys=n),d.initSegment=null}function Bl(d,e,r){d.levelkeys=e;const{encryptedFragments:n}=r;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(o=>e[o].isCommonEncryption)&&n.push(d)}function Zn(d,e,r){d.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${r[0]})`)}function Pl(d,e,r){d.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${r[0]})`)}function Oo(d,e){const r=e.startPTS;if(vt(r)){let n=0,o;e.sn>d.sn?(n=r-d.start,o=d):(n=d.start-r,o=e),o.duration!==n&&o.setDuration(n)}else e.sn>d.sn?d.cc===e.cc&&d.minEndPTS?e.setStart(d.start+(d.minEndPTS-d.start)):e.setStart(d.start+d.duration):e.setStart(Math.max(d.start-e.duration,0))}function Nu(d,e,r,n,o,c,i){n-r<=0&&(i.warn("Fragment should have a positive duration",e),n=r+e.duration,c=o+e.duration);let t=r,s=n;const a=e.startPTS,u=e.endPTS;if(vt(a)){const m=Math.abs(a-r);d&&m>d.totalduration?i.warn(`media timestamps and playlist times differ by ${m}s for level ${e.level} ${d.url}`):vt(e.deltaPTS)?e.deltaPTS=Math.max(m,e.deltaPTS):e.deltaPTS=m,t=Math.max(r,a),r=Math.min(r,a),o=e.startDTS!==void 0?Math.min(o,e.startDTS):o,s=Math.min(n,u),n=Math.max(n,u),c=e.endDTS!==void 0?Math.max(c,e.endDTS):c}const f=r-e.start;e.start!==0&&e.setStart(r),e.setDuration(n-e.start),e.startPTS=r,e.maxStartPTS=t,e.startDTS=o,e.endPTS=n,e.minEndPTS=s,e.endDTS=c;const h=e.sn;if(!d||h<d.startSN||h>d.endSN)return 0;let A;const g=h-d.startSN,p=d.fragments;for(p[g]=e,A=g;A>0;A--)Oo(p[A],p[A-1]);for(A=g;A<p.length-1;A++)Oo(p[A],p[A+1]);return d.fragmentHint&&Oo(p[p.length-1],d.fragmentHint),d.PTSKnown=d.alignedSliding=!0,f}function zd(d,e,r){if(d===e)return;let n=null;const o=d.fragments;for(let a=o.length-1;a>=0;a--){const u=o[a].initSegment;if(u){n=u;break}}d.fragmentHint&&delete d.fragmentHint.endPTS;let c;Zd(d,e,(a,u,f,h)=>{if((!e.startCC||e.skippedSegments)&&u.cc!==a.cc){const A=a.cc-u.cc;for(let g=f;g<h.length;g++)h[g].cc+=A;e.endCC=h[h.length-1].cc}vt(a.startPTS)&&vt(a.endPTS)&&(u.setStart(u.startPTS=a.startPTS),u.startDTS=a.startDTS,u.maxStartPTS=a.maxStartPTS,u.endPTS=a.endPTS,u.endDTS=a.endDTS,u.minEndPTS=a.minEndPTS,u.setDuration(a.endPTS-a.startPTS),u.duration&&(c=u),e.PTSKnown=e.alignedSliding=!0),a.hasStreams&&(u.elementaryStreams=a.elementaryStreams),u.loader=a.loader,a.hasStats&&(u.stats=a.stats),a.initSegment&&(u.initSegment=a.initSegment,n=a.initSegment)});const i=e.fragments,l=e.fragmentHint?i.concat(e.fragmentHint):i;if(n&&l.forEach(a=>{var u;a&&(!a.initSegment||a.initSegment.relurl===((u=n)==null?void 0:u.relurl))&&(a.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=i.some(a=>!a),e.deltaUpdateFailed){r.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let a=e.skippedSegments;a--;)i.shift();e.startSN=i[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=qd(d.dateRanges,e,r));const a=d.fragments.filter(u=>u.rawProgramDateTime);if(d.hasProgramDateTime&&!e.hasProgramDateTime)for(let u=1;u<l.length;u++)l[u].programDateTime===null&&oa(l[u],l[u-1],a);Fu(a,e)}e.endCC=i[i.length-1].cc}if(!e.startCC){var t;const a=Qu(d,e.startSN-1);e.startCC=(t=a?.cc)!=null?t:i[0].cc}Xd(d.partList,e.partList,(a,u)=>{u.elementaryStreams=a.elementaryStreams,u.stats=a.stats}),c?Nu(e,c,c.startPTS,c.endPTS,c.startDTS,c.endDTS,r):Uu(d,e),i.length&&(e.totalduration=e.edge-i[0].start),e.driftStartTime=d.driftStartTime,e.driftStart=d.driftStart;const s=e.advancedDateTime;if(e.advanced&&s){const a=e.edge;e.driftStart||(e.driftStartTime=s,e.driftStart=a),e.driftEndTime=s,e.driftEnd=a}else e.driftEndTime=d.driftEndTime,e.driftEnd=d.driftEnd,e.advancedDateTime=d.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=d.requestScheduled)}function qd(d,e,r){const{dateRanges:n,recentlyRemovedDateranges:o}=e,c=wr({},d);o&&o.forEach(t=>{delete c[t]});const l=Object.keys(c).length;return l?(Object.keys(n).forEach(t=>{const s=c[t],a=new Ou(n[t].attr,s);a.isValid?(c[t]=a,s||(a.tagOrder+=l)):r.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Pr(n[t].attr)}"`)}),c):n}function Xd(d,e,r){if(d&&e){let n=0;for(let o=0,c=d.length;o<=c;o++){const i=d[o],l=e[o+n];i&&l&&i.index===l.index&&i.fragment.sn===l.fragment.sn?r(i,l):n--}}}function Zd(d,e,r){const n=e.skippedSegments,o=Math.max(d.startSN,e.startSN)-e.startSN,c=(d.fragmentHint?1:0)+(n?e.endSN:Math.min(d.endSN,e.endSN))-e.startSN,i=e.startSN-d.startSN,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,t=d.fragmentHint?d.fragments.concat(d.fragmentHint):d.fragments;for(let s=o;s<=c;s++){const a=t[i+s];let u=l[s];if(n&&!u&&a&&(u=e.fragments[s]=a),a&&u){r(a,u,s,l);const f=a.relurl,h=u.relurl;if(f&&Jd(f,h)){e.playlistParsingError=Ol(`media sequence mismatch ${u.sn}:`,d,e,a,u);return}else if(a.cc!==u.cc){e.playlistParsingError=Ol(`discontinuity sequence mismatch (${a.cc}!=${u.cc})`,d,e,a,u);return}}}}function Ol(d,e,r,n,o){return new Error(`${d} ${o.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${r.startSN}
${r.m3u8}`)}function Uu(d,e,r=!0){const n=e.startSN+e.skippedSegments-d.startSN,o=d.fragments,c=n>=0;let i=0;if(c&&n<o.length)i=o[n].start;else if(c&&e.startSN===d.endSN+1)i=d.fragmentEnd;else if(c&&r)i=d.fragmentStart+n*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)i=d.fragmentStart;else return;aa(e,i)}function aa(d,e){if(e){const r=d.fragments;for(let n=d.skippedSegments;n<r.length;n++)r[n].addStart(e);d.fragmentHint&&d.fragmentHint.addStart(e)}}function Gu(d,e=1/0){let r=1e3*d.targetduration;if(d.updated){const n=d.fragments;if(n.length&&r*4>e){const c=n[n.length-1].duration*1e3;c<r&&(r=c)}}else r/=2;return Math.round(r)}function Qu(d,e,r){if(!d)return null;let n=d.fragments[e-d.startSN];return n||(n=d.fragmentHint,n&&n.sn===e)?n:e<d.startSN&&r&&r.sn===e?r:null}function _l(d,e,r){return d?$u(d.partList,e,r):null}function $u(d,e,r){if(d)for(let n=d.length;n--;){const o=d[n];if(o.index===r&&o.fragment.sn===e)return o}return null}function Wu(d){d.forEach((e,r)=>{var n;(n=e.details)==null||n.fragments.forEach(o=>{o.level=r,o.initSegment&&(o.initSegment.level=r)})})}function Jd(d,e){return d!==e&&e?Ml(d)!==Ml(e):!1}function Ml(d){return d.replace(/\?[^?]*$/,"")}function ts(d,e){for(let n=0,o=d.length;n<o;n++){var r;if(((r=d[n])==null?void 0:r.cc)===e)return d[n]}return null}function eh(d,e){return!!(d&&e.startCC<d.endCC&&e.endCC>d.startCC)}function Fl(d,e){const r=d.start+e;d.startPTS=r,d.setStart(r),d.endPTS=r+d.duration}function Vu(d,e){const r=e.fragments;for(let n=0,o=r.length;n<o;n++)Fl(r[n],d);e.fragmentHint&&Fl(e.fragmentHint,d),e.alignedSliding=!0}function th(d,e){d&&(Yu(e,d),e.alignedSliding||ao(e,d),!e.alignedSliding&&!e.skippedSegments&&Uu(d,e,!1))}function Yu(d,e){if(!eh(e,d))return;const r=Math.min(e.endCC,d.endCC),n=ts(e.fragments,r),o=ts(d.fragments,r);if(!n||!o)return;Cr.log(`Aligning playlist at start of dicontinuity sequence ${r}`);const c=n.start-o.start;Vu(c,d)}function ao(d,e){if(!d.hasProgramDateTime||!e.hasProgramDateTime)return;const r=d.fragments,n=e.fragments;if(!r.length||!n.length)return;let o,c;const i=Math.min(e.endCC,d.endCC);e.startCC<i&&d.startCC<i&&(o=ts(n,i),c=ts(r,i)),(!o||!c)&&(o=n[Math.floor(n.length/2)],c=ts(r,o.cc)||r[Math.floor(r.length/2)]);const l=o.programDateTime,t=c.programDateTime;if(!l||!t)return;const s=(t-l)/1e3-(c.start-o.start);Vu(s,d)}function on(d,e,r){fn(d,e,r),d.addEventListener(e,r)}function fn(d,e,r){d.removeEventListener(e,r)}const rh={toString:function(d){let e="";const r=d.length;for(let n=0;n<r;n++)e+=`[${d.start(n).toFixed(3)}-${d.end(n).toFixed(3)}]`;return e}},_e={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class La extends Bu{constructor(e,r,n,o,c){super(o,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=_e.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:i,fragCurrent:l,media:t,mediaBuffer:s,state:a}=this,u=t?t.currentTime:0,f=Xt.bufferInfo(s||t,u,i.maxBufferHole),h=!f.len;if(this.log(`Media seeking to ${vt(u)?u.toFixed(3):u}, state: ${a}, ${h?"out of":"in"} buffer`),this.state===_e.ENDED)this.resetLoadingState();else if(l){const A=i.maxFragLookUpTolerance,g=l.start-A,p=l.start+l.duration+A;if(h||p<f.start||g>f.end){const m=u>p;(u<g||m)&&(m&&l.loader&&(this.log(`Cancelling fragment load for seek (sn: ${l.sn})`),l.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(t){this.fragmentTracker.removeFragmentsInRange(u,1/0,this.playlistType,!0);const A=this.lastCurrentTime;if(u>A&&(this.lastCurrentTime=u),!this.loadingParts){const g=Math.max(f.end,u),p=this.shouldLoadParts(this.getLevelDetails(),g);p&&(this.log(`LL-Part loading ON after seeking to ${u.toFixed(2)} with buffer @${g.toFixed(2)}`),this.loadingParts=p)}}this.hls.hasEnoughToStart||(this.log(`Setting ${h?"startPosition":"nextLoadPosition"} to ${u} for seek without enough to start`),this.nextLoadPosition=u,h&&(this.startPosition=u)),h&&this.state===_e.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=c,this.hls=e,this.fragmentLoader=new Ld(e.config),this.keyLoader=n,this.fragmentTracker=r,this.config=e.config,this.decrypter=new Ta(e.config)}registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===_e.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=_e.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:r}=this;return r===-1&&e?e:r}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,r){if(r.live||!this.media)return!1;const n=e.end||0,o=this.config.timelineOffset||0;if(n<=o)return!1;const c=e.buffered;this.config.maxBufferHole&&c&&c.length>1&&(e=Xt.bufferedInfo(c,e.start,0));const i=e.nextStart;if(i&&i>o&&i<r.edge||this.media.currentTime<e.start)return!1;const t=r.partList;if(t!=null&&t.length){const a=t[t.length-1];return Xt.isBuffered(this.media,a.start+a.duration/2)}const s=r.fragments[r.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(s)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var r;return((r=this.getLevelDetails())==null?void 0:r.appliedTimelineOffset)||e}return 0}onMediaAttached(e,r){const n=this.media=this.mediaBuffer=r.media;on(n,"seeking",this.onMediaSeeking),on(n,"ended",this.onMediaEnded);const o=this.config;this.levels&&o.autoStartLoad&&this.state===_e.STOPPED&&this.startLoad(o.startPosition)}onMediaDetaching(e,r){const n=!!r.transferMedia,o=this.media;if(o!==null){if(o.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),fn(o,"seeking",this.onMediaSeeking),fn(o,"ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,r){}onManifestLoaded(e,r){this.startTimeOffset=r.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=_e.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,r,n){this.startFragRequested=!0,this._loadFragForPlayback(e,r,n)}_loadFragForPlayback(e,r,n){const o=c=>{const i=c.frag;if(this.fragContextChanged(i)){this.warn(`${i.type} sn: ${i.sn}${c.part?" part: "+c.part.index:""} of ${this.fragInfo(i,!1,c.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(i);return}i.stats.chunkCount++,this._handleFragmentLoadProgress(c)};this._doFragLoad(e,r,n,o).then(c=>{if(!c)return;const i=this.state,l=c.frag;if(this.fragContextChanged(l)){(i===_e.FRAG_LOADING||!this.fragCurrent&&i===_e.PARSING)&&(this.fragmentTracker.removeFragment(l),this.state=_e.IDLE);return}"payload"in c&&(this.log(`Loaded ${l.type} sn: ${l.sn} of ${this.playlistLabel()} ${l.level}`),this.hls.trigger(D.FRAG_LOADED,c)),this._handleFragmentLoadComplete(c)}).catch(c=>{this.state===_e.STOPPED||this.state===_e.ERROR||(this.warn(`Frag error: ${c?.message||c}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var r;const{fragmentTracker:n}=this;if(n.getState(e)===Xr.APPENDING){const c=e.type,i=this.getFwdBufferInfo(this.mediaBuffer,c),l=Math.max(e.duration,i?i.len:this.config.maxBufferLength),t=this.backtrackFragment;((t?e.sn-t.sn:0)===1||this.reduceMaxBufferLength(l,e.duration))&&n.removeFragment(e)}else((r=this.mediaBuffer)==null?void 0:r.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===Xr.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const r=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:r,part:null,stats:r.stats,id:r.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const r=e.details;return r?.live&&r.type!=="EVENT"&&(this.levelLastLoaded!==e||r.expired)}flushMainBuffer(e,r,n=null){if(!(e-r))return;const o={startOffset:e,endOffset:r,type:n};this.hls.trigger(D.BUFFER_FLUSHING,o)}_loadInitSegment(e,r){this._doFragLoad(e,r).then(n=>{const o=n?.frag;if(!o||this.fragContextChanged(o)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:o}=this,{frag:c,payload:i}=n,l=c.decryptdata;if(i&&i.byteLength>0&&l!=null&&l.key&&l.iv&&Mi(l.method)){const t=self.performance.now();return this.decrypter.decrypt(new Uint8Array(i),l.key.buffer,l.iv.buffer,wa(l.method)).catch(s=>{throw o.trigger(D.ERROR,{type:Ot.MEDIA_ERROR,details:ve.FRAG_DECRYPT_ERROR,fatal:!1,error:s,reason:s.message,frag:c}),s}).then(s=>{const a=self.performance.now();return o.trigger(D.FRAG_DECRYPTED,{frag:c,payload:s,stats:{tstart:t,tdecrypt:a}}),n.payload=s,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===_e.STOPPED||this.state===_e.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:r}=this;if(!r)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==_e.STOPPED&&(this.state=_e.IDLE),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,r){var n,o;const c=e.tracks;if(c&&!r.encrypted&&((n=c.audio)!=null&&n.encrypted||(o=c.video)!=null&&o.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const i=this.media,l=new Error(`Encrypted track with no key in ${this.fragInfo(r)} (media ${i?"attached mediaKeys: "+i.mediaKeys:"detached"})`);return this.warn(l.message),!i||i.mediaKeys?!1:(this.hls.trigger(D.ERROR,{type:Ot.KEY_SYSTEM_ERROR,details:ve.KEY_SYSTEM_NO_KEYS,fatal:!1,error:l,frag:r}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:r}=this;return!e||!r||e.sn!==r.sn||e.level!==r.level}fragBufferedComplete(e,r){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${r?" part: "+r.index:""} of ${this.fragInfo(e,!1,r)} > buffer:${n?rh.toString(Xt.getBuffered(n)):"(detached)"})`),Hr(e)){var o;if(e.type!==Rt.SUBTITLE){const i=e.elementaryStreams;if(!Object.keys(i).some(l=>!!i[l])){this.state=_e.IDLE;return}}const c=(o=this.levels)==null?void 0:o[e.level];c!=null&&c.fragmentError&&(this.log(`Resetting level fragment error count of ${c.fragmentError} on frag buffered`),c.fragmentError=0)}this.state=_e.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:r}=this;if(!r)return;const{frag:n,part:o,partsLoaded:c}=e,i=!c||c.length===0||c.some(t=>!t),l=new Sa(n.level,n.sn,n.stats.chunkCount+1,0,o?o.index:-1,!i);r.flush(l)}_handleFragmentLoadProgress(e){}_doFragLoad(e,r,n=null,o){var c;this.fragCurrent=e;const i=r.details;if(!this.levels||!i)throw new Error(`frag load aborted, missing level${i?"":" detail"}s`);let l=null;if(e.encrypted&&!((c=e.decryptdata)!=null&&c.key)){if(this.log(`Loading key for ${e.sn} of [${i.startSN}-${i.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=_e.KEY_LOADING,this.fragCurrent=e,l=this.keyLoader.load(e).then(f=>{if(!this.fragContextChanged(f.frag))return this.hls.trigger(D.KEY_LOADED,f),this.state===_e.KEY_LOADING&&(this.state=_e.IDLE),f}),this.hls.trigger(D.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(l=this.keyLoader.loadClear(e,i.encryptedFragments,this.startFragRequested),l&&this.log("[eme] blocking frag load until media-keys acquired"));const t=this.fragPrevious;if(Hr(e)&&(!t||e.sn!==t.sn)){const f=this.shouldLoadParts(r.details,e.end);f!==this.loadingParts&&(this.log(`LL-Part loading ${f?"ON":"OFF"} loading sn ${t?.sn}->${e.sn}`),this.loadingParts=f)}if(n=Math.max(e.start,n||0),this.loadingParts&&Hr(e)){const f=i.partList;if(f&&o){n>i.fragmentEnd&&i.fragmentHint&&(e=i.fragmentHint);const h=this.getNextPart(f,e,n);if(h>-1){const A=f[h];e=this.fragCurrent=A.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${A.index} (${h}/${f.length-1}) of ${this.fragInfo(e,!1,A)}) cc: ${e.cc} [${i.startSN}-${i.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=A.start+A.duration,this.state=_e.FRAG_LOADING;let g;return l?g=l.then(p=>!p||this.fragContextChanged(p.frag)?null:this.doFragPartsLoad(e,A,r,o)).catch(p=>this.handleFragLoadError(p)):g=this.doFragPartsLoad(e,A,r,o).catch(p=>this.handleFragLoadError(p)),this.hls.trigger(D.FRAG_LOADING,{frag:e,part:A,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):g}else if(!e.url||this.loadedEndOfParts(f,n))return Promise.resolve(null)}}if(Hr(e)&&this.loadingParts){var s;this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(s=i.partList)==null?void 0:s.filter(f=>f.loaded).map(f=>`[${f.start}-${f.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+i.startSN+"-"+i.endSN+"]"}, target: ${parseFloat(n.toFixed(3))}`),vt(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=_e.FRAG_LOADING;const a=this.config.progressive;let u;return a&&l?u=l.then(f=>!f||this.fragContextChanged(f.frag)?null:this.fragmentLoader.load(e,o)).catch(f=>this.handleFragLoadError(f)):u=Promise.all([this.fragmentLoader.load(e,a?o:void 0),l]).then(([f])=>(!a&&o&&o(f),f)).catch(f=>this.handleFragLoadError(f)),this.hls.trigger(D.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):u}doFragPartsLoad(e,r,n,o){return new Promise((c,i)=>{var l;const t=[],s=(l=n.details)==null?void 0:l.partList,a=u=>{this.fragmentLoader.loadPart(e,u,o).then(f=>{t[u.index]=f;const h=f.part;this.hls.trigger(D.FRAG_LOADED,f);const A=_l(n.details,e.sn,u.index+1)||$u(s,e.sn,u.index+1);if(A)a(A);else return c({frag:e,part:h,partsLoaded:t})}).catch(i)};a(r)})}handleFragLoadError(e){if("data"in e){const r=e.data;r.frag&&r.details===ve.INTERNAL_ABORTED?this.handleFragLoadAborted(r.frag,r.part):r.frag&&r.type===Ot.KEY_SYSTEM_ERROR?(r.frag.abortRequests(),this.resetFragmentLoading(r.frag)):this.hls.trigger(D.ERROR,r)}else this.hls.trigger(D.ERROR,{type:Ot.OTHER_ERROR,details:ve.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const r=this.getCurrentContext(e);if(!r||this.state!==_e.PARSING){!this.fragCurrent&&this.state!==_e.STOPPED&&this.state!==_e.ERROR&&(this.state=_e.IDLE);return}const{frag:n,part:o,level:c}=r,i=self.performance.now();n.stats.parsing.end=i,o&&(o.stats.parsing.end=i);const l=this.getLevelDetails(),s=l&&n.sn>l.endSN||this.shouldLoadParts(l,n.end);s!==this.loadingParts&&(this.log(`LL-Part loading ${s?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=s),this.updateLevelTiming(n,o,c,e.partial)}shouldLoadParts(e,r){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var n;const c=e.partList[0];if(c.fragment.type===Rt.SUBTITLE)return!1;const i=c.end+(((n=e.fragmentHint)==null?void 0:n.duration)||0);if(r>=i){var o;if((this.hls.hasEnoughToStart?((o=this.media)==null?void 0:o.currentTime)||this.lastCurrentTime:this.getLoadPosition())>c.start-c.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:r,fragCurrent:n}=this,{level:o,sn:c,part:i}=e;if(!(r!=null&&r[o]))return this.warn(`Levels object was unset while buffering fragment ${c} of ${this.playlistLabel()} ${o}. The current chunk will not be buffered.`),null;const l=r[o],t=l.details,s=i>-1?_l(t,c,i):null,a=s?s.fragment:Qu(t,c,n);return a?(n&&n!==a&&(a.stats=n.stats),{frag:a,part:s,level:l}):null}bufferFragmentData(e,r,n,o,c){if(this.state!==_e.PARSING)return;const{data1:i,data2:l}=e;let t=i;if(l&&(t=Sn(i,l)),!t.length)return;const s=this.initPTS[r.cc],a=s?-s.baseTime/s.timescale:void 0,u={type:e.type,frag:r,part:n,chunkMeta:o,offset:a,parent:r.type,data:t};if(this.hls.trigger(D.BUFFER_APPENDING,u),e.dropped&&e.independent&&!n){if(c)return;this.flushBufferGap(r)}}flushBufferGap(e){const r=this.media;if(!r)return;if(!Xt.isBuffered(r,r.currentTime)){this.flushMainBuffer(0,e.start);return}const n=r.currentTime,o=Xt.bufferInfo(r,n,0),c=e.duration,i=Math.min(this.config.maxFragLookUpTolerance*2,c*.25),l=Math.max(Math.min(e.start-i,o.end-i),n+i);e.start-l>i&&this.flushMainBuffer(l,e.start)}getFwdBufferInfo(e,r){var n;const o=this.getLoadPosition();if(!vt(o))return null;const i=this.lastCurrentTime>o||(n=this.media)!=null&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,o,r,i)}getFwdBufferInfoAtPos(e,r,n,o){const c=Xt.bufferInfo(e,r,o);if(c.len===0&&c.nextStart!==void 0){const i=this.fragmentTracker.getBufferedFrag(r,n);if(i&&(c.nextStart<=i.end||i.gap)){const l=Math.max(Math.min(c.nextStart,i.end)-r,o);return Xt.bufferInfo(e,r,l)}}return c}getMaxBufferLength(e){const{config:r}=this;let n;return e?n=Math.max(8*r.maxBufferSize/e,r.maxBufferLength):n=r.maxBufferLength,Math.min(n,r.maxMaxBufferLength)}reduceMaxBufferLength(e,r){const n=this.config,o=Math.max(Math.min(e-r,n.maxBufferLength),r),c=Math.max(e-r*3,n.maxMaxBufferLength/2,o);return c>=o?(n.maxMaxBufferLength=c,this.warn(`Reduce max buffer length to ${c}s`),!0):!1}getAppendedFrag(e,r=Rt.MAIN){const n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,r):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(e,r){const n=r.fragments,o=n.length;if(!o)return null;const{config:c}=this,i=n[0].start,l=c.lowLatencyMode&&!!r.partList;let t=null;if(r.live){const u=c.initialLiveManifestSize;if(o<u)return this.warn(`Not enough fragments to start playback (have: ${o}, need: ${u})`),null;if(!r.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<i){var s;l&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),t=this.getInitialLiveFragment(r);const f=this.hls.startPosition,h=this.hls.liveSyncPosition,A=t?(f!==-1&&f>=i?f:h)||t.start:e;this.log(`Setting startPosition to ${A} to match start frag at live edge. mainStart: ${f} liveSyncPosition: ${h} frag.start: ${(s=t)==null?void 0:s.start}`),this.startPosition=this.nextLoadPosition=A}}else e<=i&&(t=n[0]);if(!t){const u=this.loadingParts?r.partEnd:r.fragmentEnd;t=this.getFragmentAtPosition(e,u,r)}let a=this.filterReplacedPrimary(t,r);if(!a&&t){const u=t.sn-r.startSN;a=this.filterReplacedPrimary(n[u+1]||null,r)}return this.mapToInitFragWhenRequired(a)}isLoopLoading(e,r){const n=this.fragmentTracker.getState(e);return(n===Xr.OK||n===Xr.PARTIAL&&!!e.gap)&&this.nextLoadPosition>r}getNextFragmentLoopLoading(e,r,n,o,c){let i=null;if(e.gap&&(i=this.getNextFragment(this.nextLoadPosition,r),i&&!i.gap&&n.nextStart)){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,o,0);if(l!==null&&n.len+l.len>=c){const t=i.sn;return this.loopSn!==t&&(this.log(`buffer full after gaps in "${o}" playlist starting at sn: ${t}`),this.loopSn=t),null}}return this.loopSn=void 0,i}get primaryPrefetch(){if(Nl(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,r){if(!e)return e;if(Nl(this.config)&&e.type!==Rt.SUBTITLE){const n=this.hls.interstitialsManager,o=n?.bufferingItem;if(o){const i=o.event;if(i){if(i.appendInPlace||Math.abs(e.start-o.start)>1||o.start===0)return null}else if(e.end<=o.start&&r?.live===!1||e.start>o.end&&o.nextEvent&&(o.nextEvent.appendInPlace||e.start-o.end>1))return null}const c=n?.playerQueue;if(c)for(let i=c.length;i--;){const l=c[i].interstitial;if(l.appendInPlace&&e.start>=l.startTime&&e.end<=l.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,r,n){let o=-1,c=!1,i=!0;for(let l=0,t=e.length;l<t;l++){const s=e[l];if(i=i&&!s.independent,o>-1&&n<s.start)break;const a=s.loaded;a?o=-1:(c||(s.independent||i)&&s.fragment===r)&&(s.fragment!==r&&this.warn(`Need buffer at ${n} but next unloaded part starts at ${s.start}`),o=l),c=a}return o}loadedEndOfParts(e,r){let n;for(let o=e.length;o--;){if(n=e[o],!n.loaded)return!1;if(r>n.start)return!0}return!1}getInitialLiveFragment(e){const r=e.fragments,n=this.fragPrevious;let o=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),o=pd(r,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!o){const c=n.sn+1;if(c>=e.startSN&&c<=e.endSN){const i=r[c-e.startSN];n.cc===i.cc&&(o=i,this.log(`Live playlist, switching playlist, load frag with next SN: ${o.sn}`))}o||(o=Du(e,n.cc,n.end),o&&this.log(`Live playlist, switching playlist, load frag with same CC: ${o.sn}`))}}else{const c=this.hls.liveSyncPosition;c!==null&&(o=this.getFragmentAtPosition(c,this.bitrateTest?e.fragmentEnd:e.edge,e))}return o}getFragmentAtPosition(e,r,n){const{config:o}=this;let{fragPrevious:c}=this,{fragments:i,endSN:l}=n;const{fragmentHint:t}=n,{maxFragLookUpTolerance:s}=o,a=n.partList,u=!!(this.loadingParts&&a!=null&&a.length&&t);u&&!this.bitrateTest&&a[a.length-1].fragment.sn===t.sn&&(i=i.concat(t),l=t.sn);let f;if(e<r){var h;const g=e<this.lastCurrentTime||e>r-s||(h=this.media)!=null&&h.paused||!this.startFragRequested?0:s;f=mi(c,i,e,g)}else f=i[i.length-1];if(f){const A=f.sn-n.startSN,g=this.fragmentTracker.getState(f);if((g===Xr.OK||g===Xr.PARTIAL&&f.gap)&&(c=f),c&&f.sn===c.sn&&(!u||a[0].fragment.sn>f.sn||!n.live)&&f.level===c.level){const m=i[A+1];f.sn<l&&this.fragmentTracker.getState(m)!==Xr.OK?f=m:f=null}}return f}alignPlaylists(e,r,n){const o=e.fragments.length;if(!o)return this.warn("No fragments in live playlist"),0;const c=e.fragmentStart,i=!r,l=e.alignedSliding&&vt(c);if(i||!l&&!c){th(n,e);const t=e.fragmentStart;return this.log(`Live playlist sliding: ${t.toFixed(2)} start-sn: ${r?r.startSN:"na"}->${e.startSN} fragments: ${o}`),t}return c}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,r){let n=this.startPosition;n<r&&(n=-1);const o=this.timelineOffset;if(n===-1){const c=this.startTimeOffset!==null,i=c?this.startTimeOffset:e.startTimeOffset;i!==null&&vt(i)?(n=r+i,i<0&&(n+=e.edge),n=Math.min(Math.max(r,n),r+e.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${i} found in ${c?"multivariant":"media"} playlist`),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||r,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+o}this.nextLoadPosition=n+o}getLoadPosition(){var e;const{media:r}=this;let n=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&r?n=r.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,r){this.transmuxer&&e.type===this.playlistType&&Hr(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${r?" part "+r.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==_e.FRAG_LOADING_WAITING_RETRY)&&(this.state=_e.IDLE)}onFragmentOrKeyLoadError(e,r){var n;if(r.chunkMeta&&!r.frag){const m=this.getCurrentContext(r.chunkMeta);m&&(r.frag=m.frag)}const o=r.frag;if(!o||o.type!==e||!this.levels)return;if(this.fragContextChanged(o)){var c;this.warn(`Frag load error must match current frag to retry ${o.url} > ${(c=this.fragCurrent)==null?void 0:c.url}`);return}const i=r.details===ve.FRAG_GAP;i&&this.fragmentTracker.fragBuffered(o,!0);const l=r.errorAction;if(!l){this.state=_e.ERROR;return}const{action:t,flags:s,retryCount:a=0,retryConfig:u}=l,f=!!u,h=f&&t===tn.RetryRequest,A=f&&!l.resolved&&s===gn.MoveAllAlternatesMatchingHost,g=(n=this.hls.latestLevelDetails)==null?void 0:n.live;if(!h&&A&&Hr(o)&&!o.endList&&g)this.resetFragmentErrors(e),this.treatAsGap(o),l.resolved=!0;else if((h||A)&&a<u.maxNumRetry){var p;const m=na((p=r.response)==null?void 0:p.code),y=xa(u,a);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+y,this.state=_e.FRAG_LOADING_WAITING_RETRY,l.resolved=!0,m){this.log("Waiting for connection (offline)"),this.retryDate=1/0,r.reason="offline";return}this.warn(`Fragment ${o.sn} of ${e} ${o.level} errored with ${r.details}, retrying loading ${a+1}/${u.maxNumRetry} in ${y}ms`)}else if(u)if(this.resetFragmentErrors(e),a<u.maxNumRetry)!i&&t!==tn.RemoveAlternatePermanently&&(l.resolved=!0);else{this.warn(`${r.details} reached or exceeded max retry (${a})`);return}else t===tn.SendAlternateToPenaltyBox?this.state=_e.WAITING_LEVEL:this.state=_e.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),r=this.retryDate,n=r===1/0;(!r||e>=r||n&&!na(0))&&(n&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=_e.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===_e.PARSING||this.state===_e.PARSED){const r=e.frag,n=e.parent,o=this.getFwdBufferInfo(this.mediaBuffer,n),c=o&&o.len>.5;c&&this.reduceMaxBufferLength(o.len,r?.duration||10);const i=!c;return i&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${n} buffer`),r&&(this.fragmentTracker.removeFragment(r),this.nextLoadPosition=r.start),this.resetLoadingState(),i}return!1}resetFragmentErrors(e){e===Rt.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==_e.STOPPED&&(this.state=_e.IDLE)}afterBufferFlushed(e,r,n){if(!e)return;const o=Xt.getBuffered(e);this.fragmentTracker.detectEvictedFragments(r,o,n),this.state===_e.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==_e.STOPPED&&(this.state=_e.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,r=e?e.details:null;r!=null&&r.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(r,r.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,r,n,o){const c=n.details;if(!c){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((t,s)=>{const a=e.elementaryStreams[s];if(a){const u=a.endPTS-a.startPTS;if(u<=0)return this.warn(`Could not parse fragment ${e.sn} ${s} duration reliably (${u})`),t||!1;const f=o?0:Nu(c,e,a.startPTS,a.endPTS,a.startDTS,a.endDTS,this);return this.hls.trigger(D.LEVEL_PTS_UPDATED,{details:c,level:n,drift:f,type:s,frag:e,start:a.startPTS,end:a.endPTS}),!0}return t},!1)){var l;if(n.fragmentError===0&&this.treatAsGap(e,n),((l=this.transmuxer)==null?void 0:l.error)===null){const t=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(t.message),this.hls.trigger(D.ERROR,{type:Ot.MEDIA_ERROR,details:ve.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=_e.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${r?" part: "+r.index:""} of ${this.fragInfo(e,!1,r)})`),this.hls.trigger(D.FRAG_PARSED,{frag:e,part:r})}playlistLabel(){return this.playlistType===Rt.MAIN?"level":"track"}fragInfo(e,r=!0,n){var o,c;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${((o=r&&!n?e.startPTS:(n||e).start)!=null?o:NaN).toFixed(3)}-${((c=r&&!n?e.endPTS:(n||e).end)!=null?c:NaN).toFixed(3)}]${n&&e.type==="main"?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,r){r&&r.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const r=this._state;r!==e&&(this._state=e,this.log(`${r}->${e}`))}get state(){return this._state}}function Nl(d){return!!d.interstitialsController&&d.enableInterstitialPlayback!==!1}class Hu{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:r}=this;let n;if(e.length)e.length===1?n=e[0]:n=nh(e,r);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function nh(d,e){const r=new Uint8Array(e);let n=0;for(let o=0;o<d.length;o++){const c=d[o];r.set(c,n),n+=c.length}return r}var _o={exports:{}},Ul;function ih(){return Ul||(Ul=1,(function(d){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function o(t,s,a){this.fn=t,this.context=s,this.once=a||!1}function c(t,s,a,u,f){if(typeof a!="function")throw new TypeError("The listener must be a function");var h=new o(a,u||t,f),A=r?r+s:s;return t._events[A]?t._events[A].fn?t._events[A]=[t._events[A],h]:t._events[A].push(h):(t._events[A]=h,t._eventsCount++),t}function i(t,s){--t._eventsCount===0?t._events=new n:delete t._events[s]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var s=[],a,u;if(this._eventsCount===0)return s;for(u in a=this._events)e.call(a,u)&&s.push(r?u.slice(1):u);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(a)):s},l.prototype.listeners=function(s){var a=r?r+s:s,u=this._events[a];if(!u)return[];if(u.fn)return[u.fn];for(var f=0,h=u.length,A=new Array(h);f<h;f++)A[f]=u[f].fn;return A},l.prototype.listenerCount=function(s){var a=r?r+s:s,u=this._events[a];return u?u.fn?1:u.length:0},l.prototype.emit=function(s,a,u,f,h,A){var g=r?r+s:s;if(!this._events[g])return!1;var p=this._events[g],m=arguments.length,y,E;if(p.fn){switch(p.once&&this.removeListener(s,p.fn,void 0,!0),m){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,a),!0;case 3:return p.fn.call(p.context,a,u),!0;case 4:return p.fn.call(p.context,a,u,f),!0;case 5:return p.fn.call(p.context,a,u,f,h),!0;case 6:return p.fn.call(p.context,a,u,f,h,A),!0}for(E=1,y=new Array(m-1);E<m;E++)y[E-1]=arguments[E];p.fn.apply(p.context,y)}else{var C=p.length,T;for(E=0;E<C;E++)switch(p[E].once&&this.removeListener(s,p[E].fn,void 0,!0),m){case 1:p[E].fn.call(p[E].context);break;case 2:p[E].fn.call(p[E].context,a);break;case 3:p[E].fn.call(p[E].context,a,u);break;case 4:p[E].fn.call(p[E].context,a,u,f);break;default:if(!y)for(T=1,y=new Array(m-1);T<m;T++)y[T-1]=arguments[T];p[E].fn.apply(p[E].context,y)}}return!0},l.prototype.on=function(s,a,u){return c(this,s,a,u,!1)},l.prototype.once=function(s,a,u){return c(this,s,a,u,!0)},l.prototype.removeListener=function(s,a,u,f){var h=r?r+s:s;if(!this._events[h])return this;if(!a)return i(this,h),this;var A=this._events[h];if(A.fn)A.fn===a&&(!f||A.once)&&(!u||A.context===u)&&i(this,h);else{for(var g=0,p=[],m=A.length;g<m;g++)(A[g].fn!==a||f&&!A[g].once||u&&A[g].context!==u)&&p.push(A[g]);p.length?this._events[h]=p.length===1?p[0]:p:i(this,h)}return this},l.prototype.removeAllListeners=function(s){var a;return s?(a=r?r+s:s,this._events[a]&&i(this,a)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,d.exports=l})(_o)),_o.exports}var sh=ih(),Ra=Df(sh);const os="1.6.11",Gi={};function oh(){return typeof __HLS_WORKER_BUNDLE__=="function"}function ah(){const d=Gi[os];if(d)return d.clientCount++,d;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),r=self.URL.createObjectURL(e),o={worker:new self.Worker(r),objectURL:r,clientCount:1};return Gi[os]=o,o}function lh(d){const e=Gi[d];if(e)return e.clientCount++,e;const r=new self.URL(d,self.location.href).href,o={worker:new self.Worker(r),scriptURL:r,clientCount:1};return Gi[d]=o,o}function uh(d){const e=Gi[d||os];if(e&&e.clientCount--===1){const{worker:n,objectURL:o}=e;delete Gi[d||os],o&&self.URL.revokeObjectURL(o),n.terminate()}}function ju(d,e){return e+10<=d.length&&d[e]===51&&d[e+1]===68&&d[e+2]===73&&d[e+3]<255&&d[e+4]<255&&d[e+6]<128&&d[e+7]<128&&d[e+8]<128&&d[e+9]<128}function ka(d,e){return e+10<=d.length&&d[e]===73&&d[e+1]===68&&d[e+2]===51&&d[e+3]<255&&d[e+4]<255&&d[e+6]<128&&d[e+7]<128&&d[e+8]<128&&d[e+9]<128}function ho(d,e){let r=0;return r=(d[e]&127)<<21,r|=(d[e+1]&127)<<14,r|=(d[e+2]&127)<<7,r|=d[e+3]&127,r}function as(d,e){const r=e;let n=0;for(;ka(d,e);){n+=10;const o=ho(d,e+6);n+=o,ju(d,e+10)&&(n+=10),e+=n}if(n>0)return d.subarray(r,r+n)}function ch(d,e,r,n){const o=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],c=e[r+2],i=c>>2&15;if(i>12){const h=new Error(`invalid ADTS sampling index:${i}`);d.emit(D.ERROR,D.ERROR,{type:Ot.MEDIA_ERROR,details:ve.FRAG_PARSING_ERROR,fatal:!0,error:h,reason:h.message});return}const l=(c>>6&3)+1,t=e[r+3]>>6&3|(c&1)<<2,s="mp4a.40."+l,a=o[i];let u=i;(l===5||l===29)&&(u-=3);const f=[l<<3|(u&14)>>1,(u&1)<<7|t<<3];return Cr.log(`manifest codec:${n}, parsed codec:${s}, channels:${t}, rate:${a} (ADTS object type:${l} sampling index:${i})`),{config:f,samplerate:a,channelCount:t,codec:s,parsedCodec:s,manifestCodec:n}}function Ku(d,e){return d[e]===255&&(d[e+1]&246)===240}function zu(d,e){return d[e+1]&1?7:9}function Da(d,e){return(d[e+3]&3)<<11|d[e+4]<<3|(d[e+5]&224)>>>5}function fh(d,e){return e+5<d.length}function lo(d,e){return e+1<d.length&&Ku(d,e)}function dh(d,e){return fh(d,e)&&Ku(d,e)&&Da(d,e)<=d.length-e}function hh(d,e){if(lo(d,e)){const r=zu(d,e);if(e+r>=d.length)return!1;const n=Da(d,e);if(n<=r)return!1;const o=e+n;return o===d.length||lo(d,o)}return!1}function qu(d,e,r,n,o){if(!d.samplerate){const c=ch(e,r,n,o);if(!c)return;wr(d,c)}}function Xu(d){return 1024*9e4/d}function Ah(d,e){const r=zu(d,e);if(e+r<=d.length){const n=Da(d,e)-r;if(n>0)return{headerLength:r,frameLength:n}}}function Zu(d,e,r,n,o){const c=Xu(d.samplerate),i=n+o*c,l=Ah(e,r);let t;if(l){const{frameLength:u,headerLength:f}=l,h=f+u,A=Math.max(0,r+h-e.length);A?(t=new Uint8Array(h-f),t.set(e.subarray(r+f,e.length),0)):t=e.subarray(r+f,r+h);const g={unit:t,pts:i};return A||d.samples.push(g),{sample:g,length:h,missing:A}}const s=e.length-r;return t=new Uint8Array(s),t.set(e.subarray(r,e.length),0),{sample:{unit:t,pts:i},length:s,missing:-1}}function gh(d,e){return ka(d,e)&&ho(d,e+6)+10<=d.length-e}function ph(d){return d instanceof ArrayBuffer?d:d.byteOffset==0&&d.byteLength==d.buffer.byteLength?d.buffer:new Uint8Array(d).buffer}function Mo(d,e=0,r=1/0){return mh(d,e,r,Uint8Array)}function mh(d,e,r,n){const o=vh(d);let c=1;"BYTES_PER_ELEMENT"in n&&(c=n.BYTES_PER_ELEMENT);const i=yh(d)?d.byteOffset:0,l=(i+d.byteLength)/c,t=(i+e)/c,s=Math.floor(Math.max(0,Math.min(t,l))),a=Math.floor(Math.min(s+Math.max(r,0),l));return new n(o,s,a-s)}function vh(d){return d instanceof ArrayBuffer?d:d.buffer}function yh(d){return d&&d.buffer instanceof ArrayBuffer&&d.byteLength!==void 0&&d.byteOffset!==void 0}function Eh(d){const e={key:d.type,description:"",data:"",mimeType:null,pictureType:null},r=3;if(d.size<2)return;if(d.data[0]!==r){console.log("Ignore frame with unrecognized character encoding");return}const n=d.data.subarray(1).indexOf(0);if(n===-1)return;const o=vn(Mo(d.data,1,n)),c=d.data[2+n],i=d.data.subarray(3+n).indexOf(0);if(i===-1)return;const l=vn(Mo(d.data,3+n,i));let t;return o==="-->"?t=vn(Mo(d.data,4+n+i)):t=ph(d.data.subarray(4+n+i)),e.mimeType=o,e.pictureType=c,e.description=l,e.data=t,e}function bh(d){if(d.size<2)return;const e=vn(d.data,!0),r=new Uint8Array(d.data.subarray(e.length+1));return{key:d.type,info:e,data:r.buffer}}function Ch(d){if(d.size<2)return;if(d.type==="TXXX"){let r=1;const n=vn(d.data.subarray(r),!0);r+=n.length+1;const o=vn(d.data.subarray(r));return{key:d.type,info:n,data:o}}const e=vn(d.data.subarray(1));return{key:d.type,info:"",data:e}}function xh(d){if(d.type==="WXXX"){if(d.size<2)return;let r=1;const n=vn(d.data.subarray(r),!0);r+=n.length+1;const o=vn(d.data.subarray(r));return{key:d.type,info:n,data:o}}const e=vn(d.data);return{key:d.type,info:"",data:e}}function Th(d){return d.type==="PRIV"?bh(d):d.type[0]==="W"?xh(d):d.type==="APIC"?Eh(d):Ch(d)}function Sh(d){const e=String.fromCharCode(d[0],d[1],d[2],d[3]),r=ho(d,4),n=10;return{type:e,size:r,data:d.subarray(n,n+r)}}const Ms=10,wh=10;function Ju(d){let e=0;const r=[];for(;ka(d,e);){const n=ho(d,e+6);d[e+5]>>6&1&&(e+=Ms),e+=Ms;const o=e+n;for(;e+wh<o;){const c=Sh(d.subarray(e)),i=Th(c);i&&r.push(i),e+=c.size+Ms}ju(d,e)&&(e+=Ms)}return r}function ec(d){return d&&d.key==="PRIV"&&d.info==="com.apple.streaming.transportStreamTimestamp"}function Ih(d){if(d.data.byteLength===8){const e=new Uint8Array(d.data),r=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,r&&(n+=4772185884e-2),Math.round(n)}}function Ba(d){const e=Ju(d);for(let r=0;r<e.length;r++){const n=e[r];if(ec(n))return Ih(n)}}let mn=(function(d){return d.audioId3="org.id3",d.dateRange="com.apple.quicktime.HLS",d.emsg="https://aomedia.org/emsg/ID3",d.misbklv="urn:misb:KLV:bin:1910.1",d})({});function Gn(d="",e=9e4){return{type:d,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Pa{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,r,n,o){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,r){return!1}appendFrame(e,r,n){}demux(e,r){this.cachedData&&(e=Sn(this.cachedData,e),this.cachedData=null);let n=as(e,0),o=n?n.length:0,c;const i=this._audioTrack,l=this._id3Track,t=n?Ba(n):void 0,s=e.length;for((this.basePTS===null||this.frameIndex===0&&vt(t))&&(this.basePTS=Lh(t,r,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:mn.audioId3,duration:Number.POSITIVE_INFINITY});o<s;){if(this.canParse(e,o)){const a=this.appendFrame(i,e,o);a?(this.frameIndex++,this.lastPTS=a.sample.pts,o+=a.length,c=o):o=s}else gh(e,o)?(n=as(e,o),l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:mn.audioId3,duration:Number.POSITIVE_INFINITY}),o+=n.length,c=o):o++;if(o===s&&c!==s){const a=e.slice(c);this.cachedData?this.cachedData=Sn(this.cachedData,a):this.cachedData=a}}return{audioTrack:i,videoTrack:Gn(),id3Track:l,textTrack:Gn()}}demuxSampleAes(e,r,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const r=this.cachedData;return r&&(this.cachedData=null,this.demux(r,0)),{audioTrack:this._audioTrack,videoTrack:Gn(),id3Track:this._id3Track,textTrack:Gn()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const Lh=(d,e,r)=>{if(vt(d))return d*90;const n=r?r.baseTime*9e4/r.timescale:0;return e*9e4+n};let Fs=null;const Rh=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],kh=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Dh=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Bh=[0,1,1,4];function tc(d,e,r,n,o){if(r+24>e.length)return;const c=rc(e,r);if(c&&r+c.frameLength<=e.length){const i=c.samplesPerFrame*9e4/c.sampleRate,l=n+o*i,t={unit:e.subarray(r,r+c.frameLength),pts:l,dts:l};return d.config=[],d.channelCount=c.channelCount,d.samplerate=c.sampleRate,d.samples.push(t),{sample:t,length:c.frameLength,missing:0}}}function rc(d,e){const r=d[e+1]>>3&3,n=d[e+1]>>1&3,o=d[e+2]>>4&15,c=d[e+2]>>2&3;if(r!==1&&o!==0&&o!==15&&c!==3){const i=d[e+2]>>1&1,l=d[e+3]>>6,t=r===3?3-n:n===3?3:4,s=Rh[t*14+o-1]*1e3,u=kh[(r===3?0:r===2?1:2)*3+c],f=l===3?1:2,h=Dh[r][n],A=Bh[n],g=h*8*A,p=Math.floor(h*s/u+i)*A;if(Fs===null){const E=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Fs=E?parseInt(E[1]):0}return!!Fs&&Fs<=87&&n===2&&s>=224e3&&l===0&&(d[e+3]=d[e+3]|128),{sampleRate:u,channelCount:f,frameLength:p,samplesPerFrame:g}}}function Oa(d,e){return d[e]===255&&(d[e+1]&224)===224&&(d[e+1]&6)!==0}function nc(d,e){return e+1<d.length&&Oa(d,e)}function Ph(d,e){return Oa(d,e)&&4<=d.length-e}function ic(d,e){if(e+1<d.length&&Oa(d,e)){const n=rc(d,e);let o=4;n!=null&&n.frameLength&&(o=n.frameLength);const c=e+o;return c===d.length||nc(d,c)}return!1}class Oh extends Pa{constructor(e,r){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=r}resetInitSegment(e,r,n,o){super.resetInitSegment(e,r,n,o),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:r,duration:o,inputTimeScale:9e4,dropped:0}}static probe(e,r){if(!e)return!1;const n=as(e,0);let o=n?.length||0;if(ic(e,o))return!1;for(let c=e.length;o<c;o++)if(hh(e,o))return r.log("ADTS sync word found !"),!0;return!1}canParse(e,r){return dh(e,r)}appendFrame(e,r,n){qu(e,this.observer,r,n,e.manifestCodec);const o=Zu(e,r,n,this.basePTS,this.frameIndex);if(o&&o.missing===0)return o}}const sc=(d,e)=>{let r=0,n=5;e+=n;const o=new Uint32Array(1),c=new Uint32Array(1),i=new Uint8Array(1);for(;n>0;){i[0]=d[e];const l=Math.min(n,8),t=8-l;c[0]=4278190080>>>24+t<<t,o[0]=(i[0]&c[0])>>t,r=r?r<<l|o[0]:o[0],e+=1,n-=l}return r};class _h extends Pa{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,r,n,o){super.resetInitSegment(e,r,n,o),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:r,duration:o,inputTimeScale:9e4,dropped:0}}canParse(e,r){return r+64<e.length}appendFrame(e,r,n){const o=oc(e,r,n,this.basePTS,this.frameIndex);if(o!==-1)return{sample:e.samples[e.samples.length-1],length:o,missing:0}}static probe(e){if(!e)return!1;const r=as(e,0);if(!r)return!1;const n=r.length;return e[n]===11&&e[n+1]===119&&Ba(r)!==void 0&&sc(e,n)<16}}function oc(d,e,r,n,o){if(r+8>e.length||e[r]!==11||e[r+1]!==119)return-1;const c=e[r+4]>>6;if(c>=3)return-1;const l=[48e3,44100,32e3][c],t=e[r+4]&63,a=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][t*3+c]*2;if(r+a>e.length)return-1;const u=e[r+6]>>5;let f=0;u===2?f+=2:(u&1&&u!==1&&(f+=2),u&4&&(f+=2));const h=(e[r+6]<<8|e[r+7])>>12-f&1,g=[2,1,2,3,3,4,4,5][u]+h,p=e[r+5]>>3,m=e[r+5]&7,y=new Uint8Array([c<<6|p<<1|m>>2,(m&3)<<6|u<<3|h<<2|t>>4,t<<4&224]),E=1536/l*9e4,C=n+o*E,T=e.subarray(r,r+a);return d.config=y,d.channelCount=g,d.samplerate=l,d.samples.push({unit:T,pts:C}),a}class Mh extends Pa{resetInitSegment(e,r,n,o){super.resetInitSegment(e,r,n,o),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:r,duration:o,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const r=as(e,0);let n=r?.length||0;if(r&&e[n]===11&&e[n+1]===119&&Ba(r)!==void 0&&sc(e,n)<=16)return!1;for(let o=e.length;n<o;n++)if(ic(e,n))return Cr.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,r){return Ph(e,r)}appendFrame(e,r,n){if(this.basePTS!==null)return tc(e,r,n,this.basePTS,this.frameIndex)}}const Fh=/\/emsg[-/]ID3/i;class Nh{constructor(e,r){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=r}resetTimeStamp(){}resetInitSegment(e,r,n,o){const c=this.videoTrack=Gn("video",1),i=this.audioTrack=Gn("audio",1),l=this.txtTrack=Gn("text",1);if(this.id3Track=Gn("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const t=bu(e);if(t.video){const{id:s,timescale:a,codec:u,supplemental:f}=t.video;c.id=s,c.timescale=l.timescale=a,c.codec=u,c.supplemental=f}if(t.audio){const{id:s,timescale:a,codec:u}=t.audio;i.id=s,i.timescale=a,i.codec=u}l.id=vu.text,c.sampleDuration=0,c.duration=i.duration=o}resetContiguity(){this.remainderData=null}static probe(e){return Mf(e)}demux(e,r){this.timeOffset=r;let n=e;const o=this.videoTrack,c=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Sn(this.remainderData,e));const l=$f(n);this.remainderData=l.remainder,o.samples=l.valid||new Uint8Array}else o.samples=n;const i=this.extractID3Track(o,r);return c.samples=il(r,o),{videoTrack:o,audioTrack:this.audioTrack,id3Track:i,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,r=this.videoTrack,n=this.txtTrack;r.samples=this.remainderData||new Uint8Array,this.remainderData=null;const o=this.extractID3Track(r,this.timeOffset);return n.samples=il(e,r),{videoTrack:r,audioTrack:Gn(),id3Track:o,textTrack:Gn()}}extractID3Track(e,r){const n=this.id3Track;if(e.samples.length){const o=ur(e.samples,["emsg"]);o&&o.forEach(c=>{const i=Vf(c);if(Fh.test(i.schemeIdUri)){const l=Gl(i,r);let t=i.eventDuration===4294967295?Number.POSITIVE_INFINITY:i.eventDuration/i.timeScale;t<=.001&&(t=Number.POSITIVE_INFINITY);const s=i.payload;n.samples.push({data:s,len:s.byteLength,dts:l,pts:l,type:mn.emsg,duration:t})}else if(this.config.enableEmsgKLVMetadata&&i.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const l=Gl(i,r);n.samples.push({data:i.payload,len:i.payload.byteLength,dts:l,pts:l,type:mn.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,r,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function Gl(d,e){return vt(d.presentationTime)?d.presentationTime/d.timeScale:e+d.presentationTimeDelta/d.timeScale}class Uh{constructor(e,r,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new Ta(r,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,li.cbc)}decryptAacSample(e,r,n){const o=e[r].unit;if(o.length<=16)return;const c=o.subarray(16,o.length-o.length%16),i=c.buffer.slice(c.byteOffset,c.byteOffset+c.length);this.decryptBuffer(i).then(l=>{const t=new Uint8Array(l);o.set(t,16),this.decrypter.isSync()||this.decryptAacSamples(e,r+1,n)}).catch(n)}decryptAacSamples(e,r,n){for(;;r++){if(r>=e.length){n();return}if(!(e[r].unit.length<32)&&(this.decryptAacSample(e,r,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const r=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(r);let o=0;for(let c=32;c<e.length-16;c+=160,o+=16)n.set(e.subarray(c,c+16),o);return n}getAvcDecryptedUnit(e,r){const n=new Uint8Array(r);let o=0;for(let c=32;c<e.length-16;c+=160,o+=16)e.set(n.subarray(o,o+16),c);return e}decryptAvcSample(e,r,n,o,c){const i=xu(c.data),l=this.getAvcEncryptedData(i);this.decryptBuffer(l.buffer).then(t=>{c.data=this.getAvcDecryptedUnit(i,t),this.decrypter.isSync()||this.decryptAvcSamples(e,r,n+1,o)}).catch(o)}decryptAvcSamples(e,r,n,o){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;r++,n=0){if(r>=e.length){o();return}const c=e[r].units;for(;!(n>=c.length);n++){const i=c[n];if(!(i.data.length<=48||i.type!==1&&i.type!==5)&&(this.decryptAvcSample(e,r,n,o,i),!this.decrypter.isSync()))return}}}}class ac{constructor(){this.VideoSample=null}createVideoSample(e,r,n){return{key:e,frame:!1,pts:r,dts:n,units:[],length:0}}getLastNalUnit(e){var r;let n=this.VideoSample,o;if((!n||n.units.length===0)&&(n=e[e.length-1]),(r=n)!=null&&r.units){const c=n.units;o=c[c.length-1]}return o}pushAccessUnit(e,r){if(e.units.length&&e.frame){if(e.pts===void 0){const n=r.samples,o=n.length;if(o){const c=n[o-1];e.pts=c.pts,e.dts=c.dts}else{r.dropped++;return}}r.samples.push(e)}}parseNALu(e,r,n){const o=r.byteLength;let c=e.naluState||0;const i=c,l=[];let t=0,s,a,u,f=-1,h=0;for(c===-1&&(f=0,h=this.getNALuType(r,0),c=0,t=1);t<o;){if(s=r[t++],!c){c=s?0:1;continue}if(c===1){c=s?0:2;continue}if(!s)c=3;else if(s===1){if(a=t-c-1,f>=0){const A={data:r.subarray(f,a),type:h};l.push(A)}else{const A=this.getLastNalUnit(e.samples);A&&(i&&t<=4-i&&A.state&&(A.data=A.data.subarray(0,A.data.byteLength-i)),a>0&&(A.data=Sn(A.data,r.subarray(0,a)),A.state=0))}t<o?(u=this.getNALuType(r,t),f=t,h=u,c=0):c=-1}else c=0}if(f>=0&&c>=0){const A={data:r.subarray(f,o),type:h,state:c};l.push(A)}if(l.length===0){const A=this.getLastNalUnit(e.samples);A&&(A.data=Sn(A.data,r))}return e.naluState=c,l}}class rs{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,r=this.bytesAvailable,n=e.byteLength-r,o=new Uint8Array(4),c=Math.min(4,r);if(c===0)throw new Error("no bytes available");o.set(e.subarray(n,n+c)),this.word=new DataView(o.buffer).getUint32(0),this.bitsAvailable=c*8,this.bytesAvailable-=c}skipBits(e){let r;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,r=e>>3,e-=r<<3,this.bytesAvailable-=r,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let r=Math.min(this.bitsAvailable,e);const n=this.word>>>32-r;if(e>32&&Cr.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=r,this.bitsAvailable>0)this.word<<=r;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return r=e-r,r>0&&this.bitsAvailable?n<<r|this.readBits(r):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class Gh extends ac{parsePES(e,r,n,o){const c=this.parseNALu(e,n.data,o);let i=this.VideoSample,l,t=!1;n.data=null,i&&c.length&&!e.audFound&&(this.pushAccessUnit(i,e),i=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),c.forEach(s=>{var a,u;switch(s.type){case 1:{let g=!1;l=!0;const p=s.data;if(t&&p.length>4){const m=this.readSliceType(p);(m===2||m===4||m===7||m===9)&&(g=!0)}if(g){var f;(f=i)!=null&&f.frame&&!i.key&&(this.pushAccessUnit(i,e),i=this.VideoSample=null)}i||(i=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),i.frame=!0,i.key=g;break}case 5:l=!0,(a=i)!=null&&a.frame&&!i.key&&(this.pushAccessUnit(i,e),i=this.VideoSample=null),i||(i=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),i.key=!0,i.frame=!0;break;case 6:{l=!0,Ea(s.data,1,n.pts,r.samples);break}case 7:{var h,A;l=!0,t=!0;const g=s.data,p=this.readSPS(g);if(!e.sps||e.width!==p.width||e.height!==p.height||((h=e.pixelRatio)==null?void 0:h[0])!==p.pixelRatio[0]||((A=e.pixelRatio)==null?void 0:A[1])!==p.pixelRatio[1]){e.width=p.width,e.height=p.height,e.pixelRatio=p.pixelRatio,e.sps=[g];const m=g.subarray(1,4);let y="avc1.";for(let E=0;E<3;E++){let C=m[E].toString(16);C.length<2&&(C="0"+C),y+=C}e.codec=y}break}case 8:l=!0,e.pps=[s.data];break;case 9:l=!0,e.audFound=!0,(u=i)!=null&&u.frame&&(this.pushAccessUnit(i,e),i=null),i||(i=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:l=!0;break;default:l=!1;break}i&&l&&i.units.push(s)}),o&&i&&(this.pushAccessUnit(i,e),this.VideoSample=null)}getNALuType(e,r){return e[r]&31}readSliceType(e){const r=new rs(e);return r.readUByte(),r.readUEG(),r.readUEG()}skipScalingList(e,r){let n=8,o=8,c;for(let i=0;i<e;i++)o!==0&&(c=r.readEG(),o=(n+c+256)%256),n=o===0?n:o}readSPS(e){const r=new rs(e);let n=0,o=0,c=0,i=0,l,t,s;const a=r.readUByte.bind(r),u=r.readBits.bind(r),f=r.readUEG.bind(r),h=r.readBoolean.bind(r),A=r.skipBits.bind(r),g=r.skipEG.bind(r),p=r.skipUEG.bind(r),m=this.skipScalingList.bind(this);a();const y=a();if(u(5),A(3),a(),p(),y===100||y===110||y===122||y===244||y===44||y===83||y===86||y===118||y===128){const L=f();if(L===3&&A(1),p(),p(),A(1),h())for(t=L!==3?8:12,s=0;s<t;s++)h()&&(s<6?m(16,r):m(64,r))}p();const E=f();if(E===0)f();else if(E===1)for(A(1),g(),g(),l=f(),s=0;s<l;s++)g();p(),A(1);const C=f(),T=f(),w=u(1);w===0&&A(1),A(1),h()&&(n=f(),o=f(),c=f(),i=f());let I=[1,1];if(h()&&h())switch(a()){case 1:I=[1,1];break;case 2:I=[12,11];break;case 3:I=[10,11];break;case 4:I=[16,11];break;case 5:I=[40,33];break;case 6:I=[24,11];break;case 7:I=[20,11];break;case 8:I=[32,11];break;case 9:I=[80,33];break;case 10:I=[18,11];break;case 11:I=[15,11];break;case 12:I=[64,33];break;case 13:I=[160,99];break;case 14:I=[4,3];break;case 15:I=[3,2];break;case 16:I=[2,1];break;case 255:{I=[a()<<8|a(),a()<<8|a()];break}}return{width:Math.ceil((C+1)*16-n*2-o*2),height:(2-w)*(T+1)*16-(w?2:4)*(c+i),pixelRatio:I}}}class Qh extends ac{constructor(...e){super(...e),this.initVPS=null}parsePES(e,r,n,o){const c=this.parseNALu(e,n.data,o);let i=this.VideoSample,l,t=!1;n.data=null,i&&c.length&&!e.audFound&&(this.pushAccessUnit(i,e),i=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),c.forEach(s=>{var a,u;switch(s.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:i||(i=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),i.frame=!0,l=!0;break;case 16:case 17:case 18:case 21:if(l=!0,t){var f;(f=i)!=null&&f.frame&&!i.key&&(this.pushAccessUnit(i,e),i=this.VideoSample=null)}i||(i=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),i.key=!0,i.frame=!0;break;case 19:case 20:l=!0,(a=i)!=null&&a.frame&&!i.key&&(this.pushAccessUnit(i,e),i=this.VideoSample=null),i||(i=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),i.key=!0,i.frame=!0;break;case 39:l=!0,Ea(s.data,2,n.pts,r.samples);break;case 32:l=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=wr(e.params,this.readVPS(s.data)),this.initVPS=s.data),e.vps=[s.data];break;case 33:if(l=!0,t=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],s.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const h=this.readSPS(s.data);e.width=h.width,e.height=h.height,e.pixelRatio=h.pixelRatio,e.codec=h.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const A in h.params)e.params[A]=h.params[A]}this.pushParameterSet(e.sps,s.data,e.vps),i||(i=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),i.key=!0;break;case 34:if(l=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const h=this.readPPS(s.data);for(const A in h)e.params[A]=h[A]}this.pushParameterSet(e.pps,s.data,e.vps)}break;case 35:l=!0,e.audFound=!0,(u=i)!=null&&u.frame&&(this.pushAccessUnit(i,e),i=null),i||(i=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:l=!1;break}i&&l&&i.units.push(s)}),o&&i&&(this.pushAccessUnit(i,e),this.VideoSample=null)}pushParameterSet(e,r,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(r)}getNALuType(e,r){return(e[r]&126)>>>1}ebsp2rbsp(e){const r=new Uint8Array(e.byteLength);let n=0;for(let o=0;o<e.byteLength;o++)o>=2&&e[o]===3&&e[o-1]===0&&e[o-2]===0||(r[n]=e[o],n++);return new Uint8Array(r.buffer,0,n)}pushAccessUnit(e,r){super.pushAccessUnit(e,r),this.initVPS&&(this.initVPS=null)}readVPS(e){const r=new rs(e);r.readUByte(),r.readUByte(),r.readBits(4),r.skipBits(2),r.readBits(6);const n=r.readBits(3),o=r.readBoolean();return{numTemporalLayers:n+1,temporalIdNested:o}}readSPS(e){const r=new rs(this.ebsp2rbsp(e));r.readUByte(),r.readUByte(),r.readBits(4);const n=r.readBits(3);r.readBoolean();const o=r.readBits(2),c=r.readBoolean(),i=r.readBits(5),l=r.readUByte(),t=r.readUByte(),s=r.readUByte(),a=r.readUByte(),u=r.readUByte(),f=r.readUByte(),h=r.readUByte(),A=r.readUByte(),g=r.readUByte(),p=r.readUByte(),m=r.readUByte(),y=[],E=[];for(let st=0;st<n;st++)y.push(r.readBoolean()),E.push(r.readBoolean());if(n>0)for(let st=n;st<8;st++)r.readBits(2);for(let st=0;st<n;st++)y[st]&&(r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte(),r.readUByte()),E[st]&&r.readUByte();r.readUEG();const C=r.readUEG();C==3&&r.skipBits(1);const T=r.readUEG(),w=r.readUEG(),I=r.readBoolean();let L=0,R=0,B=0,P=0;I&&(L+=r.readUEG(),R+=r.readUEG(),B+=r.readUEG(),P+=r.readUEG());const N=r.readUEG(),U=r.readUEG(),G=r.readUEG(),W=r.readBoolean();for(let st=W?0:n;st<=n;st++)r.skipUEG(),r.skipUEG(),r.skipUEG();if(r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG(),r.readBoolean()&&r.readBoolean())for(let ht=0;ht<4;ht++)for(let _t=0;_t<(ht===3?2:6);_t++)if(!r.readBoolean())r.readUEG();else{const Gt=Math.min(64,1<<4+(ht<<1));ht>1&&r.readEG();for(let Pt=0;Pt<Gt;Pt++)r.readEG()}r.readBoolean(),r.readBoolean(),r.readBoolean()&&(r.readUByte(),r.skipUEG(),r.skipUEG(),r.readBoolean());const Q=r.readUEG();let Z=0;for(let st=0;st<Q;st++){let ht=!1;if(st!==0&&(ht=r.readBoolean()),ht){st===Q&&r.readUEG(),r.readBoolean(),r.readUEG();let _t=0;for(let Ht=0;Ht<=Z;Ht++){const Gt=r.readBoolean();let Pt=!1;Gt||(Pt=r.readBoolean()),(Gt||Pt)&&_t++}Z=_t}else{const _t=r.readUEG(),Ht=r.readUEG();Z=_t+Ht;for(let Gt=0;Gt<_t;Gt++)r.readUEG(),r.readBoolean();for(let Gt=0;Gt<Ht;Gt++)r.readUEG(),r.readBoolean()}}if(r.readBoolean()){const st=r.readUEG();for(let ht=0;ht<st;ht++){for(let _t=0;_t<G+4;_t++)r.readBits(1);r.readBits(1)}}let q=0,te=1,fe=1,Ee=!0,Ae=1,Ce=0;r.readBoolean(),r.readBoolean();let Oe=!1;if(r.readBoolean()){if(r.readBoolean()){const It=r.readUByte(),Zt=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Mt=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];It>0&&It<16?(te=Zt[It-1],fe=Mt[It-1]):It===255&&(te=r.readBits(16),fe=r.readBits(16))}if(r.readBoolean()&&r.readBoolean(),r.readBoolean()&&(r.readBits(3),r.readBoolean(),r.readBoolean()&&(r.readUByte(),r.readUByte(),r.readUByte())),r.readBoolean()&&(r.readUEG(),r.readUEG()),r.readBoolean(),r.readBoolean(),r.readBoolean(),Oe=r.readBoolean(),Oe&&(r.skipUEG(),r.skipUEG(),r.skipUEG(),r.skipUEG()),r.readBoolean()&&(Ae=r.readBits(32),Ce=r.readBits(32),r.readBoolean()&&r.readUEG(),r.readBoolean())){const Mt=r.readBoolean(),Fe=r.readBoolean();let Ze=!1;(Mt||Fe)&&(Ze=r.readBoolean(),Ze&&(r.readUByte(),r.readBits(5),r.readBoolean(),r.readBits(5)),r.readBits(4),r.readBits(4),Ze&&r.readBits(4),r.readBits(5),r.readBits(5),r.readBits(5));for(let qe=0;qe<=n;qe++){Ee=r.readBoolean();const ft=Ee||r.readBoolean();let be=!1;ft?r.readEG():be=r.readBoolean();const Xe=be?1:r.readUEG()+1;if(Mt)for(let at=0;at<Xe;at++)r.readUEG(),r.readUEG(),Ze&&(r.readUEG(),r.readUEG()),r.skipBits(1);if(Fe)for(let at=0;at<Xe;at++)r.readUEG(),r.readUEG(),Ze&&(r.readUEG(),r.readUEG()),r.skipBits(1)}}r.readBoolean()&&(r.readBoolean(),r.readBoolean(),r.readBoolean(),q=r.readUEG())}let Be=T,Ge=w;if(I){let st=1,ht=1;C===1?st=ht=2:C==2&&(st=2),Be=T-st*R-st*L,Ge=w-ht*P-ht*B}const Ve=o?["A","B","C"][o]:"",$e=l<<24|t<<16|s<<8|a;let it=0;for(let st=0;st<32;st++)it=(it|($e>>st&1)<<31-st)>>>0;let yt=it.toString(16);return i===1&&yt==="2"&&(yt="6"),{codecString:`hvc1.${Ve}${i}.${yt}.${c?"H":"L"}${m}.B0`,params:{general_tier_flag:c,general_profile_idc:i,general_profile_space:o,general_profile_compatibility_flags:[l,t,s,a],general_constraint_indicator_flags:[u,f,h,A,g,p],general_level_idc:m,bit_depth:N+8,bit_depth_luma_minus8:N,bit_depth_chroma_minus8:U,min_spatial_segmentation_idc:q,chroma_format_idc:C,frame_rate:{fixed:Ee,fps:Ce/Ae}},width:Be,height:Ge,pixelRatio:[te,fe]}}readPPS(e){const r=new rs(this.ebsp2rbsp(e));r.readUByte(),r.readUByte(),r.skipUEG(),r.skipUEG(),r.skipBits(2),r.skipBits(3),r.skipBits(2),r.skipUEG(),r.skipUEG(),r.skipEG(),r.skipBits(2),r.readBoolean()&&r.skipUEG(),r.skipEG(),r.skipEG(),r.skipBits(4);const o=r.readBoolean(),c=r.readBoolean();let i=1;return c&&o?i=0:c?i=3:o&&(i=2),{parallelismType:i}}matchSPS(e,r){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,r).substr(3)}}const Jr=188;class oi{constructor(e,r,n,o){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=r,this.typeSupported=n,this.logger=o,this.videoParser=null}static probe(e,r){const n=oi.syncOffset(e);return n>0&&r.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const r=e.length;let n=Math.min(Jr*5,r-Jr)+1,o=0;for(;o<n;){let c=!1,i=-1,l=0;for(let t=o;t<r;t+=Jr)if(e[t]===71&&(r-t===Jr||e[t+Jr]===71)){if(l++,i===-1&&(i=t,i!==0&&(n=Math.min(i+Jr*99,e.length-Jr)+1)),c||(c=la(e,t)===0),c&&l>1&&(i===0&&l>2||t+Jr>n))return i}else{if(l)return-1;break}o++}return-1}static createTrack(e,r){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:vu[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?r:void 0}}resetInitSegment(e,r,n,o){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=oi.createTrack("video"),this._videoTrack.duration=o,this._audioTrack=oi.createTrack("audio",o),this._id3Track=oi.createTrack("id3"),this._txtTrack=oi.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=r,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:r,_id3Track:n}=this;e&&(e.pesData=null),r&&(r.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,r,n=!1,o=!1){n||(this.sampleAes=null);let c;const i=this._videoTrack,l=this._audioTrack,t=this._id3Track,s=this._txtTrack;let a=i.pid,u=i.pesData,f=l.pid,h=t.pid,A=l.pesData,g=t.pesData,p=null,m=this.pmtParsed,y=this._pmtId,E=e.length;if(this.remainderData&&(e=Sn(this.remainderData,e),E=e.length,this.remainderData=null),E<Jr&&!o)return this.remainderData=e,{audioTrack:l,videoTrack:i,id3Track:t,textTrack:s};const C=Math.max(0,oi.syncOffset(e));E-=(E-C)%Jr,E<e.byteLength&&!o&&(this.remainderData=new Uint8Array(e.buffer,E,e.buffer.byteLength-E));let T=0;for(let I=C;I<E;I+=Jr)if(e[I]===71){const L=!!(e[I+1]&64),R=la(e,I),B=(e[I+3]&48)>>4;let P;if(B>1){if(P=I+5+e[I+4],P===I+Jr)continue}else P=I+4;switch(R){case a:L&&(u&&(c=ki(u,this.logger))&&(this.readyVideoParser(i.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(i,s,c,!1)),u={data:[],size:0}),u&&(u.data.push(e.subarray(P,I+Jr)),u.size+=I+Jr-P);break;case f:if(L){if(A&&(c=ki(A,this.logger)))switch(l.segmentCodec){case"aac":this.parseAACPES(l,c);break;case"mp3":this.parseMPEGPES(l,c);break;case"ac3":this.parseAC3PES(l,c);break}A={data:[],size:0}}A&&(A.data.push(e.subarray(P,I+Jr)),A.size+=I+Jr-P);break;case h:L&&(g&&(c=ki(g,this.logger))&&this.parseID3PES(t,c),g={data:[],size:0}),g&&(g.data.push(e.subarray(P,I+Jr)),g.size+=I+Jr-P);break;case 0:L&&(P+=e[P]+1),y=this._pmtId=$h(e,P);break;case y:{L&&(P+=e[P]+1);const N=Wh(e,P,this.typeSupported,n,this.observer,this.logger);a=N.videoPid,a>0&&(i.pid=a,i.segmentCodec=N.segmentVideoCodec),f=N.audioPid,f>0&&(l.pid=f,l.segmentCodec=N.segmentAudioCodec),h=N.id3Pid,h>0&&(t.pid=h),p!==null&&!m&&(this.logger.warn(`MPEG-TS PMT found at ${I} after unknown PID '${p}'. Backtracking to sync byte @${C} to parse all TS packets.`),p=null,I=C-188),m=this.pmtParsed=!0;break}case 17:case 8191:break;default:p=R;break}}else T++;T>0&&ua(this.observer,new Error(`Found ${T} TS packet/s that do not start with 0x47`),void 0,this.logger),i.pesData=u,l.pesData=A,t.pesData=g;const w={audioTrack:l,videoTrack:i,id3Track:t,textTrack:s};return o&&this.extractRemainingSamples(w),w}flush(){const{remainderData:e}=this;this.remainderData=null;let r;return e?r=this.demux(e,-1,!1,!0):r={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(r),this.sampleAes?this.decrypt(r,this.sampleAes):r}extractRemainingSamples(e){const{audioTrack:r,videoTrack:n,id3Track:o,textTrack:c}=e,i=n.pesData,l=r.pesData,t=o.pesData;let s;if(i&&(s=ki(i,this.logger))?(this.readyVideoParser(n.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(n,c,s,!0),n.pesData=null)):n.pesData=i,l&&(s=ki(l,this.logger))){switch(r.segmentCodec){case"aac":this.parseAACPES(r,s);break;case"mp3":this.parseMPEGPES(r,s);break;case"ac3":this.parseAC3PES(r,s);break}r.pesData=null}else l!=null&&l.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=l;t&&(s=ki(t,this.logger))?(this.parseID3PES(o,s),o.pesData=null):o.pesData=t}demuxSampleAes(e,r,n){const o=this.demux(e,n,!0,!this.config.progressive),c=this.sampleAes=new Uh(this.observer,this.config,r);return this.decrypt(o,c)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new Gh:e==="hevc"&&(this.videoParser=new Qh))}decrypt(e,r){return new Promise(n=>{const{audioTrack:o,videoTrack:c}=e;o.samples&&o.segmentCodec==="aac"?r.decryptAacSamples(o.samples,0,()=>{c.samples?r.decryptAvcSamples(c.samples,0,0,()=>{n(e)}):n(e)}):c.samples&&r.decryptAvcSamples(c.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,r){let n=0;const o=this.aacOverFlow;let c=r.data;if(o){this.aacOverFlow=null;const u=o.missing,f=o.sample.unit.byteLength;if(u===-1)c=Sn(o.sample.unit,c);else{const h=f-u;o.sample.unit.set(c.subarray(0,u),h),e.samples.push(o.sample),n=o.missing}}let i,l;for(i=n,l=c.length;i<l-1&&!lo(c,i);i++);if(i!==n){let u;const f=i<l-1;if(f?u=`AAC PES did not start with ADTS header,offset:${i}`:u="No ADTS header found in AAC PES",ua(this.observer,new Error(u),f,this.logger),!f)return}qu(e,this.observer,c,i,this.audioCodec);let t;if(r.pts!==void 0)t=r.pts;else if(o){const u=Xu(e.samplerate);t=o.sample.pts+u}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let s=0,a;for(;i<l;)if(a=Zu(e,c,i,t,s),i+=a.length,a.missing){this.aacOverFlow=a;break}else for(s++;i<l-1&&!lo(c,i);i++);}parseMPEGPES(e,r){const n=r.data,o=n.length;let c=0,i=0;const l=r.pts;if(l===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;i<o;)if(nc(n,i)){const t=tc(e,n,i,l,c);if(t)i+=t.length,c++;else break}else i++}parseAC3PES(e,r){{const n=r.data,o=r.pts;if(o===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const c=n.length;let i=0,l=0,t;for(;l<c&&(t=oc(e,n,l,o,i++))>0;)l+=t}}parseID3PES(e,r){if(r.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=wr({},r,{type:this._videoTrack?mn.emsg:mn.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function la(d,e){return((d[e+1]&31)<<8)+d[e+2]}function $h(d,e){return(d[e+10]&31)<<8|d[e+11]}function Wh(d,e,r,n,o,c){const i={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},l=(d[e+1]&15)<<8|d[e+2],t=e+3+l-4,s=(d[e+10]&15)<<8|d[e+11];for(e+=12+s;e<t;){const a=la(d,e),u=(d[e+3]&15)<<8|d[e+4];switch(d[e]){case 207:if(!n){Fo("ADTS AAC",c);break}case 15:i.audioPid===-1&&(i.audioPid=a);break;case 21:i.id3Pid===-1&&(i.id3Pid=a);break;case 219:if(!n){Fo("H.264",c);break}case 27:i.videoPid===-1&&(i.videoPid=a);break;case 3:case 4:!r.mpeg&&!r.mp3?c.log("MPEG audio found, not supported in this browser"):i.audioPid===-1&&(i.audioPid=a,i.segmentAudioCodec="mp3");break;case 193:if(!n){Fo("AC-3",c);break}case 129:r.ac3?i.audioPid===-1&&(i.audioPid=a,i.segmentAudioCodec="ac3"):c.log("AC-3 audio found, not supported in this browser");break;case 6:if(i.audioPid===-1&&u>0){let f=e+5,h=u;for(;h>2;){switch(d[f]){case 106:r.ac3!==!0?c.log("AC-3 audio found, not supported in this browser for now"):(i.audioPid=a,i.segmentAudioCodec="ac3");break}const g=d[f+1]+2;f+=g,h-=g}}break;case 194:case 135:return ua(o,new Error("Unsupported EC-3 in M2TS found"),void 0,c),i;case 36:i.videoPid===-1&&(i.videoPid=a,i.segmentVideoCodec="hevc",c.log("HEVC in M2TS found"));break}e+=u+5}return i}function ua(d,e,r,n){n.warn(`parsing error: ${e.message}`),d.emit(D.ERROR,D.ERROR,{type:Ot.MEDIA_ERROR,details:ve.FRAG_PARSING_ERROR,fatal:!1,levelRetry:r,error:e,reason:e.message})}function Fo(d,e){e.log(`${d} with AES-128-CBC encryption found in unencrypted stream`)}function ki(d,e){let r=0,n,o,c,i,l;const t=d.data;if(!d||d.size===0)return null;for(;t[0].length<19&&t.length>1;)t[0]=Sn(t[0],t[1]),t.splice(1,1);if(n=t[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(o=(n[4]<<8)+n[5],o&&o>d.size-6)return null;const a=n[7];a&192&&(i=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,a&64?(l=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,i-l>60*9e4&&(e.warn(`${Math.round((i-l)/9e4)}s delta between PTS and DTS, align them`),i=l)):l=i),c=n[8];let u=c+9;if(d.size<=u)return null;d.size-=u;const f=new Uint8Array(d.size);for(let h=0,A=t.length;h<A;h++){n=t[h];let g=n.byteLength;if(u)if(u>g){u-=g;continue}else n=n.subarray(u),g-=u,u=0;f.set(n,r),r+=g}return o&&(o-=c+3),{data:f,pts:i,dts:l,len:o}}return null}class Vh{static getSilentFrame(e,r){switch(e){case"mp4a.40.2":if(r===1)return new Uint8Array([0,200,0,128,35,128]);if(r===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(r===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(r===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(r===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(r===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(r===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(r===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const ni=Math.pow(2,32)-1;class pe{static init(){pe.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in pe.types)pe.types.hasOwnProperty(e)&&(pe.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);pe.HDLR_TYPES={video:r,audio:n};const o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),c=new Uint8Array([0,0,0,0,0,0,0,0]);pe.STTS=pe.STSC=pe.STCO=c,pe.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),pe.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),pe.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),pe.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const i=new Uint8Array([105,115,111,109]),l=new Uint8Array([97,118,99,49]),t=new Uint8Array([0,0,0,1]);pe.FTYP=pe.box(pe.types.ftyp,i,t,i,l),pe.DINF=pe.box(pe.types.dinf,pe.box(pe.types.dref,o))}static box(e,...r){let n=8,o=r.length;const c=o;for(;o--;)n+=r[o].byteLength;const i=new Uint8Array(n);for(i[0]=n>>24&255,i[1]=n>>16&255,i[2]=n>>8&255,i[3]=n&255,i.set(e,4),o=0,n=8;o<c;o++)i.set(r[o],n),n+=r[o].byteLength;return i}static hdlr(e){return pe.box(pe.types.hdlr,pe.HDLR_TYPES[e])}static mdat(e){return pe.box(pe.types.mdat,e)}static mdhd(e,r){r*=e;const n=Math.floor(r/(ni+1)),o=Math.floor(r%(ni+1));return pe.box(pe.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,o>>24,o>>16&255,o>>8&255,o&255,85,196,0,0]))}static mdia(e){return pe.box(pe.types.mdia,pe.mdhd(e.timescale||0,e.duration||0),pe.hdlr(e.type),pe.minf(e))}static mfhd(e){return pe.box(pe.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?pe.box(pe.types.minf,pe.box(pe.types.smhd,pe.SMHD),pe.DINF,pe.stbl(e)):pe.box(pe.types.minf,pe.box(pe.types.vmhd,pe.VMHD),pe.DINF,pe.stbl(e))}static moof(e,r,n){return pe.box(pe.types.moof,pe.mfhd(e),pe.traf(n,r))}static moov(e){let r=e.length;const n=[];for(;r--;)n[r]=pe.trak(e[r]);return pe.box.apply(null,[pe.types.moov,pe.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(pe.mvex(e)))}static mvex(e){let r=e.length;const n=[];for(;r--;)n[r]=pe.trex(e[r]);return pe.box.apply(null,[pe.types.mvex,...n])}static mvhd(e,r){r*=e;const n=Math.floor(r/(ni+1)),o=Math.floor(r%(ni+1)),c=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,o>>24,o>>16&255,o>>8&255,o&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return pe.box(pe.types.mvhd,c)}static sdtp(e){const r=e.samples||[],n=new Uint8Array(4+r.length);let o,c;for(o=0;o<r.length;o++)c=r[o].flags,n[o+4]=c.dependsOn<<4|c.isDependedOn<<2|c.hasRedundancy;return pe.box(pe.types.sdtp,n)}static stbl(e){return pe.box(pe.types.stbl,pe.stsd(e),pe.box(pe.types.stts,pe.STTS),pe.box(pe.types.stsc,pe.STSC),pe.box(pe.types.stsz,pe.STSZ),pe.box(pe.types.stco,pe.STCO))}static avc1(e){let r=[],n=[],o,c,i;for(o=0;o<e.sps.length;o++)c=e.sps[o],i=c.byteLength,r.push(i>>>8&255),r.push(i&255),r=r.concat(Array.prototype.slice.call(c));for(o=0;o<e.pps.length;o++)c=e.pps[o],i=c.byteLength,n.push(i>>>8&255),n.push(i&255),n=n.concat(Array.prototype.slice.call(c));const l=pe.box(pe.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(n))),t=e.width,s=e.height,a=e.pixelRatio[0],u=e.pixelRatio[1];return pe.box(pe.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t>>8&255,t&255,s>>8&255,s&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l,pe.box(pe.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),pe.box(pe.types.pasp,new Uint8Array([a>>24,a>>16&255,a>>8&255,a&255,u>>24,u>>16&255,u>>8&255,u&255])))}static esds(e){const r=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...r,6,1,2])}static audioStsd(e){const r=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,r>>8&255,r&255,0,0])}static mp4a(e){return pe.box(pe.types.mp4a,pe.audioStsd(e),pe.box(pe.types.esds,pe.esds(e)))}static mp3(e){return pe.box(pe.types[".mp3"],pe.audioStsd(e))}static ac3(e){return pe.box(pe.types["ac-3"],pe.audioStsd(e),pe.box(pe.types.dac3,e.config))}static stsd(e){const{segmentCodec:r}=e;if(e.type==="audio"){if(r==="aac")return pe.box(pe.types.stsd,pe.STSD,pe.mp4a(e));if(r==="ac3"&&e.config)return pe.box(pe.types.stsd,pe.STSD,pe.ac3(e));if(r==="mp3"&&e.codec==="mp3")return pe.box(pe.types.stsd,pe.STSD,pe.mp3(e))}else if(e.pps&&e.sps){if(r==="avc")return pe.box(pe.types.stsd,pe.STSD,pe.avc1(e));if(r==="hevc"&&e.vps)return pe.box(pe.types.stsd,pe.STSD,pe.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${r}/${e.codec})`)}static tkhd(e){const r=e.id,n=(e.duration||0)*(e.timescale||0),o=e.width||0,c=e.height||0,i=Math.floor(n/(ni+1)),l=Math.floor(n%(ni+1));return pe.box(pe.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,r&255,0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255,l>>24,l>>16&255,l>>8&255,l&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,o&255,0,0,c>>8&255,c&255,0,0]))}static traf(e,r){const n=pe.sdtp(e),o=e.id,c=Math.floor(r/(ni+1)),i=Math.floor(r%(ni+1));return pe.box(pe.types.traf,pe.box(pe.types.tfhd,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255])),pe.box(pe.types.tfdt,new Uint8Array([1,0,0,0,c>>24,c>>16&255,c>>8&255,c&255,i>>24,i>>16&255,i>>8&255,i&255])),pe.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,pe.box(pe.types.trak,pe.tkhd(e),pe.mdia(e))}static trex(e){const r=e.id;return pe.box(pe.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,r){const n=e.samples||[],o=n.length,c=12+16*o,i=new Uint8Array(c);let l,t,s,a,u,f;for(r+=8+c,i.set([e.type==="video"?1:0,0,15,1,o>>>24&255,o>>>16&255,o>>>8&255,o&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255],0),l=0;l<o;l++)t=n[l],s=t.duration,a=t.size,u=t.flags,f=t.cts,i.set([s>>>24&255,s>>>16&255,s>>>8&255,s&255,a>>>24&255,a>>>16&255,a>>>8&255,a&255,u.isLeading<<2|u.dependsOn,u.isDependedOn<<6|u.hasRedundancy<<4|u.paddingValue<<1|u.isNonSync,u.degradPrio&61440,u.degradPrio&15,f>>>24&255,f>>>16&255,f>>>8&255,f&255],12+16*l);return pe.box(pe.types.trun,i)}static initSegment(e){pe.types||pe.init();const r=pe.moov(e);return Sn(pe.FTYP,r)}static hvc1(e){const r=e.params,n=[e.vps,e.sps,e.pps],o=4,c=new Uint8Array([1,r.general_profile_space<<6|(r.general_tier_flag?32:0)|r.general_profile_idc,r.general_profile_compatibility_flags[0],r.general_profile_compatibility_flags[1],r.general_profile_compatibility_flags[2],r.general_profile_compatibility_flags[3],r.general_constraint_indicator_flags[0],r.general_constraint_indicator_flags[1],r.general_constraint_indicator_flags[2],r.general_constraint_indicator_flags[3],r.general_constraint_indicator_flags[4],r.general_constraint_indicator_flags[5],r.general_level_idc,240|r.min_spatial_segmentation_idc>>8,255&r.min_spatial_segmentation_idc,252|r.parallelismType,252|r.chroma_format_idc,248|r.bit_depth_luma_minus8,248|r.bit_depth_chroma_minus8,0,parseInt(r.frame_rate.fps),o-1|r.temporal_id_nested<<2|r.num_temporal_layers<<3|(r.frame_rate.fixed?64:0),n.length]);let i=c.length;for(let A=0;A<n.length;A+=1){i+=3;for(let g=0;g<n[A].length;g+=1)i+=2+n[A][g].length}const l=new Uint8Array(i);l.set(c,0),i=c.length;const t=n.length-1;for(let A=0;A<n.length;A+=1){l.set(new Uint8Array([32+A|(A===t?128:0),0,n[A].length]),i),i+=3;for(let g=0;g<n[A].length;g+=1)l.set(new Uint8Array([n[A][g].length>>8,n[A][g].length&255]),i),i+=2,l.set(n[A][g],i),i+=n[A][g].length}const s=pe.box(pe.types.hvcC,l),a=e.width,u=e.height,f=e.pixelRatio[0],h=e.pixelRatio[1];return pe.box(pe.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>8&255,a&255,u>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,pe.box(pe.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),pe.box(pe.types.pasp,new Uint8Array([f>>24,f>>16&255,f>>8&255,f&255,h>>24,h>>16&255,h>>8&255,h&255])))}}pe.types=void 0;pe.HDLR_TYPES=void 0;pe.STTS=void 0;pe.STSC=void 0;pe.STCO=void 0;pe.STSZ=void 0;pe.VMHD=void 0;pe.SMHD=void 0;pe.STSD=void 0;pe.FTYP=void 0;pe.DINF=void 0;const lc=9e4;function _a(d,e,r=1,n=!1){const o=d*e*r;return n?Math.round(o):o}function Yh(d,e,r=1,n=!1){return _a(d,e,1/r,n)}function Ji(d,e=!1){return _a(d,1e3,1/lc,e)}function Hh(d,e=1){return _a(d,lc,1/e)}const jh=10*1e3,Kh=1024,zh=1152,qh=1536;let Di=null,No=null;function Ql(d,e,r,n){return{duration:e,size:r,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:d?2:1,isNonSync:d?0:1}}}class zs extends wn{constructor(e,r,n,o){if(super("mp4-remuxer",o),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=r,this.typeSupported=n,this.ISGenerated=!1,Di===null){const i=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Di=i?parseInt(i[1]):0}if(No===null){const c=navigator.userAgent.match(/Safari\/(\d+)/i);No=c?parseInt(c[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.log("initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let r=!1;const n=e[0].pts,o=e.reduce((c,i)=>{let l=i.pts,t=l-c;return t<-4294967296&&(r=!0,l=Tn(l,n),t=l-c),t>0?c:l},n);return r&&this.debug("PTS rollover detected"),o}remux(e,r,n,o,c,i,l,t){let s,a,u,f,h,A,g=c,p=c;const m=e.pid>-1,y=r.pid>-1,E=r.samples.length,C=e.samples.length>0,T=l&&E>0||E>1;if((!m||C)&&(!y||T)||this.ISGenerated||l){if(this.ISGenerated){var I,L,R,B;const G=this.videoTrackConfig;(G&&(r.width!==G.width||r.height!==G.height||((I=r.pixelRatio)==null?void 0:I[0])!==((L=G.pixelRatio)==null?void 0:L[0])||((R=r.pixelRatio)==null?void 0:R[1])!==((B=G.pixelRatio)==null?void 0:B[1]))||!G&&T||this.nextAudioTs===null&&C)&&this.resetInitSegment()}this.ISGenerated||(u=this.generateIS(e,r,c,i));const P=this.isVideoContiguous;let N=-1,U;if(T&&(N=Xh(r.samples),!P&&this.config.forceKeyFrameOnDiscontinuity))if(A=!0,N>0){this.warn(`Dropped ${N} out of ${E} video samples due to a missing keyframe`);const G=this.getVideoStartPts(r.samples);r.samples=r.samples.slice(N),r.dropped+=N,p+=(r.samples[0].pts-G)/r.inputTimeScale,U=p}else N===-1&&(this.warn(`No keyframe found out of ${E} video samples`),A=!1);if(this.ISGenerated){if(C&&T){const G=this.getVideoStartPts(r.samples),K=(Tn(e.samples[0].pts,G)-G)/r.inputTimeScale;g+=Math.max(0,K),p+=Math.max(0,-K)}if(C){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),u=this.generateIS(e,r,c,i)),a=this.remuxAudio(e,g,this.isAudioContiguous,i,y||T||t===Rt.AUDIO?p:void 0),T){const G=a?a.endPTS-a.startPTS:0;r.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),u=this.generateIS(e,r,c,i)),s=this.remuxVideo(r,p,P,G)}}else T&&(s=this.remuxVideo(r,p,P,0));s&&(s.firstKeyFrame=N,s.independent=N!==-1,s.firstKeyFramePTS=U)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(h=uc(n,c,this._initPTS,this._initDTS)),o.samples.length&&(f=cc(o,c,this._initPTS))),{audio:a,video:s,initSegment:u,independent:A,text:f,id3:h}}generateIS(e,r,n,o){const c=e.samples,i=r.samples,l=this.typeSupported,t={},s=this._initPTS;let a=!s||o,u="audio/mp4",f,h,A,g=-1;if(a&&(f=h=1/0),e.config&&c.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":l.mpeg?(u="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}t.audio={id:"audio",container:u,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&l.mpeg?new Uint8Array(0):pe.initSegment([e]),metadata:{channelCount:e.channelCount}},a&&(g=e.id,A=e.inputTimeScale,!s||A!==s.timescale?f=h=c[0].pts-Math.round(A*n):a=!1)}if(r.sps&&r.pps&&i.length){if(r.timescale=r.inputTimeScale,t.video={id:"main",container:"video/mp4",codec:r.codec,initSegment:pe.initSegment([r]),metadata:{width:r.width,height:r.height}},a)if(g=r.id,A=r.inputTimeScale,!s||A!==s.timescale){const p=this.getVideoStartPts(i),m=Math.round(A*n);h=Math.min(h,Tn(i[0].dts,p)-m),f=Math.min(f,p-m)}else a=!1;this.videoTrackConfig={width:r.width,height:r.height,pixelRatio:r.pixelRatio}}if(Object.keys(t).length)return this.ISGenerated=!0,a?(s&&this.warn(`Timestamps at playlist time: ${o?"":"~"}${n} ${f/A} != initPTS: ${s.baseTime/s.timescale} (${s.baseTime}/${s.timescale}) trackId: ${s.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${f/A} (${f}/${A}) trackId: ${g}`),this._initPTS={baseTime:f,timescale:A,trackId:g},this._initDTS={baseTime:h,timescale:A,trackId:g}):f=A=void 0,{tracks:t,initPTS:f,timescale:A,trackId:g}}remuxVideo(e,r,n,o){const c=e.inputTimeScale,i=e.samples,l=[],t=i.length,s=this._initPTS,a=s.baseTime*c/s.timescale;let u=this.nextVideoTs,f=8,h=this.videoSampleDuration,A,g,p=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,y=!1;if(!n||u===null){const q=a+r*c,te=i[0].pts-Tn(i[0].dts,i[0].pts);Di&&u!==null&&Math.abs(q-te-(u+a))<15e3?n=!0:u=q-te-a}const E=u+a;for(let q=0;q<t;q++){const te=i[q];te.pts=Tn(te.pts,E),te.dts=Tn(te.dts,E),te.dts<i[q>0?q-1:q].dts&&(y=!0)}y&&i.sort(function(q,te){const fe=q.dts-te.dts,Ee=q.pts-te.pts;return fe||Ee}),A=i[0].dts,g=i[i.length-1].dts;const C=g-A,T=C?Math.round(C/(t-1)):h||e.inputTimeScale/30;if(n){const q=A-E,te=q>T,fe=q<-1;if((te||fe)&&(te?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Ji(q,!0)} ms (${q}dts) hole between fragments detected at ${r.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Ji(-q,!0)} ms (${q}dts) overlapping between fragments detected at ${r.toFixed(3)}`),!fe||E>=i[0].pts||Di)){A=E;const Ee=i[0].pts-q;if(te)i[0].dts=A,i[0].pts=Ee;else{let Ae=!0;for(let Ce=0;Ce<i.length&&!(i[Ce].dts>Ee&&Ae);Ce++){const Oe=i[Ce].pts;if(i[Ce].dts-=q,i[Ce].pts-=q,Ce<i.length-1){const Ne=i[Ce+1].pts,Be=i[Ce].pts,Ge=Ne<=Be,Ve=Ne<=Oe;Ae=Ge==Ve}}}this.log(`Video: Initial PTS/DTS adjusted: ${Ji(Ee,!0)}/${Ji(A,!0)}, delta: ${Ji(q,!0)} ms`)}}A=Math.max(0,A);let w=0,I=0,L=A;for(let q=0;q<t;q++){const te=i[q],fe=te.units,Ee=fe.length;let Ae=0;for(let Ce=0;Ce<Ee;Ce++)Ae+=fe[Ce].data.length;I+=Ae,w+=Ee,te.length=Ae,te.dts<L?(te.dts=L,L+=T/4|0||1):L=te.dts,p=Math.min(te.pts,p),m=Math.max(te.pts,m)}g=i[t-1].dts;const R=I+4*w+8;let B;try{B=new Uint8Array(R)}catch(q){this.observer.emit(D.ERROR,D.ERROR,{type:Ot.MUX_ERROR,details:ve.REMUX_ALLOC_ERROR,fatal:!1,error:q,bytes:R,reason:`fail allocating video mdat ${R}`});return}const P=new DataView(B.buffer);P.setUint32(0,R),B.set(pe.types.mdat,4);let N=!1,U=Number.POSITIVE_INFINITY,G=Number.POSITIVE_INFINITY,W=Number.NEGATIVE_INFINITY,K=Number.NEGATIVE_INFINITY;for(let q=0;q<t;q++){const te=i[q],fe=te.units;let Ee=0;for(let Oe=0,Ne=fe.length;Oe<Ne;Oe++){const Be=fe[Oe],Ge=Be.data,Ve=Be.data.byteLength;P.setUint32(f,Ve),f+=4,B.set(Ge,f),f+=Ve,Ee+=4+Ve}let Ae;if(q<t-1)h=i[q+1].dts-te.dts,Ae=i[q+1].pts-te.pts;else{const Oe=this.config,Ne=q>0?te.dts-i[q-1].dts:T;if(Ae=q>0?te.pts-i[q-1].pts:T,Oe.stretchShortVideoTrack&&this.nextAudioTs!==null){const Be=Math.floor(Oe.maxBufferHole*c),Ge=(o?p+o*c:this.nextAudioTs+a)-te.pts;Ge>Be?(h=Ge-Ne,h<0?h=Ne:N=!0,this.log(`It is approximately ${Ge/90} ms to the next segment; using duration ${h/90} ms for the last video frame.`)):h=Ne}else h=Ne}const Ce=Math.round(te.pts-te.dts);U=Math.min(U,h),W=Math.max(W,h),G=Math.min(G,Ae),K=Math.max(K,Ae),l.push(Ql(te.key,h,Ee,Ce))}if(l.length){if(Di){if(Di<70){const q=l[0].flags;q.dependsOn=2,q.isNonSync=0}}else if(No&&K-G<W-U&&T/W<.025&&l[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let q=A;for(let te=0,fe=l.length;te<fe;te++){const Ee=q+l[te].duration,Ae=q+l[te].cts;if(te<fe-1){const Ce=Ee+l[te+1].cts;l[te].duration=Ce-Ae}else l[te].duration=te?l[te-1].duration:T;l[te].cts=0,q=Ee}}}h=N||!h?T:h;const M=g+h;this.nextVideoTs=u=M-a,this.videoSampleDuration=h,this.isVideoContiguous=!0;const J={data1:pe.moof(e.sequenceNumber++,A,wr(e,{samples:l})),data2:B,startPTS:(p-a)/c,endPTS:(m+h-a)/c,startDTS:(A-a)/c,endDTS:u/c,type:"video",hasAudio:!1,hasVideo:!0,nb:l.length,dropped:e.dropped};return e.samples=[],e.dropped=0,J}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return zh;case"ac3":return qh;default:return Kh}}remuxAudio(e,r,n,o,c){const i=e.inputTimeScale,l=e.samplerate?e.samplerate:i,t=i/l,s=this.getSamplesPerFrame(e),a=s*t,u=this._initPTS,f=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,h=[],A=c!==void 0;let g=e.samples,p=f?0:8,m=this.nextAudioTs||-1;const y=u.baseTime*i/u.timescale,E=y+r*i;if(this.isAudioContiguous=n=n||g.length&&m>0&&(o&&Math.abs(E-(m+y))<9e3||Math.abs(Tn(g[0].pts,E)-(m+y))<20*a),g.forEach(function(K){K.pts=Tn(K.pts,E)}),!n||m<0){if(g=g.filter(K=>K.pts>=0),!g.length)return;c===0?m=0:o&&!A?m=Math.max(0,E-y):m=g[0].pts-y}if(e.segmentCodec==="aac"){const K=this.config.maxAudioFramesDrift;for(let M=0,Q=m+y;M<g.length;M++){const Z=g[M],J=Z.pts,q=J-Q,te=Math.abs(1e3*q/i);if(q<=-K*a&&A)M===0&&(this.warn(`Audio frame @ ${(J/i).toFixed(3)}s overlaps marker by ${Math.round(1e3*q/i)} ms.`),this.nextAudioTs=m=J-y,Q=J);else if(q>=K*a&&te<jh&&A){let fe=Math.round(q/a);for(Q=J-fe*a;Q<0&&fe&&a;)fe--,Q+=a;M===0&&(this.nextAudioTs=m=Q-y),this.warn(`Injecting ${fe} audio frames @ ${((Q-y)/i).toFixed(3)}s due to ${Math.round(1e3*q/i)} ms gap.`);for(let Ee=0;Ee<fe;Ee++){let Ae=Vh.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);Ae||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),Ae=Z.unit.subarray()),g.splice(M,0,{unit:Ae,pts:Q}),Q+=a,M++}}Z.pts=Q,Q+=a}}let C=null,T=null,w,I=0,L=g.length;for(;L--;)I+=g[L].unit.byteLength;for(let K=0,M=g.length;K<M;K++){const Q=g[K],Z=Q.unit;let J=Q.pts;if(T!==null){const te=h[K-1];te.duration=Math.round((J-T)/t)}else if(n&&e.segmentCodec==="aac"&&(J=m+y),C=J,I>0){I+=p;try{w=new Uint8Array(I)}catch(te){this.observer.emit(D.ERROR,D.ERROR,{type:Ot.MUX_ERROR,details:ve.REMUX_ALLOC_ERROR,fatal:!1,error:te,bytes:I,reason:`fail allocating audio mdat ${I}`});return}f||(new DataView(w.buffer).setUint32(0,I),w.set(pe.types.mdat,4))}else return;w.set(Z,p);const q=Z.byteLength;p+=q,h.push(Ql(!0,s,q,0)),T=J}const R=h.length;if(!R)return;const B=h[h.length-1];m=T-y,this.nextAudioTs=m+t*B.duration;const P=f?new Uint8Array(0):pe.moof(e.sequenceNumber++,C/t,wr({},e,{samples:h}));e.samples=[];const N=(C-y)/i,U=m/i,W={data1:P,data2:w,startPTS:N,endPTS:U,startDTS:N,endDTS:U,type:"audio",hasAudio:!0,hasVideo:!1,nb:R};return this.isAudioContiguous=!0,W}}function Tn(d,e){let r;if(e===null)return d;for(e<d?r=-8589934592:r=8589934592;Math.abs(d-e)>4294967296;)d+=r;return d}function Xh(d){for(let e=0;e<d.length;e++)if(d[e].key)return e;return-1}function uc(d,e,r,n){const o=d.samples.length;if(!o)return;const c=d.inputTimeScale;for(let l=0;l<o;l++){const t=d.samples[l];t.pts=Tn(t.pts-r.baseTime*c/r.timescale,e*c)/c,t.dts=Tn(t.dts-n.baseTime*c/n.timescale,e*c)/c}const i=d.samples;return d.samples=[],{samples:i}}function cc(d,e,r){const n=d.samples.length;if(!n)return;const o=d.inputTimeScale;for(let i=0;i<n;i++){const l=d.samples[i];l.pts=Tn(l.pts-r.baseTime*o/r.timescale,e*o)/o}d.samples.sort((i,l)=>i.pts-l.pts);const c=d.samples;return d.samples=[],{samples:c}}class Zh extends wn{constructor(e,r,n,o){super("passthrough-remuxer",o),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const r=this.initPTS;r&&e&&r.baseTime===e.baseTime&&r.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,r,n,o){this.audioCodec=r,this.videoCodec=n,this.generateInitSegment(e,o),this.emitInitSegment=!0}generateInitSegment(e,r){let{audioCodec:n,videoCodec:o}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:c,video:i}=this.initData=bu(e);if(r)Gf(e,r);else{const t=c||i;t!=null&&t.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${t.codec}")!`)}c&&(n=$l(c,Lr.AUDIO,this)),i&&(o=$l(i,Lr.VIDEO,this));const l={};c&&i?l.audiovideo={container:"video/mp4",codec:n+","+o,supplemental:i.supplemental,encrypted:i.encrypted,initSegment:e,id:"main"}:c?l.audio={container:"audio/mp4",codec:n,encrypted:c.encrypted,initSegment:e,id:"audio"}:i?l.video={container:"video/mp4",codec:o,supplemental:i.supplemental,encrypted:i.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=l}remux(e,r,n,o,c,i){var l,t;let{initPTS:s,lastEndTime:a}=this;const u={audio:void 0,video:void 0,text:o,id3:n,initSegment:void 0};vt(a)||(a=this.lastEndTime=c||0);const f=r.samples;if(!f.length)return u;const h={initPTS:void 0,timescale:void 0,trackId:void 0};let A=this.initData;if((l=A)!=null&&l.length||(this.generateInitSegment(f),A=this.initData),!((t=A)!=null&&t.length))return this.warn("Failed to generate initSegment."),u;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const g=Qf(f,A,this),p=A.audio?g[A.audio.id]:null,m=A.video?g[A.video.id]:null,y=Ns(m,1/0),E=Ns(p,1/0),C=Ns(m,0,!0),T=Ns(p,0,!0);let w=c,I=0;const L=p&&(!m||!s&&E<y||s&&s.trackId===A.audio.id),R=L?p:m;if(R){const Q=R.timescale,Z=R.start-c*Q,J=L?A.audio.id:A.video.id;w=R.start/Q,I=L?T-E:C-y,(i||!s)&&(Jh(s,w,c,I)||Q!==s.timescale)&&(s&&this.warn(`Timestamps at playlist time: ${i?"":"~"}${c} ${Z/Q} != initPTS: ${s.baseTime/s.timescale} (${s.baseTime}/${s.timescale}) trackId: ${s.trackId}`),this.log(`Found initPTS at playlist time: ${c} offset: ${w-c} (${Z}/${Q}) trackId: ${J}`),s=null,h.initPTS=Z,h.timescale=Q,h.trackId=J)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${c}`);s?(h.initPTS=s.baseTime,h.timescale=s.timescale,h.trackId=s.trackId):((!h.timescale||h.trackId===void 0||h.initPTS===void 0)&&(this.warn("Could not set initPTS"),h.initPTS=w,h.timescale=1,h.trackId=-1),this.initPTS=s={baseTime:h.initPTS,timescale:h.timescale,trackId:h.trackId});const B=w-s.baseTime/s.timescale,P=B+I;I>0?this.lastEndTime=P:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const N=!!A.audio,U=!!A.video;let G="";N&&(G+="audio"),U&&(G+="video");const W=(A.audio?A.audio.encrypted:!1)||(A.video?A.video.encrypted:!1),K={data1:f,startPTS:B,startDTS:B,endPTS:P,endDTS:P,type:G,hasAudio:N,hasVideo:U,nb:1,dropped:0,encrypted:W};u.audio=N&&!U?K:void 0,u.video=U?K:void 0;const M=m?.sampleCount;if(M){const Q=m.keyFrameIndex,Z=Q!==-1;K.nb=M,K.dropped=Q===0||this.isVideoContiguous?0:Z?Q:M,K.independent=Z,K.firstKeyFrame=Q,Z&&m.keyFrameStart&&(K.firstKeyFramePTS=(m.keyFrameStart-s.baseTime)/s.timescale),this.isVideoContiguous||(u.independent=Z),this.isVideoContiguous||(this.isVideoContiguous=Z),K.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${Q}/${M} dropped: ${K.dropped} start: ${K.firstKeyFramePTS||"NA"}`)}return u.initSegment=h,u.id3=uc(n,c,s,s),o.samples.length&&(u.text=cc(o,c,s)),u}}function Ns(d,e,r=!1){return d?.start!==void 0?(d.start+(r?d.duration:0))/d.timescale:e}function Jh(d,e,r,n){if(d===null)return!0;const o=Math.max(n,1),c=e-d.baseTime/d.timescale;return Math.abs(c-r)>o}function $l(d,e,r){const n=d.codec;return n&&n.length>4?n:e===Lr.AUDIO?n==="ec-3"||n==="ac-3"||n==="alac"?n:n==="fLaC"||n==="Opus"?to(n,!1):(r.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"):(r.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1")}let ti;try{ti=self.performance.now.bind(self.performance)}catch{ti=Date.now}const qs=[{demux:Nh,remux:Zh},{demux:oi,remux:zs},{demux:Oh,remux:zs},{demux:Mh,remux:zs}];qs.splice(2,0,{demux:_h,remux:zs});class Wl{constructor(e,r,n,o,c,i){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=r,this.config=n,this.id=c,this.logger=i}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,r,n,o){const c=n.transmuxing;c.executeStart=ti();let i=new Uint8Array(e);const{currentTransmuxState:l,transmuxConfig:t}=this;o&&(this.currentTransmuxState=o);const{contiguous:s,discontinuity:a,trackSwitch:u,accurateTimeOffset:f,timeOffset:h,initSegmentChange:A}=o||l,{audioCodec:g,videoCodec:p,defaultInitPts:m,duration:y,initSegmentData:E}=t,C=eA(i,r);if(C&&Mi(C.method)){const L=this.getDecrypter(),R=wa(C.method);if(L.isSync()){let B=L.softwareDecrypt(i,C.key.buffer,C.iv.buffer,R);if(n.part>-1){const N=L.flush();B=N&&N.buffer}if(!B)return c.executeEnd=ti(),Uo(n);i=new Uint8Array(B)}else return this.asyncResult=!0,this.decryptionPromise=L.webCryptoDecrypt(i,C.key.buffer,C.iv.buffer,R).then(B=>{const P=this.push(B,null,n);return this.decryptionPromise=null,P}),this.decryptionPromise}const T=this.needsProbing(a,u);if(T){const L=this.configureTransmuxer(i);if(L)return this.logger.warn(`[transmuxer] ${L.message}`),this.observer.emit(D.ERROR,D.ERROR,{type:Ot.MEDIA_ERROR,details:ve.FRAG_PARSING_ERROR,fatal:!1,error:L,reason:L.message}),c.executeEnd=ti(),Uo(n)}(a||u||A||T)&&this.resetInitSegment(E,g,p,y,r),(a||A||T)&&this.resetInitialTimestamp(m),s||this.resetContiguity();const w=this.transmux(i,C,h,f,n);this.asyncResult=ls(w);const I=this.currentTransmuxState;return I.contiguous=!0,I.discontinuity=!1,I.trackSwitch=!1,c.executeEnd=ti(),w}flush(e){const r=e.transmuxing;r.executeStart=ti();const{decrypter:n,currentTransmuxState:o,decryptionPromise:c}=this;if(c)return this.asyncResult=!0,c.then(()=>this.flush(e));const i=[],{timeOffset:l}=o;if(n){const u=n.flush();u&&i.push(this.push(u.buffer,null,e))}const{demuxer:t,remuxer:s}=this;if(!t||!s){r.executeEnd=ti();const u=[Uo(e)];return this.asyncResult?Promise.resolve(u):u}const a=t.flush(l);return ls(a)?(this.asyncResult=!0,a.then(u=>(this.flushRemux(i,u,e),i))):(this.flushRemux(i,a,e),this.asyncResult?Promise.resolve(i):i)}flushRemux(e,r,n){const{audioTrack:o,videoTrack:c,id3Track:i,textTrack:l}=r,{accurateTimeOffset:t,timeOffset:s}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===Rt.MAIN?"level":"track"} ${n.level}`);const a=this.remuxer.remux(o,c,i,l,s,t,!0,this.id);e.push({remuxResult:a,chunkMeta:n}),n.transmuxing.executeEnd=ti()}resetInitialTimestamp(e){const{demuxer:r,remuxer:n}=this;!r||!n||(r.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:r}=this;!e||!r||(e.resetContiguity(),r.resetNextTimestamp())}resetInitSegment(e,r,n,o,c){const{demuxer:i,remuxer:l}=this;!i||!l||(i.resetInitSegment(e,r,n,o),l.resetInitSegment(e,r,n,c))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,r,n,o,c){let i;return r&&r.method==="SAMPLE-AES"?i=this.transmuxSampleAes(e,r,n,o,c):i=this.transmuxUnencrypted(e,n,o,c),i}transmuxUnencrypted(e,r,n,o){const{audioTrack:c,videoTrack:i,id3Track:l,textTrack:t}=this.demuxer.demux(e,r,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(c,i,l,t,r,n,!1,this.id),chunkMeta:o}}transmuxSampleAes(e,r,n,o,c){return this.demuxer.demuxSampleAes(e,r,n).then(i=>({remuxResult:this.remuxer.remux(i.audioTrack,i.videoTrack,i.id3Track,i.textTrack,n,o,!1,this.id),chunkMeta:c}))}configureTransmuxer(e){const{config:r,observer:n,typeSupported:o}=this;let c;for(let u=0,f=qs.length;u<f;u++){var i;if((i=qs[u].demux)!=null&&i.probe(e,this.logger)){c=qs[u];break}}if(!c)return new Error("Failed to find demuxer by probing fragment data");const l=this.demuxer,t=this.remuxer,s=c.remux,a=c.demux;(!t||!(t instanceof s))&&(this.remuxer=new s(n,r,o,this.logger)),(!l||!(l instanceof a))&&(this.demuxer=new a(n,r,o,this.logger),this.probe=a.probe)}needsProbing(e,r){return!this.demuxer||!this.remuxer||e||r}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Ta(this.config)),e}}function eA(d,e){let r=null;return d.byteLength>0&&e?.key!=null&&e.iv!==null&&e.method!=null&&(r=e),r}const Uo=d=>({remuxResult:{},chunkMeta:d});function ls(d){return"then"in d&&d.then instanceof Function}class tA{constructor(e,r,n,o,c){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=r,this.initSegmentData=n,this.duration=o,this.defaultInitPts=c||null}}class rA{constructor(e,r,n,o,c,i){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=r,this.accurateTimeOffset=n,this.trackSwitch=o,this.timeOffset=c,this.initSegmentChange=i}}let Vl=0;class fc{constructor(e,r,n,o){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=Vl++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=t=>{const s=t.data,a=this.hls;if(!(!a||!(s!=null&&s.event)||s.instanceNo!==this.instanceNo))switch(s.event){case"init":{var u;const f=(u=this.workerContext)==null?void 0:u.objectURL;f&&self.URL.revokeObjectURL(f);break}case"transmuxComplete":{this.handleTransmuxComplete(s.data);break}case"flush":{this.onFlush(s.data);break}case"workerLog":{a.logger[s.data.logType]&&a.logger[s.data.logType](s.data.message);break}default:{s.data=s.data||{},s.data.frag=this.frag,s.data.part=this.part,s.data.id=this.id,a.trigger(s.event,s.data);break}}},this.onWorkerError=t=>{if(!this.hls)return;const s=new Error(`${t.message}  (${t.filename}:${t.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(D.ERROR,{type:Ot.OTHER_ERROR,details:ve.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:s})};const c=e.config;this.hls=e,this.id=r,this.useWorker=!!c.enableWorker,this.onTransmuxComplete=n,this.onFlush=o;const i=(t,s)=>{s=s||{},s.frag=this.frag||void 0,t===D.ERROR&&(s=s,s.parent=this.id,s.part=this.part,this.error=s.error),this.hls.trigger(t,s)};this.observer=new Ra,this.observer.on(D.FRAG_DECRYPTED,i),this.observer.on(D.ERROR,i);const l=al(c.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const t=this.hls.logger;if(c.workerPath||oh()){try{c.workerPath?(t.log(`loading Web Worker ${c.workerPath} for "${r}"`),this.workerContext=lh(c.workerPath)):(t.log(`injecting Web Worker for "${r}"`),this.workerContext=ah());const{worker:a}=this.workerContext;a.addEventListener("message",this.onWorkerMessage),a.addEventListener("error",this.onWorkerError),a.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:l,id:r,config:Pr(c)})}catch(a){t.warn(`Error setting up "${r}" Web Worker, fallback to inline`,a),this.terminateWorker(),this.error=null,this.transmuxer=new Wl(this.observer,l,c,"",r,e.logger)}return}}this.transmuxer=new Wl(this.observer,l,c,"",r,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=Vl++;const r=this.hls.config,n=al(r.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:Pr(r)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),uh(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const r=this.transmuxer;r&&(r.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,r,n,o,c,i,l,t,s,a){var u,f;s.transmuxing.start=self.performance.now();const{instanceNo:h,transmuxer:A}=this,g=i?i.start:c.start,p=c.decryptdata,m=this.frag,y=!(m&&c.cc===m.cc),E=!(m&&s.level===m.level),C=m?s.sn-m.sn:-1,T=this.part?s.part-this.part.index:-1,w=C===0&&s.id>1&&s.id===m?.stats.chunkCount,I=!E&&(C===1||C===0&&(T===1||w&&T<=0)),L=self.performance.now();(E||C||c.stats.parsing.start===0)&&(c.stats.parsing.start=L),i&&(T||!I)&&(i.stats.parsing.start=L);const R=!(m&&((u=c.initSegment)==null?void 0:u.url)===((f=m.initSegment)==null?void 0:f.url)),B=new rA(y,I,t,E,g,R);if(!I||y||R){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${c.type} sn: ${s.sn}${s.part>-1?" part: "+s.part:""} ${this.id===Rt.MAIN?"level":"track"}: ${s.level} id: ${s.id}
        discontinuity: ${y}
        trackSwitch: ${E}
        contiguous: ${I}
        accurateTimeOffset: ${t}
        timeOffset: ${g}
        initSegmentChange: ${R}`);const P=new tA(n,o,r,l,a);this.configureTransmuxer(P)}if(this.frag=c,this.part=i,this.workerContext)this.workerContext.worker.postMessage({instanceNo:h,cmd:"demux",data:e,decryptdata:p,chunkMeta:s,state:B},e instanceof ArrayBuffer?[e]:[]);else if(A){const P=A.push(e,p,s,B);ls(P)?P.then(N=>{this.handleTransmuxComplete(N)}).catch(N=>{this.transmuxerError(N,s,"transmuxer-interface push error")}):this.handleTransmuxComplete(P)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:r,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:r,cmd:"flush",chunkMeta:e});else if(n){const o=n.flush(e);ls(o)?o.then(c=>{this.handleFlushResult(c,e)}).catch(c=>{this.transmuxerError(c,e,"transmuxer-interface flush error")}):this.handleFlushResult(o,e)}}transmuxerError(e,r,n){this.hls&&(this.error=e,this.hls.trigger(D.ERROR,{type:Ot.MEDIA_ERROR,details:ve.FRAG_PARSING_ERROR,chunkMeta:r,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,r){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(r)}configureTransmuxer(e){const{instanceNo:r,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:r,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const Yl=100;class nA extends La{constructor(e,r,n){super(e,r,n,"audio-stream-controller",Rt.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(D.BUFFER_RESET,this.onBufferReset,this),e.on(D.BUFFER_CREATED,this.onBufferCreated,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(D.FRAG_LOADING,this.onFragLoading,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(D.BUFFER_RESET,this.onBufferReset,this),e.off(D.BUFFER_CREATED,this.onBufferCreated,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(D.FRAG_LOADING,this.onFragLoading,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:r,id:n,initPTS:o,timescale:c,trackId:i}){if(n===Rt.MAIN){const l=r.cc,t=this.fragCurrent;if(this.initPTS[l]={baseTime:o,timescale:c,trackId:i},this.log(`InitPTS for cc: ${l} found from main: ${o/c} (${o}/${c}) trackId: ${i}`),this.mainAnchor=r,this.state===_e.WAITING_INIT_PTS){const s=this.waitingData;(!s&&!this.loadingParts||s&&s.frag.cc!==l)&&this.syncWithAnchor(r,s?.frag)}else!this.hls.hasEnoughToStart&&t&&t.cc!==l?(t.abortRequests(),this.syncWithAnchor(r,t)):this.state===_e.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,r){var n;const o=((n=this.mainFragLoading)==null?void 0:n.frag)||null;if(r&&o?.cc===r.cc)return;const c=(o||e).cc,i=this.getLevelDetails(),l=this.getLoadPosition(),t=Du(i,c,l);t&&(this.log(`Syncing with main frag at ${t.start} cc ${t.cc}`),this.startFragRequested=!1,this.nextLoadPosition=t.start,this.resetLoadingState(),this.state===_e.IDLE&&this.doTickIdle())}startLoad(e,r){if(!this.levels){this.startPosition=e,this.state=_e.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(Yl),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=_e.IDLE):this.state=_e.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=r?-1:e,this.tick()}doTick(){switch(this.state){case _e.IDLE:this.doTickIdle();break;case _e.WAITING_TRACK:{const{levels:e,trackId:r}=this,n=e?.[r],o=n?.details;if(o&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(o))break;this.state=_e.WAITING_INIT_PTS}break}case _e.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case _e.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:r,part:n,cache:o,complete:c}=e,i=this.mainAnchor;if(this.initPTS[r.cc]!==void 0){this.waitingData=null,this.state=_e.FRAG_LOADING;const l=o.flush().buffer,t={frag:r,part:n,payload:l,networkDetails:null};this._handleFragmentLoadProgress(t),c&&super._handleFragmentLoadComplete(t)}else i&&i.cc!==e.frag.cc&&this.syncWithAnchor(i,e.frag)}else this.state=_e.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:r,levels:n,media:o,trackId:c}=this,i=r.config;if(!this.buffering||!o&&!this.primaryPrefetch&&(this.startFragRequested||!i.startFragPrefetch)||!(n!=null&&n[c]))return;const l=n[c],t=l.details;if(!t||this.waitForLive(l)||this.waitForCdnTuneIn(t)){this.state=_e.WAITING_TRACK,this.startFragRequested=!1;return}const s=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&s&&(this.bufferFlushed=!1,this.afterBufferFlushed(s,Lr.AUDIO,Rt.AUDIO));const a=this.getFwdBufferInfo(s,Rt.AUDIO);if(a===null)return;if(!this.switchingTrack&&this._streamEnded(a,t)){r.trigger(D.BUFFER_EOS,{type:"audio"}),this.state=_e.ENDED;return}const u=a.len,f=r.maxBufferLength,h=t.fragments,A=h[0].start,g=this.getLoadPosition(),p=this.flushing?g:a.end;if(this.switchingTrack&&o){const E=g;t.PTSKnown&&E<A&&(a.end>A||a.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),o.currentTime=A+.05)}if(u>=f&&!this.switchingTrack&&p<h[h.length-1].start)return;let m=this.getNextFragment(p,t);if(m&&this.isLoopLoading(m,p)&&(m=this.getNextFragmentLoopLoading(m,t,a,Rt.MAIN,f)),!m){this.bufferFlushed=!0;return}let y=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&y&&Hr(m)&&!m.endList&&(!t.live||!this.loadingParts&&p<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(y)===Xr.OK&&(this.mainFragLoading=y=null),y&&Hr(y))){if(m.start>y.end){const C=this.fragmentTracker.getFragAtPos(p,Rt.MAIN);C&&C.end>y.end&&(y=C,this.mainFragLoading={frag:C,targetBufferTime:null})}if(m.start>y.end)return}this.loadFragment(m,l,p)}onMediaDetaching(e,r){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,r)}onAudioTracksUpdated(e,{audioTracks:r}){this.resetTransmuxer(),this.levels=r.map(n=>new ss(n))}onAudioTrackSwitching(e,r){const n=!!r.url;this.trackId=r.id;const{fragCurrent:o}=this;o&&(o.abortRequests(),this.removeUnbufferedFrags(o.start)),this.resetLoadingState(),n?(this.switchingTrack=r,this.flushAudioIfNeeded(r),this.state!==_e.STOPPED&&(this.setInterval(Yl),this.state=_e.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=r,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,r){this.mainDetails=r.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(D.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,r){var n;const{levels:o}=this,{details:c,id:i,groupId:l,track:t}=r;if(!o){this.warn(`Audio tracks reset while loading track ${i} "${t.name}" of "${l}"`);return}const s=this.mainDetails;if(!s||c.endCC>s.endCC||s.expired){this.cachedTrackLoadedData=r,this.state!==_e.STOPPED&&(this.state=_e.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${i} "${t.name}" of "${l}" loaded [${c.startSN},${c.endSN}]${c.lastPartSn?`[part-${c.lastPartSn}-${c.lastPartIndex}]`:""},duration:${c.totalduration}`);const a=o[i];let u=0;if(c.live||(n=a.details)!=null&&n.live){if(this.checkLiveUpdate(c),c.deltaUpdateFailed)return;if(a.details){var f;u=this.alignPlaylists(c,a.details,(f=this.levelLastLoaded)==null?void 0:f.details)}c.alignedSliding||(Yu(c,s),c.alignedSliding||ao(c,s),u=c.fragmentStart)}a.details=c,this.levelLastLoaded=a,this.startFragRequested||this.setStartPosition(s,u),this.hls.trigger(D.AUDIO_TRACK_UPDATED,{details:c,id:i,groupId:r.groupId}),this.state===_e.WAITING_TRACK&&!this.waitForCdnTuneIn(c)&&(this.state=_e.IDLE),this.tick()}_handleFragmentLoadProgress(e){var r;const n=e.frag,{part:o,payload:c}=e,{config:i,trackId:l,levels:t}=this;if(!t){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const s=t[l];if(!s){this.warn("Audio track is undefined on fragment load progress");return}const a=s.details;if(!a){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const u=i.defaultAudioCodec||s.audioCodec||"mp4a.40.2";let f=this.transmuxer;f||(f=this.transmuxer=new fc(this.hls,Rt.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[n.cc],A=(r=n.initSegment)==null?void 0:r.data;if(h!==void 0){const p=o?o.index:-1,m=p!==-1,y=new Sa(n.level,n.sn,n.stats.chunkCount,c.byteLength,p,m);f.push(c,A,u,"",n,o,a.totalduration,!1,y,h)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${a.startSN} ,${a.endSN}],track ${l}`);const{cache:g}=this.waitingData=this.waitingData||{frag:n,part:o,cache:new Hu,complete:!1};g.push(new Uint8Array(c)),this.state!==_e.STOPPED&&(this.state=_e.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,r){this.bufferFlushed=this.flushing=!1;const n=r.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,r){!this.audioOnly&&r.frag.type===Rt.MAIN&&Hr(r.frag)&&(this.mainFragLoading=r,this.state===_e.IDLE&&this.tick())}onFragBuffered(e,r){const{frag:n,part:o}=r;if(n.type!==Rt.AUDIO){!this.audioOnly&&n.type===Rt.MAIN&&!n.elementaryStreams.video&&!n.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${o?" p: "+o.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(Hr(n)){this.fragPrevious=n;const c=this.switchingTrack;c&&(this.bufferedTrack=c,this.switchingTrack=null,this.hls.trigger(D.AUDIO_TRACK_SWITCHED,Sr({},c)))}this.fragBufferedComplete(n,o),this.media&&this.tick()}onError(e,r){var n;if(r.fatal){this.state=_e.ERROR;return}switch(r.details){case ve.FRAG_GAP:case ve.FRAG_PARSING_ERROR:case ve.FRAG_DECRYPT_ERROR:case ve.FRAG_LOAD_ERROR:case ve.FRAG_LOAD_TIMEOUT:case ve.KEY_LOAD_ERROR:case ve.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Rt.AUDIO,r);break;case ve.AUDIO_TRACK_LOAD_ERROR:case ve.AUDIO_TRACK_LOAD_TIMEOUT:case ve.LEVEL_PARSING_ERROR:!r.levelRetry&&this.state===_e.WAITING_TRACK&&((n=r.context)==null?void 0:n.type)===cr.AUDIO_TRACK&&(this.state=_e.IDLE);break;case ve.BUFFER_ADD_CODEC_ERROR:case ve.BUFFER_APPEND_ERROR:if(r.parent!=="audio")return;this.reduceLengthAndFlushBuffer(r)||this.resetLoadingState();break;case ve.BUFFER_FULL_ERROR:if(r.parent!=="audio")return;this.reduceLengthAndFlushBuffer(r)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case ve.INTERNAL_EXCEPTION:this.recoverWorkerError(r);break}}onBufferFlushing(e,{type:r}){r!==Lr.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:r}){if(r!==Lr.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===_e.ENDED&&(this.state=_e.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,r,Rt.AUDIO),this.tick())}}_handleTransmuxComplete(e){var r;const n="audio",{hls:o}=this,{remuxResult:c,chunkMeta:i}=e,l=this.getCurrentContext(i);if(!l){this.resetWhenMissingContext(i);return}const{frag:t,part:s,level:a}=l,{details:u}=a,{audio:f,text:h,id3:A,initSegment:g}=c;if(this.fragContextChanged(t)||!u){this.fragmentTracker.removeFragment(t);return}if(this.state=_e.PARSING,this.switchingTrack&&f&&this.completeAudioSwitch(this.switchingTrack),g!=null&&g.tracks){const p=t.initSegment||t;if(this.unhandledEncryptionError(g,t))return;this._bufferInitSegment(a,g.tracks,p,i),o.trigger(D.FRAG_PARSING_INIT_SEGMENT,{frag:p,id:n,tracks:g.tracks})}if(f){const{startPTS:p,endPTS:m,startDTS:y,endDTS:E}=f;s&&(s.elementaryStreams[Lr.AUDIO]={startPTS:p,endPTS:m,startDTS:y,endDTS:E}),t.setElementaryStreamInfo(Lr.AUDIO,p,m,y,E),this.bufferFragmentData(f,t,s,i)}if(A!=null&&(r=A.samples)!=null&&r.length){const p=wr({id:n,frag:t,details:u},A);o.trigger(D.FRAG_PARSING_METADATA,p)}if(h){const p=wr({id:n,frag:t,details:u},h);o.trigger(D.FRAG_PARSING_USERDATA,p)}}_bufferInitSegment(e,r,n,o){if(this.state!==_e.PARSING||(r.video&&delete r.video,r.audiovideo&&delete r.audiovideo,!r.audio))return;const c=r.audio;c.id=Rt.AUDIO;const i=e.audioCodec;this.log(`Init audio buffer, container:${c.container}, codecs[level/parsed]=[${i}/${c.codec}]`),i&&i.split(",").length===1&&(c.levelCodec=i),this.hls.trigger(D.BUFFER_CODECS,r);const l=c.initSegment;if(l!=null&&l.byteLength){const t={type:"audio",frag:n,part:null,chunkMeta:o,parent:n.type,data:l};this.hls.trigger(D.BUFFER_APPENDING,t)}this.tickImmediate()}loadFragment(e,r,n){const o=this.fragmentTracker.getState(e);if(this.switchingTrack||o===Xr.NOT_LOADED||o===Xr.PARTIAL){var c;if(!Hr(e))this._loadInitSegment(e,r);else if((c=r.details)!=null&&c.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=_e.WAITING_INIT_PTS;const i=this.mainDetails;i&&i.fragmentStart!==r.details.fragmentStart&&ao(r.details,i)}else super.loadFragment(e,r,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:r,lang:n,assocLang:o,characteristics:c,audioCodec:i,channels:l}=this.bufferedTrack;pi({name:r,lang:n,assocLang:o,characteristics:c,audioCodec:i,channels:l},e,gi)||(no(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:r}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,r.trigger(D.AUDIO_TRACK_SWITCHED,Sr({},e))}}class Ma extends wn{constructor(e,r){super(r,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,r,n){const o=r?.renditionReports;if(o){let c=-1;for(let i=0;i<o.length;i++){const l=o[i];let t;try{t=new self.URL(l.URI,r.url).href}catch(s){this.warn(`Could not construct new URL for Rendition Report: ${s}`),t=l.URI||""}if(t===e){c=i;break}else t===e.substring(0,t.length)&&(c=i)}if(c!==-1){const i=o[c],l=parseInt(i["LAST-MSN"])||r.lastPartSn;let t=parseInt(i["LAST-PART"])||r.lastPartIndex;if(this.hls.config.lowLatencyMode){const a=Math.min(r.age-r.partTarget,r.targetduration);t>=0&&a>r.partTarget&&(t+=1)}const s=n&&ll(n);return new ul(l,t>=0?t:void 0,s)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,r){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,r){if(r)try{return r.addDirectives(e)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return e}playlistLoaded(e,r,n){const{details:o,stats:c}=r,i=self.performance.now(),l=c.loading.first?Math.max(0,i-c.loading.first):0;o.advancedDateTime=Date.now()-l;const t=this.hls.config.timelineOffset;if(t!==o.appliedTimelineOffset){const a=Math.max(t||0,0);o.appliedTimelineOffset=a,o.fragments.forEach(u=>{u.setStart(u.playlistOffset+a)})}if(o.live||n!=null&&n.live){const a="levelInfo"in r?r.levelInfo:r.track;if(o.reloaded(n),n&&o.fragments.length>0){zd(n,o,this);const y=o.playlistParsingError;if(y){this.warn(y);const E=this.hls;if(!E.config.ignorePlaylistParsingErrors){var s;const{networkDetails:C}=r;E.trigger(D.ERROR,{type:Ot.NETWORK_ERROR,details:ve.LEVEL_PARSING_ERROR,fatal:!1,url:o.url,error:y,reason:y.message,level:r.level||void 0,parent:(s=o.fragments[0])==null?void 0:s.type,networkDetails:C,stats:c});return}o.playlistParsingError=null}}o.requestScheduled===-1&&(o.requestScheduled=c.loading.start);const u=this.hls.mainForwardBufferInfo,f=u?u.end-u.len:0,h=(o.edge-f)*1e3,A=Gu(o,h);if(o.requestScheduled+A<i?o.requestScheduled=i:o.requestScheduled+=A,this.log(`live playlist ${e} ${o.advanced?"REFRESHED "+o.lastPartSn+"-"+o.lastPartIndex:o.updated?"UPDATED":"MISSED"}`),!this.canLoad||!o.live)return;let g,p,m;if(o.canBlockReload&&o.endSN&&o.advanced){const y=this.hls.config.lowLatencyMode,E=o.lastPartSn,C=o.endSN,T=o.lastPartIndex,w=T!==-1,I=E===C;w?I?(p=C+1,m=y?0:T):(p=E,m=y?T+1:o.maxPartIndex):p=C+1;const L=o.age,R=L+o.ageHeader;let B=Math.min(R-o.partTarget,o.targetduration*1.5);if(B>0){if(R>o.targetduration*3)this.log(`Playlist last advanced ${L.toFixed(2)}s ago. Omitting segment and part directives.`),p=void 0,m=void 0;else if(n!=null&&n.tuneInGoal&&R-o.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${B} with playlist age: ${o.age}`),B=0;else{const P=Math.floor(B/o.targetduration);if(p+=P,m!==void 0){const N=Math.round(B%o.targetduration/o.partTarget);m+=N}this.log(`CDN Tune-in age: ${o.ageHeader}s last advanced ${L.toFixed(2)}s goal: ${B} skip sn ${P} to part ${m}`)}o.tuneInGoal=B}if(g=this.getDeliveryDirectives(o,r.deliveryDirectives,p,m),y||!I){o.requestScheduled=i,this.loadingPlaylist(a,g);return}}else(o.canBlockReload||o.canSkipUntil)&&(g=this.getDeliveryDirectives(o,r.deliveryDirectives,p,m));g&&p!==void 0&&o.canBlockReload&&(o.requestScheduled=c.loading.first+Math.max(A-l*2,A/2)),this.scheduleLoading(a,g,o)}else this.clearTimer()}scheduleLoading(e,r,n){const o=n||e.details;if(!o){this.loadingPlaylist(e,r);return}const c=self.performance.now(),i=o.requestScheduled;if(c>=i){this.loadingPlaylist(e,r);return}const l=i-c;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(l)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,r),l)}getDeliveryDirectives(e,r,n,o){let c=ll(e);return r!=null&&r.skip&&e.deltaUpdateFailed&&(n=r.msn,o=r.part,c=js.No),new ul(n,o,c)}checkRetry(e){const r=e.details,n=io(e),o=e.errorAction,{action:c,retryCount:i=0,retryConfig:l}=o||{},t=!!o&&!!l&&(c===tn.RetryRequest||!o.resolved&&c===tn.SendAlternateToPenaltyBox);if(t){var s;if(i>=l.maxNumRetry)return!1;if(n&&(s=e.context)!=null&&s.deliveryDirectives)this.warn(`Retrying playlist loading ${i+1}/${l.maxNumRetry} after "${r}" without delivery-directives`),this.loadPlaylist();else{const a=xa(l,i);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),a),this.warn(`Retrying playlist loading ${i+1}/${l.maxNumRetry} after "${r}" in ${a}ms`)}e.levelRetry=!0,o.resolved=!0}return t}}function dc(d,e){if(d.length!==e.length)return!1;for(let r=0;r<d.length;r++)if(!us(d[r].attrs,e[r].attrs))return!1;return!0}function us(d,e,r){const n=d["STABLE-RENDITION-ID"];return n&&!r?n===e["STABLE-RENDITION-ID"]:!(r||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(o=>d[o]!==e[o])}function ca(d,e){return e.label.toLowerCase()===d.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(d.lang||"").toLowerCase())}class iA extends Ma{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVEL_LOADING,this.onLevelLoading,this),e.off(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(D.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,r){this.tracks=r.audioTracks||[]}onAudioTrackLoaded(e,r){const{id:n,groupId:o,details:c}=r,i=this.tracksInGroup[n];if(!i||i.groupId!==o){this.warn(`Audio track with id:${n} and group:${o} not found in active group ${i?.groupId}`);return}const l=i.details;i.details=r.details,this.log(`Audio track ${n} "${i.name}" lang:${i.lang} group:${o} loaded [${c.startSN}-${c.endSN}]`),n===this.trackId&&this.playlistLoaded(n,r,l)}onLevelLoading(e,r){this.switchLevel(r.level)}onLevelSwitching(e,r){this.switchLevel(r.level)}switchLevel(e){const r=this.hls.levels[e];if(!r)return;const n=r.audioGroups||null,o=this.groupIds;let c=this.currentTrack;if(!n||o?.length!==n?.length||n!=null&&n.some(l=>o?.indexOf(l)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const l=this.tracks.filter(f=>!n||n.indexOf(f.groupId)!==-1);if(l.length)this.selectDefaultTrack&&!l.some(f=>f.default)&&(this.selectDefaultTrack=!1),l.forEach((f,h)=>{f.id=h});else if(!c&&!this.tracksInGroup.length)return;this.tracksInGroup=l;const t=this.hls.config.audioPreference;if(!c&&t){const f=Qn(t,l,gi);if(f>-1)c=l[f];else{const h=Qn(t,this.tracks);c=this.tracks[h]}}let s=this.findTrackId(c);s===-1&&c&&(s=this.findTrackId(null));const a={audioTracks:l};this.log(`Updating audio tracks, ${l.length} track(s) found in group(s): ${n?.join(",")}`),this.hls.trigger(D.AUDIO_TRACKS_UPDATED,a);const u=this.trackId;if(s!==-1&&u===-1)this.setAudioTrack(s);else if(l.length&&u===-1){var i;const f=new Error(`No audio track selected for current audio group-ID(s): ${(i=this.groupIds)==null?void 0:i.join(",")} track count: ${l.length}`);this.warn(f.message),this.hls.trigger(D.ERROR,{type:Ot.MEDIA_ERROR,details:ve.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:f})}}}onError(e,r){r.fatal||!r.context||r.context.type===cr.AUDIO_TRACK&&r.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(r.context.groupId)!==-1)&&this.checkRetry(r)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const r=this.hls;if(r.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const o=this.currentTrack;if(o&&pi(e,o,gi))return o;const c=Qn(e,this.tracksInGroup,gi);if(c>-1){const i=this.tracksInGroup[c];return this.setAudioTrack(c),i}else if(o){let i=r.loadLevel;i===-1&&(i=r.firstAutoLevel);const l=Ad(e,r.levels,n,i,gi);if(l===-1)return null;r.nextLoadLevel=l}if(e.channels||e.audioCodec){const i=Qn(e,n);if(i>-1)return n[i]}}}return null}setAudioTrack(e){const r=this.tracksInGroup;if(e<0||e>=r.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,o=r[e],c=o.details&&!o.details.live;if(e===this.trackId&&o===n&&c||(this.log(`Switching to audio-track ${e} "${o.name}" lang:${o.lang} group:${o.groupId} channels:${o.channels}`),this.trackId=e,this.currentTrack=o,this.hls.trigger(D.AUDIO_TRACK_SWITCHING,Sr({},o)),c))return;const i=this.switchParams(o.url,n?.details,o.details);this.loadPlaylist(i)}findTrackId(e){const r=this.tracksInGroup;for(let n=0;n<r.length;n++){const o=r[n];if(!(this.selectDefaultTrack&&!o.default)&&(!e||pi(e,o,gi)))return n}if(e){const{name:n,lang:o,assocLang:c,characteristics:i,audioCodec:l,channels:t}=e;for(let s=0;s<r.length;s++){const a=r[s];if(pi({name:n,lang:o,assocLang:c,characteristics:i,audioCodec:l,channels:t},a,gi))return s}for(let s=0;s<r.length;s++){const a=r[s];if(us(e.attrs,a.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return s}for(let s=0;s<r.length;s++){const a=r[s];if(us(e.attrs,a.attrs,["LANGUAGE"]))return s}}return-1}loadPlaylist(e){super.loadPlaylist();const r=this.currentTrack;this.shouldLoadPlaylist(r)&&no(r.url,this.hls)&&this.scheduleLoading(r,e)}loadingPlaylist(e,r){super.loadingPlaylist(e,r);const n=e.id,o=e.groupId,c=this.getUrlWithDirectives(e.url,r),i=e.details,l=i?.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${o}${r?.msn!==void 0?" at sn "+r.msn+" part "+r.part:""}${l&&i.live?" age "+l.toFixed(1)+(i.type&&" "+i.type||""):""} ${c}`),this.hls.trigger(D.AUDIO_TRACK_LOADING,{url:c,id:n,groupId:o,deliveryDirectives:r||null,track:e})}}class sA{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,r,n){if(this.queues===null||this.tracks===null)return;const o=this.queues[r];o.push(e),o.length===1&&!n&&this.executeNext(r)}appendBlocker(e){return new Promise(r=>{const n={label:"async-blocker",execute:r,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(r=>{if(this.queues){const n={label:"async-blocker-prepend",execute:r,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var r;const n=(r=e[0])==null?void 0:r.label;(n==="async-blocker"||n==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const r=this.queues[e];if(r.length){const o=r[0];try{o.execute()}catch(c){var n;if(o.onError(c),this.queues===null||this.tracks===null)return;const i=(n=this.tracks[e])==null?void 0:n.buffer;i!=null&&i.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var r;return((r=this.queues)==null?void 0:r[e][0])||null}toString(){const{queues:e,tracks:r}=this;return e===null||r===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var r,n;return(r=this.queues)!=null&&r[e]||(n=this.tracks)!=null&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var r;const n=(r=this.tracks)==null?void 0:r[e],o=n?.buffer;return o?`SourceBuffer${o.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var r;return((r=this.queues)==null?void 0:r[e].map(n=>n.label).join(", "))||""}}const Hl=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,hc="HlsJsTrackRemovedError";class oA extends Error{constructor(e){super(e),this.name=hc}}class aA extends wn{constructor(e,r){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=n=>{var o;this.hls&&((o=this.mediaSource)==null?void 0:o.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=n=>{const{media:o,mediaSource:c}=this;n&&this.log("Media source opened"),!(!o||!c)&&(c.removeEventListener("sourceopen",this._onMediaSourceOpen),o.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(D.MEDIA_ATTACHED,{media:o,mediaSource:c}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:o}=this;n!==o&&this.error(`Media element src was set while attaching MediaSource (${o} > ${n})`)},this.hls=e,this.fragmentTracker=r,this.appendSource=kf(ai(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.BUFFER_RESET,this.onBufferReset,this),e.on(D.BUFFER_APPENDING,this.onBufferAppending,this),e.on(D.BUFFER_CODECS,this.onBufferCodecs,this),e.on(D.BUFFER_EOS,this.onBufferEos,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(D.FRAG_PARSED,this.onFragParsed,this),e.on(D.FRAG_CHANGED,this.onFragChanged,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.BUFFER_RESET,this.onBufferReset,this),e.off(D.BUFFER_APPENDING,this.onBufferAppending,this),e.off(D.BUFFER_CODECS,this.onBufferCodecs,this),e.off(D.BUFFER_EOS,this.onBufferEos,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(D.FRAG_PARSED,this.onFragParsed,this),e.off(D.FRAG_CHANGED,this.onFragChanged,this),e.off(D.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:r}=this;if(!e)return null;const n={};if(this.operationQueue){const c=this.isUpdating();c||this.operationQueue.removeBlockers();const i=this.isQueued();(c||i)&&this.warn(`Transfering MediaSource with${i?" operations in queue":""}${c?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const o=this.transferData;return!this.sourceBufferCount&&o&&o.mediaSource===r?wr(n,o.tracks):this.sourceBuffers.forEach(c=>{const[i]=c;i&&(n[i]=wr({},this.tracks[i]),this.removeBuffer(i)),c[0]=c[1]=null}),{media:e,mediaSource:r,tracks:n}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,r){var n;let o=2;(r.audio&&!r.video||!r.altAudio)&&(o=1),this.bufferCodecEventsTotal=o,this.log(`${o} bufferCodec event(s) expected.`),(n=this.transferData)!=null&&n.mediaSource&&this.sourceBufferCount&&o&&this.bufferCreated()}onMediaAttaching(e,r){const n=this.media=r.media;this.transferData=this.overrides=void 0;const o=ai(this.appendSource);if(o){const c=!!r.mediaSource;(c||r.overrides)&&(this.transferData=r,this.overrides=r.overrides);const i=this.mediaSource=r.mediaSource||new o;if(this.assignMediaSource(i),c)this._objectUrl=n.src,this.attachTransferred();else{const l=this._objectUrl=self.URL.createObjectURL(i);if(this.appendSource)try{n.removeAttribute("src");const t=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||t&&i instanceof t,jl(n),lA(n,l),n.load()}catch{n.src=l}else n.src=l}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var r,n;this.log(`${((r=this.transferData)==null?void 0:r.mediaSource)===e?"transferred":"created"} media source: ${(n=e.constructor)==null?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,r=this.transferData;if(!r||!e)return;const n=this.tracks,o=r.tracks,c=o?Object.keys(o):null,i=c?c.length:0,l=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(o&&c&&i){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Pr(n,(t,s)=>t==="initSegment"?void 0:s)};
transfer tracks: ${Pr(o,(t,s)=>t==="initSegment"?void 0:s)}}`),!Au(o,n)){r.mediaSource=null,r.tracks=void 0;const t=e.currentTime,s=this.details,a=Math.max(t,s?.fragments[0].start||0);if(a-t>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${t} -> ${a}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(o)}"->"${Object.keys(n)}") start time: ${a} currentTime: ${t}`),this.onMediaDetaching(D.MEDIA_DETACHING,{}),this.onMediaAttaching(D.MEDIA_ATTACHING,r),e.currentTime=a;return}this.transferData=void 0,c.forEach(t=>{const s=t,a=o[s];if(a){const u=a.buffer;if(u){const f=this.fragmentTracker,h=a.id;if(f.hasFragments(h)||f.hasParts(h)){const p=Xt.getBuffered(u);f.detectEvictedFragments(s,p,h,null,!0)}const A=Go(s),g=[s,u];this.sourceBuffers[A]=g,u.updating&&this.operationQueue&&this.operationQueue.prependBlocker(s),this.trackSourceBuffer(s,a)}}}),l(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),l()}get mediaSourceOpenOrEnded(){var e;const r=(e=this.mediaSource)==null?void 0:e.readyState;return r==="open"||r==="ended"}onMediaDetaching(e,r){const n=!!r.transferMedia;this.transferData=this.overrides=void 0;const{media:o,mediaSource:c,_objectUrl:i}=this;if(c){if(this.log(`media source ${n?"transferring":"detaching"}`),n)this.sourceBuffers.forEach(([l])=>{l&&this.removeBuffer(l)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const l=c.readyState==="open";try{const t=c.sourceBuffers;for(let s=t.length;s--;)l&&t[s].abort(),c.removeSourceBuffer(t[s]);l&&c.endOfStream()}catch(t){this.warn(`onMediaDetaching: ${t.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}c.removeEventListener("sourceopen",this._onMediaSourceOpen),c.removeEventListener("sourceended",this._onMediaSourceEnded),c.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(c.removeEventListener("startstreaming",this._onStartStreaming),c.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}o&&(o.removeEventListener("emptied",this._onMediaEmptied),n||(i&&self.URL.revokeObjectURL(i),this.mediaSrc===i?(o.removeAttribute("src"),this.appendSource&&jl(o),o.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(D.MEDIA_DETACHED,r)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var r;const n=(r=this.tracks[e])==null?void 0:r.buffer;if(this.removeBuffer(e),n)try{var o;(o=this.mediaSource)!=null&&o.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(c){this.warn(`onBufferReset ${e}`,c)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[Go(e)]=[null,null];const r=this.tracks[e];r&&(r.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new sA(this.tracks)}onBufferCodecs(e,r){const n=this.tracks,o=Object.keys(r);this.log(`BUFFER_CODECS: "${o}" (current SB count ${this.sourceBufferCount})`);const c="audiovideo"in r&&(n.audio||n.video)||n.audiovideo&&("audio"in r||"video"in r),i=!c&&this.sourceBufferCount&&this.media&&o.some(l=>!n[l]);if(c||i){this.warn(`Unsupported transition between "${Object.keys(n)}" and "${o}" SourceBuffers`);return}o.forEach(l=>{var t,s;const a=r[l],{id:u,codec:f,levelCodec:h,container:A,metadata:g,supplemental:p}=a;let m=n[l];const y=(t=this.transferData)==null||(t=t.tracks)==null?void 0:t[l],E=y!=null&&y.buffer?y:m,C=E?.pendingCodec||E?.codec,T=E?.levelCodec;m||(m=n[l]={buffer:void 0,listeners:[],codec:f,supplemental:p,container:A,levelCodec:h,metadata:g,id:u});const w=Hs(C,T),I=w?.replace(Hl,"$1");let L=Hs(f,h);const R=(s=L)==null?void 0:s.replace(Hl,"$1");L&&w&&I!==R&&(l.slice(0,5)==="audio"&&(L=to(L,this.appendSource)),this.log(`switching codec ${C} to ${L}`),L!==(m.pendingCodec||m.codec)&&(m.pendingCodec=L),m.container=A,this.appendChangeType(l,A,L))}),(this.tracksReady||this.sourceBufferCount)&&(r.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&this.mediaSourceOpenOrEnded&&this.checkPendingTracks()}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,r)=>{const n=this.tracks[r];return e[r]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,r,n){const o=`${r};codecs=${n}`,c={label:`change-type=${o}`,execute:()=>{const i=this.tracks[e];if(i){const l=i.buffer;l!=null&&l.changeType&&(this.log(`changing ${e} sourceBuffer type to ${o}`),l.changeType(o),i.codec=n,i.container=r)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:i=>{this.warn(`Failed to change ${e} SourceBuffer type`,i)}};this.append(c,e,this.isPending(this.tracks[e]))}blockAudio(e){var r;const n=e.start,o=n+e.duration*.05;if(((r=this.fragmentTracker.getAppendedFrag(n,Rt.MAIN))==null?void 0:r.gap)===!0)return;const i={label:"block-audio",execute:()=>{var l;const t=this.tracks.video;(this.lastVideoAppendEnd>o||t!=null&&t.buffer&&Xt.isBuffered(t.buffer,o)||((l=this.fragmentTracker.getAppendedFrag(o,Rt.MAIN))==null?void 0:l.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:l=>{this.warn("Error executing block-audio operation",l)}};this.blockedAudioAppend={op:i,frag:e},this.append(i,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:r}=this;e&&r&&(this.blockedAudioAppend=null,r.unblockAudio(e.op))}onBufferAppending(e,r){const{tracks:n}=this,{data:o,type:c,parent:i,frag:l,part:t,chunkMeta:s,offset:a}=r,u=s.buffering[c],{sn:f,cc:h}=l,A=self.performance.now();u.start=A;const g=l.stats.buffering,p=t?t.stats.buffering:null;g.start===0&&(g.start=A),p&&p.start===0&&(p.start=A);const m=n.audio;let y=!1;c==="audio"&&m?.container==="audio/mpeg"&&(y=!this.lastMpegAudioChunk||s.id===1||this.lastMpegAudioChunk.sn!==s.sn,this.lastMpegAudioChunk=s);const E=n.video,C=E?.buffer;if(C&&f!=="initSegment"){const I=t||l,L=this.blockedAudioAppend;if(c==="audio"&&i!=="main"&&!this.blockedAudioAppend&&!(E.ending||E.ended)){const B=I.start+I.duration*.05,P=C.buffered,N=this.currentOp("video");!P.length&&!N?this.blockAudio(I):!N&&!Xt.isBuffered(C,B)&&this.lastVideoAppendEnd<B&&this.blockAudio(I)}else if(c==="video"){const R=I.end;if(L){const B=L.frag.start;(R>B||R<this.lastVideoAppendEnd||Xt.isBuffered(C,B))&&this.unblockAudio()}this.lastVideoAppendEnd=R}}const T=(t||l).start,w={label:`append-${c}`,execute:()=>{var I;u.executeStart=self.performance.now();const L=(I=this.tracks[c])==null?void 0:I.buffer;L&&(y?this.updateTimestampOffset(L,T,.1,c,f,h):a!==void 0&&vt(a)&&this.updateTimestampOffset(L,a,1e-6,c,f,h)),this.appendExecutor(o,c)},onStart:()=>{},onComplete:()=>{const I=self.performance.now();u.executeEnd=u.end=I,g.first===0&&(g.first=I),p&&p.first===0&&(p.first=I);const L={};this.sourceBuffers.forEach(([R,B])=>{R&&(L[R]=Xt.getBuffered(B))}),this.appendErrors[c]=0,c==="audio"||c==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(D.BUFFER_APPENDED,{type:c,frag:l,part:t,chunkMeta:s,parent:l.type,timeRanges:L})},onError:I=>{var L;const R={type:Ot.MEDIA_ERROR,parent:l.type,details:ve.BUFFER_APPEND_ERROR,sourceBufferName:c,frag:l,part:t,chunkMeta:s,error:I,err:I,fatal:!1},B=(L=this.media)==null?void 0:L.error;if(I.code===DOMException.QUOTA_EXCEEDED_ERR||I.name=="QuotaExceededError"||"quota"in I)R.details=ve.BUFFER_FULL_ERROR;else if(I.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!B)R.errorAction=_i(!0);else if(I.name===hc&&this.sourceBufferCount===0)R.errorAction=_i(!0);else{const P=++this.appendErrors[c];this.warn(`Failed ${P}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${c}" sourceBuffer (${B||"no media error"})`),(P>=this.hls.config.appendErrorMaxRetry||B)&&(R.fatal=!0)}this.hls.trigger(D.ERROR,R)}};this.append(w,c,this.isPending(this.tracks[c]))}getFlushOp(e,r,n){return this.log(`queuing "${e}" remove ${r}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,r,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(D.BUFFER_FLUSHED,{type:e})},onError:o=>{this.warn(`Failed to remove ${r}-${n} from "${e}" SourceBuffer`,o)}}}onBufferFlushing(e,r){const{type:n,startOffset:o,endOffset:c}=r;n?this.append(this.getFlushOp(n,o,c),n):this.sourceBuffers.forEach(([i])=>{i&&this.append(this.getFlushOp(i,o,c),i)})}onFragParsed(e,r){const{frag:n,part:o}=r,c=[],i=o?o.elementaryStreams:n.elementaryStreams;i[Lr.AUDIOVIDEO]?c.push("audiovideo"):(i[Lr.AUDIO]&&c.push("audio"),i[Lr.VIDEO]&&c.push("video"));const l=()=>{const t=self.performance.now();n.stats.buffering.end=t,o&&(o.stats.buffering.end=t);const s=o?o.stats:n.stats;this.hls.trigger(D.FRAG_BUFFERED,{frag:n,part:o,stats:s,id:n.type})};c.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(l,c).catch(t=>{this.warn(`Fragment buffered callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,r){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const r=this.tracks[e];if(r)return!r.ended||r.ending}return!1})}onBufferEos(e,r){var n;this.sourceBuffers.forEach(([i])=>{if(i){const l=this.tracks[i];(!r.type||r.type===i)&&(l.ending=!0,l.ended||(l.ended=!0,this.log(`${i} buffer reached EOS`)))}});const o=((n=this.overrides)==null?void 0:n.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([i])=>{var l;return i&&!((l=this.tracks[i])!=null&&l.ended)})?o?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:i}=this;if(!i||i.readyState!=="open"){i&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${i.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),i.endOfStream(),this.hls.trigger(D.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(D.BUFFERED_TO_END,void 0)):r.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const r=this.tracks[e];r&&(r.ending=!1)}})}onLevelUpdated(e,{details:r}){r.fragments.length&&(this.details=r,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,r){if(r.details===ve.BUFFER_APPEND_ERROR&&r.frag){var n;const o=(n=r.errorAction)==null?void 0:n.nextAutoLevel;vt(o)&&o!==r.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:r,media:n}=this;if(!n||r===null||!this.sourceBufferCount)return;const o=e.config,c=n.currentTime,i=r.levelTargetDuration,l=r.live&&o.liveBackBufferLength!==null?o.liveBackBufferLength:o.backBufferLength;if(vt(l)&&l>=0){const s=Math.max(l,i),a=Math.floor(c/i)*i-s;this.flushBackBuffer(c,i,a)}const t=o.frontBufferFlushThreshold;if(vt(t)&&t>0){const s=Math.max(o.maxBufferLength,t),a=Math.max(s,i),u=Math.floor(c/i)*i+a;this.flushFrontBuffer(c,i,u)}}flushBackBuffer(e,r,n){this.sourceBuffers.forEach(([o,c])=>{if(c){const l=Xt.getBuffered(c);if(l.length>0&&n>l.start(0)){var i;this.hls.trigger(D.BACK_BUFFER_REACHED,{bufferEnd:n});const t=this.tracks[o];if((i=this.details)!=null&&i.live)this.hls.trigger(D.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(t!=null&&t.ended){this.log(`Cannot flush ${o} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(D.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:o})}}})}flushFrontBuffer(e,r,n){this.sourceBuffers.forEach(([o,c])=>{if(c){const i=Xt.getBuffered(c),l=i.length;if(l<2)return;const t=i.start(l-1),s=i.end(l-1);if(n>t||e>=t&&e<=s)return;this.hls.trigger(D.BUFFER_FLUSHING,{startOffset:t,endOffset:1/0,type:o})}})}getDurationAndRange(){var e;const{details:r,mediaSource:n}=this;if(!r||!this.media||n?.readyState!=="open")return null;const o=r.edge;if(r.live&&this.hls.config.liveDurationInfinity){if(r.fragments.length&&n.setLiveSeekableRange){const s=Math.max(0,r.fragmentStart),a=Math.max(s,o);return{duration:1/0,start:s,end:a}}return{duration:1/0}}const c=(e=this.overrides)==null?void 0:e.duration;if(c)return vt(c)?{duration:c}:null;const i=this.media.duration,l=vt(n.duration)?n.duration:0;return o>l&&o>i||!vt(i)?{duration:o}:null}updateMediaSource({duration:e,start:r,end:n}){const o=this.mediaSource;!this.media||!o||o.readyState!=="open"||(o.duration!==e&&(vt(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),o.duration=e),r!==void 0&&n!==void 0&&(this.log(`MediaSource duration is set to ${o.duration}. Setting seekable range to ${r}-${n}.`),o.setLiveSeekableRange(r,n)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:r,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${r} codec events expected: ${e}) ${Pr(n)}`),this.tracksReady){var o;const c=(o=this.transferData)==null?void 0:o.tracks;c&&Object.keys(c).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([r,n])=>{if(r){const o=this.tracks[r];e[r]={buffer:n,container:o.container,codec:o.codec,supplemental:o.supplemental,levelCodec:o.levelCodec,id:o.id,metadata:o.metadata}}}),this.hls.trigger(D.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([r])=>{this.executeNext(r)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(D.ERROR,{type:Ot.MEDIA_ERROR,details:ve.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:r,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const c in e){const i=c,l=e[i];if(this.isPending(l)){const t=this.getTrackCodec(l,i),s=`${l.container};codecs=${t}`;l.codec=t,this.log(`creating sourceBuffer(${s})${this.currentOp(i)?" Queued":""} ${Pr(l)}`);try{const a=n.addSourceBuffer(s),u=Go(i),f=[i,a];r[u]=f,l.buffer=a}catch(a){var o;this.error(`error while trying to add sourceBuffer: ${a.message}`),this.shiftAndExecuteNext(i),(o=this.operationQueue)==null||o.removeBlockers(),delete this.tracks[i],this.hls.trigger(D.ERROR,{type:Ot.MEDIA_ERROR,details:ve.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:a,sourceBufferName:i,mimeType:s,parent:l.id});return}this.trackSourceBuffer(i,l)}}this.bufferCreated()}getTrackCodec(e,r){const n=e.supplemental;let o=e.codec;n&&(r==="video"||r==="audiovideo")&&ea(n,"video")&&(o=zf(o,n));const c=Hs(o,e.levelCodec);return c?r.slice(0,5)==="audio"?to(c,this.appendSource):c:""}trackSourceBuffer(e,r){const n=r.buffer;if(!n)return;const o=this.getTrackCodec(r,e);this.tracks[e]={buffer:n,codec:o,container:r.container,levelCodec:r.levelCodec,supplemental:r.supplemental,metadata:r.metadata,id:r.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(c,i)=>{const l=i.removedRanges;l!=null&&l.length&&this.hls.trigger(D.BUFFER_FLUSHED,{type:c})})}get mediaSrc(){var e,r;const n=((e=this.media)==null||(r=e.querySelector)==null?void 0:r.call(e,"source"))||this.media;return n?.src}onSBUpdateStart(e){const r=this.currentOp(e);r&&r.onStart()}onSBUpdateEnd(e){var r;if(((r=this.mediaSource)==null?void 0:r.readyState)==="closed"){this.resetBuffer(e);return}const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,r){var n;const o=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${o}`,r),this.hls.trigger(D.ERROR,{type:Ot.MEDIA_ERROR,details:ve.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:o,fatal:!1});const c=this.currentOp(e);c&&c.onError(o)}updateTimestampOffset(e,r,n,o,c,i){const l=r-e.timestampOffset;Math.abs(l)>=n&&(this.log(`Updating ${o} SourceBuffer timestampOffset to ${r} (sn: ${c} cc: ${i})`),e.timestampOffset=r)}removeExecutor(e,r,n){const{media:o,mediaSource:c}=this,i=this.tracks[e],l=i?.buffer;if(!o||!c||!l){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const t=vt(o.duration)?o.duration:1/0,s=vt(c.duration)?c.duration:1/0,a=Math.max(0,r),u=Math.min(n,t,s);u>a&&(!i.ending||i.ended)?(i.ended=!1,this.log(`Removing [${a},${u}] from the ${e} SourceBuffer`),l.remove(a,u)):this.shiftAndExecuteNext(e)}appendExecutor(e,r){const n=this.tracks[r],o=n?.buffer;if(!o)throw new oA(`Attempting to append to the ${r} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,o.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(r=>{this.warn(`SourceBuffer blocked callback ${r}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(r){this.warn(`Callback run without blocking ${this.operationQueue} ${r}`)}}isUpdating(){return this.sourceBuffers.some(([e,r])=>e&&r.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,r=this.sourceBufferTypes){if(!r.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,o=r.map(i=>this.appendBlocker(i));return r.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(o).then(i=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(r=>{var n;const o=(n=this.tracks[r])==null?void 0:n.buffer;!o||o.updating||this.shiftAndExecuteNext(r)})}append(e,r,n){this.operationQueue&&this.operationQueue.append(e,r,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,r)=>e+(this.isPending(this.tracks[r])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[r])=>e+(r?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,r,n){const o=this.tracks[e];if(!o)return;const c=o.buffer;if(!c)return;const i=n.bind(this,e);o.listeners.push({event:r,listener:i}),c.addEventListener(r,i)}removeBufferListeners(e){const r=this.tracks[e];if(!r)return;const n=r.buffer;n&&(r.listeners.forEach(o=>{n.removeEventListener(o.event,o.listener)}),r.listeners.length=0)}}function jl(d){const e=d.querySelectorAll("source");[].slice.call(e).forEach(r=>{d.removeChild(r)})}function lA(d,e){const r=self.document.createElement("source");r.type="video/mp4",r.src=e,d.appendChild(r)}function Go(d){return d==="audio"?1:0}class Fa{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(D.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(D.BUFFER_CODECS,this.onBufferCodecs,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(D.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(D.BUFFER_CODECS,this.onBufferCodecs,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,r){const n=this.hls.levels[r.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,r){this.media=r.media instanceof HTMLVideoElement?r.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,r){const n=this.hls;this.restrictedLevels=[],this.firstLevel=r.firstLevel,n.config.capLevelToPlayerSize&&r.video&&this.startCapping()}onLevelsUpdated(e,r){this.timer&&vt(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,r){this.hls.config.capLevelToPlayerSize&&r.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const r=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&r.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),r.autoLevelCapping=n,r.autoLevelEnabled&&r.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=r.autoLevelCapping}}}getMaxLevel(e){const r=this.hls.levels;if(!r.length)return-1;const n=r.filter((o,c)=>this.isLevelAllowed(o)&&c<=e);return this.clientRect=null,Fa.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,r={width:0,height:0};if(e){const n=e.getBoundingClientRect();r.width=n.width,r.height=n.height,!r.width&&!r.height&&(r.width=n.right-n.left||e.width||0,r.height=n.bottom-n.top||e.height||0)}return this.clientRect=r,r}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,r,n){if(!(e!=null&&e.length))return-1;const o=(l,t)=>t?l.width!==t.width||l.height!==t.height:!0;let c=e.length-1;const i=Math.max(r,n);for(let l=0;l<e.length;l+=1){const t=e[l];if((t.width>=i||t.height>=i)&&o(t,e[l+1])){c=l;break}}return c}}const uA={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},un=uA,cA={HLS:"h"},fA=cA;class Wn{constructor(e,r){Array.isArray(e)&&(e=e.map(n=>n instanceof Wn?n:new Wn(n))),this.value=e,this.params=r}}const dA="Dict";function hA(d){return Array.isArray(d)?JSON.stringify(d):d instanceof Map?"Map{}":d instanceof Set?"Set{}":typeof d=="object"?JSON.stringify(d):String(d)}function AA(d,e,r,n){return new Error(`failed to ${d} "${hA(e)}" as ${r}`,{cause:n})}function Vn(d,e,r){return AA("serialize",d,e,r)}class Ac{constructor(e){this.description=e}}const Kl="Bare Item",gA="Boolean";function pA(d){if(typeof d!="boolean")throw Vn(d,gA);return d?"?1":"?0"}function mA(d){return btoa(String.fromCharCode(...d))}const vA="Byte Sequence";function yA(d){if(ArrayBuffer.isView(d)===!1)throw Vn(d,vA);return`:${mA(d)}:`}const EA="Integer";function bA(d){return d<-999999999999999||999999999999999<d}function gc(d){if(bA(d))throw Vn(d,EA);return d.toString()}function CA(d){return`@${gc(d.getTime()/1e3)}`}function pc(d,e){if(d<0)return-pc(-d,e);const r=Math.pow(10,e);if(Math.abs(d*r%1-.5)<Number.EPSILON){const o=Math.floor(d*r);return(o%2===0?o:o+1)/r}else return Math.round(d*r)/r}const xA="Decimal";function TA(d){const e=pc(d,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Vn(d,xA);const r=e.toString();return r.includes(".")?r:`${r}.0`}const SA="String",wA=/[\x00-\x1f\x7f]+/;function IA(d){if(wA.test(d))throw Vn(d,SA);return`"${d.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function LA(d){return d.description||d.toString().slice(7,-1)}const RA="Token";function zl(d){const e=LA(d);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Vn(e,RA);return e}function fa(d){switch(typeof d){case"number":if(!vt(d))throw Vn(d,Kl);return Number.isInteger(d)?gc(d):TA(d);case"string":return IA(d);case"symbol":return zl(d);case"boolean":return pA(d);case"object":if(d instanceof Date)return CA(d);if(d instanceof Uint8Array)return yA(d);if(d instanceof Ac)return zl(d);default:throw Vn(d,Kl)}}const kA="Key";function da(d){if(/^[a-z*][a-z0-9\-_.*]*$/.test(d)===!1)throw Vn(d,kA);return d}function Na(d){return d==null?"":Object.entries(d).map(([e,r])=>r===!0?`;${da(e)}`:`;${da(e)}=${fa(r)}`).join("")}function mc(d){return d instanceof Wn?`${fa(d.value)}${Na(d.params)}`:fa(d)}function DA(d){return`(${d.value.map(mc).join(" ")})${Na(d.params)}`}function BA(d,e={whitespace:!0}){if(typeof d!="object"||d==null)throw Vn(d,dA);const r=d instanceof Map?d.entries():Object.entries(d),n=e?.whitespace?" ":"";return Array.from(r).map(([o,c])=>{c instanceof Wn||(c=new Wn(c));let i=da(o);return c.value===!0?i+=Na(c.params):(i+="=",Array.isArray(c.value)?i+=DA(c):i+=mc(c)),i}).join(`,${n}`)}function vc(d,e){return BA(d,e)}const Nn="CMCD-Object",Ur="CMCD-Request",hi="CMCD-Session",ii="CMCD-Status",PA={br:Nn,ab:Nn,d:Nn,ot:Nn,tb:Nn,tpb:Nn,lb:Nn,tab:Nn,lab:Nn,url:Nn,pb:Ur,bl:Ur,tbl:Ur,dl:Ur,ltc:Ur,mtp:Ur,nor:Ur,nrr:Ur,rc:Ur,sn:Ur,sta:Ur,su:Ur,ttfb:Ur,ttfbb:Ur,ttlb:Ur,cmsdd:Ur,cmsds:Ur,smrt:Ur,df:Ur,cs:Ur,ts:Ur,cid:hi,pr:hi,sf:hi,sid:hi,st:hi,v:hi,msd:hi,bs:ii,bsd:ii,cdn:ii,rtp:ii,bg:ii,pt:ii,ec:ii,e:ii},OA={REQUEST:Ur};function _A(d){return Object.keys(d).reduce((e,r)=>{var n;return(n=d[r])===null||n===void 0||n.forEach(o=>e[o]=r),e},{})}function MA(d,e){const r={};if(!d)return r;const n=Object.keys(d),o=e?_A(e):{};return n.reduce((c,i)=>{var l;const t=PA[i]||o[i]||OA.REQUEST,s=(l=c[t])!==null&&l!==void 0?l:c[t]={};return s[i]=d[i],c},r)}function FA(d){return["ot","sf","st","e","sta"].includes(d)}function NA(d){return typeof d=="number"?vt(d):d!=null&&d!==""&&d!==!1}const yc="event";function UA(d,e){const r=new URL(d),n=new URL(e);if(r.origin!==n.origin)return d;const o=r.pathname.split("/").slice(1),c=n.pathname.split("/").slice(1,-1);for(;o[0]===c[0];)o.shift(),c.shift();for(;c.length;)c.shift(),o.unshift("..");return o.join("/")+r.search+r.hash}const Xs=d=>Math.round(d),ha=(d,e)=>Array.isArray(d)?d.map(r=>ha(r,e)):d instanceof Wn&&typeof d.value=="string"?new Wn(ha(d.value,e),d.params):(e.baseUrl&&(d=UA(d,e.baseUrl)),e.version===1?encodeURIComponent(d):d),Us=d=>Xs(d/100)*100,GA=(d,e)=>{let r=d;return e.version>=2&&(d instanceof Wn&&typeof d.value=="string"?r=new Wn([d]):typeof d=="string"&&(r=[d])),ha(r,e)},QA={br:Xs,d:Xs,bl:Us,dl:Us,mtp:Us,nor:GA,rtp:Us,tb:Xs},Ec="request",bc="response",Ua=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],$A=["e"],WA=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function Ao(d){return WA.test(d)}function VA(d){return Ua.includes(d)||$A.includes(d)||Ao(d)}const Cc=["d","dl","nor","ot","rtp","su"];function YA(d){return Ua.includes(d)||Cc.includes(d)||Ao(d)}const HA=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function jA(d){return Ua.includes(d)||Cc.includes(d)||HA.includes(d)||Ao(d)}const KA=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function zA(d){return KA.includes(d)||Ao(d)}const qA={[bc]:jA,[yc]:VA,[Ec]:YA};function xc(d,e={}){const r={};if(d==null||typeof d!="object")return r;const n=e.version||d.v||1,o=e.reportingMode||Ec,c=n===1?zA:qA[o];let i=Object.keys(d).filter(c);const l=e.filter;typeof l=="function"&&(i=i.filter(l));const t=o===bc||o===yc;t&&!i.includes("ts")&&i.push("ts"),n>1&&!i.includes("v")&&i.push("v");const s=wr({},QA,e.formatters),a={version:n,reportingMode:o,baseUrl:e.baseUrl};return i.sort().forEach(u=>{let f=d[u];const h=s[u];if(typeof h=="function"&&(f=h(f,a)),u==="v"){if(n===1)return;f=n}u=="pr"&&f===1||(t&&u==="ts"&&!vt(f)&&(f=Date.now()),NA(f)&&(FA(u)&&typeof f=="string"&&(f=new Ac(f)),r[u]=f))}),r}function XA(d,e={}){const r={};if(!d)return r;const n=xc(d,e),o=MA(n,e?.customHeaderMap);return Object.entries(o).reduce((c,[i,l])=>{const t=vc(l,{whitespace:!1});return t&&(c[i]=t),c},r)}function ZA(d,e,r){return wr(d,XA(e,r))}const JA="CMCD";function eg(d,e={}){return d?vc(xc(d,e),{whitespace:!1}):""}function tg(d,e={}){if(!d)return"";const r=eg(d,e);return encodeURIComponent(r)}function rg(d,e={}){if(!d)return"";const r=tg(d,e);return`${JA}=${r}`}const ql=/CMCD=[^&#]+/;function ng(d,e,r){const n=rg(e,r);if(!n)return d;if(ql.test(d))return d.replace(ql,n);const o=d.includes("?")?"&":"?";return`${d}${o}${n}`}class ig{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=o=>{try{this.apply(o,{ot:un.MANIFEST,su:!this.initialized})}catch(c){this.hls.logger.warn("Could not generate manifest CMCD data.",c)}},this.applyFragmentData=o=>{try{const{frag:c,part:i}=o,l=this.hls.levels[c.level],t=this.getObjectType(c),s={d:(i||c).duration*1e3,ot:t};(t===un.VIDEO||t===un.AUDIO||t==un.MUXED)&&(s.br=l.bitrate/1e3,s.tb=this.getTopBandwidth(t)/1e3,s.bl=this.getBufferLength(t));const a=i?this.getNextPart(i):this.getNextFrag(c);a!=null&&a.url&&a.url!==c.url&&(s.nor=a.url),this.apply(o,s)}catch(c){this.hls.logger.warn("Could not generate segment CMCD data.",c)}},this.hls=e;const r=this.config=e.config,{cmcd:n}=r;n!=null&&(r.pLoader=this.createPlaylistLoader(),r.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHED,this.onMediaDetached,this),e.on(D.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHED,this.onMediaDetached,this),e.off(D.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,r){this.media=r.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,r){var n,o;this.audioBuffer=(n=r.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(o=r.tracks.video)==null?void 0:o.buffer}createData(){var e;return{v:1,sf:fA.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,r={}){wr(r,this.createData());const n=r.ot===un.INIT||r.ot===un.VIDEO||r.ot===un.MUXED;this.starved&&n&&(r.bs=!0,r.su=!0,this.starved=!1),r.su==null&&(r.su=this.buffering);const{includeKeys:o}=this;o&&(r=Object.keys(r).reduce((i,l)=>(o.includes(l)&&(i[l]=r[l]),i),{}));const c={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),ZA(e.headers,r,c)):e.url=ng(e.url,r,c)}getNextFrag(e){var r;const n=(r=this.hls.levels[e.level])==null?void 0:r.details;if(n){const o=e.sn-n.startSN;return n.fragments[o+1]}}getNextPart(e){var r;const{index:n,fragment:o}=e,c=(r=this.hls.levels[o.level])==null||(r=r.details)==null?void 0:r.partList;if(c){const{sn:i}=o;for(let l=c.length-1;l>=0;l--){const t=c[l];if(t.index===n&&t.fragment.sn===i)return c[l+1]}}}getObjectType(e){const{type:r}=e;if(r==="subtitle")return un.TIMED_TEXT;if(e.sn==="initSegment")return un.INIT;if(r==="audio")return un.AUDIO;if(r==="main")return this.hls.audioTracks.length?un.VIDEO:un.MUXED}getTopBandwidth(e){let r=0,n;const o=this.hls;if(e===un.AUDIO)n=o.audioTracks;else{const c=o.maxAutoLevel,i=c>-1?c+1:o.levels.length;n=o.levels.slice(0,i)}return n.forEach(c=>{c.bitrate>r&&(r=c.bitrate)}),r>0?r:NaN}getBufferLength(e){const r=this.media,n=e===un.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!r?NaN:Xt.bufferInfo(n,r.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,r=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(c){this.loader=void 0,this.loader=new n(c)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(c,i,l){r(c),this.loader.load(c,i,l)}}}createFragmentLoader(){const{fLoader:e}=this.config,r=this.applyFragmentData,n=e||this.config.loader;return class{constructor(c){this.loader=void 0,this.loader=new n(c)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(c,i,l){r(c),this.loader.load(c,i,l)}}}}const sg=3e5;class og extends wn{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,r)=>(e.indexOf(r.pathwayId)===-1&&e.push(r.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const r=this.levels;r&&(this.levels=r.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,r){const{contentSteering:n}=r;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,r){this.audioTracks=r.audioTracks,this.subtitleTracks=r.subtitleTracks}onError(e,r){const{errorAction:n}=r;if(n?.action===tn.SendAlternateToPenaltyBox&&n.flags===gn.MoveAllAlternatesMatchingHost){const o=this.levels;let c=this._pathwayPriority,i=this.pathwayId;if(r.context){const{groupId:l,pathwayId:t,type:s}=r.context;l&&o?i=this.getPathwayForGroupId(l,s,i):t&&(i=t)}i in this.penalizedPathways||(this.penalizedPathways[i]=performance.now()),!c&&o&&(c=this.pathways()),c&&c.length>1&&(this.updatePathwayPriority(c),n.resolved=this.pathwayId!==i),r.details===ve.BUFFER_APPEND_ERROR&&!r.fatal?n.resolved=!0:n.resolved||this.warn(`Could not resolve ${r.details} ("${r.error.message}") with content-steering for Pathway: ${i} levels: ${o&&o.length} priorities: ${Pr(c)} penalized: ${Pr(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let r=this.getLevelsForPathway(this.pathwayId);if(r.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),r=this.getLevelsForPathway(n),this.pathwayId=n}return r.length!==e.length&&this.log(`Found ${r.length}/${e.length} levels in Pathway "${this.pathwayId}"`),r}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(r=>e===r.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let r;const n=this.penalizedPathways,o=performance.now();Object.keys(n).forEach(c=>{o-n[c]>sg&&delete n[c]});for(let c=0;c<e.length;c++){const i=e[c];if(i in n)continue;if(i===this.pathwayId)return;const l=this.hls.nextLoadLevel,t=this.hls.levels[l];if(r=this.getLevelsForPathway(i),r.length>0){this.log(`Setting Pathway to "${i}"`),this.pathwayId=i,Wu(r),this.hls.trigger(D.LEVELS_UPDATED,{levels:r});const s=this.hls.levels[l];t&&s&&this.levels&&(s.attrs["STABLE-VARIANT-ID"]!==t.attrs["STABLE-VARIANT-ID"]&&s.bitrate!==t.bitrate&&this.log(`Unstable Pathways change from bitrate ${t.bitrate} to ${s.bitrate}`),this.hls.nextLoadLevel=l);break}}}getPathwayForGroupId(e,r,n){const o=this.getLevelsForPathway(n).concat(this.levels||[]);for(let c=0;c<o.length;c++)if(r===cr.AUDIO_TRACK&&o[c].hasAudioGroup(e)||r===cr.SUBTITLE_TRACK&&o[c].hasSubtitleGroup(e))return o[c].pathwayId;return n}clonePathways(e){const r=this.levels;if(!r)return;const n={},o={};e.forEach(c=>{const{ID:i,"BASE-ID":l,"URI-REPLACEMENT":t}=c;if(r.some(a=>a.pathwayId===i))return;const s=this.getLevelsForPathway(l).map(a=>{const u=new Fr(a.attrs);u["PATHWAY-ID"]=i;const f=u.AUDIO&&`${u.AUDIO}_clone_${i}`,h=u.SUBTITLES&&`${u.SUBTITLES}_clone_${i}`;f&&(n[u.AUDIO]=f,u.AUDIO=f),h&&(o[u.SUBTITLES]=h,u.SUBTITLES=h);const A=Tc(a.uri,u["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",t),g=new ss({attrs:u,audioCodec:a.audioCodec,bitrate:a.bitrate,height:a.height,name:a.name,url:A,videoCodec:a.videoCodec,width:a.width});if(a.audioGroups)for(let p=1;p<a.audioGroups.length;p++)g.addGroupId("audio",`${a.audioGroups[p]}_clone_${i}`);if(a.subtitleGroups)for(let p=1;p<a.subtitleGroups.length;p++)g.addGroupId("text",`${a.subtitleGroups[p]}_clone_${i}`);return g});r.push(...s),Xl(this.audioTracks,n,t,i),Xl(this.subtitleTracks,o,t,i)})}loadSteeringManifest(e){const r=this.hls.config,n=r.loader;this.loader&&this.loader.destroy(),this.loader=new n(r);let o;try{o=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(o.protocol!=="data:"){const a=(this.hls.bandwidthEstimate||r.abrEwmaDefaultEstimate)|0;o.searchParams.set("_HLS_pathway",this.pathwayId),o.searchParams.set("_HLS_throughput",""+a)}const c={responseType:"json",url:o.href},i=r.steeringManifestLoadPolicy.default,l=i.errorRetry||i.timeoutRetry||{},t={loadPolicy:i,timeout:i.maxLoadTimeMs,maxRetry:l.maxNumRetry||0,retryDelay:l.retryDelayMs||0,maxRetryDelay:l.maxRetryDelayMs||0},s={onSuccess:(a,u,f,h)=>{this.log(`Loaded steering manifest: "${o}"`);const A=a.data;if(A?.VERSION!==1){this.log(`Steering VERSION ${A.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=A.TTL;const{"RELOAD-URI":g,"PATHWAY-CLONES":p,"PATHWAY-PRIORITY":m}=A;if(g)try{this.uri=new self.URL(g,o).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${g}`);return}this.scheduleRefresh(this.uri||f.url),p&&this.clonePathways(p);const y={steeringManifest:A,url:o.toString()};this.hls.trigger(D.STEERING_MANIFEST_LOADED,y),m&&this.updatePathwayPriority(m)},onError:(a,u,f,h)=>{if(this.log(`Error loading steering manifest: ${a.code} ${a.text} (${u.url})`),this.stopLoad(),a.code===410){this.enabled=!1,this.log(`Steering manifest ${u.url} no longer available`);return}let A=this.timeToLoad*1e3;if(a.code===429){const g=this.loader;if(typeof g?.getResponseHeader=="function"){const p=g.getResponseHeader("Retry-After");p&&(A=parseFloat(p)*1e3)}this.log(`Steering manifest ${u.url} rate limited`);return}this.scheduleRefresh(this.uri||u.url,A)},onTimeout:(a,u,f)=>{this.log(`Timeout loading steering manifest (${u.url})`),this.scheduleRefresh(this.uri||u.url)}};this.log(`Requesting steering manifest: ${o}`),this.loader.load(c,t,s)}scheduleRefresh(e,r=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const o=(n=this.hls)==null?void 0:n.media;if(o&&!o.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},r)}}function Xl(d,e,r,n){d&&Object.keys(e).forEach(o=>{const c=d.filter(i=>i.groupId===o).map(i=>{const l=wr({},i);return l.details=void 0,l.attrs=new Fr(l.attrs),l.url=l.attrs.URI=Tc(i.url,i.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),l.groupId=l.attrs["GROUP-ID"]=e[o],l.attrs["PATHWAY-ID"]=n,l});d.push(...c)})}function Tc(d,e,r,n){const{HOST:o,PARAMS:c,[r]:i}=n;let l;e&&(l=i?.[e],l&&(d=l));const t=new self.URL(d);return o&&!l&&(t.host=o),c&&Object.keys(c).sort().forEach(s=>{s&&t.searchParams.set(s,c[s])}),t.href}class Fi extends wn{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=Fi.CDMCleanupPromise?[Fi.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=r=>{const{initDataType:n,initData:o}=r,c=`"${r.type}" event: init data type: "${n}"`;if(this.debug(c),o!==null){if(!this.keyFormatPromise){let i=Object.keys(this.keySystemAccessPromises);i.length||(i=es(this.config));const l=i.map(Bo).filter(t=>!!t);this.keyFormatPromise=this.getKeyFormatPromise(l)}this.keyFormatPromise.then(i=>{const l=Ks(i);if(n!=="sinf"||l!==Gr.FAIRPLAY){this.log(`Ignoring "${r.type}" event with init data type: "${n}" for selected key-system ${l}`);return}let t;try{const h=qr(new Uint8Array(o)),A=Ia(JSON.parse(h).sinf),g=Cu(A);if(!g)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");t=new Uint8Array(g.subarray(8,24))}catch(h){this.warn(`${c} Failed to parse sinf: ${h}`);return}const s=pn(t),{keyIdToKeySessionPromise:a,mediaKeySessions:u}=this;let f=a[s];for(let h=0;h<u.length;h++){const A=u[h],g=A.decryptdata;if(!g.keyId)continue;const p=pn(g.keyId);if(s===p||g.uri.replace(/-/g,"").indexOf(s)!==-1){if(f=a[p],!f)continue;if(g.pssh)break;delete a[p],g.pssh=new Uint8Array(o),g.keyId=t,f=a[s]=f.then(()=>this.generateRequestWithPreferredKeySession(A,n,o,"encrypted-event-key-match")),f.catch(m=>this.handleError(m));break}}f||this.handleError(new Error(`Key ID ${s} not encountered in playlist. Key-system sessions ${u.length}.`))}).catch(i=>this.handleError(i))}},this.onWaitingForKey=r=>{this.log(`"${r.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(D.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(D.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(D.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(D.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(D.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(D.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:r,widevineLicenseUrl:n}=this.config,o=r?.[e];if(o)return o.licenseUrl;if(e===Gr.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(e){const r=this.getLicenseServerUrl(e);if(r===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return r}getServerCertificateUrl(e){const{drmSystems:r}=this.config,n=r?.[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const r=this.hls.levels,n=(i,l,t)=>!!i&&t.indexOf(i)===l,o=r.map(i=>i.audioCodec).filter(n),c=r.map(i=>i.videoCodec).filter(n);return o.length+c.length===0&&c.push("avc1.42e01e"),new Promise((i,l)=>{const t=s=>{const a=s.shift();this.getMediaKeysPromise(a,o,c).then(u=>i({keySystem:a,mediaKeys:u})).catch(u=>{s.length?t(s):u instanceof Bn?l(u):l(new Bn({type:Ot.KEY_SYSTEM_ERROR,details:ve.KEY_SYSTEM_NO_ACCESS,error:u,fatal:!0},u.message))})};t(e)})}requestMediaKeySystemAccess(e,r){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let o=`Configured requestMediaKeySystemAccess is not a function ${n}`;return Mu===null&&self.location.protocol==="http:"&&(o=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(o))}return n(e,r)}getMediaKeysPromise(e,r,n){var o;const c=Gd(e,r,n,this.config.drmSystemOptions||{});let i=this.keySystemAccessPromises[e],l=(o=i)==null?void 0:o.keySystemAccess;if(!l){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Pr(c)}`),l=this.requestMediaKeySystemAccess(e,c);const t=i=this.keySystemAccessPromises[e]={keySystemAccess:l};return l.catch(s=>{this.log(`Failed to obtain access to key-system "${e}": ${s}`)}),l.then(s=>{this.log(`Access for key-system "${s.keySystem}" obtained`);const a=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const u=t.mediaKeys=s.createMediaKeys().then(f=>(this.log(`Media-keys created for "${e}"`),t.hasMediaKeys=!0,a.then(h=>h?this.setMediaKeysServerCertificate(f,e,h):f)));return u.catch(f=>{this.error(`Failed to create media-keys for "${e}"}: ${f}`)}),u})}return l.then(()=>i.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:r,mediaKeys:n}){this.log(`Creating key-system session "${r}" keyId: ${pn(e.keyId||[])}`);const o=n.createSession(),c={decryptdata:e,keySystem:r,mediaKeys:n,mediaKeysSession:o,keyStatus:"status-pending"};return this.mediaKeySessions.push(c),c}renewKeySession(e){const r=e.decryptdata;if(r.pssh){const n=this.createMediaKeySessionContext(e),o=this.getKeyIdString(r),c="cenc";this.keyIdToKeySessionPromise[o]=this.generateRequestWithPreferredKeySession(n,c,r.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return pn(e.keyId)}updateKeySession(e,r){const n=e.mediaKeysSession;return this.log(`Updating key-session "${n.sessionId}" for keyId ${pn(e.decryptdata.keyId||[])}
      } (data length: ${r.byteLength})`),n.update(r)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>Bo(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:r,mediaKeys:n})=>this.attemptSetMediaKeys(r,n))}selectKeySystem(e){return new Promise((r,n)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:o})=>{const c=Bo(o);c?r(c):n(new Error(`Unable to find format for key-system "${o}"`))}).catch(n)})}selectKeySystemFormat(e){const r=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)),this.keyFormatPromise}getKeyFormatPromise(e){const r=es(this.config),n=e.map(Ks).filter(o=>!!o&&r.indexOf(o)!==-1);return this.selectKeySystem(n)}loadKey(e){const r=e.keyInfo.decryptdata,n=this.getKeyIdString(r),o=this.bannedKeyIds[n];if(o){const l=Zl(o,r);return this.handleError(l,e.frag),Promise.reject(l)}const c=`(keyId: ${n} format: "${r.keyFormat}" method: ${r.method} uri: ${r.uri})`;this.log(`Starting session for key ${c}`);const i=this.keyIdToKeySessionPromise[n];if(!i){const l=this.getKeySystemForKeyPromise(r).then(({keySystem:t,mediaKeys:s})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${c}`),this.attemptSetMediaKeys(t,s).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:t,mediaKeys:s,decryptdata:r}))))).then(t=>{const s="cenc",a=r.pssh?r.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(t,s,a,"playlist-key")});return l.catch(t=>this.handleError(t,e.frag)),this.keyIdToKeySessionPromise[n]=l,l}return i}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,r){this.hls&&(this.error(e.message),e instanceof Bn?(r&&(e.data.frag=r),this.hls.trigger(D.ERROR,e.data)):this.hls.trigger(D.ERROR,{type:Ot.KEY_SYSTEM_ERROR,details:ve.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const r=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[r];if(!n){const o=Ks(e.keyFormat),c=o?[o]:es(this.config);return this.attemptKeySystemAccess(c)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=es(this.config)),e.length===0)throw new Bn({type:Ot.KEY_SYSTEM_ERROR,details:ve.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Pr({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,r){if(this.mediaKeys===r)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const o=Promise.all(n).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(r)});return this.mediaKeys=r,this.setMediaKeysQueue.push(o),o.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(o),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(c=>n.indexOf(c)===-1)})}generateRequestWithPreferredKeySession(e,r,n,o){var c;const i=(c=this.config.drmSystems)==null||(c=c[e.keySystem])==null?void 0:c.generateRequest;if(i)try{const f=i.call(this.hls,r,n,e);if(!f)throw new Error("Invalid response from configured generateRequest filter");r=f.initDataType,n=f.initData?f.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(f){if(this.warn(f.message),this.hls&&this.hls.config.debug)throw f}if(n===null)return this.log(`Skipping key-session request for "${o}" (no initData)`),Promise.resolve(e);const l=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${o}": ${l} (init data type: ${r} length: ${n.byteLength})`);const t=new Ra,s=e._onmessage=f=>{const h=e.mediaKeysSession;if(!h){t.emit("error",new Error("invalid state"));return}const{messageType:A,message:g}=f;this.log(`"${A}" message event for session "${h.sessionId}" message size: ${g.byteLength}`),A==="license-request"||A==="license-renewal"?this.renewLicense(e,g).catch(p=>{t.eventNames().length?t.emit("error",p):this.handleError(p)}):A==="license-release"?e.keySystem===Gr.FAIRPLAY&&(this.updateKeySession(e,sa("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${A}"`)},a=e._onkeystatuseschange=f=>{if(!e.mediaKeysSession){t.emit("error",new Error("invalid state"));return}const A=e.keyStatus;this.onKeyStatusChange(e);const g=e.keyStatus;g!==A&&(t.emit("keyStatus",g,e),g==="expired"&&(this.log(`${e.keySystem} expired for key ${l}`),this.renewKeySession(e)))};on(e.mediaKeysSession,"message",s),on(e.mediaKeysSession,"keystatuseschange",a);const u=new Promise((f,h)=>{t.on("error",h),t.on("keyStatus",(A,{decryptdata:g})=>{A.startsWith("usable")?f():A==="internal-error"||A==="output-restricted"?h(Zl(A,g)):A==="expired"?h(new Error(`key expired while generating request (keyId: ${l})`)):this.warn(`unhandled key status change "${A}" (keyId: ${l})`)})});return e.mediaKeysSession.generateRequest(r,n).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${l}`)}).catch(f=>{throw new Bn({type:Ot.KEY_SYSTEM_ERROR,details:ve.KEY_SYSTEM_NO_SESSION,error:f,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${f}`)}).then(()=>u).catch(f=>{throw t.removeAllListeners(),this.removeSession(e),f}).then(()=>(t.removeAllListeners(),e))}onKeyStatusChange(e){const r=pn(new Uint8Array(e.decryptdata.keyId||[]));e.mediaKeysSession.keyStatuses.forEach((n,o)=>{if(typeof o=="string"&&typeof n=="object"){const l=o;o=n,n=l}const c=pn("buffer"in o?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o));n==="internal-error"&&(this.bannedKeyIds[c]=n);const i=c===r;this.log(`${i?"":"un"}matched key status change "${n}" for keyStatuses keyId: ${c} session keyId: ${r} uri: ${e.decryptdata.uri}`),i&&(e.keyStatus=n)})}fetchServerCertificate(e){const r=this.config,n=r.loader,o=new n(r),c=this.getServerCertificateUrl(e);return c?(this.log(`Fetching server certificate for "${e}"`),new Promise((i,l)=>{const t={responseType:"arraybuffer",url:c},s=r.certLoadPolicy.default,a={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},u={onSuccess:(f,h,A,g)=>{i(f.data)},onError:(f,h,A,g)=>{l(new Bn({type:Ot.KEY_SYSTEM_ERROR,details:ve.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:A,response:Sr({url:t.url,data:void 0},f)},`"${e}" certificate request failed (${c}). Status: ${f.code} (${f.text})`))},onTimeout:(f,h,A)=>{l(new Bn({type:Ot.KEY_SYSTEM_ERROR,details:ve.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:A,response:{url:t.url,data:void 0}},`"${e}" certificate request timed out (${c})`))},onAbort:(f,h,A)=>{l(new Error("aborted"))}};o.load(t,a,u)})):Promise.resolve()}setMediaKeysServerCertificate(e,r,n){return new Promise((o,c)=>{e.setServerCertificate(n).then(i=>{this.log(`setServerCertificate ${i?"success":"not supported by CDM"} (${n.byteLength}) on "${r}"`),o(e)}).catch(i=>{c(new Bn({type:Ot.KEY_SYSTEM_ERROR,details:ve.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:i,fatal:!0},i.message))})})}renewLicense(e,r){return this.requestLicense(e,new Uint8Array(r)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(o=>{throw new Bn({type:Ot.KEY_SYSTEM_ERROR,details:ve.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:o,fatal:!1},o.message)}))}unpackPlayReadyKeyMessage(e,r){const n=String.fromCharCode.apply(null,new Uint16Array(r.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),r;const o=new DOMParser().parseFromString(n,"application/xml"),c=o.querySelectorAll("HttpHeader");if(c.length>0){let a;for(let u=0,f=c.length;u<f;u++){var i,l;a=c[u];const h=(i=a.querySelector("name"))==null?void 0:i.textContent,A=(l=a.querySelector("value"))==null?void 0:l.textContent;h&&A&&e.setRequestHeader(h,A)}}const t=o.querySelector("Challenge"),s=t?.textContent;if(!s)throw new Error("Cannot find <Challenge> in key message");return sa(atob(s))}setupLicenseXHR(e,r,n,o){const c=this.config.licenseXhrSetup;return c?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return c.call(this.hls,e,r,n,o)}).catch(i=>{if(!n.decryptdata)throw i;return e.open("POST",r,!0),c.call(this.hls,e,r,n,o)}).then(i=>(e.readyState||e.open("POST",r,!0),{xhr:e,licenseChallenge:i||o})):(e.open("POST",r,!0),Promise.resolve({xhr:e,licenseChallenge:o}))}requestLicense(e,r){const n=this.config.keyLoadPolicy.default;return new Promise((o,c)=>{const i=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${i}`);const l=new XMLHttpRequest;l.responseType="arraybuffer",l.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return c(new Error("invalid state"));if(l.readyState===4)if(l.status===200){this._requestLicenseFailureCount=0;let t=l.response;this.log(`License received ${t instanceof ArrayBuffer?t.byteLength:t}`);const s=this.config.licenseResponseCallback;if(s)try{t=s.call(this.hls,l,i,e)}catch(a){this.error(a)}o(t)}else{const t=n.errorRetry,s=t?t.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>s||l.status>=400&&l.status<500)c(new Bn({type:Ot.KEY_SYSTEM_ERROR,details:ve.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:l,response:{url:i,data:void 0,code:l.status,text:l.statusText}},`License Request XHR failed (${i}). Status: ${l.status} (${l.statusText})`));else{const a=s-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${a} attempts left`),this.requestLicense(e,r).then(o,c)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=l,this.setupLicenseXHR(l,i,e,r).then(({xhr:t,licenseChallenge:s})=>{e.keySystem==Gr.PLAYREADY&&(s=this.unpackPlayReadyKeyMessage(t,s)),t.send(s)}).catch(c)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,r){if(!this.config.emeEnabled)return;const n=r.media;this.media=n,on(n,"encrypted",this.onMediaEncrypted),on(n,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(fn(e,"encrypted",this.onMediaEncrypted),fn(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const r=this.media,n=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,fo.clearKeyUriToKeyIdMap();const o=n.length;Fi.CDMCleanupPromise=Promise.all(n.map(c=>this.removeSession(c)).concat(r==null||(e=r.setMediaKeys(null))==null?void 0:e.catch(c=>{this.log(`Could not clear media keys: ${c}`),this.hls&&this.hls.trigger(D.ERROR,{type:Ot.OTHER_ERROR,details:ve.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${c}`)})}))).catch(c=>{this.log(`Could not close sessions and clear media keys: ${c}`),this.hls&&this.hls.trigger(D.ERROR,{type:Ot.OTHER_ERROR,details:ve.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${c}`)})}).then(()=>{o&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null,this.bannedKeyIds={}}onManifestLoaded(e,{sessionKeys:r}){if(!(!r||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=r.reduce((o,c)=>(o.indexOf(c.keyFormat)===-1&&o.push(c.keyFormat),o),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:r,licenseXhr:n,decryptdata:o}=e;if(r){this.log(`Remove licenses and keys and close session "${r.sessionId}" keyId: ${pn(o?.keyId||[])}`),e._onmessage&&(r.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(r.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const c=this.mediaKeySessions.indexOf(e);c>-1&&this.mediaKeySessions.splice(c,1);const{drmSystemOptions:i}=this.config;return($d(i)?new Promise((t,s)=>{self.setTimeout(()=>s(new Error("MediaKeySession.remove() timeout")),8e3),r.remove().then(t).catch(s)}):Promise.resolve()).catch(t=>{this.log(`Could not remove session: ${t}`),this.hls&&this.hls.trigger(D.ERROR,{type:Ot.OTHER_ERROR,details:ve.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${t}`)})}).then(()=>r.close()).catch(t=>{this.log(`Could not close session: ${t}`),this.hls&&this.hls.trigger(D.ERROR,{type:Ot.OTHER_ERROR,details:ve.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${t}`)})})}}}Fi.CDMCleanupPromise=void 0;class Bn extends Error{constructor(e,r){super(r),this.data=void 0,e.error||(e.error=new Error(r)),this.data=e,e.err=e.error}}function Zl(d,e){const r=d==="output-restricted",n=r?ve.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:ve.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new Bn({type:Ot.KEY_SYSTEM_ERROR,details:n,fatal:!1,decryptdata:e},r?"HDCP level output restricted":`key status changed to "${d}"`)}class ag{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(D.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(D.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,r){const n=this.hls.config;if(n.capLevelOnFPSDrop){const o=r.media instanceof self.HTMLVideoElement?r.media:null;this.media=o,o&&typeof o.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,r,n){const o=performance.now();if(r){if(this.lastTime){const c=o-this.lastTime,i=n-this.lastDroppedFrames,l=r-this.lastDecodedFrames,t=1e3*i/c,s=this.hls;if(s.trigger(D.FPS_DROP,{currentDropped:i,currentDecoded:l,totalDroppedFrames:n}),t>0&&i>s.config.fpsDroppedMonitoringThreshold*l){let a=s.currentLevel;s.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+a),a>0&&(s.autoLevelCapping===-1||s.autoLevelCapping>=a)&&(a=a-1,s.trigger(D.FPS_DROP_LEVEL_CAPPING,{level:a,droppedLevel:s.currentLevel}),s.autoLevelCapping=a,this.streamController.nextLevelSwitch())}}this.lastTime=o,this.lastDroppedFrames=n,this.lastDecodedFrames=r}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const r=e.getVideoPlaybackQuality();this.checkFPS(e,r.totalVideoFrames,r.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function Sc(d,e){let r;try{r=new Event("addtrack")}catch{r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=d,e.dispatchEvent(r)}function wc(d,e){const r=d.mode;if(r==="disabled"&&(d.mode="hidden"),d.cues&&!d.cues.getCueById(e.id))try{if(d.addCue(e),!d.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){Cr.debug(`[texttrack-utils]: ${n}`);try{const o=new self.TextTrackCue(e.startTime,e.endTime,e.text);o.id=e.id,d.addCue(o)}catch(o){Cr.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${o}`)}}r==="disabled"&&(d.mode=r)}function Oi(d,e){const r=d.mode;if(r==="disabled"&&(d.mode="hidden"),d.cues)for(let n=d.cues.length;n--;)e&&d.cues[n].removeEventListener("enter",e),d.removeCue(d.cues[n]);r==="disabled"&&(d.mode=r)}function Aa(d,e,r,n){const o=d.mode;if(o==="disabled"&&(d.mode="hidden"),d.cues&&d.cues.length>0){const c=ug(d.cues,e,r);for(let i=0;i<c.length;i++)(!n||n(c[i]))&&d.removeCue(c[i])}o==="disabled"&&(d.mode=o)}function lg(d,e){if(e<=d[0].startTime)return 0;const r=d.length-1;if(e>d[r].endTime)return-1;let n=0,o=r,c;for(;n<=o;)if(c=Math.floor((o+n)/2),e<d[c].startTime)o=c-1;else if(e>d[c].startTime&&n<r)n=c+1;else return c;return d[n].startTime-e<e-d[o].startTime?n:o}function ug(d,e,r){const n=[],o=lg(d,e);if(o>-1)for(let c=o,i=d.length;c<i;c++){const l=d[c];if(l.startTime>=e&&l.endTime<=r)n.push(l);else if(l.startTime>r)return n}return n}function Zs(d){const e=[];for(let r=0;r<d.length;r++){const n=d[r];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(d[r])}return e}class cg extends Ma{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let r=null;const n=Zs(this.media.textTracks);for(let c=0;c<n.length;c++)if(n[c].mode==="hidden")r=n[c];else if(n[c].mode==="showing"){r=n[c];break}const o=this.findTrackForTextTrack(r);this.subtitleTrack!==o&&this.setSubtitleTrack(o)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVEL_LOADING,this.onLevelLoading,this),e.off(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(D.ERROR,this.onError,this)}onMediaAttached(e,r){this.media=r.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,r){const n=this.media;if(!n)return;const o=!!r.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,o)return;Zs(n.textTracks).forEach(i=>{Oi(i)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,r){this.tracks=r.subtitleTracks}onSubtitleTrackLoaded(e,r){const{id:n,groupId:o,details:c}=r,i=this.tracksInGroup[n];if(!i||i.groupId!==o){this.warn(`Subtitle track with id:${n} and group:${o} not found in active group ${i?.groupId}`);return}const l=i.details;i.details=r.details,this.log(`Subtitle track ${n} "${i.name}" lang:${i.lang} group:${o} loaded [${c.startSN}-${c.endSN}]`),n===this.trackId&&this.playlistLoaded(n,r,l)}onLevelLoading(e,r){this.switchLevel(r.level)}onLevelSwitching(e,r){this.switchLevel(r.level)}switchLevel(e){const r=this.hls.levels[e];if(!r)return;const n=r.subtitleGroups||null,o=this.groupIds;let c=this.currentTrack;if(!n||o?.length!==n?.length||n!=null&&n.some(i=>o?.indexOf(i)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const i=this.tracks.filter(a=>!n||n.indexOf(a.groupId)!==-1);if(i.length)this.selectDefaultTrack&&!i.some(a=>a.default)&&(this.selectDefaultTrack=!1),i.forEach((a,u)=>{a.id=u});else if(!c&&!this.tracksInGroup.length)return;this.tracksInGroup=i;const l=this.hls.config.subtitlePreference;if(!c&&l){this.selectDefaultTrack=!1;const a=Qn(l,i);if(a>-1)c=i[a];else{const u=Qn(l,this.tracks);c=this.tracks[u]}}let t=this.findTrackId(c);t===-1&&c&&(t=this.findTrackId(null));const s={subtitleTracks:i};this.log(`Updating subtitle tracks, ${i.length} track(s) found in "${n?.join(",")}" group-id`),this.hls.trigger(D.SUBTITLE_TRACKS_UPDATED,s),t!==-1&&this.trackId===-1&&this.setSubtitleTrack(t)}}findTrackId(e){const r=this.tracksInGroup,n=this.selectDefaultTrack;for(let o=0;o<r.length;o++){const c=r[o];if(!(n&&!c.default||!n&&!e)&&(!e||pi(c,e)))return o}if(e){for(let o=0;o<r.length;o++){const c=r[o];if(us(e.attrs,c.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return o}for(let o=0;o<r.length;o++){const c=r[o];if(us(e.attrs,c.attrs,["LANGUAGE"]))return o}}return-1}findTrackForTextTrack(e){if(e){const r=this.tracksInGroup;for(let n=0;n<r.length;n++){const o=r[n];if(ca(o,e))return n}}return-1}onError(e,r){r.fatal||!r.context||r.context.type===cr.SUBTITLE_TRACK&&r.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(r.context.groupId)!==-1)&&this.checkRetry(r)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const r=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,r.length){const n=this.currentTrack;if(n&&pi(e,n))return n;const o=Qn(e,this.tracksInGroup);if(o>-1){const c=this.tracksInGroup[o];return this.setSubtitleTrack(o),c}else{if(n)return null;{const c=Qn(e,r);if(c>-1)return r[c]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,r){super.loadingPlaylist(e,r);const n=e.id,o=e.groupId,c=this.getUrlWithDirectives(e.url,r),i=e.details,l=i?.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${o}${r?.msn!==void 0?" at sn "+r.msn+" part "+r.part:""}${l&&i.live?" age "+l.toFixed(1)+(i.type&&" "+i.type||""):""} ${c}`),this.hls.trigger(D.SUBTITLE_TRACK_LOADING,{url:c,id:n,groupId:o,deliveryDirectives:r||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const r=Zs(e.textTracks),n=this.currentTrack;let o;if(n&&(o=r.filter(c=>ca(n,c))[0],o||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(r).forEach(c=>{c.mode!=="disabled"&&c!==o&&(c.mode="disabled")}),o){const c=this.subtitleDisplay?"showing":"hidden";o.mode!==c&&(o.mode=c)}}setSubtitleTrack(e){const r=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=r.length||!vt(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,o=r[e]||null;if(this.trackId=e,this.currentTrack=o,this.toggleTrackModes(),!o){this.hls.trigger(D.SUBTITLE_TRACK_SWITCH,{id:e});return}const c=!!o.details&&!o.details.live;if(e===this.trackId&&o===n&&c)return;this.log(`Switching to subtitle-track ${e}`+(o?` "${o.name}" lang:${o.lang} group:${o.groupId}`:""));const{id:i,groupId:l="",name:t,type:s,url:a}=o;this.hls.trigger(D.SUBTITLE_TRACK_SWITCH,{id:i,groupId:l,name:t,type:s,url:a});const u=this.switchParams(o.url,n?.details,o.details);this.loadPlaylist(u)}}function fg(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),r=e.toString();return URL.revokeObjectURL(e),r.slice(r.lastIndexOf("/")+1)}catch{let r=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,o=>{const c=(r+Math.random()*16)%16|0;return r=Math.floor(r/16),(o=="x"?c:c&3|8).toString(16)})}}}function ns(d){let e=5381,r=d.length;for(;r;)e=e*33^d.charCodeAt(--r);return(e>>>0).toString()}const Ni=.025;let uo=(function(d){return d[d.Point=0]="Point",d[d.Range=1]="Range",d})({});function dg(d,e,r){return`${d.identifier}-${r+1}-${ns(e)}`}class hg{constructor(e,r){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=r,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var r;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;return e<=0||isNaN(n)?!1:n===0?!0:(((r=this.assetList[e])==null?void 0:r.startOffset)||0)>n}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const r=this.dateRange.tagAnchor;if(r)return Qo(e,r)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const r=this.dateRange.startTime,n=Qo(r,e);return r-n<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,r=vt(e)?e:this.duration;return this.cumulativeDuration+r}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const r=this.resumeAnchor;if(r)return Qo(e,r)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Ni))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let r;return this._duration!==null?r=this._duration:this.dateRange.duration?r=this.dateRange.duration:r=this.dateRange.plannedDuration||0,!isNaN(e)&&e<r&&(r=e),r}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?uo.Range:uo.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return Ag(this)}}function Qo(d,e){return d-e.start<e.duration/2&&!(Math.abs(d-(e.start+e.duration))<Ni)?e.start:e.start+e.duration}function Ic(d,e,r){const n=new self.URL(d,r);return n.protocol!=="data:"&&n.searchParams.set("_HLS_primary_id",e),n}function $o(d,e){for(;(r=d.assetList[++e])!=null&&r.error;)var r;return e}function Ag(d){return`["${d.identifier}" ${d.cue.pre?"<pre>":d.cue.post?"<post>":""}${d.timelineStart.toFixed(2)}-${d.resumeTime.toFixed(2)}]`}function Bi(d){const e=d.timelineStart,r=d.duration||0;return`["${d.identifier}" ${e.toFixed(2)}-${(e+r).toFixed(2)}]`}class gg{constructor(e,r,n,o){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(D.PLAYOUT_LIMIT_REACHED,{})};const c=this.hls=new e(r);this.interstitial=n,this.assetItem=o;const i=()=>{this.hasDetails=!0};c.once(D.LEVEL_LOADED,i),c.once(D.AUDIO_TRACK_LOADED,i),c.once(D.SUBTITLE_TRACK_LOADED,i),c.on(D.MEDIA_ATTACHING,(l,{media:t})=>{this.removeMediaListeners(),this.mediaAttached=t,this.interstitial.playoutLimit&&(t.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&c.on(D.BUFFER_APPENDED,()=>{const a=this.bufferedEnd;this.reachedPlayout(a)&&(this._bufferedEosTime=a,c.trigger(D.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let r=this.assetItem.uri;try{r=Ic(r,e.config.primarySessionId||"").href}catch{}e.loadSource(r)}}bufferedInPlaceToEnd(e){var r;if(!this.appendInPlace)return!1;if((r=this.hls)!=null&&r.bufferedToEnd)return!0;if(!e)return!1;const n=Math.min(this._bufferedEosTime||1/0,this.duration),o=this.timelineOffset,c=Xt.bufferInfo(e,o,0);return this.getAssetTime(c.end)>=n-.02}reachedPlayout(e){const n=this.interstitial.playoutLimit;return this.startOffset+e>=n}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const r=Xt.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(r.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const r=this.interstitial.playoutLimit;if(r){const n=r-this.startOffset;if(n>0&&n<e)return n}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const r=this.timelineOffset;if(e!==r){const n=e-r;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const r=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-r),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var r;this.loadSource(),(r=this.hls)==null||r.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const r=n=>delete n.details;e.levels.forEach(r),e.allAudioTracks.forEach(r),e.allSubtitleTracks.forEach(r),this.hasDetails=!1}}on(e,r,n){var o;(o=this.hls)==null||o.on(e,r)}once(e,r,n){var o;(o=this.hls)==null||o.once(e,r)}off(e,r,n){var o;(o=this.hls)==null||o.off(e,r)}toString(){var e;return`HlsAssetPlayer: ${Bi(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const Jl=.033;class pg extends wn{constructor(e,r){super("interstitials-sched",r),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,r){return this.events?this.events.reduce((n,o)=>e<=o.startOffset&&r>o.startOffset?(delete o.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,r){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const o=this.items;if(o)for(o[n]||(r===void 0&&(r=e.start),n=this.findItemIndexAtTime(r));n>=0&&(c=o[n])!=null&&c.event;){var c;n--}return n}findItemIndexAtTime(e,r){const n=this.items;if(n)for(let o=0;o<n.length;o++){let c=n[o];if(r&&r!=="primary"&&(c=c[r]),e===c.start||e>c.start&&e<c.end)return o}return-1}findJumpRestrictedIndex(e,r){const n=this.items;if(n)for(let o=e;o<=r&&n[o];o++){const c=n[o].event;if(c!=null&&c.restrictions.jump&&!c.appendInPlace)return o}return-1}findEventIndex(e){const r=this.items;if(r)for(let o=r.length;o--;){var n;if(((n=r[o].event)==null?void 0:n.identifier)===e)return o}return-1}findAssetIndex(e,r){const n=e.assetList,o=n.length;if(o>1)for(let c=0;c<o;c++){const i=n[c];if(!i.error){const l=i.timelineStart;if(r===l||r>l&&(r<l+(i.duration||0)||c===o-1))return c}}return 0}get assetIdAtEnd(){var e;const r=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(r){const n=r.assetList,o=n[n.length-1];if(o)return o.identifier}return null}parseInterstitialDateRanges(e,r){const n=e.main.details,{dateRanges:o}=n,c=this.events,i=this.parseDateRanges(o,{url:n.url},r),l=Object.keys(o),t=c?c.filter(s=>!l.includes(s.identifier)):[];i.length&&i.sort((s,a)=>{const u=s.cue.pre,f=s.cue.post,h=a.cue.pre,A=a.cue.post;if(u&&!h)return-1;if(h&&!u||f&&!A)return 1;if(A&&!f)return-1;if(!u&&!h&&!f&&!A){const g=s.startTime,p=a.startTime;if(g!==p)return g-p}return s.dateRange.tagOrder-a.dateRange.tagOrder}),this.events=i,t.forEach(s=>{this.removeEvent(s)}),this.updateSchedule(e,t)}updateSchedule(e,r=[],n=!1){const o=this.events||[];if(o.length||r.length||this.length<2){const c=this.items,i=this.parseSchedule(o,e);(n||r.length||c?.length!==i.length||i.some((t,s)=>Math.abs(t.playout.start-c[s].playout.start)>.005||Math.abs(t.playout.end-c[s].playout.end)>.005))&&(this.items=i,this.onScheduleUpdate(r,c))}}parseDateRanges(e,r,n){const o=[],c=Object.keys(e);for(let i=0;i<c.length;i++){const l=c[i],t=e[l];if(t.isInterstitial){let s=this.eventMap[l];s?s.setDateRange(t):(s=new hg(t,r),this.eventMap[l]=s,n===!1&&(s.appendInPlace=n)),o.push(s)}}return o}parseSchedule(e,r){const n=[],o=r.main.details,c=o.live?1/0:o.edge;let i=0;if(e=e.filter(t=>!t.error&&!(t.cue.once&&t.hasPlayed)),e.length){this.resolveOffsets(e,r);let t=0,s=0;if(e.forEach((a,u)=>{const f=a.cue.pre,h=a.cue.post,A=e[u-1]||null,g=a.appendInPlace,p=h?c:a.startOffset,m=a.duration,y=a.timelineOccupancy===uo.Range?m:0,E=a.resumptionOffset,C=A?.startTime===p,T=p+a.cumulativeDuration;let w=g?T+m:p+E;if(f||!h&&p<=0){const L=s;s+=y,a.timelineStart=T;const R=i;i+=m,n.push({event:a,start:T,end:w,playout:{start:R,end:i},integrated:{start:L,end:s}})}else if(p<=c){if(!C){const B=p-t;if(B>Jl){const P=t,N=s;s+=B;const U=i;i+=B;const G={previousEvent:e[u-1]||null,nextEvent:a,start:P,end:P+B,playout:{start:U,end:i},integrated:{start:N,end:s}};n.push(G)}else B>0&&A&&(A.cumulativeDuration+=B,n[n.length-1].end=p)}h&&(w=T),a.timelineStart=T;const L=s;s+=y;const R=i;i+=m,n.push({event:a,start:T,end:w,playout:{start:R,end:i},integrated:{start:L,end:s}})}else return;const I=a.resumeTime;h||I>c?t=c:t=I}),t<c){var l;const a=t,u=s,f=c-t;s+=f;const h=i;i+=f,n.push({previousEvent:((l=n[n.length-1])==null?void 0:l.event)||null,nextEvent:null,start:t,end:a+f,playout:{start:h,end:i},integrated:{start:u,end:s}})}this.setDurations(c,i,s)}else n.push({previousEvent:null,nextEvent:null,start:0,end:c,playout:{start:0,end:c},integrated:{start:0,end:c}}),this.setDurations(c,c,c);return n}setDurations(e,r,n){this.durations={primary:e,playout:r,integrated:n}}resolveOffsets(e,r){const n=r.main.details,o=n.live?1/0:n.edge;let c=0,i=-1;e.forEach((l,t)=>{const s=l.cue.pre,a=l.cue.post,u=s?0:a?o:l.startTime;this.updateAssetDurations(l),i===u?l.cumulativeDuration=c:(c=0,i=u),!a&&l.snapOptions.in&&(l.resumeAnchor=mi(null,n.fragments,l.startOffset+l.resumptionOffset,0,0)||void 0),l.appendInPlace&&!l.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(l,r)||(l.appendInPlace=!1)),!l.appendInPlace&&t+1<e.length&&e[t+1].startTime-e[t].resumeTime<Jl&&(e[t+1].appendInPlace=!1,e[t+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${l}`));const h=vt(l.resumeOffset)?l.resumeOffset:l.duration;c+=h})}primaryCanResumeInPlaceAt(e,r){const n=e.resumeTime,o=e.startTime+e.resumptionOffset;return Math.abs(n-o)>Ni?(this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${o}`),!1):!Object.keys(r).some(i=>{const l=r[i].details,t=l.edge;if(n>=t)return this.log(`"${e.identifier}" resumption ${n} past ${i} playlist end ${t}`),!1;const s=mi(null,l.fragments,n);if(!s)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${i} playlist (${l.fragStart}-${l.fragmentEnd})`),!0;const a=i==="audio"?.175:0;return Math.abs(s.start-n)<Ni+a||Math.abs(s.end-n)<Ni+a?!1:(this.log(`"${e.identifier}" resumption ${n} not aligned with ${i} fragment bounds (${s.start}-${s.end} sn: ${s.sn} cc: ${s.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const r=e.timelineStart;let n=0,o=!1,c=!1;for(let i=0;i<e.assetList.length;i++){const l=e.assetList[i],t=r+n;l.startOffset=n,l.timelineStart=t,o||(o=l.duration===null),c||(c=!!l.error);const s=l.error?0:l.duration||0;n+=s}o&&!c?e.duration=Math.max(n,e.duration):e.duration=n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Dn(d){return`[${d.event?'"'+d.event.identifier+'"':"primary"}: ${d.start.toFixed(2)}-${d.end.toFixed(2)}]`}class mg{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,r){const n=e.assetListUrl;let o;try{o=Ic(n,this.hls.sessionId,e.baseUrl)}catch(f){const h=this.assignAssetListError(e,ve.ASSET_LIST_LOAD_ERROR,f,n);this.hls.trigger(D.ERROR,h);return}r&&o.protocol!=="data:"&&o.searchParams.set("_HLS_start_offset",""+r);const c=this.hls.config,i=c.loader,l=new i(c),t={responseType:"json",url:o.href},s=c.interstitialAssetListLoadPolicy.default,a={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},u={onSuccess:(f,h,A,g)=>{const p=f.data,m=p?.ASSETS;if(!Array.isArray(m)){const y=this.assignAssetListError(e,ve.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),A.url,h,g);this.hls.trigger(D.ERROR,y);return}e.assetListResponse=p,this.hls.trigger(D.ASSET_LIST_LOADED,{event:e,assetListResponse:p,networkDetails:g})},onError:(f,h,A,g)=>{const p=this.assignAssetListError(e,ve.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${f.code} ${f.text} (${h.url})`),h.url,g,A);this.hls.trigger(D.ERROR,p)},onTimeout:(f,h,A)=>{const g=this.assignAssetListError(e,ve.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${h.url})`),h.url,f,A);this.hls.trigger(D.ERROR,g)}};return l.load(t,a,u),this.hls.trigger(D.ASSET_LIST_LOADING,{event:e}),l}assignAssetListError(e,r,n,o,c,i){return e.error=n,{type:Ot.NETWORK_ERROR,details:r,fatal:!1,interstitial:e,url:o,error:n,networkDetails:i,stats:c}}}function eu(d){d?.play().catch(()=>{})}function Gs(d,e){return`[${d}] Advancing timeline position to ${e}`}class vg extends wn{constructor(e,r){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled||!this.schedule)return;const o=n-this.timelinePos;if(Math.abs(o)<1/7056e5)return;const i=o<=-.01;this.timelinePos=n,this.bufferedPos=n;const l=this.playingItem;if(!l){this.checkBuffer();return}if(i&&this.schedule.resetErrorsInRange(n,n-o)&&this.updateSchedule(!0),this.checkBuffer(),i&&n<l.start||n>=l.end){var t;const h=this.findItemIndex(l);let A=this.schedule.findItemIndexAtTime(n);if(A===-1&&(A=h+(i?-1:1),this.log(`seeked ${i?"back ":""}to position not covered by schedule ${n} (resolving from ${h} to ${A})`)),!this.isInterstitial(l)&&(t=this.media)!=null&&t.paused&&(this.shouldPlay=!1),!i&&A>h){const g=this.schedule.findJumpRestrictedIndex(h+1,A);if(g>h){this.setSchedulePosition(g);return}}this.setSchedulePosition(A);return}const s=this.playingAsset;if(!s){if(this.playingLastItem&&this.isInterstitial(l)){const h=l.event.assetList[0];h&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(n,h))}return}const a=s.timelineStart,u=s.duration||0;if(i&&n<a||n>=a+u){var f;(f=l.event)!=null&&f.appendInPlace&&(this.clearInterstitial(l.event,l),this.flushFrontBuffer(n)),this.setScheduleToAssetAtTime(n,s)}},this.onTimeupdate=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled)return;if(n>this.timelinePos)this.timelinePos=n,n>this.bufferedPos&&this.checkBuffer();else return;const o=this.playingItem;if(!o||this.playingLastItem)return;if(n>=o.end){this.timelinePos=o.end;const l=this.findItemIndex(o);this.setSchedulePosition(l+1)}const c=this.playingAsset;if(!c)return;const i=c.timelineStart+(c.duration||0);n>=i&&this.setScheduleToAssetAtTime(n,c)},this.onScheduleUpdate=(n,o)=>{const c=this.schedule;if(!c)return;const i=this.playingItem,l=c.events||[],t=c.items||[],s=c.durations,a=n.map(g=>g.identifier),u=!!(l.length||a.length);(u||o)&&this.log(`INTERSTITIALS_UPDATED (${l.length}): ${l}
Schedule: ${t.map(g=>Dn(g))} pos: ${this.timelinePos}`),a.length&&this.log(`Removed events ${a}`);let f=null,h=null;i&&(f=this.updateItem(i,this.timelinePos),this.itemsMatch(i,f)?this.playingItem=f:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const A=this.bufferingItem;if(A&&(h=this.updateItem(A,this.bufferedPos),this.itemsMatch(A,h)?this.bufferingItem=h:A.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(A.event,null))),n.forEach(g=>{g.assetList.forEach(p=>{this.clearAssetPlayer(p.identifier,null)})}),this.playerQueue.forEach(g=>{if(g.interstitial.appendInPlace){const p=g.assetItem.timelineStart,m=g.timelineOffset-p;if(m)try{g.timelineOffset=p}catch(y){Math.abs(m)>Ni&&this.warn(`${y} ("${g.assetId}" ${g.timelineOffset}->${p})`)}}}),u||o){if(this.hls.trigger(D.INTERSTITIALS_UPDATED,{events:l.slice(0),schedule:t.slice(0),durations:s,removedIds:a}),this.isInterstitial(i)&&a.includes(i.event.identifier)){this.warn(`Interstitial "${i.event.identifier}" removed while playing`),this.primaryFallback(i.event);return}i&&this.trimInPlace(f,i),A&&h!==f&&this.trimInPlace(h,A),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=r,this.assetListLoader=new mg(e),this.schedule=new pg(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(D.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(D.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(D.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(D.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(D.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(D.BUFFER_APPENDED,this.onBufferAppended,this),e.on(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(D.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(D.MEDIA_ENDED,this.onMediaEnded,this),e.on(D.ERROR,this.onError,this),e.on(D.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(D.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(D.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(D.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(D.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(D.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(D.BUFFER_CODECS,this.onBufferCodecs,this),e.off(D.BUFFER_APPENDED,this.onBufferAppended,this),e.off(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(D.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(D.MEDIA_ENDED,this.onMediaEnded,this),e.off(D.ERROR,this.onError,this),e.off(D.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){fn(e,"play",this.onPlay),fn(e,"pause",this.onPause),fn(e,"seeking",this.onSeeking),fn(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,r){const n=this.media=r.media;on(n,"seeking",this.onSeeking),on(n,"timeupdate",this.onTimeupdate),on(n,"play",this.onPlay),on(n,"pause",this.onPause)}onMediaAttached(e,r){const n=this.effectivePlayingItem,o=this.detachedData;if(this.detachedData=null,n===null)this.checkStart();else if(!o){this.clearScheduleState();const c=this.findItemIndex(n);this.setSchedulePosition(c)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,r){const n=!!r.transferMedia,o=this.media;if(this.media=null,!n&&(o&&this.removeMediaListeners(o),this.detachedData)){const c=this.getBufferingPlayer();c&&(this.log(`Removing schedule state for detachedData and ${c}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,c.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,r=()=>e.bufferingItem||e.waitingItem,n=u=>u&&e.getAssetPlayer(u.identifier),o=(u,f,h,A,g)=>{if(u){let p=u[f].start;const m=u.event;if(m){if(f==="playout"||m.timelineOccupancy!==uo.Point){const y=n(h);y?.interstitial===m&&(p+=y.assetItem.startOffset+y[g])}}else{const y=A==="bufferedPos"?i():e[A];p+=y-u.start}return p}return 0},c=(u,f)=>{var h;if(u!==0&&f!=="primary"&&(h=e.schedule)!=null&&h.length){var A;const g=e.schedule.findItemIndexAtTime(u),p=(A=e.schedule.items)==null?void 0:A[g];if(p){const m=p[f].start-p.start;return u+m}}return u},i=()=>{const u=e.bufferedPos;return u===Number.MAX_VALUE?l("primary"):Math.max(u,0)},l=u=>{var f,h;return(f=e.primaryDetails)!=null&&f.live?e.primaryDetails.edge:((h=e.schedule)==null?void 0:h.durations[u])||0},t=(u,f)=>{var h,A;const g=e.effectivePlayingItem;if(g!=null&&(h=g.event)!=null&&h.restrictions.skip||!e.schedule)return;e.log(`seek to ${u} "${f}"`);const p=e.effectivePlayingItem,m=e.schedule.findItemIndexAtTime(u,f),y=(A=e.schedule.items)==null?void 0:A[m],E=e.getBufferingPlayer(),C=E?.interstitial,T=C?.appendInPlace,w=p&&e.itemsMatch(p,y);if(p&&(T||w)){const I=n(e.playingAsset),L=I?.media||e.primaryMedia;if(L){const R=f==="primary"?L.currentTime:o(p,f,e.playingAsset,"timelinePos","currentTime"),B=u-R,P=(T?R:L.currentTime)+B;if(P>=0&&(!I||T||P<=I.duration)){L.currentTime=P;return}}}if(y){let I=u;if(f!=="primary"){const R=y[f].start,B=u-R;I=y.start+B}const L=!e.isInterstitial(y);if((!e.isInterstitial(p)||p.event.appendInPlace)&&(L||y.event.appendInPlace)){const R=e.media||(T?E?.media:null);R&&(R.currentTime=I)}else if(p){const R=e.findItemIndex(p);if(m>R){const P=e.schedule.findJumpRestrictedIndex(R+1,m);if(P>R){e.setSchedulePosition(P);return}}let B=0;if(L)e.timelinePos=I,e.checkBuffer();else{const P=y.event.assetList,N=u-(y[f]||y).start;for(let U=P.length;U--;){const G=P[U];if(G.duration&&N>=G.startOffset&&N<G.startOffset+G.duration){B=U;break}}}e.setSchedulePosition(m,B)}}},s=()=>{const u=e.effectivePlayingItem;if(e.isInterstitial(u))return u;const f=r();return e.isInterstitial(f)?f:null},a={get bufferedEnd(){const u=r(),f=e.bufferingItem;if(f&&f===u){var h;return o(f,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-f.playout.start||((h=e.bufferingAsset)==null?void 0:h.startOffset)||0}return 0},get currentTime(){const u=s(),f=e.effectivePlayingItem;return f&&f===u?o(f,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-f.playout.start:0},set currentTime(u){const f=s(),h=e.effectivePlayingItem;h&&h===f&&t(u+h.playout.start,"playout")},get duration(){const u=s();return u?u.playout.end-u.playout.start:0},get assetPlayers(){var u;const f=(u=s())==null?void 0:u.event.assetList;return f?f.map(h=>e.getAssetPlayer(h.identifier)):[]},get playingIndex(){var u;const f=(u=s())==null?void 0:u.event;return f&&e.effectivePlayingAsset?f.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return s()}};return this.manager={get events(){var u;return((u=e.schedule)==null||(u=u.events)==null?void 0:u.slice(0))||[]},get schedule(){var u;return((u=e.schedule)==null||(u=u.items)==null?void 0:u.slice(0))||[]},get interstitialPlayer(){return s()?a:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return r()},get bufferingIndex(){const u=r();return e.findItemIndex(u)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const u=e.effectivePlayingItem;return e.findItemIndex(u)},primary:{get bufferedEnd(){return i()},get currentTime(){const u=e.timelinePos;return u>0?u:0},set currentTime(u){t(u,"primary")},get duration(){return l("primary")},get seekableStart(){var u;return((u=e.primaryDetails)==null?void 0:u.fragmentStart)||0}},integrated:{get bufferedEnd(){return o(r(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return o(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(u){t(u,"integrated")},get duration(){return l("integrated")},get seekableStart(){var u;return c(((u=e.primaryDetails)==null?void 0:u.fragmentStart)||0,"integrated")}},skip:()=>{const u=e.effectivePlayingItem,f=u?.event;if(f&&!f.restrictions.skip){const h=e.findItemIndex(u);if(f.appendInPlace){const A=u.playout.start+u.event.duration;t(A+.001,"playout")}else e.advanceAfterAssetEnded(f,h,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const r=this.playingItem,n=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!r||!n?!1:this.findItemIndex(r)===n.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,r;if(this.mediaSelection===null)return;const n=this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&!n.event.appendInPlace)return;let o=this.media;!o&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(o=this.primaryMedia);const c=(r=o)==null?void 0:r.currentTime;if(!(c===void 0||!vt(c)))return c}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,r){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,r)}transferMediaFromPlayer(e,r){const n=e.interstitial.appendInPlace,o=e.media;if(n&&o===this.primaryMedia){if(this.bufferingAsset=null,(!r||this.isInterstitial(r)&&!r.event.appendInPlace)&&r&&o){this.detachedData={media:o};return}const c=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Pr(c)}`),this.detachedData=c}else r&&o&&(this.shouldPlay||(this.shouldPlay=!o.paused))}transferMediaTo(e,r){var n,o;if(e.media===r)return;let c=null;const i=this.hls,l=e!==i,t=l&&e.interstitial.appendInPlace,s=(n=this.detachedData)==null?void 0:n.mediaSource;let a;if(i.media)t&&(c=i.transferMedia(),this.detachedData=c),a="Primary";else if(s){const A=this.getBufferingPlayer();A?(c=A.transferMedia(),a=`${A}`):a="detached MediaSource"}else a="detached media";if(!c){if(s)c=this.detachedData,this.log(`using detachedData: MediaSource ${Pr(c)}`);else if(!this.detachedData||i.media===r){const A=this.playerQueue;A.length>1&&A.forEach(g=>{if(l&&g.interstitial.appendInPlace!==t){const p=g.interstitial;this.clearInterstitial(g.interstitial,null),p.appendInPlace=!1,p.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${p}`)}}),this.hls.detachMedia(),this.detachedData={media:r}}}const u=c&&"mediaSource"in c&&((o=c.mediaSource)==null?void 0:o.readyState)!=="closed",f=u&&c?c:r;this.log(`${u?"transfering MediaSource":"attaching media"} to ${l?e:"Primary"} from ${a} (media.currentTime: ${r.currentTime})`);const h=this.schedule;if(f===c&&h){const A=l&&e.assetId===h.assetIdAtEnd;f.overrides={duration:h.duration,endOfStream:!l||A,cueRemoval:!l}}e.attachMedia(f)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,r=e?.events;if(!r||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const n=this.timelinePos,o=this.effectivePlayingItem;if(n===-1){const c=this.hls.startPosition;if(this.log(Gs("checkStart",c)),this.timelinePos=c,r.length&&r[0].cue.pre){const i=e.findEventIndex(r[0].identifier);this.setSchedulePosition(i)}else if(c>=0||!this.primaryLive){const i=this.timelinePos=c>0?c:0,l=e.findItemIndexAtTime(i);this.setSchedulePosition(l)}}else if(o&&!this.playingItem){const c=e.findItemIndex(o);this.setSchedulePosition(c)}}advanceAssetBuffering(e,r){const n=e.event,o=n.findAssetIndex(r),c=$o(n,o);if(!n.isAssetPastPlayoutLimit(c))this.bufferedToEvent(e,c);else if(this.schedule){var i;const l=(i=this.schedule.items)==null?void 0:i[this.findItemIndex(e)+1];l&&this.bufferedToItem(l)}}advanceAfterAssetEnded(e,r,n){const o=$o(e,n);if(e.isAssetPastPlayoutLimit(o)){if(this.schedule){const c=this.schedule.items;if(c){const i=r+1,l=c.length;if(i>=l){this.setSchedulePosition(-1);return}const t=e.resumeTime;this.timelinePos<t&&(this.log(Gs("advanceAfterAssetEnded",t)),this.timelinePos=t,e.appendInPlace&&this.advanceInPlace(t),this.checkBuffer(this.bufferedPos<t)),this.setSchedulePosition(i)}}}else{if(e.appendInPlace){const c=e.assetList[o];c&&this.advanceInPlace(c.timelineStart)}this.setSchedulePosition(r,o)}}setScheduleToAssetAtTime(e,r){const n=this.schedule;if(!n)return;const o=r.parentIdentifier,c=n.getEvent(o);if(c){const i=n.findEventIndex(o),l=n.findAssetIndex(c,e);this.advanceAfterAssetEnded(c,i,l-1)}}setSchedulePosition(e,r){var n;const o=(n=this.schedule)==null?void 0:n.items;if(!o||this.playbackDisabled)return;const c=e>=0?o[e]:null;this.log(`setSchedulePosition ${e}, ${r} (${c&&Dn(c)}) pos: ${this.timelinePos}`);const i=this.waitingItem||this.playingItem,l=this.playingLastItem;if(this.isInterstitial(i)){const a=i.event,u=this.playingAsset,f=u?.identifier,h=f?this.getAssetPlayer(f):null;if(h&&f&&(!this.eventItemsMatch(i,c)||r!==void 0&&f!==a.assetList[r].identifier)){var t;const A=a.findAssetIndex(u);if(this.log(`INTERSTITIAL_ASSET_ENDED ${A+1}/${a.assetList.length} ${Bi(u)}`),this.endedAsset=u,this.playingAsset=null,this.hls.trigger(D.INTERSTITIAL_ASSET_ENDED,{asset:u,assetListIndex:A,event:a,schedule:o.slice(0),scheduleIndex:e,player:h}),i!==this.playingItem){this.itemsMatch(i,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(a,this.findItemIndex(this.playingItem),A);return}this.retreiveMediaSource(f,c),h.media&&!((t=this.detachedData)!=null&&t.mediaSource)&&h.detachMedia()}if(!this.eventItemsMatch(i,c)&&(this.endedItem=i,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${a} ${Dn(i)}`),a.hasPlayed=!0,this.hls.trigger(D.INTERSTITIAL_ENDED,{event:a,schedule:o.slice(0),scheduleIndex:e}),a.cue.once)){var s;this.updateSchedule();const A=(s=this.schedule)==null?void 0:s.items;if(c&&A){const g=this.findItemIndex(c);this.advanceSchedule(g,A,r,i,l)}return}}this.advanceSchedule(e,o,r,i,l)}advanceSchedule(e,r,n,o,c){const i=this.schedule;if(!i)return;const l=r[e]||null,t=this.primaryMedia,s=this.playerQueue;if(s.length&&s.forEach(a=>{const u=a.interstitial,f=i.findEventIndex(u.identifier);(f<e||f>e+1)&&this.clearInterstitial(u,l)}),this.isInterstitial(l)){this.timelinePos=Math.min(Math.max(this.timelinePos,l.start),l.end);const a=l.event;if(n===void 0){n=i.findAssetIndex(a,this.timelinePos);const A=$o(a,n-1);if(a.isAssetPastPlayoutLimit(A)||a.appendInPlace&&this.timelinePos===l.end){this.advanceAfterAssetEnded(a,e,n);return}n=A}const u=this.waitingItem;this.assetsBuffered(l,t)||this.setBufferingItem(l);let f=this.preloadAssets(a,n);if(this.eventItemsMatch(l,u||o)||(this.waitingItem=l,this.log(`INTERSTITIAL_STARTED ${Dn(l)} ${a.appendInPlace?"append in place":""}`),this.hls.trigger(D.INTERSTITIAL_STARTED,{event:a,schedule:r.slice(0),scheduleIndex:e})),!a.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${a}`);return}if(a.assetListLoader&&(a.assetListLoader.destroy(),a.assetListLoader=void 0),!t){this.log(`Waiting for attachMedia to start Interstitial ${a}`);return}this.waitingItem=this.endedItem=null,this.playingItem=l;const h=a.assetList[n];if(!h){this.advanceAfterAssetEnded(a,e,n||0);return}if(f||(f=this.getAssetPlayer(h.identifier)),f===null||f.destroyed){const A=a.assetList.length;this.warn(`asset ${n+1}/${A} player destroyed ${a}`),f=this.createAssetPlayer(a,h,n),f.loadSource()}if(!this.eventItemsMatch(l,this.bufferingItem)&&a.appendInPlace&&this.isAssetBuffered(h))return;this.startAssetPlayer(f,n,r,e,t),this.shouldPlay&&eu(f.media)}else l?(this.resumePrimary(l,e,o),this.shouldPlay&&eu(this.hls.media)):c&&this.isInterstitial(o)&&(this.endedItem=null,this.playingItem=o,o.event.appendInPlace||this.attachPrimary(i.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,r,n){var o,c;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${Dn(e)}`),!((o=this.detachedData)!=null&&o.mediaSource)){let l=this.timelinePos;(l<e.start||l>=e.end)&&(l=this.getPrimaryResumption(e,r),this.log(Gs("resumePrimary",l)),this.timelinePos=l),this.attachPrimary(l,e)}if(!n)return;const i=(c=this.schedule)==null?void 0:c.items;i&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${Dn(e)}`),this.hls.trigger(D.INTERSTITIALS_PRIMARY_RESUMED,{schedule:i.slice(0),scheduleIndex:r}),this.checkBuffer())}getPrimaryResumption(e,r){const n=e.start;if(this.primaryLive){const o=this.primaryDetails;if(r===0)return this.hls.startPosition;if(o&&(n<o.fragmentStart||n>o.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const r=this.getAssetPlayer(e.identifier);return r!=null&&r.hls?r.hls.bufferedToEnd:Xt.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,r,n){r?this.setBufferingItem(r):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const o=this.primaryMedia;if(!o)return;const c=this.hls;c.media?this.checkBuffer():(this.transferMediaTo(c,o),n&&this.startLoadingPrimaryAt(e,n)),n||(this.log(Gs("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,r){var n;const o=this.hls;!o.loadingEnabled||!o.media||Math.abs((((n=o.mainForwardBufferInfo)==null?void 0:n.start)||o.media.currentTime)-e)>.5?o.startLoad(e,r):o.bufferingEnabled||o.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(D.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(D.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,r){if(r.level===-1||!this.schedule)return;const n=this.hls.levels[r.level],o=Sr(Sr({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=o,this.schedule.parseInterstitialDateRanges(o,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,r){const n=this.hls.audioTracks[r.id],o=this.mediaSelection;if(!o){this.altSelection=Sr(Sr({},this.altSelection),{},{audio:n});return}const c=Sr(Sr({},o),{},{audio:n});this.mediaSelection=c}onSubtitleTrackUpdated(e,r){const n=this.hls.subtitleTracks[r.id],o=this.mediaSelection;if(!o){this.altSelection=Sr(Sr({},this.altSelection),{},{subtitles:n});return}const c=Sr(Sr({},o),{},{subtitles:n});this.mediaSelection=c}onAudioTrackSwitching(e,r){const n=fl(r);this.playerQueue.forEach(({hls:o})=>o&&(o.setAudioOption(r)||o.setAudioOption(n)))}onSubtitleTrackSwitch(e,r){const n=fl(r);this.playerQueue.forEach(({hls:o})=>o&&(o.setSubtitleOption(r)||r.id!==-1&&o.setSubtitleOption(n)))}onBufferCodecs(e,r){const n=r.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,r){this.checkBuffer()}onBufferFlushed(e,r){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const o=this.timelinePos;this.bufferedPos=o,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const r=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&r){for(let o=0;o<r.length;o++){const c=r[o];if(c.cue.post){var n;const i=this.schedule.findEventIndex(c.identifier),l=(n=this.schedule.items)==null?void 0:n[i];this.isInterstitial(l)&&this.eventItemsMatch(l,this.bufferingItem)&&this.bufferedToItem(l,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const r=this.playingItem;if(!this.playingLastItem&&r){const n=this.findItemIndex(r);this.setSchedulePosition(n+1)}else this.shouldPlay=!1}updateItem(e,r){var n;const o=(n=this.schedule)==null?void 0:n.items;if(e&&o){const c=this.findItemIndex(e,r);return o[c]||null}return null}trimInPlace(e,r){if(this.isInterstitial(e)&&e.event.appendInPlace&&r.end-e.end>.25){e.event.assetList.forEach((c,i)=>{e.event.isAssetPastPlayoutLimit(i)&&this.clearAssetPlayer(c.identifier,null)});const n=e.end+.25,o=Xt.bufferInfo(this.primaryMedia,n,0);(o.end>n||(o.nextStart||0)>n)&&(this.log(`trim buffered interstitial ${Dn(e)} (was ${Dn(r)})`),this.attachPrimary(n,null,!0),this.flushFrontBuffer(n))}}itemsMatch(e,r){return!!r&&(e===r||e.event&&r.event&&this.eventItemsMatch(e,r)||!e.event&&!r.event&&this.findItemIndex(e)===this.findItemIndex(r))}eventItemsMatch(e,r){var n;return!!r&&(e===r||e.event.identifier===((n=r.event)==null?void 0:n.identifier))}findItemIndex(e,r){return e&&this.schedule?this.schedule.findItemIndex(e,r):-1}updateSchedule(e=!1){var r;const n=this.mediaSelection;n&&((r=this.schedule)==null||r.updateSchedule(n,[],e))}checkBuffer(e){var r;const n=(r=this.schedule)==null?void 0:r.items;if(!n)return;const o=Xt.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=o.len<1),this.updateBufferedPos(o.end,n,e)}updateBufferedPos(e,r,n){const o=this.schedule,c=this.bufferingItem;if(this.bufferedPos>e||!o)return;if(r.length===1&&this.itemsMatch(r[0],c)){this.bufferedPos=e;return}const i=this.playingItem,l=this.findItemIndex(i);let t=o.findItemIndexAtTime(e);if(this.bufferedPos<e){var s;const a=this.findItemIndex(c),u=Math.min(a+1,r.length-1),f=r[u];if((t===-1&&c&&e>=c.end||(s=f.event)!=null&&s.appendInPlace&&e+.01>=f.start)&&(t=u),this.isInterstitial(c)){const h=c.event;if(u-l>1&&h.appendInPlace===!1||h.assetList.length===0&&h.assetListLoader)return}if(this.bufferedPos=e,t>a&&t>l)this.bufferedToItem(f);else{const h=this.primaryDetails;this.primaryLive&&h&&e>h.edge-h.targetduration&&f.start<h.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(f)&&this.preloadAssets(f.event,0)}}else n&&i&&!this.itemsMatch(i,c)&&(t===l?this.bufferedToItem(i):t===l+1&&this.bufferedToItem(r[t]))}assetsBuffered(e,r){return e.event.assetList.length===0?!1:!e.event.assetList.some(o=>{const c=this.getAssetPlayer(o.identifier);return!(c!=null&&c.bufferedInPlaceToEnd(r))})}setBufferingItem(e){const r=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(e,r)&&n){const{items:o,events:c}=n;if(!o||!c)return r;const i=this.isInterstitial(e),l=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const t=l?l.remaining:r?r.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${Dn(e)}`+(r?` (${t.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(i){const s=n.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((a,u)=>{const f=this.getAssetPlayer(a.identifier);f&&(u===s&&f.loadSource(),f.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(s=>s.pauseBuffering());this.hls.trigger(D.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:c.slice(0),schedule:o.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return r}bufferedToItem(e,r=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,r);else if(n!==null){this.bufferingAsset=null;const o=this.detachedData;o?o.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const r=this.findItemIndex(e),n=this.getPrimaryResumption(e,r);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,r){const n=e.event,o=n.assetList.length===0&&!n.assetListLoader,c=n.cue.once;if(o||!c){const i=this.preloadAssets(n,r);if(i!=null&&i.interstitial.appendInPlace){const l=this.primaryMedia;l&&this.bufferAssetPlayer(i,l)}}}preloadAssets(e,r){const n=e.assetUrl,o=e.assetList.length,c=o===0&&!e.assetListLoader,i=e.cue.once;if(c){const t=e.timelineStart;if(e.appendInPlace){var l;const f=this.playingItem;!this.isInterstitial(f)&&(f==null||(l=f.nextEvent)==null?void 0:l.identifier)===e.identifier&&this.flushFrontBuffer(t+.25)}let s,a=0;if(!this.playingItem&&this.primaryLive&&(a=this.hls.startPosition,a===-1&&(a=this.hls.liveSyncPosition||0)),a&&!(e.cue.pre||e.cue.post)){const f=a-t;f>0&&(s=Math.round(f*1e3)/1e3)}if(this.log(`Load interstitial asset ${r+1}/${n?1:o} ${e}${s?` live-start: ${a} start-offset: ${s}`:""}`),n)return this.createAsset(e,0,0,t,e.duration,n);const u=this.assetListLoader.loadAssetList(e,s);u&&(e.assetListLoader=u)}else if(!i&&o){for(let s=r;s<o;s++){const a=e.assetList[s],u=this.getAssetPlayerQueueIndex(a.identifier);(u===-1||this.playerQueue[u].destroyed)&&!a.error&&this.createAssetPlayer(e,a,s)}const t=e.assetList[r];if(t){const s=this.getAssetPlayer(t.identifier);return s&&s.loadSource(),s}}return null}flushFrontBuffer(e){const r=this.requiredTracks;if(!r)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(r).forEach(o=>{this.hls.trigger(D.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:o})})}getAssetPlayerQueueIndex(e){const r=this.playerQueue;for(let n=0;n<r.length;n++)if(e===r[n].assetId)return n;return-1}getAssetPlayer(e){const r=this.getAssetPlayerQueueIndex(e);return this.playerQueue[r]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:r}=this;if(r){for(let n=0;n<e.length;n++)if(e[n].media===r)return e[n]}return null}createAsset(e,r,n,o,c,i){const l={parentIdentifier:e.identifier,identifier:dg(e,i,r),duration:c,startOffset:n,timelineStart:o,uri:i};return this.createAssetPlayer(e,l,r)}createAssetPlayer(e,r,n){const o=this.hls,c=o.userConfig;let i=c.videoPreference;const l=o.loadLevelObj||o.levels[o.currentLevel];(i||l)&&(i=wr({},i),l.videoCodec&&(i.videoCodec=l.videoCodec),l.videoRange&&(i.allowedVideoRanges=[l.videoRange]));const t=o.audioTracks[o.audioTrack],s=o.subtitleTracks[o.subtitleTrack];let a=0;if(this.primaryLive||e.appendInPlace){const C=this.timelinePos-r.timelineStart;if(C>1){const T=r.duration;T&&C<T&&(a=C)}}const u=r.identifier,f=Sr(Sr({},c),{},{maxMaxBufferLength:Math.min(180,o.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:o.sessionId,assetPlayerId:u,abrEwmaDefaultEstimate:o.bandwidthEstimate,interstitialsController:void 0,startPosition:a,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:i,audioPreference:t||c.audioPreference,subtitlePreference:s||c.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,r.timelineStart&&(f.timelineOffset=r.timelineStart));const h=f.cmcd;h!=null&&h.sessionId&&h.contentId&&(f.cmcd=wr({},h,{contentId:ns(r.uri)})),this.getAssetPlayer(u)&&this.warn(`Duplicate date range identifier ${e} and asset ${u}`);const A=new gg(this.HlsPlayerClass,f,e,r);this.playerQueue.push(A),e.assetList[n]=r;let g=!0;const p=C=>{if(C.live){var T;const L=new Error(`Interstitials MUST be VOD assets ${e}`),R={fatal:!0,type:Ot.OTHER_ERROR,details:ve.INTERSTITIAL_ASSET_ITEM_ERROR,error:L},B=((T=this.schedule)==null?void 0:T.findEventIndex(e.identifier))||-1;this.handleAssetItemError(R,e,B,n,L.message);return}const w=C.edge-C.fragmentStart,I=r.duration;(g||I===null||w>I)&&(g=!1,this.log(`Interstitial asset "${u}" duration change ${I} > ${w}`),r.duration=w,this.updateSchedule())};A.on(D.LEVEL_UPDATED,(C,{details:T})=>p(T)),A.on(D.LEVEL_PTS_UPDATED,(C,{details:T})=>p(T)),A.on(D.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const m=(C,T)=>{const w=this.getAssetPlayer(u);if(w&&T.tracks){w.off(D.BUFFER_CODECS,m),w.tracks=T.tracks;const I=this.primaryMedia;this.bufferingAsset===w.assetItem&&I&&!w.media&&this.bufferAssetPlayer(w,I)}};A.on(D.BUFFER_CODECS,m);const y=()=>{var C;const T=this.getAssetPlayer(u);if(this.log(`buffered to end of asset ${T}`),!T||!this.schedule)return;const w=this.schedule.findEventIndex(e.identifier),I=(C=this.schedule.items)==null?void 0:C[w];this.isInterstitial(I)&&this.advanceAssetBuffering(I,r)};A.on(D.BUFFERED_TO_END,y);const E=C=>()=>{if(!this.getAssetPlayer(u)||!this.schedule)return;this.shouldPlay=!0;const w=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,w,C)};return A.once(D.MEDIA_ENDED,E(n)),A.once(D.PLAYOUT_LIMIT_REACHED,E(1/0)),A.on(D.ERROR,(C,T)=>{if(!this.schedule)return;const w=this.getAssetPlayer(u);if(T.details===ve.BUFFER_STALLED_ERROR){if(w!=null&&w.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(T,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${T.error} ${e}`)}),A.on(D.DESTROYING,()=>{if(!this.getAssetPlayer(u)||!this.schedule)return;const T=new Error(`Asset player destroyed unexpectedly ${u}`),w={fatal:!0,type:Ot.OTHER_ERROR,details:ve.INTERSTITIAL_ASSET_ITEM_ERROR,error:T};this.handleAssetItemError(w,e,this.schedule.findEventIndex(e.identifier),n,T.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${Bi(r)}`),this.hls.trigger(D.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:r,assetListIndex:n,event:e,player:A}),A}clearInterstitial(e,r){e.assetList.forEach(n=>{this.clearAssetPlayer(n.identifier,r)}),e.reset()}resetAssetPlayer(e){const r=this.getAssetPlayerQueueIndex(e);if(r!==-1){this.log(`reset asset player "${e}" after error`);const n=this.playerQueue[r];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,r){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){const o=this.playerQueue[n];this.log(`clear ${o} toSegment: ${r&&Dn(r)}`),this.transferMediaFromPlayer(o,r),this.playerQueue.splice(n,1),o.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,r,n,o,c){const{interstitial:i,assetItem:l,assetId:t}=e,s=i.assetList.length,a=this.playingAsset;this.endedAsset=null,this.playingAsset=l,(!a||a.identifier!==t)&&(a&&(this.clearAssetPlayer(a.identifier,n[o]),delete a.error),this.log(`INTERSTITIAL_ASSET_STARTED ${r+1}/${s} ${Bi(l)}`),this.hls.trigger(D.INTERSTITIAL_ASSET_STARTED,{asset:l,assetListIndex:r,event:i,schedule:n.slice(0),scheduleIndex:o,player:e})),this.bufferAssetPlayer(e,c)}bufferAssetPlayer(e,r){var n,o;if(!this.schedule)return;const{interstitial:c,assetItem:i}=e,l=this.schedule.findEventIndex(c.identifier),t=(n=this.schedule.items)==null?void 0:n[l];if(!t)return;e.loadSource(),this.setBufferingItem(t),this.bufferingAsset=i;const s=this.getBufferingPlayer();if(s===e)return;const a=c.appendInPlace;if(a&&s?.interstitial.appendInPlace===!1)return;const u=s?.tracks||((o=this.detachedData)==null?void 0:o.tracks)||this.requiredTracks;if(a&&i!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(u&&!Au(u,e.tracks)){const f=new Error(`Asset ${Bi(i)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(u)}')`),h={fatal:!0,type:Ot.OTHER_ERROR,details:ve.INTERSTITIAL_ASSET_ITEM_ERROR,error:f},A=c.findAssetIndex(i);this.handleAssetItemError(h,c,l,A,f.message);return}}this.transferMediaTo(e,r)}handleInPlaceStall(e){const r=this.schedule,n=this.primaryMedia;if(!r||!n)return;const o=n.currentTime,c=r.findAssetIndex(e,o),i=e.assetList[c];if(i){const l=this.getAssetPlayer(i.identifier);if(l){const t=l.currentTime||o-i.timelineStart,s=l.duration-t;if(this.warn(`Stalled at ${t} of ${t+s} in ${l} ${e} (media.currentTime: ${o})`),t&&(s/n.playbackRate<.5||l.bufferedInPlaceToEnd(n))&&l.hls){const a=r.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,a,c)}}}}advanceInPlace(e){const r=this.primaryMedia;r&&r.currentTime<e&&(r.currentTime=e)}handleAssetItemError(e,r,n,o,c){if(e.details===ve.BUFFER_STALLED_ERROR)return;const i=r.assetList[o]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${i&&Bi(i)} ${e.error}`),!this.schedule)return;const l=i?.identifier||"",t=this.getAssetPlayerQueueIndex(l),s=this.playerQueue[t]||null,a=this.schedule.items,u=wr({},e,{fatal:!1,errorAction:_i(!0),asset:i,assetListIndex:o,event:r,schedule:a,scheduleIndex:n,player:s});if(this.hls.trigger(D.INTERSTITIAL_ASSET_ERROR,u),!e.fatal)return;const f=this.playingAsset,h=this.bufferingAsset,A=new Error(c);if(i&&(this.clearAssetPlayer(l,null),i.error=A),!r.assetList.some(g=>!g.error))r.error=A;else for(let g=o;g<r.assetList.length;g++)this.resetAssetPlayer(r.assetList[g].identifier);this.updateSchedule(!0),r.error?this.primaryFallback(r):f&&f.identifier===l?this.advanceAfterAssetEnded(r,n,o):h&&h.identifier===l&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,h)}primaryFallback(e){const r=e.timelineStart,n=this.effectivePlayingItem;if(n){this.log(`Fallback to primary from event "${e.identifier}" start: ${r} pos: ${this.timelinePos} playing: ${Dn(n)} error: ${e.error}`);let o=this.timelinePos;o===-1&&(o=this.hls.startPosition);const c=this.updateItem(n,o);if(this.itemsMatch(n,c)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(r,null),this.flushFrontBuffer(r)),!this.schedule)return;const i=this.schedule.findItemIndexAtTime(o);this.setSchedulePosition(i)}else this.checkStart()}onAssetListLoaded(e,r){var n,o;const c=r.event,i=c.identifier,l=r.assetListResponse.ASSETS;if(!((n=this.schedule)!=null&&n.hasEvent(i)))return;const t=c.timelineStart,s=c.duration;let a=0;l.forEach((g,p)=>{const m=parseFloat(g.DURATION);this.createAsset(c,p,a,t+a,m,g.URI),a+=m}),c.duration=a,this.log(`Loaded asset-list with duration: ${a} (was: ${s}) ${c}`);const u=this.waitingItem,f=u?.event.identifier===i;this.updateSchedule();const h=(o=this.bufferingItem)==null?void 0:o.event;if(f){var A;const g=this.schedule.findEventIndex(i),p=(A=this.schedule.items)==null?void 0:A[g];if(p){if(!this.playingItem&&this.timelinePos>p.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==g){c.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${c}`),this.updateSchedule(!0),this.primaryFallback(c);return}this.setBufferingItem(p)}this.setSchedulePosition(g)}else if(h?.identifier===i){const g=c.assetList[0];if(g){const p=this.getAssetPlayer(g.identifier);if(h.appendInPlace){const m=this.primaryMedia;p&&m&&this.bufferAssetPlayer(p,m)}else p&&p.loadSource()}}}onError(e,r){if(this.schedule)switch(r.details){case ve.ASSET_LIST_PARSING_ERROR:case ve.ASSET_LIST_LOAD_ERROR:case ve.ASSET_LIST_LOAD_TIMEOUT:{const n=r.interstitial;n&&(this.updateSchedule(!0),this.primaryFallback(n));break}case ve.BUFFER_STALLED_ERROR:{const n=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&n.event.appendInPlace){this.handleInPlaceStall(n.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const tu=500;class yg extends La{constructor(e,r,n){super(e,r,n,"subtitle-stream-controller",Rt.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(D.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(D.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(D.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(D.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,r){this.stopLoad(),this.state=_e.IDLE,this.setInterval(tu),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=r?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,r){this.tracksBuffered=[],super.onMediaDetaching(e,r)}onLevelLoaded(e,r){this.mainDetails=r.details}onSubtitleFragProcessed(e,r){const{frag:n,success:o}=r;if(this.fragContextChanged(n)||(Hr(n)&&(this.fragPrevious=n),this.state=_e.IDLE),!o)return;const c=this.tracksBuffered[this.currentTrackId];if(!c)return;let i;const l=n.start;for(let s=0;s<c.length;s++)if(l>=c[s].start&&l<=c[s].end){i=c[s];break}const t=n.start+n.duration;i?i.end=t:(i={start:l,end:t},c.push(i)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,r){const{startOffset:n,endOffset:o}=r;if(n===0&&o!==Number.POSITIVE_INFINITY){const c=o-1;if(c<=0)return;r.endOffsetSubtitles=Math.max(0,c),this.tracksBuffered.forEach(i=>{for(let l=0;l<i.length;){if(i[l].end<=c){i.shift();continue}else if(i[l].start<c)i[l].start=c;else break;l++}}),this.fragmentTracker.removeFragmentsInRange(n,c,Rt.SUBTITLE)}}onError(e,r){const n=r.frag;n?.type===Rt.SUBTITLE&&(r.details===ve.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==_e.STOPPED&&(this.state=_e.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:r}){if(this.levels&&dc(this.levels,r)){this.levels=r.map(n=>new ss(n));return}this.tracksBuffered=[],this.levels=r.map(n=>{const o=new ss(n);return this.tracksBuffered[o.id]=[],o}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Rt.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,r){var n;if(this.currentTrackId=r.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const o=this.levels[this.currentTrackId];o!=null&&o.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,o&&this.state!==_e.STOPPED&&this.setInterval(tu)}onSubtitleTrackLoaded(e,r){var n;const{currentTrackId:o,levels:c}=this,{details:i,id:l}=r;if(!c){this.warn(`Subtitle tracks were reset while loading level ${l}`);return}const t=c[l];if(l>=c.length||!t)return;this.log(`Subtitle track ${l} loaded [${i.startSN},${i.endSN}]${i.lastPartSn?`[part-${i.lastPartSn}-${i.lastPartIndex}]`:""},duration:${i.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let s=0;if(i.live||(n=t.details)!=null&&n.live){if(i.deltaUpdateFailed)return;const u=this.mainDetails;if(!u){this.startFragRequested=!1;return}const f=u.fragments[0];if(!t.details)i.hasProgramDateTime&&u.hasProgramDateTime?(ao(i,u),s=i.fragmentStart):f&&(s=f.start,aa(i,s));else{var a;s=this.alignPlaylists(i,t.details,(a=this.levelLastLoaded)==null?void 0:a.details),s===0&&f&&(s=f.start,aa(i,s))}u&&!this.startFragRequested&&this.setStartPosition(u,s)}t.details=i,this.levelLastLoaded=t,l===o&&(this.hls.trigger(D.SUBTITLE_TRACK_UPDATED,{details:i,id:l,groupId:r.groupId}),this.tick(),i.live&&!this.fragCurrent&&this.media&&this.state===_e.IDLE&&(mi(null,i.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),t.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:r,payload:n}=e,o=r.decryptdata,c=this.hls;if(!this.fragContextChanged(r)&&n&&n.byteLength>0&&o!=null&&o.key&&o.iv&&Mi(o.method)){const i=performance.now();this.decrypter.decrypt(new Uint8Array(n),o.key.buffer,o.iv.buffer,wa(o.method)).catch(l=>{throw c.trigger(D.ERROR,{type:Ot.MEDIA_ERROR,details:ve.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:r}),l}).then(l=>{const t=performance.now();c.trigger(D.FRAG_DECRYPTED,{frag:r,payload:l,stats:{tstart:i,tdecrypt:t}})}).catch(l=>{this.warn(`${l.name}: ${l.message}`),this.state=_e.IDLE})}}doTick(){if(!this.media){this.state=_e.IDLE;return}if(this.state===_e.IDLE){const{currentTrackId:e,levels:r}=this,n=r?.[e];if(!n||!r.length||!n.details||this.waitForLive(n))return;const{config:o}=this,c=this.getLoadPosition(),i=Xt.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],c,o.maxBufferHole),{end:l,len:t}=i,s=n.details,a=this.hls.maxBufferLength+s.levelTargetDuration;if(t>a)return;const u=s.fragments,f=u.length,h=s.edge;let A=null;const g=this.fragPrevious;if(l<h){const y=o.maxFragLookUpTolerance,E=l>h-y?0:y;A=mi(g,u,Math.max(u[0].start,l),E),!A&&g&&g.start<u[0].start&&(A=u[0])}else A=u[f-1];if(A=this.filterReplacedPrimary(A,n.details),!A)return;const p=A.sn-s.startSN,m=u[p-1];if(m&&m.cc===A.cc&&this.fragmentTracker.getState(m)===Xr.NOT_LOADED&&(A=m),this.fragmentTracker.getState(A)===Xr.NOT_LOADED){const y=this.mapToInitFragWhenRequired(A);y&&this.loadFragment(y,n,l)}}}loadFragment(e,r,n){Hr(e)?super.loadFragment(e,r,n):this._loadInitSegment(e,r)}get mediaBufferTimeRanges(){return new Eg(this.tracksBuffered[this.currentTrackId]||[])}}class Eg{constructor(e){this.buffered=void 0;const r=(n,o,c)=>{if(o=o>>>0,o>c-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${o}) is greater than the maximum bound (${c})`);return e[o][n]};this.buffered={get length(){return e.length},end(n){return r("end",n,e.length)},start(n){return r("start",n,e.length)}}}}const bg={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Lc=d=>String.fromCharCode(bg[d]||d),Pn=15,Jn=100,Cg={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},xg={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Tg={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Sg={25:2,26:4,29:6,30:8,31:10,27:13,28:15},wg=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Ig{constructor(){this.time=null,this.verboseLevel=0}log(e,r){if(this.verboseLevel>=e){const n=typeof r=="function"?r():r;Cr.log(`${this.time} [${e}] ${n}`)}}}const Ai=function(e){const r=[];for(let n=0;n<e.length;n++)r.push(e[n].toString(16));return r};class Rc{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const r=["foreground","underline","italics","background","flash"];for(let n=0;n<r.length;n++){const o=r[n];e.hasOwnProperty(o)&&(this[o]=e[o])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Lg{constructor(){this.uchar=" ",this.penState=new Rc}reset(){this.uchar=" ",this.penState.reset()}setChar(e,r){this.uchar=e,this.penState.copy(r)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Rg{constructor(e){this.chars=[],this.pos=0,this.currPenState=new Rc,this.cueStartTime=null,this.logger=void 0;for(let r=0;r<Jn;r++)this.chars.push(new Lg);this.logger=e}equals(e){for(let r=0;r<Jn;r++)if(!this.chars[r].equals(e.chars[r]))return!1;return!0}copy(e){for(let r=0;r<Jn;r++)this.chars[r].copy(e.chars[r])}isEmpty(){let e=!0;for(let r=0;r<Jn;r++)if(!this.chars[r].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Jn&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Jn)}moveCursor(e){const r=this.pos+e;if(e>1)for(let n=this.pos+1;n<r+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(r)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const r=Lc(e);if(this.pos>=Jn){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+r+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(r,this.currPenState),this.moveCursor(1)}clearFromPos(e){let r;for(r=e;r<Jn;r++)this.chars[r].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let r=!0;for(let n=0;n<Jn;n++){const o=this.chars[n].uchar;o!==" "&&(r=!1),e.push(o)}return r?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class Wo{constructor(e){this.rows=[],this.currRow=Pn-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let r=0;r<Pn;r++)this.rows.push(new Rg(e));this.logger=e}reset(){for(let e=0;e<Pn;e++)this.rows[e].clear();this.currRow=Pn-1}equals(e){let r=!0;for(let n=0;n<Pn;n++)if(!this.rows[n].equals(e.rows[n])){r=!1;break}return r}copy(e){for(let r=0;r<Pn;r++)this.rows[r].copy(e.rows[r])}isEmpty(){let e=!0;for(let r=0;r<Pn;r++)if(!this.rows[r].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Pr(e));let r=e.row-1;if(this.nrRollUpRows&&r<this.nrRollUpRows-1&&(r=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==r){for(let l=0;l<Pn;l++)this.rows[l].clear();const c=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){const l=i.rows[c].cueStartTime,t=this.logger.time;if(l!==null&&t!==null&&l<t)for(let s=0;s<this.nrRollUpRows;s++)this.rows[r-this.nrRollUpRows+s+1].copy(i.rows[c+s])}}this.currRow=r;const n=this.rows[this.currRow];if(e.indent!==null){const c=e.indent,i=Math.max(c-1,0);n.setCursor(e.indent),e.color=n.chars[i].penState.foreground}const o={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(o)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Pr(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,r=this.rows.splice(e,1)[0];r.clear(),this.rows.splice(this.currRow,0,r),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const r=[];let n="",o=-1;for(let c=0;c<Pn;c++){const i=this.rows[c].getTextString();i&&(o=c+1,e?r.push("Row "+o+": '"+i+"'"):r.push(i.trim()))}return r.length>0&&(e?n="["+r.join(" | ")+"]":n=r.join(`
`)),n}getTextAndFormat(){return this.rows}}class ru{constructor(e,r,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new Wo(n),this.nonDisplayedMemory=new Wo(n),this.lastOutputScreen=new Wo(n),this.currRollUpRow=this.displayedMemory.rows[Pn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Pn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>r+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const r={flash:!1};if(r.underline=e%2===1,r.italics=e>=46,r.italics)r.foreground="white";else{const n=Math.floor(e/2)-16,o=["white","green","blue","cyan","red","yellow","magenta"];r.foreground=o[n]}this.logger.log(2,"MIDROW: "+Pr(r)),this.writeScreen.setPen(r)}outputDataUpdate(e=!1){const r=this.logger.time;r!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=r:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,r,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:r),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class nu{constructor(e,r,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=Dg(),this.logger=void 0;const o=this.logger=new Ig;this.channels=[null,new ru(e,r,o),new ru(e+1,n,o)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,r){this.channels[e].setHandler(r)}addData(e,r){this.logger.time=e;for(let n=0;n<r.length;n+=2){const o=r[n]&127,c=r[n+1]&127;let i=!1,l=null;if(o===0&&c===0)continue;this.logger.log(3,()=>"["+Ai([r[n],r[n+1]])+"] -> ("+Ai([o,c])+")");const t=this.cmdHistory;if(o>=16&&o<=31){if(kg(o,c,t)){Qs(null,null,t),this.logger.log(3,()=>"Repeated command ("+Ai([o,c])+") is dropped");continue}Qs(o,c,this.cmdHistory),i=this.parseCmd(o,c),i||(i=this.parseMidrow(o,c)),i||(i=this.parsePAC(o,c)),i||(i=this.parseBackgroundAttributes(o,c))}else Qs(null,null,t);if(!i&&(l=this.parseChars(o,c),l)){const a=this.currentChannel;a&&a>0?this.channels[a].insertChars(l):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!i&&!l&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Ai([o,c])+" orig: "+Ai([r[n],r[n+1]]))}}parseCmd(e,r){const n=(e===20||e===28||e===21||e===29)&&r>=32&&r<=47,o=(e===23||e===31)&&r>=33&&r<=35;if(!(n||o))return!1;const c=e===20||e===21||e===23?1:2,i=this.channels[c];return e===20||e===21||e===28||e===29?r===32?i.ccRCL():r===33?i.ccBS():r===34?i.ccAOF():r===35?i.ccAON():r===36?i.ccDER():r===37?i.ccRU(2):r===38?i.ccRU(3):r===39?i.ccRU(4):r===40?i.ccFON():r===41?i.ccRDC():r===42?i.ccTR():r===43?i.ccRTD():r===44?i.ccEDM():r===45?i.ccCR():r===46?i.ccENM():r===47&&i.ccEOC():i.ccTO(r-32),this.currentChannel=c,!0}parseMidrow(e,r){let n=0;if((e===17||e===25)&&r>=32&&r<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const o=this.channels[n];return o?(o.ccMIDROW(r),this.logger.log(3,()=>"MIDROW ("+Ai([e,r])+")"),!0):!1}return!1}parsePAC(e,r){let n;const o=(e>=17&&e<=23||e>=25&&e<=31)&&r>=64&&r<=127,c=(e===16||e===24)&&r>=64&&r<=95;if(!(o||c))return!1;const i=e<=23?1:2;r>=64&&r<=95?n=i===1?Cg[e]:Tg[e]:n=i===1?xg[e]:Sg[e];const l=this.channels[i];return l?(l.setPAC(this.interpretPAC(n,r)),this.currentChannel=i,!0):!1}interpretPAC(e,r){let n;const o={color:null,italics:!1,indent:null,underline:!1,row:e};return r>95?n=r-96:n=r-64,o.underline=(n&1)===1,n<=13?o.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(o.italics=!0,o.color="white"):o.indent=Math.floor((n-16)/2)*4,o}parseChars(e,r){let n,o=null,c=null;if(e>=25?(n=2,c=e-8):(n=1,c=e),c>=17&&c<=19){let i;c===17?i=r+80:c===18?i=r+112:i=r+144,this.logger.log(2,()=>"Special char '"+Lc(i)+"' in channel "+n),o=[i]}else e>=32&&e<=127&&(o=r===0?[e]:[e,r]);return o&&this.logger.log(3,()=>"Char codes =  "+Ai(o).join(",")),o}parseBackgroundAttributes(e,r){const n=(e===16||e===24)&&r>=32&&r<=47,o=(e===23||e===31)&&r>=45&&r<=47;if(!(n||o))return!1;let c;const i={};e===16||e===24?(c=Math.floor((r-32)/2),i.background=wg[c],r%2===1&&(i.background=i.background+"_semi")):r===45?i.background="transparent":(i.foreground="black",r===47&&(i.underline=!0));const l=e<=23?1:2;return this.channels[l].setBkgData(i),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const r=this.channels[e];r&&r.reset()}Qs(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let r=0;r<this.channels.length;r++){const n=this.channels[r];n&&n.cueSplitAtTime(e)}}}function Qs(d,e,r){r.a=d,r.b=e}function kg(d,e,r){return r.a===d&&r.b===e}function Dg(){return{a:null,b:null}}var Ga=(function(){if(oo!=null&&oo.VTTCue)return self.VTTCue;const d=["","lr","rl"],e=["start","middle","end","left","right"];function r(l,t){if(typeof t!="string"||!Array.isArray(l))return!1;const s=t.toLowerCase();return~l.indexOf(s)?s:!1}function n(l){return r(d,l)}function o(l){return r(e,l)}function c(l,...t){let s=1;for(;s<arguments.length;s++){const a=arguments[s];for(const u in a)l[u]=a[u]}return l}function i(l,t,s){const a=this,u={enumerable:!0};a.hasBeenReset=!1;let f="",h=!1,A=l,g=t,p=s,m=null,y="",E=!0,C="auto",T="start",w=50,I="middle",L=50,R="middle";Object.defineProperty(a,"id",c({},u,{get:function(){return f},set:function(B){f=""+B}})),Object.defineProperty(a,"pauseOnExit",c({},u,{get:function(){return h},set:function(B){h=!!B}})),Object.defineProperty(a,"startTime",c({},u,{get:function(){return A},set:function(B){if(typeof B!="number")throw new TypeError("Start time must be set to a number.");A=B,this.hasBeenReset=!0}})),Object.defineProperty(a,"endTime",c({},u,{get:function(){return g},set:function(B){if(typeof B!="number")throw new TypeError("End time must be set to a number.");g=B,this.hasBeenReset=!0}})),Object.defineProperty(a,"text",c({},u,{get:function(){return p},set:function(B){p=""+B,this.hasBeenReset=!0}})),Object.defineProperty(a,"region",c({},u,{get:function(){return m},set:function(B){m=B,this.hasBeenReset=!0}})),Object.defineProperty(a,"vertical",c({},u,{get:function(){return y},set:function(B){const P=n(B);if(P===!1)throw new SyntaxError("An invalid or illegal string was specified.");y=P,this.hasBeenReset=!0}})),Object.defineProperty(a,"snapToLines",c({},u,{get:function(){return E},set:function(B){E=!!B,this.hasBeenReset=!0}})),Object.defineProperty(a,"line",c({},u,{get:function(){return C},set:function(B){if(typeof B!="number"&&B!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");C=B,this.hasBeenReset=!0}})),Object.defineProperty(a,"lineAlign",c({},u,{get:function(){return T},set:function(B){const P=o(B);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");T=P,this.hasBeenReset=!0}})),Object.defineProperty(a,"position",c({},u,{get:function(){return w},set:function(B){if(B<0||B>100)throw new Error("Position must be between 0 and 100.");w=B,this.hasBeenReset=!0}})),Object.defineProperty(a,"positionAlign",c({},u,{get:function(){return I},set:function(B){const P=o(B);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");I=P,this.hasBeenReset=!0}})),Object.defineProperty(a,"size",c({},u,{get:function(){return L},set:function(B){if(B<0||B>100)throw new Error("Size must be between 0 and 100.");L=B,this.hasBeenReset=!0}})),Object.defineProperty(a,"align",c({},u,{get:function(){return R},set:function(B){const P=o(B);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");R=P,this.hasBeenReset=!0}})),a.displayState=void 0}return i.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},i})();class Bg{decode(e,r){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function kc(d){function e(n,o,c,i){return(n|0)*3600+(o|0)*60+(c|0)+parseFloat(i||0)}const r=d.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?e(r[2],r[3],0,r[4]):e(r[1],r[2],r[3],r[4]):null}class Pg{constructor(){this.values=Object.create(null)}set(e,r){!this.get(e)&&r!==""&&(this.values[e]=r)}get(e,r,n){return n?this.has(e)?this.values[e]:r[n]:this.has(e)?this.values[e]:r}has(e){return e in this.values}alt(e,r,n){for(let o=0;o<n.length;++o)if(r===n[o]){this.set(e,r);break}}integer(e,r){/^-?\d+$/.test(r)&&this.set(e,parseInt(r,10))}percent(e,r){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(r)){const n=parseFloat(r);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function Dc(d,e,r,n){const o=n?d.split(n):[d];for(const c in o){if(typeof o[c]!="string")continue;const i=o[c].split(r);if(i.length!==2)continue;const l=i[0],t=i[1];e(l,t)}}const ga=new Ga(0,0,""),$s=ga.align==="middle"?"middle":"center";function Og(d,e,r){const n=d;function o(){const l=kc(d);if(l===null)throw new Error("Malformed timestamp: "+n);return d=d.replace(/^[^\sa-zA-Z-]+/,""),l}function c(l,t){const s=new Pg;Dc(l,function(f,h){let A;switch(f){case"region":for(let g=r.length-1;g>=0;g--)if(r[g].id===h){s.set(f,r[g].region);break}break;case"vertical":s.alt(f,h,["rl","lr"]);break;case"line":A=h.split(","),s.integer(f,A[0]),s.percent(f,A[0])&&s.set("snapToLines",!1),s.alt(f,A[0],["auto"]),A.length===2&&s.alt("lineAlign",A[1],["start",$s,"end"]);break;case"position":A=h.split(","),s.percent(f,A[0]),A.length===2&&s.alt("positionAlign",A[1],["start",$s,"end","line-left","line-right","auto"]);break;case"size":s.percent(f,h);break;case"align":s.alt(f,h,["start",$s,"end","left","right"]);break}},/:/,/\s/),t.region=s.get("region",null),t.vertical=s.get("vertical","");let a=s.get("line","auto");a==="auto"&&ga.line===-1&&(a=-1),t.line=a,t.lineAlign=s.get("lineAlign","start"),t.snapToLines=s.get("snapToLines",!0),t.size=s.get("size",100),t.align=s.get("align",$s);let u=s.get("position","auto");u==="auto"&&ga.position===50&&(u=t.align==="start"||t.align==="left"?0:t.align==="end"||t.align==="right"?100:50),t.position=u}function i(){d=d.replace(/^\s+/,"")}if(i(),e.startTime=o(),i(),d.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);d=d.slice(3),i(),e.endTime=o(),i(),c(d,e)}function Bc(d){return d.replace(/<br(?: \/)?>/gi,`
`)}class _g{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Bg,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const r=this;e&&(r.buffer+=r.decoder.decode(e,{stream:!0}));function n(){let c=r.buffer,i=0;for(c=Bc(c);i<c.length&&c[i]!=="\r"&&c[i]!==`
`;)++i;const l=c.slice(0,i);return c[i]==="\r"&&++i,c[i]===`
`&&++i,r.buffer=c.slice(i),l}function o(c){Dc(c,function(i,l){},/:/)}try{let c="";if(r.state==="INITIAL"){if(!/\r\n|\n/.test(r.buffer))return this;c=n();const l=c.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(l!=null&&l[0]))throw new Error("Malformed WebVTT signature.");r.state="HEADER"}let i=!1;for(;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(i?i=!1:c=n(),r.state){case"HEADER":/:/.test(c)?o(c):c||(r.state="ID");continue;case"NOTE":c||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(c)){r.state="NOTE";break}if(!c)continue;if(r.cue=new Ga(0,0,""),r.state="CUE",c.indexOf("-->")===-1){r.cue.id=c;continue}case"CUE":if(!r.cue){r.state="BADCUE";continue}try{Og(c,r.cue,r.regionList)}catch{r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":{const l=c.indexOf("-->")!==-1;if(!c||l&&(i=!0)){r.oncue&&r.cue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}if(r.cue===null)continue;r.cue.text&&(r.cue.text+=`
`),r.cue.text+=c}continue;case"BADCUE":c||(r.state="ID")}}}catch{r.state==="CUETEXT"&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state=r.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(r){e.onparsingerror&&e.onparsingerror(r)}return e.onflush&&e.onflush(),this}}const Mg=/\r\n|\n\r|\n|\r/g,Vo=function(e,r,n=0){return e.slice(n,n+r.length)===r},Fg=function(e){let r=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),o=parseInt(e.slice(-9,-7)),c=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!vt(r)||!vt(n)||!vt(o)||!vt(c))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return r+=1e3*n,r+=60*1e3*o,r+=3600*1e3*c,r};function Qa(d,e,r){return ns(d.toString())+ns(e.toString())+ns(r)}const Ng=function(e,r,n){let o=e[r],c=e[o.prevCC];if(!c||!c.new&&o.new){e.ccOffset=e.presentationOffset=o.start,o.new=!1;return}for(;(i=c)!=null&&i.new;){var i;e.ccOffset+=o.start-c.start,o.new=!1,o=c,c=e[o.prevCC]}e.presentationOffset=n};function Ug(d,e,r,n,o,c,i){const l=new _g,t=vn(new Uint8Array(d)).trim().replace(Mg,`
`).split(`
`),s=[],a=e?Hh(e.baseTime,e.timescale):0;let u="00:00.000",f=0,h=0,A,g=!0;l.oncue=function(p){const m=r[n];let y=r.ccOffset;const E=(f-a)/9e4;if(m!=null&&m.new&&(h!==void 0?y=r.ccOffset=m.start:Ng(r,n,E)),E){if(!e){A=new Error("Missing initPTS for VTT MPEGTS");return}y=E-r.presentationOffset}const C=p.endTime-p.startTime,T=Tn((p.startTime+y-h)*9e4,o*9e4)/9e4;p.startTime=Math.max(T,0),p.endTime=Math.max(T+C,0);const w=p.text.trim();p.text=decodeURIComponent(encodeURIComponent(w)),p.id||(p.id=Qa(p.startTime,p.endTime,w)),p.endTime>0&&s.push(p)},l.onparsingerror=function(p){A=p},l.onflush=function(){if(A){i(A);return}c(s)},t.forEach(p=>{if(g)if(Vo(p,"X-TIMESTAMP-MAP=")){g=!1,p.slice(16).split(",").forEach(m=>{Vo(m,"LOCAL:")?u=m.slice(6):Vo(m,"MPEGTS:")&&(f=parseInt(m.slice(7)))});try{h=Fg(u)/1e3}catch(m){A=m}return}else p===""&&(g=!1);l.parse(p+`
`)}),l.flush()}const Yo="stpp.ttml.im1t",Pc=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Oc=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Gg={left:"start",center:"center",right:"end",start:"start",end:"end"};function iu(d,e,r,n){const o=ur(new Uint8Array(d),["mdat"]);if(o.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const c=o.map(l=>vn(l)),i=Yh(e.baseTime,1,e.timescale);try{c.forEach(l=>r(Qg(l,i)))}catch(l){n(l)}}function Qg(d,e){const o=new DOMParser().parseFromString(d,"text/xml").getElementsByTagName("tt")[0];if(!o)throw new Error("Invalid ttml");const c={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},i=Object.keys(c).reduce((u,f)=>(u[f]=o.getAttribute(`ttp:${f}`)||c[f],u),{}),l=o.getAttribute("xml:space")!=="preserve",t=su(Ho(o,"styling","style")),s=su(Ho(o,"layout","region")),a=Ho(o,"body","[begin]");return[].map.call(a,u=>{const f=_c(u,l);if(!f||!u.hasAttribute("begin"))return null;const h=Ko(u.getAttribute("begin"),i),A=Ko(u.getAttribute("dur"),i);let g=Ko(u.getAttribute("end"),i);if(h===null)throw ou(u);if(g===null){if(A===null)throw ou(u);g=h+A}const p=new Ga(h-e,g-e,f);p.id=Qa(p.startTime,p.endTime,p.text);const m=s[u.getAttribute("region")],y=t[u.getAttribute("style")],E=$g(m,y,t),{textAlign:C}=E;if(C){const T=Gg[C];T&&(p.lineAlign=T),p.align=C}return wr(p,E),p}).filter(u=>u!==null)}function Ho(d,e,r){const n=d.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(r)):[]}function su(d){return d.reduce((e,r)=>{const n=r.getAttribute("xml:id");return n&&(e[n]=r),e},{})}function _c(d,e){return[].slice.call(d.childNodes).reduce((r,n,o)=>{var c;return n.nodeName==="br"&&o?r+`
`:(c=n.childNodes)!=null&&c.length?_c(n,e):e?r+n.textContent.trim().replace(/\s+/g," "):r+n.textContent},"")}function $g(d,e,r){const n="http://www.w3.org/ns/ttml#styling";let o=null;const c=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],i=d!=null&&d.hasAttribute("style")?d.getAttribute("style"):null;return i&&r.hasOwnProperty(i)&&(o=r[i]),c.reduce((l,t)=>{const s=jo(e,n,t)||jo(d,n,t)||jo(o,n,t);return s&&(l[t]=s),l},{})}function jo(d,e,r){return d&&d.hasAttributeNS(e,r)?d.getAttributeNS(e,r):null}function ou(d){return new Error(`Could not parse ttml timestamp ${d}`)}function Ko(d,e){if(!d)return null;let r=kc(d);return r===null&&(Pc.test(d)?r=Wg(d,e):Oc.test(d)&&(r=Vg(d,e))),r}function Wg(d,e){const r=Pc.exec(d),n=(r[4]|0)+(r[5]|0)/e.subFrameRate;return(r[1]|0)*3600+(r[2]|0)*60+(r[3]|0)+n/e.frameRate}function Vg(d,e){const r=Oc.exec(d),n=Number(r[1]);switch(r[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class Ws{constructor(e,r){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=r}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,r,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=r,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class Yg{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=lu(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(D.FRAG_LOADING,this.onFragLoading,this),e.on(D.FRAG_LOADED,this.onFragLoaded,this),e.on(D.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(D.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(D.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(D.FRAG_LOADING,this.onFragLoading,this),e.off(D.FRAG_LOADED,this.onFragLoaded,this),e.off(D.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(D.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(D.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new Ws(this,"textTrack1"),r=new Ws(this,"textTrack2"),n=new Ws(this,"textTrack3"),o=new Ws(this,"textTrack4");this.cea608Parser1=new nu(1,e,r),this.cea608Parser2=new nu(3,n,o)}addCues(e,r,n,o,c){let i=!1;for(let l=c.length;l--;){const t=c[l],s=Hg(t[0],t[1],r,n);if(s>=0&&(t[0]=Math.min(t[0],r),t[1]=Math.max(t[1],n),i=!0,s/(n-r)>.5))return}if(i||c.push([r,n]),this.config.renderTextTracksNatively){const l=this.captionsTracks[e];this.Cues.newCue(l,r,n,o)}else{const l=this.Cues.newCue(null,r,n,o);this.hls.trigger(D.CUES_PARSED,{type:"captions",cues:l,track:e})}}onInitPtsFound(e,{frag:r,id:n,initPTS:o,timescale:c,trackId:i}){const{unparsedVttFrags:l}=this;n===Rt.MAIN&&(this.initPTS[r.cc]={baseTime:o,timescale:c,trackId:i}),l.length&&(this.unparsedVttFrags=[],l.forEach(t=>{this.initPTS[t.frag.cc]?this.onFragLoaded(D.FRAG_LOADED,t):this.hls.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,r){const{media:n}=this;if(n)for(let o=0;o<n.textTracks.length;o++){const c=n.textTracks[o];if(au(c,{name:e,lang:r,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return c}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:r,captionsTracks:n,media:o}=this,{label:c,languageCode:i}=r[e],l=this.getExistingTrack(c,i);if(l)n[e]=l,Oi(n[e]),Sc(n[e],o);else{const t=this.createTextTrack("captions",c,i);t&&(t[e]=!0,n[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const r=this.captionsProperties[e];if(!r)return;const n=r.label,o={_id:e,label:n,kind:"captions",default:r.media?!!r.media.default:!1,closedCaptions:r.media};this.nonNativeCaptionsTracks[e]=o,this.hls.trigger(D.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[o]})}createTextTrack(e,r,n){const o=this.media;if(o)return o.addTextTrack(e,r,n)}onMediaAttaching(e,r){this.media=r.media,r.mediaSource||this._cleanTracks()}onMediaDetaching(e,r){const n=!!r.transferMedia;if(this.media=null,n)return;const{captionsTracks:o}=this;Object.keys(o).forEach(c=>{Oi(o[c]),delete o[c]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=lu(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const r=e.textTracks;if(r)for(let n=0;n<r.length;n++)Oi(r[n])}onSubtitleTracksUpdated(e,r){const n=r.subtitleTracks||[],o=n.some(c=>c.textCodec===Yo);if(this.config.enableWebVTT||o&&this.config.enableIMSC1){if(dc(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const i=this.media,l=i?Zs(i.textTracks):null;if(this.tracks.forEach((t,s)=>{let a;if(l){let u=null;for(let f=0;f<l.length;f++)if(l[f]&&au(l[f],t)){u=l[f],l[f]=null;break}u&&(a=u)}if(a)Oi(a);else{const u=Mc(t);a=this.createTextTrack(u,t.name,t.lang),a&&(a.mode="disabled")}a&&this.textTracks.push(a)}),l!=null&&l.length){const t=l.filter(s=>s!==null).map(s=>s.label);t.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${t.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const i=this.tracks.map(l=>({label:l.name,kind:l.type.toLowerCase(),default:l.default,subtitleTrack:l}));this.hls.trigger(D.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:i})}}}onManifestLoaded(e,r){this.config.enableCEA708Captions&&r.captions&&r.captions.forEach(n=>{const o=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!o)return;const c=`textTrack${o[1]}`,i=this.captionsProperties[c];i&&(i.label=n.name,n.lang&&(i.languageCode=n.lang),i.media=n)})}closedCaptionsForLevel(e){const r=this.hls.levels[e.level];return r?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,r){if(this.enabled&&r.frag.type===Rt.MAIN){var n,o;const{cea608Parser1:c,cea608Parser2:i,lastSn:l}=this,{cc:t,sn:s}=r.frag,a=(n=(o=r.part)==null?void 0:o.index)!=null?n:-1;c&&i&&(s!==l+1||s===l&&a!==this.lastPartIndex+1||t!==this.lastCc)&&(c.reset(),i.reset()),this.lastCc=t,this.lastSn=s,this.lastPartIndex=a}}onFragLoaded(e,r){const{frag:n,payload:o}=r;if(n.type===Rt.SUBTITLE)if(o.byteLength){const c=n.decryptdata,i="stats"in r;if(c==null||!c.encrypted||i){const l=this.tracks[n.level],t=this.vttCCs;t[n.cc]||(t[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),l&&l.textCodec===Yo?this._parseIMSC1(n,o):this._parseVTTs(r)}}else this.hls.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,r){const n=this.hls;iu(r,this.initPTS[e.cc],o=>{this._appendCues(o,e.level),n.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},o=>{n.logger.log(`Failed to parse IMSC1: ${o}`),n.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:o})})}_parseVTTs(e){var r;const{frag:n,payload:o}=e,{initPTS:c,unparsedVttFrags:i}=this,l=c.length-1;if(!c[n.cc]&&l===-1){i.push(e);return}const t=this.hls,s=(r=n.initSegment)!=null&&r.data?Sn(n.initSegment.data,new Uint8Array(o)).buffer:o;Ug(s,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,a=>{this._appendCues(a,n.level),t.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},a=>{const u=a.message==="Missing initPTS for VTT MPEGTS";u?i.push(e):this._fallbackToIMSC1(n,o),t.logger.log(`Failed to parse VTT cue: ${a}`),!(u&&l>n.cc)&&t.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:a})})}_fallbackToIMSC1(e,r){const n=this.tracks[e.level];n.textCodec||iu(r,this.initPTS[e.cc],()=>{n.textCodec=Yo,this._parseIMSC1(e,r)},()=>{n.textCodec="wvtt"})}_appendCues(e,r){const n=this.hls;if(this.config.renderTextTracksNatively){const o=this.textTracks[r];if(!o||o.mode==="disabled")return;e.forEach(c=>wc(o,c))}else{const o=this.tracks[r];if(!o)return;const c=o.default?"default":"subtitles"+r;n.trigger(D.CUES_PARSED,{type:"subtitles",cues:e,track:c})}}onFragDecrypted(e,r){const{frag:n}=r;n.type===Rt.SUBTITLE&&this.onFragLoaded(D.FRAG_LOADED,r)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,r){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:o}=r;if(!(n.type===Rt.MAIN&&this.closedCaptionsForLevel(n)==="NONE"))for(let c=0;c<o.length;c++){const i=o[c].bytes;if(i){this.cea608Parser1||this.initCea608Parsers();const l=this.extractCea608Data(i);this.cea608Parser1.addData(o[c].pts,l[0]),this.cea608Parser2.addData(o[c].pts,l[1])}}}onBufferFlushing(e,{startOffset:r,endOffset:n,endOffsetSubtitles:o,type:c}){const{media:i}=this;if(!(!i||i.currentTime<n)){if(!c||c==="video"){const{captionsTracks:l}=this;Object.keys(l).forEach(t=>Aa(l[t],r,n))}if(this.config.renderTextTracksNatively&&r===0&&o!==void 0){const{textTracks:l}=this;Object.keys(l).forEach(t=>Aa(l[t],r,o))}}}extractCea608Data(e){const r=[[],[]],n=e[0]&31;let o=2;for(let c=0;c<n;c++){const i=e[o++],l=127&e[o++],t=127&e[o++];if(l===0&&t===0)continue;if((4&i)!==0){const a=3&i;(a===0||a===1)&&(r[a].push(l),r[a].push(t))}}return r}}function Mc(d){return d.characteristics&&/transcribes-spoken-dialog/gi.test(d.characteristics)&&/describes-music-and-sound/gi.test(d.characteristics)?"captions":"subtitles"}function au(d,e){return!!d&&d.kind===Mc(e)&&ca(e,d)}function Hg(d,e,r,n){return Math.min(e,n)-Math.max(d,r)}function lu(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const jg=/\s/,Kg={newCue(d,e,r,n){const o=[];let c,i,l,t,s;const a=self.VTTCue||self.TextTrackCue;for(let f=0;f<n.rows.length;f++)if(c=n.rows[f],l=!0,t=0,s="",!c.isEmpty()){var u;for(let g=0;g<c.chars.length;g++)jg.test(c.chars[g].uchar)&&l?t++:(s+=c.chars[g].uchar,l=!1);c.cueStartTime=e,e===r&&(r+=1e-4),t>=16?t--:t++;const h=Bc(s.trim()),A=Qa(e,r,h);d!=null&&(u=d.cues)!=null&&u.getCueById(A)||(i=new a(e,r,h),i.id=A,i.line=f+1,i.align="left",i.position=10+Math.min(80,Math.floor(t*8/32)*10),o.push(i))}return d&&o.length&&(o.sort((f,h)=>f.line==="auto"||h.line==="auto"?0:f.line>8&&h.line>8?h.line-f.line:f.line-h.line),o.forEach(f=>wc(d,f))),o}};function zg(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const qg=/(\d+)-(\d+)\/(\d+)/;class uu{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||ep,this.controller=new self.AbortController,this.stats=new ya}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,r,n){const o=this.stats;if(o.loading.start)throw new Error("Loader can only be used once.");o.loading.start=self.performance.now();const c=Xg(e,this.controller.signal),i=e.responseType==="arraybuffer",l=i?"byteLength":"length",{maxTimeToFirstByteMs:t,maxLoadTimeMs:s}=r.loadPolicy;this.context=e,this.config=r,this.callbacks=n,this.request=this.fetchSetup(e,c),self.clearTimeout(this.requestTimeout),r.timeout=t&&vt(t)?t:s,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(o,e,this.response))},r.timeout),(ls(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(u=>{var f;this.response=this.loader=u;const h=Math.max(self.performance.now(),o.loading.start);if(self.clearTimeout(this.requestTimeout),r.timeout=s,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(o,e,this.response))},s-(h-o.loading.start)),!u.ok){const{status:g,statusText:p}=u;throw new tp(p||"fetch, bad network response",g,u)}o.loading.first=h,o.total=Jg(u.headers)||o.total;const A=(f=this.callbacks)==null?void 0:f.onProgress;return A&&vt(r.highWaterMark)?this.loadProgressively(u,o,e,r.highWaterMark,A):i?u.arrayBuffer():e.responseType==="json"?u.json():u.text()}).then(u=>{var f,h;const A=this.response;if(!A)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),o.loading.end=Math.max(self.performance.now(),o.loading.first);const g=u[l];g&&(o.loaded=o.total=g);const p={url:A.url,data:u,code:A.status},m=(f=this.callbacks)==null?void 0:f.onProgress;m&&!vt(r.highWaterMark)&&m(o,e,u,A),(h=this.callbacks)==null||h.onSuccess(p,o,e,A)}).catch(u=>{var f;if(self.clearTimeout(this.requestTimeout),o.aborted)return;const h=u&&u.code||0,A=u?u.message:null;(f=this.callbacks)==null||f.onError({code:h,text:A},e,u?u.details:null,o)})}getCacheAge(){let e=null;if(this.response){const r=this.response.headers.get("age");e=r?parseFloat(r):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,r,n,o=0,c){const i=new Hu,l=e.body.getReader(),t=()=>l.read().then(s=>{if(s.done)return i.dataLength&&c(r,n,i.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const a=s.value,u=a.length;return r.loaded+=u,u<o||i.dataLength?(i.push(a),i.dataLength>=o&&c(r,n,i.flush().buffer,e)):c(r,n,a.buffer,e),t()}).catch(()=>Promise.reject());return t()}}function Xg(d,e){const r={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(wr({},d.headers))};return d.rangeEnd&&r.headers.set("Range","bytes="+d.rangeStart+"-"+String(d.rangeEnd-1)),r}function Zg(d){const e=qg.exec(d);if(e)return parseInt(e[2])-parseInt(e[1])+1}function Jg(d){const e=d.get("Content-Range");if(e){const n=Zg(e);if(vt(n))return n}const r=d.get("Content-Length");if(r)return parseInt(r)}function ep(d,e){return new self.Request(d.url,e)}class tp extends Error{constructor(e,r,n){super(e),this.code=void 0,this.details=void 0,this.code=r,this.details=n}}const rp=/^age:\s*[\d.]+\s*$/im;class Fc{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new ya,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,r,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=r,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:r}=this;if(!e||!r)return;const n=this.loader=new self.XMLHttpRequest,o=this.stats;o.loading.first=0,o.loaded=0,o.aborted=!1;const c=this.xhrSetup;c?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return c(n,r.url)}).catch(i=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",r.url,!0),c(n,r.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,r,e)}).catch(i=>{var l;(l=this.callbacks)==null||l.onError({code:n.status,text:i.message},r,n,o)}):this.openAndSendXhr(n,r,e)}openAndSendXhr(e,r,n){e.readyState||e.open("GET",r.url,!0);const o=r.headers,{maxTimeToFirstByteMs:c,maxLoadTimeMs:i}=n.loadPolicy;if(o)for(const l in o)e.setRequestHeader(l,o[l]);r.rangeEnd&&e.setRequestHeader("Range","bytes="+r.rangeStart+"-"+(r.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=r.responseType,self.clearTimeout(this.requestTimeout),n.timeout=c&&vt(c)?c:i,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:r,stats:n}=this;if(!e||!r)return;const o=r.readyState,c=this.config;if(!n.aborted&&o>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),c.timeout!==c.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),c.timeout=c.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),c.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),o===4)){self.clearTimeout(this.requestTimeout),r.onreadystatechange=null,r.onprogress=null;const s=r.status,a=r.responseType==="text"?r.responseText:null;if(s>=200&&s<300){const A=a??r.response;if(A!=null){var i,l;n.loading.end=Math.max(self.performance.now(),n.loading.first);const g=r.responseType==="arraybuffer"?A.byteLength:A.length;n.loaded=n.total=g,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first);const p=(i=this.callbacks)==null?void 0:i.onProgress;p&&p(n,e,A,r);const m={url:r.responseURL,data:A,code:s};(l=this.callbacks)==null||l.onSuccess(m,n,e,r);return}}const u=c.loadPolicy.errorRetry,f=n.retry,h={url:e.url,data:void 0,code:s};if(so(u,f,!1,h))this.retry(u);else{var t;Cr.error(`${s} while loading ${e.url}`),(t=this.callbacks)==null||t.onError({code:s,text:r.statusText},e,r,n)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,r=this.stats.retry;if(so(e,r,!0))this.retry(e);else{var n;Cr.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const o=this.callbacks;o&&(this.abortInternal(),o.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:r,stats:n}=this;this.retryDelay=xa(e,n.retry),n.retry++,Cr.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${r?.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total)}getCacheAge(){let e=null;if(this.loader&&rp.test(this.loader.getAllResponseHeaders())){const r=this.loader.getResponseHeader("age");e=r?parseFloat(r):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const np={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},ip=Sr(Sr({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:Fc,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:gd,bufferController:aA,capLevelController:Fa,errorController:Ed,fpsController:ag,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Mu,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:np},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},sp()),{},{subtitleStreamController:yg,subtitleTrackController:cg,timelineController:Yg,audioStreamController:nA,audioTrackController:iA,emeController:Fi,cmcdController:ig,contentSteeringController:og,interstitialsController:vg});function sp(){return{cueHandler:Kg,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function op(d,e,r){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=pa(d),o=["manifest","level","frag"],c=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return o.forEach(i=>{const l=`${i==="level"?"playlist":i}LoadPolicy`,t=e[l]===void 0,s=[];c.forEach(a=>{const u=`${i}Loading${a}`,f=e[u];if(f!==void 0&&t){s.push(u);const h=n[l].default;switch(e[l]={default:h},a){case"TimeOut":h.maxLoadTimeMs=f,h.maxTimeToFirstByteMs=f;break;case"MaxRetry":h.errorRetry.maxNumRetry=f,h.timeoutRetry.maxNumRetry=f;break;case"RetryDelay":h.errorRetry.retryDelayMs=f,h.timeoutRetry.retryDelayMs=f;break;case"MaxRetryTimeout":h.errorRetry.maxRetryDelayMs=f,h.timeoutRetry.maxRetryDelayMs=f;break}}}),s.length&&r.warn(`hls.js config: "${s.join('", "')}" setting(s) are deprecated, use "${l}": ${Pr(e[l])}`)}),Sr(Sr({},n),e)}function pa(d){return d&&typeof d=="object"?Array.isArray(d)?d.map(pa):Object.keys(d).reduce((e,r)=>(e[r]=pa(d[r]),e),{}):d}function ap(d,e){const r=d.loader;r!==uu&&r!==Fc?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),d.progressive=!1):zg()&&(d.loader=uu,d.progressive=!0,d.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const Js=2,lp=.1,up=.05,cp=100;class fp extends Bu{constructor(e,r){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var n;(n=this.media)!=null&&n.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var n;this.ended=((n=this.media)==null?void 0:n.currentTime)||1,this.hls.trigger(D.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=r,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,r){this.setInterval(cp),this.mediaSource=r.mediaSource;const n=this.media=r.media;on(n,"playing",this.onMediaPlaying),on(n,"waiting",this.onMediaWaiting),on(n,"ended",this.onMediaEnded)}onMediaDetaching(e,r){this.clearInterval();const{media:n}=this;n&&(fn(n,"playing",this.onMediaPlaying),fn(n,"waiting",this.onMediaWaiting),fn(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,r){this.buffered=r.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const r=this.media.currentTime;this.poll(r,this.lastCurrentTime),this.lastCurrentTime=r}poll(e,r){var n,o;const c=(n=this.hls)==null?void 0:n.config;if(!c)return;const i=this.media;if(!i)return;const{seeking:l}=i,t=this.seeking&&!l,s=!this.seeking&&l,a=i.paused&&!l||i.ended||i.playbackRate===0;if(this.seeking=l,e!==r){r&&(this.ended=0),this.moved=!0,l||(this.nudgeRetry=0,c.nudgeOnVideoHole&&!a&&e>r&&this.nudgeOnVideoHole(e,r)),this.waiting===0&&this.stallResolved(e);return}if(s||t){t&&this.stallResolved(e);return}if(a){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&i.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(D.MEDIA_ENDED,{stalled:!1}));return}if(!Xt.getBuffered(i).length){this.nudgeRetry=0;return}const u=Xt.bufferInfo(i,e,0),f=u.nextStart||0,h=this.fragmentTracker;if(l&&h&&this.hls){const w=cu(this.hls.inFlightFragments,e),I=u.len>Js,L=!f||w||f-e>Js&&!h.getPartialFragment(e);if(I||L)return;this.moved=!1}const A=(o=this.hls)==null?void 0:o.latestLevelDetails;if(!this.moved&&this.stalled!==null&&h){if(!(u.len>0)&&!f)return;const I=Math.max(f,u.start||0)-e,R=!!(A!=null&&A.live)?A.targetduration*2:Js,B=Vs(e,h);if(I>0&&(I<=R||B)){i.paused||this._trySkipBufferHole(B);return}}const g=c.detectStallWithCurrentTimeMs,p=self.performance.now(),m=this.waiting;let y=this.stalled;if(y===null)if(m>0&&p-m<g)y=this.stalled=m;else{this.stalled=p;return}const E=p-y;if(!l&&(E>=g||m)&&this.hls){var C;if(((C=this.mediaSource)==null?void 0:C.readyState)==="ended"&&!(A!=null&&A.live)&&Math.abs(e-(A?.edge||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(D.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(u),!this.media||!this.hls)return}const T=Xt.bufferInfo(i,e,c.maxBufferHole);this._tryFixBufferStall(T,E,e)}stallResolved(e){const r=this.stalled;if(r&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-r;this.log(`playback not stuck anymore @${e}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(D.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,r){var n;const o=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(n=this.buffered.audio)!=null&&n.length&&o&&o.length>1&&e>o.end(0)){const c=Xt.bufferedInfo(Xt.timeRangesToArray(this.buffered.audio),e,0);if(c.len>1&&r>=c.start){const i=Xt.timeRangesToArray(o),l=Xt.bufferedInfo(i,r,0).bufferedIndex;if(l>-1&&l<i.length-1){const t=Xt.bufferedInfo(i,e,0).bufferedIndex,s=i[l].end,a=i[l+1].start;if((t===-1||t>l)&&a-s<1&&e-s<2){const u=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${s} -> ${a} buffered index: ${t}`);this.warn(u.message),this.media.currentTime+=1e-6;let f=Vs(e,this.fragmentTracker);f&&"fragment"in f?f=f.fragment:f||(f=void 0);const h=Xt.bufferInfo(this.media,e,0);this.hls.trigger(D.ERROR,{type:Ot.MEDIA_ERROR,details:ve.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:u,reason:u.message,frag:f,buffer:h.len,bufferInfo:h})}}}}}_tryFixBufferStall(e,r,n){var o,c;const{fragmentTracker:i,media:l}=this,t=(o=this.hls)==null?void 0:o.config;if(!l||!i||!t)return;const s=(c=this.hls)==null?void 0:c.latestLevelDetails,a=Vs(n,i);if((a||s!=null&&s.live&&n<s.fragmentStart)&&(this._trySkipBufferHole(a)||!this.media))return;const u=e.buffered,f=this.adjacentTraversal(e,n);(u&&u.length>1&&e.len>t.maxBufferHole||e.nextStart&&(e.nextStart-n<t.maxBufferHole||f))&&(r>t.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,r){const n=this.fragmentTracker,o=e.nextStart;if(n&&o){const c=n.getFragAtPos(r,Rt.MAIN),i=n.getFragAtPos(o,Rt.MAIN);if(c&&i)return i.sn-c.sn<2}return!1}_reportStall(e){const{hls:r,media:n,stallReported:o,stalled:c}=this;if(!o&&c!==null&&n&&r){this.stallReported=!0;const i=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${Pr(e)})`);this.warn(i.message),r.trigger(D.ERROR,{type:Ot.MEDIA_ERROR,details:ve.BUFFER_STALLED_ERROR,fatal:!1,error:i,buffer:e.len,bufferInfo:e,stalled:{start:c}})}}_trySkipBufferHole(e){var r;const{fragmentTracker:n,media:o}=this,c=(r=this.hls)==null?void 0:r.config;if(!o||!n||!c)return 0;const i=o.currentTime,l=Xt.bufferInfo(o,i,0),t=i<l.start?l.start:l.nextStart;if(t&&this.hls){const a=l.len<=c.maxBufferHole,u=l.len>0&&l.len<1&&o.readyState<3,f=t-i;if(f>0&&(a||u)){if(f>c.maxBufferHole){let A=!1;if(i===0){const g=n.getAppendedFrag(0,Rt.MAIN);g&&t<g.end&&(A=!0)}if(!A&&e){var s;if(!((s=this.hls.loadLevelObj)!=null&&s.details)||cu(this.hls.inFlightFragments,t))return 0;let p=!1,m=e.end;for(;m<t;){const y=Vs(m,n);if(y)m+=y.duration;else{p=!0;break}}if(p)return 0}}const h=Math.max(t+up,i+lp);if(this.warn(`skipping hole, adjusting currentTime from ${i} to ${h}`),this.moved=!0,o.currentTime=h,!(e!=null&&e.gap)){const A=new Error(`fragment loaded with buffer holes, seeking from ${i} to ${h}`),g={type:Ot.MEDIA_ERROR,details:ve.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:A,reason:A.message,buffer:l.len,bufferInfo:l};e&&("fragment"in e?g.part=e:g.frag=e),this.hls.trigger(D.ERROR,g)}return h}}return 0}_tryNudgeBuffer(e){const{hls:r,media:n,nudgeRetry:o}=this,c=r?.config;if(!n||!c)return 0;const i=n.currentTime;if(this.nudgeRetry++,o<c.nudgeMaxRetry){const l=i+(o+1)*c.nudgeOffset,t=new Error(`Nudging 'currentTime' from ${i} to ${l}`);this.warn(t.message),n.currentTime=l,r.trigger(D.ERROR,{type:Ot.MEDIA_ERROR,details:ve.BUFFER_NUDGE_ON_STALL,error:t,fatal:!1,buffer:e.len,bufferInfo:e})}else{const l=new Error(`Playhead still not moving while enough data buffered @${i} after ${c.nudgeMaxRetry} nudges`);this.error(l.message),r.trigger(D.ERROR,{type:Ot.MEDIA_ERROR,details:ve.BUFFER_STALLED_ERROR,error:l,fatal:!0,buffer:e.len,bufferInfo:e})}}}function cu(d,e){const r=fu(d.main);if(r&&r.start<=e)return r;const n=fu(d.audio);return n&&n.start<=e?n:null}function fu(d){if(!d)return null;switch(d.state){case _e.IDLE:case _e.STOPPED:case _e.ENDED:case _e.ERROR:return null}return d.frag}function Vs(d,e){return e.getAppendedFrag(d,Rt.MAIN)||e.getPartialFragment(d)}const dp=.25;function ma(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function zo(d,e,r,n,o){let c=new d(e,r,"");try{c.value=n,o&&(c.type=o)}catch{c=new d(e,r,Pr(o?Sr({type:o},n):n))}return c}const Ys=(()=>{const d=ma();try{d&&new d(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class hp{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(D.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(D.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(D.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,r){var n;this.media=r.media,((n=r.overrides)==null?void 0:n.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const r=(e=this.hls)==null?void 0:e.latestLevelDetails;r&&this.updateDateRangeCues(r)}onMediaDetaching(e,r){this.media=null,!r.transferMedia&&(this.id3Track&&(this.removeCues&&Oi(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const r=this.getID3Track(e.textTracks);return r.mode="hidden",r}getID3Track(e){if(this.media){for(let r=0;r<e.length;r++){const n=e[r];if(n.kind==="metadata"&&n.label==="id3")return Sc(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,r){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:n,enableID3MetadataCues:o}=this.hls.config;if(!n&&!o)return;const{samples:c}=r;this.id3Track||(this.id3Track=this.createTrack(this.media));const i=ma();if(i)for(let l=0;l<c.length;l++){const t=c[l].type;if(t===mn.emsg&&!n||!o)continue;const s=Ju(c[l].data),a=c[l].pts;let u=a+c[l].duration;u>Ys&&(u=Ys),u-a<=0&&(u=a+dp);for(let h=0;h<s.length;h++){const A=s[h];if(!ec(A)){this.updateId3CueEnds(a,t);const g=zo(i,a,u,A,t);g&&this.id3Track.addCue(g)}}}}updateId3CueEnds(e,r){var n;const o=(n=this.id3Track)==null?void 0:n.cues;if(o)for(let c=o.length;c--;){const i=o[c];i.type===r&&i.startTime<e&&i.endTime===Ys&&(i.endTime=e)}}onBufferFlushing(e,{startOffset:r,endOffset:n,type:o}){const{id3Track:c,hls:i}=this;if(!i)return;const{config:{enableEmsgMetadataCues:l,enableID3MetadataCues:t}}=i;if(c&&(l||t)){let s;o==="audio"?s=a=>a.type===mn.audioId3&&t:o==="video"?s=a=>a.type===mn.emsg&&l:s=a=>a.type===mn.audioId3&&t||a.type===mn.emsg&&l,Aa(c,r,n,s)}}onLevelUpdated(e,{details:r}){this.updateDateRangeCues(r,!0)}onLevelPtsUpdated(e,r){Math.abs(r.drift)>.01&&this.updateDateRangeCues(r.details)}updateDateRangeCues(e,r){if(!this.hls||!this.media)return;const{assetPlayerId:n,timelineOffset:o,enableDateRangeMetadataCues:c,interstitialsController:i}=this.hls.config;if(!c)return;const l=ma();if(n&&o&&!i){const{fragmentStart:g,fragmentEnd:p}=e;let m=this.assetCue;m?(m.startTime=g,m.endTime=p):l&&(m=this.assetCue=zo(l,g,p,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),m&&(m.id=n,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(m),m.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:t}=this,{dateRanges:s}=e,a=Object.keys(s);let u=this.dateRangeCuesAppended;if(t&&r){var f;if((f=t.cues)!=null&&f.length){const g=Object.keys(u).filter(p=>!a.includes(p));for(let p=g.length;p--;){var h;const m=g[p],y=(h=u[m])==null?void 0:h.cues;delete u[m],y&&Object.keys(y).forEach(E=>{const C=y[E];if(C){C.removeEventListener("enter",this.onEventCueEnter);try{t.removeCue(C)}catch{}}})}}else u=this.dateRangeCuesAppended={}}const A=e.fragments[e.fragments.length-1];if(!(a.length===0||!vt(A?.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let g=0;g<a.length;g++){const p=a[g],m=s[p],y=m.startTime,E=u[p],C=E?.cues||{};let T=E?.durationKnown||!1,w=Ys;const{duration:I,endDate:L}=m;if(L&&I!==null)w=y+I,T=!0;else if(m.endOnNext&&!T){const B=a.reduce((P,N)=>{if(N!==m.id){const U=s[N];if(U.class===m.class&&U.startDate>m.startDate&&(!P||m.startDate<P.startDate))return U}return P},null);B&&(w=B.startTime,T=!0)}const R=Object.keys(m.attr);for(let B=0;B<R.length;B++){const P=R[B];if(!Pd(P))continue;const N=C[P];if(N)T&&!(E!=null&&E.durationKnown)?N.endTime=w:Math.abs(N.startTime-y)>.01&&(N.startTime=y,N.endTime=w);else if(l){let U=m.attr[P];Od(P)&&(U=gu(U));const W=zo(l,y,w,{key:P,data:U},mn.dateRange);W&&(W.id=p,this.id3Track.addCue(W),C[P]=W,i&&(P==="X-ASSET-LIST"||P==="X-ASSET-URL")&&W.addEventListener("enter",this.onEventCueEnter))}}u[p]={cues:C,dateRange:m,durationKnown:T}}}}}class Ap{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:r}=this,n=this.levelDetails;if(!r||!n)return;this.currentTime=r.currentTime;const o=this.computeLatency();if(o===null)return;this._latency=o;const{lowLatencyMode:c,maxLiveSyncPlaybackRate:i}=this.config;if(!c||i===1||!n.live)return;const l=this.targetLatency;if(l===null)return;const t=o-l,s=Math.min(this.maxLatency,l+n.targetduration);if(t<s&&t>.05&&this.forwardBufferLength>1){const u=Math.min(2,Math.max(1,i)),f=Math.round(2/(1+Math.exp(-.75*t-this.edgeStalled))*20)/20,h=Math.min(u,Math.max(1,f));this.changeMediaPlaybackRate(r,h)}else r.playbackRate!==1&&r.playbackRate!==0&&this.changeMediaPlaybackRate(r,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const r=this.levelDetails;return r?e.liveMaxLatencyDurationCount*r.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:r,partHoldBack:n,targetduration:o}=e,{liveSyncDuration:c,liveSyncDurationCount:i,lowLatencyMode:l}=this.config,t=this.hls.userConfig;let s=l&&n||r;(this._targetLatencyUpdated||t.liveSyncDuration||t.liveSyncDurationCount||s===0)&&(s=c!==void 0?c:i*o);const a=o;return s+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,a)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),r=this.targetLatency;if(e===null||r===null)return null;const n=this.levelDetails;if(n===null)return null;const o=n.edge,c=e-r-this.edgeStalled,i=o-n.totalduration,l=o-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(i,c),l)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const r=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-r,0)}get forwardBufferLength(){const{media:e}=this,r=this.levelDetails;if(!e||!r)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):r.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(D.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(D.ERROR,this.onError,this))}onMediaAttached(e,r){this.media=r.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:r}){r.advanced&&this.onTimeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,r){var n;r.details===ve.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(n=this.levelDetails)!=null&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,r){var n,o;e.playbackRate!==r&&((n=this.hls)==null||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(o=this.targetLatency)==null?void 0:o.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${r}`),e.playbackRate=r)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class gp extends Ma{constructor(e,r){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=r,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this),e.on(D.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this),e.off(D.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(r=>{r.loadError=0,r.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,r){this.resetLevels()}onManifestLoaded(e,r){const n=this.hls.config.preferManagedMediaSource,o=[],c={},i={};let l=!1,t=!1,s=!1;r.levels.forEach(a=>{const u=a.attrs;let{audioCodec:f,videoCodec:h}=a;f&&(a.audioCodec=f=to(f,n)||void 0),h&&(h=a.videoCodec=qf(h));const{width:A,height:g,unknownCodecs:p}=a;let m=p?p.length:0;if(p)for(let B=m;B--;){const P=p[B];this.isAudioSupported(P)?(a.audioCodec=f=f?`${f},${P}`:P,m--,Ui.audio[f.substring(0,4)]=2):this.isVideoSupported(P)&&(a.videoCodec=h=h?`${h},${P}`:P,m--,Ui.video[h.substring(0,4)]=2)}if(l||(l=!!(A&&g)),t||(t=!!h),s||(s=!!f),m||f&&!this.isAudioSupported(f)||h&&!this.isVideoSupported(h)){this.log(`Some or all CODECS not supported "${u.CODECS}"`);return}const{CODECS:y,"FRAME-RATE":E,"HDCP-LEVEL":C,"PATHWAY-ID":T,RESOLUTION:w,"VIDEO-RANGE":I}=u,R=`${`${T||"."}-`}${a.bitrate}-${w}-${E}-${y}-${I}-${C}`;if(c[R])if(c[R].uri!==a.url&&!a.attrs["PATHWAY-ID"]){const B=i[R]+=1;a.attrs["PATHWAY-ID"]=new Array(B+1).join(".");const P=this.createLevel(a);c[R]=P,o.push(P)}else c[R].addGroupId("audio",u.AUDIO),c[R].addGroupId("text",u.SUBTITLES);else{const B=this.createLevel(a);c[R]=B,i[R]=1,o.push(B)}}),this.filterAndSortMediaOptions(o,r,l,t,s)}createLevel(e){const r=new ss(e),n=e.supplemental;if(n!=null&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const o=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(o.message),r.supportedResult=wu(o,[])}return r}isAudioSupported(e){return ea(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return ea(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,r,n,o,c){let i=[],l=[],t=e;if((n||o)&&c&&(t=t.filter(({videoCodec:p,videoRange:m,width:y,height:E})=>(!!p||!!(y&&E))&&od(m))),t.length===0){Promise.resolve().then(()=>{if(this.hls){let p="no level with compatible codecs found in manifest",m=p;r.levels.length&&(m=`one or more CODECS in variant not supported: ${Pr(r.levels.map(E=>E.attrs.CODECS).filter((E,C,T)=>T.indexOf(E)===C))}`,this.warn(m),p+=` (${m})`);const y=new Error(p);this.hls.trigger(D.ERROR,{type:Ot.MEDIA_ERROR,details:ve.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:r.url,error:y,reason:m})}});return}r.audioTracks&&(i=r.audioTracks.filter(p=>!p.audioCodec||this.isAudioSupported(p.audioCodec)),du(i)),r.subtitles&&(l=r.subtitles,du(l));const s=t.slice(0);t.sort((p,m)=>{if(p.attrs["HDCP-LEVEL"]!==m.attrs["HDCP-LEVEL"])return(p.attrs["HDCP-LEVEL"]||"")>(m.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&p.height!==m.height)return p.height-m.height;if(p.frameRate!==m.frameRate)return p.frameRate-m.frameRate;if(p.videoRange!==m.videoRange)return ro.indexOf(p.videoRange)-ro.indexOf(m.videoRange);if(p.videoCodec!==m.videoCodec){const y=sl(p.videoCodec),E=sl(m.videoCodec);if(y!==E)return E-y}if(p.uri===m.uri&&p.codecSet!==m.codecSet){const y=eo(p.codecSet),E=eo(m.codecSet);if(y!==E)return E-y}return p.averageBitrate!==m.averageBitrate?p.averageBitrate-m.averageBitrate:0});let a=s[0];if(this.steering&&(t=this.steering.filterParsedLevels(t),t.length!==s.length)){for(let p=0;p<s.length;p++)if(s[p].pathwayId===t[0].pathwayId){a=s[p];break}}this._levels=t;for(let p=0;p<t.length;p++)if(t[p]===a){var u;this._firstLevel=p;const m=a.bitrate,y=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${t.length} level(s) found, first bitrate: ${m}`),((u=this.hls.userConfig)==null?void 0:u.abrEwmaDefaultEstimate)===void 0){const E=Math.min(m,this.hls.config.abrEwmaDefaultEstimateMax);E>y&&y===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=E)}break}const f=c&&!o,h=this.hls.config,A=!!(h.audioStreamController&&h.audioTrackController),g={levels:t,audioTracks:i,subtitleTracks:l,sessionData:r.sessionData,sessionKeys:r.sessionKeys,firstLevel:this._firstLevel,stats:r.stats,audio:c,video:o,altAudio:A&&!f&&i.some(p=>!!p.url)};this.hls.trigger(D.MANIFEST_PARSED,g)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const r=this._levels;if(r.length===0)return;if(e<0||e>=r.length){const a=new Error("invalid level idx"),u=e<0;if(this.hls.trigger(D.ERROR,{type:Ot.OTHER_ERROR,details:ve.LEVEL_SWITCH_ERROR,level:e,fatal:u,error:a,reason:a.message}),u)return;e=Math.min(e,r.length-1)}const n=this.currentLevelIndex,o=this.currentLevel,c=o?o.attrs["PATHWAY-ID"]:void 0,i=r[e],l=i.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=i,n===e&&o&&c===l)return;this.log(`Switching to level ${e} (${i.height?i.height+"p ":""}${i.videoRange?i.videoRange+" ":""}${i.codecSet?i.codecSet+" ":""}@${i.bitrate})${l?" with Pathway "+l:""} from level ${n}${c?" with Pathway "+c:""}`);const t={level:e,attrs:i.attrs,details:i.details,bitrate:i.bitrate,averageBitrate:i.averageBitrate,maxBitrate:i.maxBitrate,realBitrate:i.realBitrate,width:i.width,height:i.height,codecSet:i.codecSet,audioCodec:i.audioCodec,videoCodec:i.videoCodec,audioGroups:i.audioGroups,subtitleGroups:i.subtitleGroups,loaded:i.loaded,loadError:i.loadError,fragmentError:i.fragmentError,name:i.name,id:i.id,uri:i.uri,url:i.url,urlId:0,audioGroupIds:i.audioGroupIds,textGroupIds:i.textGroupIds};this.hls.trigger(D.LEVEL_SWITCHING,t);const s=i.details;if(!s||s.live){const a=this.switchParams(i.uri,o?.details,s);this.loadPlaylist(a)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const r=this.steering.pathways(),n=e.filter(o=>r.indexOf(o)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${r}`);return}this.steering.pathwayPriority=n}}onError(e,r){r.fatal||!r.context||r.context.type===cr.LEVEL&&r.context.level===this.level&&this.checkRetry(r)}onFragBuffered(e,{frag:r}){if(r!==void 0&&r.type===Rt.MAIN){const n=r.elementaryStreams;if(!Object.keys(n).some(c=>!!n[c]))return;const o=this._levels[r.level];o!=null&&o.loadError&&(this.log(`Resetting level error count of ${o.loadError} on frag buffered`),o.loadError=0)}}onLevelLoaded(e,r){var n;const{level:o,details:c}=r,i=r.levelInfo;if(!i){var l;this.warn(`Invalid level index ${o}`),(l=r.deliveryDirectives)!=null&&l.skip&&(c.deltaUpdateFailed=!0);return}if(i===this.currentLevel||r.withoutMultiVariant){i.fragmentError===0&&(i.loadError=0);let t=i.details;t===r.details&&t.advanced&&(t=void 0),this.playlistLoaded(o,r,t)}else(n=r.deliveryDirectives)!=null&&n.skip&&(c.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,r){super.loadingPlaylist(e,r);const n=this.getUrlWithDirectives(e.uri,r),o=this.currentLevelIndex,c=e.attrs["PATHWAY-ID"],i=e.details,l=i?.age;this.log(`Loading level index ${o}${r?.msn!==void 0?" at sn "+r.msn+" part "+r.part:""}${c?" Pathway "+c:""}${l&&i.live?" age "+l.toFixed(1)+(i.type&&" "+i.type||""):""} ${n}`),this.hls.trigger(D.LEVEL_LOADING,{url:n,level:o,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:r||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var r;if(this._levels.length===1)return;const n=this._levels.filter((c,i)=>i!==e?!0:(this.steering&&this.steering.removeLevel(c),c===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,c.details&&c.details.fragments.forEach(l=>l.level=-1)),!1));Wu(n),this._levels=n,this.currentLevelIndex>-1&&(r=this.currentLevel)!=null&&r.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const o=n.length-1;this._firstLevel=Math.min(this._firstLevel,o),this._startLevel&&(this._startLevel=Math.min(this._startLevel,o)),this.hls.trigger(D.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:r}){this._levels=r}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:r,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==r&&(this._maxAutoLevel=r,this.hls.trigger(D.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:r,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function du(d){const e={};d.forEach(r=>{const n=r.groupId||"";r.id=e[n]=e[n]||0,e[n]++})}function Nc(){return self.SourceBuffer||self.WebKitSourceBuffer}function Uc(){if(!ai())return!1;const e=Nc();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function pp(){if(!Uc())return!1;const d=ai();return typeof d?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>d.isTypeSupported(is(e,"video")))||["mp4a.40.2","fLaC"].some(e=>d.isTypeSupported(is(e,"audio"))))}function mp(){var d;const e=Nc();return typeof(e==null||(d=e.prototype)==null?void 0:d.changeType)=="function"}const vp=100;class yp extends La{constructor(e,r,n){super(e,r,n,"stream-controller",Rt.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const o=this.media,c=o?o.currentTime:null;if(c===null||!vt(c)||(this.log(`Media seeked to ${c.toFixed(3)}`),!this.getBufferedFrag(c)))return;const i=this.getFwdBufferInfoAtPos(o,c,Rt.MAIN,0);if(i===null||i.len===0){this.warn(`Main forward buffer length at ${c} on "seeked" event ${i?i.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(D.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(D.BUFFER_CREATED,this.onBufferCreated,this),e.on(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(D.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(D.BUFFER_CREATED,this.onBufferCreated,this),e.off(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,r){if(this.levels){const{lastCurrentTime:n,hls:o}=this;if(this.stopLoad(),this.setInterval(vp),this.level=-1,!this.startFragRequested){let c=o.startLevel;c===-1&&(o.config.testBandwidth&&this.levels.length>1?(c=0,this.bitrateTest=!0):c=o.firstAutoLevel),o.nextLoadLevel=c,this.level=o.loadLevel,this._hasEnoughToStart=!!r}n>0&&e===-1&&!r&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=_e.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=r?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=_e.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case _e.WAITING_LEVEL:{const{levels:e,level:r}=this,n=e?.[r],o=n?.details;if(o&&(!o.live||this.levelLastLoaded===n&&!this.waitForLive(n))){if(this.waitForCdnTuneIn(o))break;this.state=_e.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=_e.IDLE;break}break}case _e.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===_e.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:r,levels:n,media:o}=this;if(r===null||!o&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const c=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[c]))return;const i=n[c],l=this.getMainFwdBufferInfo();if(l===null)return;const t=this.getLevelDetails();if(t&&this._streamEnded(l,t)){const g={};this.altAudio===2&&(g.type="video"),this.hls.trigger(D.BUFFER_EOS,g),this.state=_e.ENDED;return}if(!this.buffering)return;e.loadLevel!==c&&e.manualLevel===-1&&this.log(`Adapting to level ${c} from level ${this.level}`),this.level=e.nextLoadLevel=c;const s=i.details;if(!s||this.state===_e.WAITING_LEVEL||this.waitForLive(i)){this.level=c,this.state=_e.WAITING_LEVEL,this.startFragRequested=!1;return}const a=l.len,u=this.getMaxBufferLength(i.maxBitrate);if(a>=u)return;this.backtrackFragment&&this.backtrackFragment.start>l.end&&(this.backtrackFragment=null);const f=this.backtrackFragment?this.backtrackFragment.start:l.end;let h=this.getNextFragment(f,s);if(this.couldBacktrack&&!this.fragPrevious&&h&&Hr(h)&&this.fragmentTracker.getState(h)!==Xr.OK){var A;const p=((A=this.backtrackFragment)!=null?A:h).sn-s.startSN,m=s.fragments[p-1];m&&h.cc===m.cc&&(h=m,this.fragmentTracker.removeFragment(m))}else this.backtrackFragment&&l.len&&(this.backtrackFragment=null);if(h&&this.isLoopLoading(h,f)){if(!h.gap){const p=this.audioOnly&&!this.altAudio?Lr.AUDIO:Lr.VIDEO,m=(p===Lr.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;m&&this.afterBufferFlushed(m,p,Rt.MAIN)}h=this.getNextFragmentLoopLoading(h,s,l,Rt.MAIN,u)}h&&(h.initSegment&&!h.initSegment.data&&!this.bitrateTest&&(h=h.initSegment),this.loadFragment(h,i,f))}loadFragment(e,r,n){const o=this.fragmentTracker.getState(e);o===Xr.NOT_LOADED||o===Xr.PARTIAL?Hr(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,r)):super.loadFragment(e,r,n):this._loadInitSegment(e,r):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Rt.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:r}=this;if(r!=null&&r.readyState){let n;const o=this.getAppendedFrag(r.currentTime);o&&o.start>1&&this.flushMainBuffer(0,o.start-1);const c=this.getLevelDetails();if(c!=null&&c.live){const l=this.getMainFwdBufferInfo();if(!l||l.len<c.targetduration*2)return}if(!r.paused&&e){const l=this.hls.nextLoadLevel,t=e[l],s=this.fragLastKbps;s&&this.fragCurrent?n=this.fragCurrent.duration*t.maxBitrate/(1e3*s)+1:n=0}else n=0;const i=this.getBufferedFrag(r.currentTime+n);if(i){const l=this.followingBufferedFrag(i);if(l){this.abortCurrentFrag();const t=l.maxStartPTS?l.maxStartPTS:l.start,s=l.duration,a=Math.max(i.end,t+Math.min(Math.max(s-this.config.maxFragLookUpTolerance,s*(this.couldBacktrack?.5:.125)),s*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(a,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case _e.KEY_LOADING:case _e.FRAG_LOADING:case _e.FRAG_LOADING_WAITING_RETRY:case _e.PARSING:case _e.PARSED:this.state=_e.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,r){super.flushMainBuffer(e,r,this.altAudio===2?"video":null)}onMediaAttached(e,r){super.onMediaAttached(e,r);const n=r.media;on(n,"playing",this.onMediaPlaying),on(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,r){const{media:n}=this;n&&(fn(n,"playing",this.onMediaPlaying),fn(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,r),!r.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(D.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,r){let n=!1,o=!1;for(let c=0;c<r.levels.length;c++){const i=r.levels[c].audioCodec;i&&(n=n||i.indexOf("mp4a.40.2")!==-1,o=o||i.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=n&&o&&!mp(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=r.levels,this.startFragRequested=!1}onLevelLoading(e,r){const{levels:n}=this;if(!n||this.state!==_e.IDLE)return;const o=r.levelInfo;(!o.details||o.details.live&&(this.levelLastLoaded!==o||o.details.expired)||this.waitForCdnTuneIn(o.details))&&(this.state=_e.WAITING_LEVEL)}onLevelLoaded(e,r){var n;const{levels:o,startFragRequested:c}=this,i=r.level,l=r.details,t=l.totalduration;if(!o){this.warn(`Levels were reset while loading level ${i}`);return}this.log(`Level ${i} loaded [${l.startSN},${l.endSN}]${l.lastPartSn?`[part-${l.lastPartSn}-${l.lastPartIndex}]`:""}, cc [${l.startCC}, ${l.endCC}] duration:${t}`);const s=r.levelInfo,a=this.fragCurrent;a&&(this.state===_e.FRAG_LOADING||this.state===_e.FRAG_LOADING_WAITING_RETRY)&&a.level!==r.level&&a.loader&&this.abortCurrentFrag();let u=0;if(l.live||(n=s.details)!=null&&n.live){var f;if(this.checkLiveUpdate(l),l.deltaUpdateFailed)return;u=this.alignPlaylists(l,s.details,(f=this.levelLastLoaded)==null?void 0:f.details)}if(s.details=l,this.levelLastLoaded=s,c||this.setStartPosition(l,u),this.hls.trigger(D.LEVEL_UPDATED,{details:l,level:i}),this.state===_e.WAITING_LEVEL){if(this.waitForCdnTuneIn(l))return;this.state=_e.IDLE}c&&l.live&&this.synchronizeToLiveEdge(l),this.tick()}synchronizeToLiveEdge(e){const{config:r,media:n}=this;if(!n)return;const o=this.hls.liveSyncPosition,c=this.getLoadPosition(),i=e.fragmentStart,l=e.edge,t=c>=i-r.maxFragLookUpTolerance&&c<=l;if(o!==null&&n.duration>o&&(c<o||!t)){const a=r.liveMaxLatencyDuration!==void 0?r.liveMaxLatencyDuration:r.liveMaxLatencyDurationCount*e.targetduration;if((!t&&n.readyState<4||c<l-a)&&(this._hasEnoughToStart||(this.nextLoadPosition=o),n.readyState))if(this.warn(`Playback: ${c.toFixed(3)} is located too far from the end of live sliding playlist: ${l}, reset currentTime to : ${o.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var s;const u=Xt.bufferInfo(n,o,0);if(!((s=u.buffered)!=null&&s.length)){n.currentTime=o;return}if(u.start<=c){n.currentTime=o;return}const{nextStart:h}=Xt.bufferedInfo(u.buffered,c,0);h&&(n.currentTime=h)}else n.currentTime=o}}_handleFragmentLoadProgress(e){var r;const n=e.frag,{part:o,payload:c}=e,{levels:i}=this;if(!i){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const l=i[n.level];if(!l){this.warn(`Level ${n.level} not found on progress`);return}const t=l.details;if(!t){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const s=l.videoCodec,a=t.PTSKnown||!t.live,u=(r=n.initSegment)==null?void 0:r.data,f=this._getAudioCodec(l),h=this.transmuxer=this.transmuxer||new fc(this.hls,Rt.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),A=o?o.index:-1,g=A!==-1,p=new Sa(n.level,n.sn,n.stats.chunkCount,c.byteLength,A,g),m=this.initPTS[n.cc];h.push(c,u,f,s,n,o,t.totalduration,a,p,m)}onAudioTrackSwitching(e,r){const n=this.hls,o=this.altAudio===2;if(no(r.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const i=this.fragCurrent;i&&(this.log("Switching to main audio track, cancel main fragment load"),i.abortRequests(),this.fragmentTracker.removeFragment(i)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(o){this.fragmentTracker.removeAllFragments(),n.once(D.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(D.AUDIO_TRACK_SWITCHED,r)}),n.trigger(D.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}n.trigger(D.AUDIO_TRACK_SWITCHED,r)}}onAudioTrackSwitched(e,r){const n=no(r.url,this.hls);if(n){const o=this.videoBuffer;o&&this.mediaBuffer!==o&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=o)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,r){const n=r.tracks;let o,c,i=!1;for(const l in n){const t=n[l];if(t.id==="main"){if(c=l,o=t,l==="video"){const s=n[l];s&&(this.videoBuffer=s.buffer)}}else i=!0}i&&o?(this.log(`Alternate track found, use ${c}.buffered to schedule main fragment loading`),this.mediaBuffer=o.buffer):this.mediaBuffer=this.media}onFragBuffered(e,r){const{frag:n,part:o}=r,c=n.type===Rt.MAIN;if(c){if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${o?" p: "+o.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===_e.PARSED&&(this.state=_e.IDLE);return}const l=o?o.stats:n.stats;this.fragLastKbps=Math.round(8*l.total/(l.buffering.end-l.loading.first)),Hr(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,o)}const i=this.media;i&&(!this._hasEnoughToStart&&Xt.getBuffered(i).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),c&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,r){var n;if(r.fatal){this.state=_e.ERROR;return}switch(r.details){case ve.FRAG_GAP:case ve.FRAG_PARSING_ERROR:case ve.FRAG_DECRYPT_ERROR:case ve.FRAG_LOAD_ERROR:case ve.FRAG_LOAD_TIMEOUT:case ve.KEY_LOAD_ERROR:case ve.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Rt.MAIN,r);break;case ve.LEVEL_LOAD_ERROR:case ve.LEVEL_LOAD_TIMEOUT:case ve.LEVEL_PARSING_ERROR:!r.levelRetry&&this.state===_e.WAITING_LEVEL&&((n=r.context)==null?void 0:n.type)===cr.LEVEL&&(this.state=_e.IDLE);break;case ve.BUFFER_ADD_CODEC_ERROR:case ve.BUFFER_APPEND_ERROR:if(r.parent!=="main")return;this.reduceLengthAndFlushBuffer(r)&&this.resetLoadingState();break;case ve.BUFFER_FULL_ERROR:if(r.parent!=="main")return;this.reduceLengthAndFlushBuffer(r)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case ve.INTERNAL_EXCEPTION:this.recoverWorkerError(r);break}}onFragLoadEmergencyAborted(){this.state=_e.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:r}){if(r!==Lr.AUDIO||!this.altAudio){const n=(r===Lr.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;n&&(this.afterBufferFlushed(n,r,Rt.MAIN),this.tick())}}onLevelsUpdated(e,r){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=r.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const r=e.currentTime;let n=this.startPosition;if(n>=0&&r<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${r}`);return}const o=this.timelineOffset;o&&n&&(n+=o);const c=this.getLevelDetails(),i=Xt.getBuffered(e),l=i.length?i.start(0):0,t=l-n,s=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||t>0&&(t<s||this.loadingParts&&t<2*(c?.partTarget||0)))&&(this.log(`adjusting start position by ${t} to match buffer start`),n+=t,this.startPosition=n),r<n&&(this.log(`seek to target start position ${n} from current time ${r} buffer start ${l}`),e.currentTime=n)}}_getAudioCodec(e){let r=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&r&&(this.log("Swapping audio codec"),r.indexOf("mp4a.40.5")!==-1?r="mp4a.40.2":r="mp4a.40.5"),r}_loadBitrateTestFrag(e,r){e.bitrateTest=!0,this._doFragLoad(e,r).then(n=>{const{hls:o}=this,c=n?.frag;if(!c||this.fragContextChanged(c))return;r.fragmentError=0,this.state=_e.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const i=c.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),o.trigger(D.FRAG_LOADED,n),c.bitrateTest=!1}).catch(n=>{this.state===_e.STOPPED||this.state===_e.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const r=this.playlistType,{hls:n}=this,{remuxResult:o,chunkMeta:c}=e,i=this.getCurrentContext(c);if(!i){this.resetWhenMissingContext(c);return}const{frag:l,part:t,level:s}=i,{video:a,text:u,id3:f,initSegment:h}=o,{details:A}=s,g=this.altAudio?void 0:o.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=_e.PARSING,h){const p=h.tracks;if(p){const C=l.initSegment||l;if(this.unhandledEncryptionError(h,l))return;this._bufferInitSegment(s,p,C,c),n.trigger(D.FRAG_PARSING_INIT_SEGMENT,{frag:C,id:r,tracks:p})}const m=h.initPTS,y=h.timescale,E=this.initPTS[l.cc];if(vt(m)&&(!E||E.baseTime!==m||E.timescale!==y)){const C=h.trackId;this.initPTS[l.cc]={baseTime:m,timescale:y,trackId:C},n.trigger(D.INIT_PTS_FOUND,{frag:l,id:r,initPTS:m,timescale:y,trackId:C})}}if(a&&A){g&&a.type==="audiovideo"&&this.logMuxedErr(l);const p=A.fragments[l.sn-1-A.startSN],m=l.sn===A.startSN,y=!p||l.cc>p.cc;if(o.independent!==!1){const{startPTS:E,endPTS:C,startDTS:T,endDTS:w}=a;if(t)t.elementaryStreams[a.type]={startPTS:E,endPTS:C,startDTS:T,endDTS:w};else if(a.firstKeyFrame&&a.independent&&c.id===1&&!y&&(this.couldBacktrack=!0),a.dropped&&a.independent){const I=this.getMainFwdBufferInfo(),L=(I?I.end:this.getLoadPosition())+this.config.maxBufferHole,R=a.firstKeyFramePTS?a.firstKeyFramePTS:E;if(!m&&L<R-this.config.maxBufferHole&&!y){this.backtrack(l);return}else y&&(l.gap=!0);l.setElementaryStreamInfo(a.type,l.start,C,l.start,w,!0)}else m&&E-(A.appliedTimelineOffset||0)>Js&&(l.gap=!0);l.setElementaryStreamInfo(a.type,E,C,T,w),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(a,l,t,c,m||y)}else if(m||y)l.gap=!0;else{this.backtrack(l);return}}if(g){const{startPTS:p,endPTS:m,startDTS:y,endDTS:E}=g;t&&(t.elementaryStreams[Lr.AUDIO]={startPTS:p,endPTS:m,startDTS:y,endDTS:E}),l.setElementaryStreamInfo(Lr.AUDIO,p,m,y,E),this.bufferFragmentData(g,l,t,c)}if(A&&f!=null&&f.samples.length){const p={id:r,frag:l,details:A,samples:f.samples};n.trigger(D.FRAG_PARSING_METADATA,p)}if(A&&u){const p={id:r,frag:l,details:A,samples:u.samples};n.trigger(D.FRAG_PARSING_USERDATA,p)}}logMuxedErr(e){this.warn(`${Hr(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,r,n,o){if(this.state!==_e.PARSING)return;this.audioOnly=!!r.audio&&!r.video,this.altAudio&&!this.audioOnly&&(delete r.audio,r.audiovideo&&this.logMuxedErr(n));const{audio:c,video:i,audiovideo:l}=r;if(c){const s=e.audioCodec;let a=Hs(c.codec,s);a==="mp4a"&&(a="mp4a.40.5");const u=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){a&&(a.indexOf("mp4a.40.5")!==-1?a="mp4a.40.2":a="mp4a.40.5");const f=c.metadata;f&&"channelCount"in f&&(f.channelCount||1)!==1&&u.indexOf("firefox")===-1&&(a="mp4a.40.5")}a&&a.indexOf("mp4a.40.5")!==-1&&u.indexOf("android")!==-1&&c.container!=="audio/mpeg"&&(a="mp4a.40.2",this.log(`Android: force audio codec to ${a}`)),s&&s!==a&&this.log(`Swapping manifest audio codec "${s}" for "${a}"`),c.levelCodec=a,c.id=Rt.MAIN,this.log(`Init audio buffer, container:${c.container}, codecs[selected/level/parsed]=[${a||""}/${s||""}/${c.codec}]`),delete r.audiovideo}if(i){i.levelCodec=e.videoCodec,i.id=Rt.MAIN;const s=i.codec;if(s?.length===4)switch(s){case"hvc1":case"hev1":i.codec="hvc1.1.6.L120.90";break;case"av01":i.codec="av01.0.04M.08";break;case"avc1":i.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${i.container}, codecs[level/parsed]=[${e.videoCodec||""}/${s}]${i.codec!==s?" parsed-corrected="+i.codec:""}${i.supplemental?" supplemental="+i.supplemental:""}`),delete r.audiovideo}l&&(this.log(`Init audiovideo buffer, container:${l.container}, codecs[level/parsed]=[${e.codecs}/${l.codec}]`),delete r.video,delete r.audio);const t=Object.keys(r);if(t.length){if(this.hls.trigger(D.BUFFER_CODECS,r),!this.hls)return;t.forEach(s=>{const u=r[s].initSegment;u!=null&&u.byteLength&&this.hls.trigger(D.BUFFER_APPENDING,{type:s,data:u,frag:n,part:null,chunkMeta:o,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,Rt.MAIN)}get maxBufferLength(){const{levels:e,level:r}=this,n=e?.[r];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=_e.IDLE}checkFragmentChanged(){const e=this.media;let r=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(Xt.isBuffered(e,n)?r=this.getAppendedFrag(n):Xt.isBuffered(e,n+.1)&&(r=this.getAppendedFrag(n+.1)),r){this.backtrackFragment=null;const o=this.fragPlaying,c=r.level;(!o||r.sn!==o.sn||o.level!==c)&&(this.fragPlaying=r,this.hls.trigger(D.FRAG_CHANGED,{frag:r}),(!o||o.level!==c)&&this.hls.trigger(D.LEVEL_SWITCHED,{level:c}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const r=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return vt(r)?this.getAppendedFrag(r):null}get currentProgramDateTime(){var e;const r=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(vt(r)){const n=this.getLevelDetails(),o=this.currentFrag||(n?mi(null,n.fragments,r):null);if(o){const c=o.programDateTime;if(c!==null){const i=c+(r-o.start)*1e3;return new Date(i)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Ep extends wn{constructor(e,r){super("key-loader",r),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyIdToKeyInfo){const o=this.keyIdToKeyInfo[n].loader;if(o){var r;if(e&&e!==((r=o.context)==null?void 0:r.frag.type))return;o.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const r=this.keyIdToKeyInfo[e];(r.mediaKeySessionContext||r.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const r=this.keyIdToKeyInfo[e].loader;r&&r.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,r=ve.KEY_LOAD_ERROR,n,o,c){return new ei({type:Ot.NETWORK_ERROR,details:r,fatal:!1,frag:e,response:c,error:n,networkDetails:o})}loadClear(e,r,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(r.length)for(let o=0,c=r.length;o<c;o++){const i=r[o];if(e.cc<=i.cc&&(!Hr(e)||!Hr(i)||e.sn<i.sn)||!n&&o==c-1)return this.emeController.selectKeySystemFormat(i).then(l=>{if(!this.emeController)return;i.setKeyFormat(l);const t=Ks(l);if(t)return this.emeController.getKeySystemAccess([t])})}if(this.config.requireKeySystemAccessOnStart){const o=es(this.config);if(o.length)return this.emeController.getKeySystemAccess(o)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(r=>this.loadInternal(e,r)):this.loadInternal(e)}loadInternal(e,r){var n,o;r&&e.setKeyFormat(r);const c=e.decryptdata;if(!c){const a=new Error(r?`Expected frag.decryptdata to be defined after setting format ${r}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,ve.KEY_LOAD_ERROR,a))}const i=c.uri;if(!i)return Promise.reject(this.createKeyLoadError(e,ve.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${i}"`)));const l=qo(c);let t=this.keyIdToKeyInfo[l];if((n=t)!=null&&n.decryptdata.key)return c.key=t.decryptdata.key,Promise.resolve({frag:e,keyInfo:t});if((o=t)!=null&&o.keyLoadPromise){var s;switch((s=t.mediaKeySessionContext)==null?void 0:s.keyStatus){case"usable":case"usable-in-future":return t.keyLoadPromise.then(u=>{const{keyInfo:f}=u;return c.key=f.decryptdata.key,{frag:e,keyInfo:f}})}}switch(this.log(`Loading key ${pn(c.keyId||[])} from ${e.type} ${e.level}`),t=this.keyIdToKeyInfo[l]={decryptdata:c,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},c.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return c.keyFormat==="identity"?this.loadKeyHTTP(t,e):this.loadKeyEME(t,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(t,e);default:return Promise.reject(this.createKeyLoadError(e,ve.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${c.method}"`)))}}loadKeyEME(e,r){const n={frag:r,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const o=this.emeController.loadKey(n);return(e.keyLoadPromise=o.then(c=>(e.mediaKeySessionContext=c,n))).catch(c=>{throw e.keyLoadPromise=null,c.data&&(c.data.frag=r),c})}return Promise.resolve(n)}loadKeyHTTP(e,r){const n=this.config,o=n.loader,c=new o(n);return r.keyLoader=e.loader=c,e.keyLoadPromise=new Promise((i,l)=>{const t={keyInfo:e,frag:r,responseType:"arraybuffer",url:e.decryptdata.uri},s=n.keyLoadPolicy.default,a={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},u={onSuccess:(f,h,A,g)=>{const{frag:p,keyInfo:m,url:y}=A,E=qo(m.decryptdata)||y;if(!p.decryptdata||m!==this.keyIdToKeyInfo[E])return l(this.createKeyLoadError(p,ve.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),g));m.decryptdata.key=p.decryptdata.key=new Uint8Array(f.data),p.keyLoader=null,m.loader=null,i({frag:p,keyInfo:m})},onError:(f,h,A,g)=>{this.resetLoader(h),l(this.createKeyLoadError(r,ve.KEY_LOAD_ERROR,new Error(`HTTP Error ${f.code} loading key ${f.text}`),A,Sr({url:t.url,data:void 0},f)))},onTimeout:(f,h,A)=>{this.resetLoader(h),l(this.createKeyLoadError(r,ve.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),A))},onAbort:(f,h,A)=>{this.resetLoader(h),l(this.createKeyLoadError(r,ve.INTERNAL_ABORTED,new Error("key loading aborted"),A))}};c.load(t,a,u)})}resetLoader(e){const{frag:r,keyInfo:n,url:o}=e,c=n.loader;r.keyLoader===c&&(r.keyLoader=null,n.loader=null);const i=qo(n.decryptdata)||o;delete this.keyIdToKeyInfo[i],c&&c.destroy()}}function qo(d){const e=d.keyId;return e?pn(e):d.uri}function hu(d){const{type:e}=d;switch(e){case cr.AUDIO_TRACK:return Rt.AUDIO;case cr.SUBTITLE_TRACK:return Rt.SUBTITLE;default:return Rt.MAIN}}function Xo(d,e){let r=d.url;return(r===void 0||r.indexOf("data:")===0)&&(r=e.url),r}class bp{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(D.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_LOADING,this.onLevelLoading,this),e.off(D.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(D.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const r=this.hls.config,n=r.pLoader,o=r.loader,c=n||o,i=new c(r);return this.loaders[e.type]=i,i}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const r=this.loaders[e];r&&r.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,r){const{url:n}=r;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:cr.MANIFEST,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,r){const{id:n,level:o,pathwayId:c,url:i,deliveryDirectives:l,levelInfo:t}=r;this.load({id:n,level:o,pathwayId:c,responseType:"text",type:cr.LEVEL,url:i,deliveryDirectives:l,levelOrTrack:t})}onAudioTrackLoading(e,r){const{id:n,groupId:o,url:c,deliveryDirectives:i,track:l}=r;this.load({id:n,groupId:o,level:null,responseType:"text",type:cr.AUDIO_TRACK,url:c,deliveryDirectives:i,levelOrTrack:l})}onSubtitleTrackLoading(e,r){const{id:n,groupId:o,url:c,deliveryDirectives:i,track:l}=r;this.load({id:n,groupId:o,level:null,responseType:"text",type:cr.SUBTITLE_TRACK,url:c,deliveryDirectives:i,levelOrTrack:l})}onLevelsUpdated(e,r){const n=this.loaders[cr.LEVEL];if(n){const o=n.context;o&&!r.levels.some(c=>c===o.levelOrTrack)&&(n.abort(),delete this.loaders[cr.LEVEL])}}load(e){var r;const n=this.hls.config;let o=this.getInternalLoader(e);if(o){const s=this.hls.logger,a=o.context;if(a&&a.levelOrTrack===e.levelOrTrack&&(a.url===e.url||a.deliveryDirectives&&!e.deliveryDirectives)){a.url===e.url?s.log(`[playlist-loader]: ignore ${e.url} ongoing request`):s.log(`[playlist-loader]: ignore ${e.url} in favor of ${a.url}`);return}s.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),o.abort()}let c;if(e.type===cr.MANIFEST?c=n.manifestLoadPolicy.default:c=wr({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),o=this.createInternalLoader(e),vt((r=e.deliveryDirectives)==null?void 0:r.part)){let s;if(e.type===cr.LEVEL&&e.level!==null?s=this.hls.levels[e.level].details:e.type===cr.AUDIO_TRACK&&e.id!==null?s=this.hls.audioTracks[e.id].details:e.type===cr.SUBTITLE_TRACK&&e.id!==null&&(s=this.hls.subtitleTracks[e.id].details),s){const a=s.partTarget,u=s.targetduration;if(a&&u){const f=Math.max(a*3,u*.8)*1e3;c=wr({},c,{maxTimeToFirstByteMs:Math.min(f,c.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(f,c.maxTimeToFirstByteMs)})}}}const i=c.errorRetry||c.timeoutRetry||{},l={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:i.maxNumRetry||0,retryDelay:i.retryDelayMs||0,maxRetryDelay:i.maxRetryDelayMs||0},t={onSuccess:(s,a,u,f)=>{const h=this.getInternalLoader(u);this.resetInternalLoader(u.type);const A=s.data;if(A.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(s,u,new Error("no EXTM3U delimiter"),f||null,a);return}a.parsing.start=performance.now(),$n.isMediaPlaylist(A)||u.type!==cr.MANIFEST?this.handleTrackOrLevelPlaylist(s,a,u,f||null,h):this.handleMasterPlaylist(s,a,u,f)},onError:(s,a,u,f)=>{this.handleNetworkError(a,u,!1,s,f)},onTimeout:(s,a,u)=>{this.handleNetworkError(a,u,!0,void 0,s)}};o.load(e,l,t)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:r},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${r}`),this.hls.startLoad(r))}handleMasterPlaylist(e,r,n,o){const c=this.hls,i=e.data,l=Xo(e,n),t=$n.parseMasterPlaylist(i,l);if(t.playlistParsingError){this.handleManifestParsingError(e,n,t.playlistParsingError,o,r);return}const{contentSteering:s,levels:a,sessionData:u,sessionKeys:f,startTimeOffset:h,variableList:A}=t;this.variableList=A;const{AUDIO:g=[],SUBTITLES:p,"CLOSED-CAPTIONS":m}=$n.parseMasterPlaylistMedia(i,l,t);g.length&&!g.some(E=>!E.url)&&a[0].audioCodec&&!a[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Fr({}),bitrate:0,url:""})),c.trigger(D.MANIFEST_LOADED,{levels:a,audioTracks:g,subtitles:p,captions:m,contentSteering:s,url:l,stats:r,networkDetails:o,sessionData:u,sessionKeys:f,startTimeOffset:h,variableList:A})}handleTrackOrLevelPlaylist(e,r,n,o,c){const i=this.hls,{id:l,level:t,type:s}=n,a=Xo(e,n),u=vt(t)?t:vt(l)?l:0,f=hu(n),h=$n.parseLevelPlaylist(e.data,a,u,f,0,this.variableList);if(s===cr.MANIFEST){const A={attrs:new Fr({}),bitrate:0,details:h,name:"",url:a};h.requestScheduled=r.loading.start+Gu(h,0),i.trigger(D.MANIFEST_LOADED,{levels:[A],audioTracks:[],url:a,stats:r,networkDetails:o,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}r.parsing.end=performance.now(),n.levelDetails=h,this.handlePlaylistLoaded(h,e,r,n,o,c)}handleManifestParsingError(e,r,n,o,c){this.hls.trigger(D.ERROR,{type:Ot.NETWORK_ERROR,details:ve.MANIFEST_PARSING_ERROR,fatal:r.type===cr.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:r,networkDetails:o,stats:c})}handleNetworkError(e,r,n=!1,o,c){let i=`A network ${n?"timeout":"error"+(o?" (status "+o.code+")":"")} occurred while loading ${e.type}`;e.type===cr.LEVEL?i+=`: ${e.level} id: ${e.id}`:(e.type===cr.AUDIO_TRACK||e.type===cr.SUBTITLE_TRACK)&&(i+=` id: ${e.id} group-id: "${e.groupId}"`);const l=new Error(i);this.hls.logger.warn(`[playlist-loader]: ${i}`);let t=ve.UNKNOWN,s=!1;const a=this.getInternalLoader(e);switch(e.type){case cr.MANIFEST:t=n?ve.MANIFEST_LOAD_TIMEOUT:ve.MANIFEST_LOAD_ERROR,s=!0;break;case cr.LEVEL:t=n?ve.LEVEL_LOAD_TIMEOUT:ve.LEVEL_LOAD_ERROR,s=!1;break;case cr.AUDIO_TRACK:t=n?ve.AUDIO_TRACK_LOAD_TIMEOUT:ve.AUDIO_TRACK_LOAD_ERROR,s=!1;break;case cr.SUBTITLE_TRACK:t=n?ve.SUBTITLE_TRACK_LOAD_TIMEOUT:ve.SUBTITLE_LOAD_ERROR,s=!1;break}a&&this.resetInternalLoader(e.type);const u={type:Ot.NETWORK_ERROR,details:t,fatal:s,url:e.url,loader:a,context:e,error:l,networkDetails:r,stats:c};if(o){const f=r?.url||e.url;u.response=Sr({url:f,data:void 0},o)}this.hls.trigger(D.ERROR,u)}handlePlaylistLoaded(e,r,n,o,c,i){const l=this.hls,{type:t,level:s,id:a,groupId:u,deliveryDirectives:f}=o,h=Xo(r,o),A=hu(o),g=typeof o.level=="number"&&A===Rt.MAIN?s:void 0;if(!e.fragments.length){const m=e.playlistParsingError=new Error("No Segments found in Playlist");l.trigger(D.ERROR,{type:Ot.NETWORK_ERROR,details:ve.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:m,reason:m.message,response:r,context:o,level:g,parent:A,networkDetails:c,stats:n});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const p=e.playlistParsingError;if(p){if(this.hls.logger.warn(`${p} ${e.url}`),!l.config.ignorePlaylistParsingErrors){l.trigger(D.ERROR,{type:Ot.NETWORK_ERROR,details:ve.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:p,reason:p.message,response:r,context:o,level:g,parent:A,networkDetails:c,stats:n});return}e.playlistParsingError=null}switch(e.live&&i&&(i.getCacheAge&&(e.ageHeader=i.getCacheAge()||0),(!i.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),t){case cr.MANIFEST:case cr.LEVEL:l.trigger(D.LEVEL_LOADED,{details:e,levelInfo:o.levelOrTrack||l.levels[0],level:g||0,id:a||0,stats:n,networkDetails:c,deliveryDirectives:f,withoutMultiVariant:t===cr.MANIFEST});break;case cr.AUDIO_TRACK:l.trigger(D.AUDIO_TRACK_LOADED,{details:e,track:o.levelOrTrack,id:a||0,groupId:u||"",stats:n,networkDetails:c,deliveryDirectives:f});break;case cr.SUBTITLE_TRACK:l.trigger(D.SUBTITLE_TRACK_LOADED,{details:e,track:o.levelOrTrack,id:a||0,groupId:u||"",stats:n,networkDetails:c,deliveryDirectives:f});break}}}let Cp=class Pi{static get version(){return os}static isMSESupported(){return Uc()}static isSupported(){return pp()}static getMediaSource(){return ai()}static get Events(){return D}static get MetadataSchema(){return mn}static get ErrorTypes(){return Ot}static get ErrorDetails(){return ve}static get DefaultConfig(){return Pi.defaultConfig?Pi.defaultConfig:ip}static set DefaultConfig(e){Pi.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Ra,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const r=this.logger=Rf(e.debug||!1,"Hls instance",e.assetPlayerId),n=this.config=op(Pi.DefaultConfig,e,r);this.userConfig=e,n.progressive&&ap(n,r);const{abrController:o,bufferController:c,capLevelController:i,errorController:l,fpsController:t}=n,s=new l(this),a=this.abrController=new o(this),u=new bd(this),f=n.interstitialsController,h=f?this.interstitialsController=new f(this,Pi):null,A=this.bufferController=new c(this,u),g=this.capLevelController=new i(this),p=new t(this),m=new bp(this),y=n.contentSteeringController,E=y?new y(this):null,C=this.levelController=new gp(this,E),T=new hp(this),w=new Ep(this.config,this.logger),I=this.streamController=new yp(this,u,w),L=this.gapController=new fp(this,u);g.setStreamController(I),p.setStreamController(I);const R=[m,C,I];h&&R.splice(1,0,h),E&&R.splice(1,0,E),this.networkControllers=R;const B=[a,A,L,g,p,T,u];this.audioTrackController=this.createController(n.audioTrackController,R);const P=n.audioStreamController;P&&R.push(this.audioStreamController=new P(this,u,w)),this.subtitleTrackController=this.createController(n.subtitleTrackController,R);const N=n.subtitleStreamController;N&&R.push(this.subtititleStreamController=new N(this,u,w)),this.createController(n.timelineController,B),w.emeController=this.emeController=this.createController(n.emeController,B),this.cmcdController=this.createController(n.cmcdController,B),this.latencyController=this.createController(Ap,B),this.coreComponents=B,R.push(s);const U=s.onErrorOut;typeof U=="function"&&this.on(D.ERROR,U,s),this.on(D.MANIFEST_LOADED,m.onManifestLoaded,m)}createController(e,r){if(e){const n=new e(this);return r&&r.push(n),n}return null}on(e,r,n=this){this._emitter.on(e,r,n)}once(e,r,n=this){this._emitter.once(e,r,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,r,n=this,o){this._emitter.off(e,r,n,o)}listeners(e){return this._emitter.listeners(e)}emit(e,r,n){return this._emitter.emit(e,r,n)}trigger(e,r){if(this.config.debug)return this.emit(e,e,r);try{return this.emit(e,e,r)}catch(n){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const o=e===D.ERROR;this.trigger(D.ERROR,{type:Ot.OTHER_ERROR,details:ve.INTERNAL_EXCEPTION,fatal:o,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(D.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(r=>r.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(r=>r.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const c=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(D.ERROR,{type:Ot.OTHER_ERROR,details:ve.ATTACH_MEDIA_ERROR,fatal:!0,error:c});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const r="media"in e,n=r?e.media:e,o=r?e:{media:n};this._media=n,this.trigger(D.MEDIA_ATTACHING,o)}detachMedia(){this.logger.log("detachMedia"),this.trigger(D.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(D.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const r=this.media,n=this._url,o=this._url=va.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${o}`),r&&n&&(n!==o||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(r)),this.trigger(D.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,r){this.logger.log(`startLoad(${e+(r?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,r),!(!this.started||!this.networkControllers));n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[Rt.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[Rt.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[Rt.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,r=e?.currentTime;this.detachMedia(),e&&(this.attachMedia(e),r&&this.startLoad(r))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=fg()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const r=!!e;r!==this.config.capLevelToPlayerSize&&(r?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=r)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){sd(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:r}}=this;if(!e)return 0;const n=e.length;for(let o=0;o<n;o++)if(e[o].maxBitrate>=r)return o;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:r,maxHdcpLevel:n}=this;let o;if(r===-1&&e!=null&&e.length?o=e.length-1:o=r,n)for(let c=o;c--;){const i=e[c].attrs["HDCP-LEVEL"];if(i&&i<=n)return c}return o}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var r;return((r=this.audioTrackController)==null?void 0:r.setAudioOption(e))||null}setSubtitleOption(e){var r;return((r=this.subtitleTrackController)==null?void 0:r.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const r=this.audioTrackController;r&&(r.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const r=this.subtitleTrackController;r&&(r.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const r=this.subtitleTrackController;r&&(r.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,r=this.allAudioTracks){const n=Ru(r);return Iu(e,n,navigator.mediaCapabilities)}};Cp.defaultConfig=void 0;export{Cp as H,xp as r};
