<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="YuStream - Streaming para Smart TVs">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#000000">
    <meta name="tizen-version" content="2.3">
    <meta name="application-name" content="YuStream TV">
    <meta name="viewport" content="width=1920, height=1080, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="YuStream TV">
    
    <!-- Smart TV Optimizations -->
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    
    <title>YuStream TV</title>
    
    <link rel="stylesheet" href="css/styles.css">
    
    <link rel="icon" href="assets/icon.png">
    <!-- Build: Tizen Samsung TV - 2025-09-27T06:01:46.394Z -->
</head>
<body>
    <div id="app">
        <!-- Loading Screen -->
        <div id="loading-screen" class="screen active">
            <div class="loading-content">
                <div class="logo">
                    <h1>YuStream TV</h1>
                </div>
                <div class="loading-spinner"></div>
                <p class="loading-text">Carregando...</p>
            </div>
        </div>

        <!-- Login Screen -->
        <div id="login-screen" class="screen">
            <div class="login-container">
                <div class="login-header">
                    <h1>YuStream TV</h1>
                    <p>Fa√ßa login para continuar</p>
                </div>
                
                <form id="login-form" class="login-form">
                    <div class="input-group focusable" tabindex="0">
                        <label for="username">Usu√°rio</label>
                        <input type="text" id="username" name="username" required autocomplete="username">
                    </div>
                    
                    <div class="input-group focusable" tabindex="1">
                        <label for="password">Senha</label>
                        <input type="password" id="password" name="password" required autocomplete="current-password">
                    </div>
                    
                    <button type="submit" class="login-btn focusable" tabindex="2">
                        <span class="btn-text">Entrar</span>
                        <div class="btn-loading hidden">
                            <div class="spinner"></div>
                        </div>
                    </button>
                </form>
                
                <div id="login-error" class="error-message hidden"></div>
                
                <div class="login-footer">
                    <p class="help-text">Use as setas do controle remoto para navegar</p>
                    <p class="help-text">Pressione OK/Enter para selecionar</p>
                </div>
            </div>
        </div>

        <!-- Main Player Screen -->
        <div id="player-screen" class="screen">
            <!-- Status Bar -->
            <div class="status-bar">
                <div class="status-left">
                    <div class="stream-status">
                        <div id="status-indicator" class="status-dot"></div>
                        <span id="status-text">Conectando...</span>
                    </div>
                </div>
                
                <div class="status-right">
                    <span id="user-name" class="user-info"></span>
                    <button id="logout-btn" class="status-btn focusable" tabindex="100">Sair</button>
                </div>
            </div>

            <!-- Status Bar Overlay para Fullscreen -->
            <div id="status-bar-overlay" class="status-bar-overlay">
                <div class="stream-status">
                    <div id="status-indicator-overlay" class="status-dot"></div>
                    <span id="status-text-overlay">Stream Online</span>
                </div>
                
                <div class="status-right">
                    <span id="user-name-overlay" class="user-info"></span>
                    <button id="logout-btn-overlay" class="status-btn focusable" tabindex="101">Sair</button>
                </div>
            </div>

            <!-- Video Player Container -->
            <div id="player-container" class="player-container">
                <video id="video-player" class="video-player" 
                       autoplay 
                       playsinline 
                       webkit-playsinline>
                </video>
                
                <!-- Player Controls Overlay -->
                <div id="controls-overlay" class="controls-overlay">
                    <div class="controls-content">
                        <button id="play-pause-btn" class="control-btn focusable" tabindex="10">
                            <span class="play-icon">‚ñ∂</span>
                            <span class="pause-icon hidden">‚è∏</span>
                        </button>
                        
                        <div class="quality-controls">
                            <button id="quality-btn" class="control-btn focusable" tabindex="11">
                                <span>üé¨</span>
                                <span id="current-quality">Auto</span>
                            </button>
                        </div>
                        
                        <button id="reload-btn" class="control-btn focusable" tabindex="12">
                            <span>üîÑ</span>
                        </button>
                        
                        <button id="fullscreen-btn" class="control-btn focusable" tabindex="13">
                            <span class="fullscreen-enter">‚õ∂</span>
                            <span class="fullscreen-exit hidden">‚õ∑</span>
                        </button>
                    </div>
                    
                    <div class="controls-info">
                        <div id="stream-info" class="stream-info">
                            <span id="connection-type">LLHLS</span>
                            <span id="buffer-status"></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Error/Offline States -->
            <div id="error-overlay" class="overlay hidden">
                <div class="overlay-content">
                    <div class="error-icon">‚ö†Ô∏è</div>
                    <h2 class="overlay-title">Erro na Conex√£o</h2>
                    <p class="overlay-message">N√£o foi poss√≠vel conectar √† stream</p>
                    <button id="retry-btn" class="overlay-btn focusable" tabindex="20">Tentar Novamente</button>
                </div>
            </div>
            
            <div id="offline-overlay" class="overlay hidden">
                <div class="overlay-content">
                    <div class="offline-icon">üì°</div>
                    <h2 class="overlay-title">Stream Offline</h2>
                    <p class="overlay-message">A transmiss√£o n√£o est√° dispon√≠vel no momento</p>
                    <button id="check-btn" class="overlay-btn focusable" tabindex="21">Verificar Novamente</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Scripts -->
    <script src="js/core/auth.js"></script>
    <script src="js/core/streamPlayerAdvanced.js"></script>
    <script src="js/ui/qualitySelectorSimple.js"></script>
    <script src="js/ui/navigation.js"></script>
    <script src="js/ui/interface.js"></script>
    <script src="js/utils/device.js"></script>
    <script src="js/utils/toast.js"></script>
    <script src="js/tizen-platform.js"></script>
    <script src="js/app.js"></script>

    <script>
        // Configura√ß√£o do servidor YuStream para tizen
        window.YUSTREAM_CONFIG = {
            SERVER_URL: 'https://yustream.yurisp.com.br/api',
            STREAM_URL: 'https://yustream.yurisp.com.br:8443',
            ENVIRONMENT: 'production',
            PLATFORM: 'tizen',
            USE_HTTPS: true
        };
        
        console.log('[Config] YuStream configurado para:', window.YUSTREAM_CONFIG);
    </script>
    <script>
        // Tizen initialization
        window.addEventListener('load', function() {
            if (window.tizen) {
                console.log('Tizen platform detected');
                document.body.classList.add('tizen-platform');
                
                // Register key events
                try {
                    tizen.tvinputdevice.registerKey('MediaPlayPause');
                    tizen.tvinputdevice.registerKey('MediaPlay');
                    tizen.tvinputdevice.registerKey('MediaPause');
                    tizen.tvinputdevice.registerKey('MediaStop');
                    tizen.tvinputdevice.registerKey('ColorF0Red');
                    tizen.tvinputdevice.registerKey('ColorF1Green');
                    tizen.tvinputdevice.registerKey('ColorF2Yellow');
                    tizen.tvinputdevice.registerKey('ColorF3Blue');
                } catch (e) {
                    console.warn('Error registering Tizen keys:', e);
                }
            }
        });
    </script>
</body>
</html>
